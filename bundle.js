!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const s=new WeakMap,i=t=>"function"==typeof t&&s.has(t),r=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,o=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},a={},l={},c=`{{lit-${String(Math.random()).slice(2)}}}`,h=`\x3c!--${c}--\x3e`,d=new RegExp(`${c}|${h}`),u="$lit$";class p{constructor(t,e){this.parts=[],this.element=e;const n=[],s=[],i=document.createTreeWalker(e.content,133,null,!1);let r=0,o=-1,a=0;const{strings:l,values:{length:h}}=t;for(;a<h;){const t=i.nextNode();if(null!==t){if(o++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let s=0;for(let t=0;t<n;t++)_(e[t].name,u)&&s++;for(;s-- >0;){const e=l[a],n=y.exec(e)[2],s=n.toLowerCase()+u,i=t.getAttribute(s);t.removeAttribute(s);const r=i.split(d);this.parts.push({type:"attribute",index:o,name:n,strings:r}),a+=r.length-1}}"TEMPLATE"===t.tagName&&(s.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(c)>=0){const s=t.parentNode,i=e.split(d),r=i.length-1;for(let e=0;e<r;e++){let n,r=i[e];if(""===r)n=f();else{const t=y.exec(r);null!==t&&_(t[2],u)&&(r=r.slice(0,t.index)+t[1]+t[2].slice(0,-u.length)+t[3]),n=document.createTextNode(r)}s.insertBefore(n,t),this.parts.push({type:"node",index:++o})}""===i[r]?(s.insertBefore(f(),t),n.push(t)):t.data=i[r],a+=r}}else if(8===t.nodeType)if(t.data===c){const e=t.parentNode;null!==t.previousSibling&&o!==r||(o++,e.insertBefore(f(),t)),r=o,this.parts.push({type:"node",index:o}),null===t.nextSibling?t.data="":(n.push(t),o--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(c,e+1));)this.parts.push({type:"node",index:-1}),a++}}else i.currentNode=s.pop()}for(const t of n)t.parentNode.removeChild(t)}}const _=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},m=t=>-1!==t.index,f=()=>document.createComment(""),y=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class g{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=r?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,s=document.createTreeWalker(t,133,null,!1);let i,o=0,a=0,l=s.nextNode();for(;o<n.length;)if(i=n[o],m(i)){for(;a<i.index;)a++,"TEMPLATE"===l.nodeName&&(e.push(l),s.currentNode=l.content),null===(l=s.nextNode())&&(s.currentNode=e.pop(),l=s.nextNode());if("node"===i.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return r&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const b=` ${c} `;class v{constructor(t,e,n,s){this.strings=t,this.values=e,this.type=n,this.processor=s}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let s=0;s<t;s++){const t=this.strings[s],i=t.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===t.indexOf("--\x3e",i+1);const r=y.exec(t);e+=null===r?t+(n?b:h):t.substr(0,r.index)+r[1]+r[2]+u+r[3]+c}return e+=this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const w=t=>null===t||!("object"==typeof t||"function"==typeof t),S=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class C{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new P(this)}_getValue(){const t=this.strings,e=t.length-1;let n="";for(let s=0;s<e;s++){n+=t[s];const e=this.parts[s];if(void 0!==e){const t=e.value;if(w(t)||!S(t))n+="string"==typeof t?t:String(t);else for(const e of t)n+="string"==typeof e?e:String(e)}}return n+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class P{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===a||w(t)&&t===this.value||(this.value=t,i(t)||(this.committer.dirty=!0))}commit(){for(;i(this.value);){const t=this.value;this.value=a,t(this)}this.value!==a&&this.committer.commit()}}class x{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=f()),t.__insert(this.endNode=f())}insertAfterPart(t){t.__insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}const t=this.__pendingValue;t!==a&&(w(t)?t!==this.value&&this.__commitText(t):t instanceof v?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):S(t)?this.__commitIterable(t):t===l?(this.value=l,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof g&&this.value.template===e)this.value.update(t.values);else{const n=new g(e,t.processor,this.options),s=n._clone();n.update(t.values),this.__commitNode(s),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,s=0;for(const i of t)void 0===(n=e[s])&&(n=new x(this.options),e.push(n),0===s?n.appendIntoPart(this):n.insertAfterPart(e[s-1])),n.setValue(i),n.commit(),s++;s<e.length&&(e.length=s,this.clear(n&&n.endNode))}clear(t=this.startNode){o(this.startNode.parentNode,t.nextSibling,this.endNode)}}class E{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}if(this.__pendingValue===a)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=a}}class T extends C{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new O(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class O extends P{}let N=!1;try{const t={get capture(){return N=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class A{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=(t=>this.handleEvent(t))}setValue(t){this.__pendingValue=t}commit(){for(;i(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a,t(this)}if(this.__pendingValue===a)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),s=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),s&&(this.__options=R(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=a}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const R=t=>t&&(N?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const k=new class{handleAttributeExpressions(t,e,n,s){const i=e[0];return"."===i?new T(t,e.slice(1),n).parts:"@"===i?[new A(t,e.slice(1),s.eventContext)]:"?"===i?[new E(t,e.slice(1),n)]:new C(t,e,n).parts}handleTextExpression(t){return new x(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function I(t){let e=M.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},M.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const s=t.strings.join(c);return void 0===(n=e.keyString.get(s))&&(n=new p(t,t.getTemplateElement()),e.keyString.set(s,n)),e.stringsArray.set(t.strings,n),n}const M=new Map,D=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const z=(t,...e)=>new v(t,e,"html",k),L=133;function F(t,e){const{element:{content:n},parts:s}=t,i=document.createTreeWalker(n,L,null,!1);let r=j(s),o=s[r],a=-1,l=0;const c=[];let h=null;for(;i.nextNode();){a++;const t=i.currentNode;for(t.previousSibling===h&&(h=null),e.has(t)&&(c.push(t),null===h&&(h=t)),null!==h&&l++;void 0!==o&&o.index===a;)o.index=null!==h?-1:o.index-l,o=s[r=j(s,r)]}c.forEach(t=>t.parentNode.removeChild(t))}const H=t=>{let e=11===t.nodeType?0:1;const n=document.createTreeWalker(t,L,null,!1);for(;n.nextNode();)e++;return e},j=(t,e=-1)=>{for(let n=e+1;n<t.length;n++){const e=t[n];if(m(e))return n}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const V=(t,e)=>`${t}--${e}`;let q=!0;void 0===window.ShadyCSS?q=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),q=!1);const B=["html","svg"],$=new Set,U=(t,e,n)=>{$.add(t);const s=n?n.element:document.createElement("template"),i=e.querySelectorAll("style"),{length:r}=i;if(0===r)return void window.ShadyCSS.prepareTemplateStyles(s,t);const o=document.createElement("style");for(let t=0;t<r;t++){const e=i[t];e.parentNode.removeChild(e),o.textContent+=e.textContent}(t=>{B.forEach(e=>{const n=M.get(V(e,t));void 0!==n&&n.keyString.forEach(t=>{const{element:{content:e}}=t,n=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{n.add(t)}),F(t,n)})})})(t);const a=s.content;n?function(t,e,n=null){const{element:{content:s},parts:i}=t;if(null===n||void 0===n)return void s.appendChild(e);const r=document.createTreeWalker(s,L,null,!1);let o=j(i),a=0,l=-1;for(;r.nextNode();)for(l++,r.currentNode===n&&(a=H(e),n.parentNode.insertBefore(e,n));-1!==o&&i[o].index===l;){if(a>0){for(;-1!==o;)i[o].index+=a,o=j(i,o);return}o=j(i,o)}}(n,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(s,t);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(n){a.insertBefore(o,a.firstChild);const t=new Set;t.add(o),F(n,t)}},Y=(t,e)=>t,J=(t,e)=>{if(t in e)for(;e!==Object.prototype;){if(e.hasOwnProperty(t))return Object.getOwnPropertyDescriptor(e,t);e=Object.getPrototypeOf(e)}},W={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},X=(t,e)=>e!==t&&(e==e||t==t),G={attribute:!0,type:String,converter:W,reflect:!1,hasChanged:X},Z=Promise.resolve(!0),K=1,Q=4,tt=8,et=16,nt=32;class st extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=Z,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this._finalize();const t=[];for(const[e,n]of this._classProperties){const s=this._attributeNameForProperty(e,n);void 0!==s&&(this._attributeToPropertyMap.set(s,e),t.push(s))}return t}static _ensureClassProperties(){if(!this.hasOwnProperty(Y("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=G){if(this._ensureClassProperties(),this._classProperties.set(t,e),!e.noAccessor){const e=J(t,this.prototype);let n;if(void 0!==e&&e.set&&e.get){const{set:s,get:i}=e;n={get(){return i.call(this)},set(e){const n=this[t];s.call(this,e),this.requestUpdate(t,n)},configurable:!0,enumerable:!0}}else{const e="symbol"==typeof t?Symbol():`__${t}`;n={get(){return this[e]},set(n){const s=this[t];this[e]=n,this.requestUpdate(t,s)},configurable:!0,enumerable:!0}}Object.defineProperty(this.prototype,t,n)}}static _finalize(){if(this.hasOwnProperty(Y("finalized",this))&&this.finalized)return;const t=Object.getPrototypeOf(this);if("function"==typeof t._finalize&&t._finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(Y("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const n of e)this.createProperty(n,t[n])}}static _attributeNameForProperty(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,n=X){return n(t,e)}static _propertyValueFromAttribute(t,e){const n=e.type,s=e.converter||W,i="function"==typeof s?s:s.fromAttribute;return i?i(t,n):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const n=e.type,s=e.converter;return(s&&s.toAttribute||W.toAttribute)(t,n)}initialize(){this._saveInstanceProperties()}_saveInstanceProperties(){for(const[t]of this.constructor._classProperties)if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}_applyInstanceProperties(){for(const[t,e]of this._instanceProperties)this[t]=e;this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|nt,this._hasConnectedResolver?(this._hasConnectedResolver(),this._hasConnectedResolver=void 0):this.requestUpdate()}disconnectedCallback(){}attributeChangedCallback(t,e,n){e!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,e,n=G){const s=this.constructor,i=s._attributeNameForProperty(t,n);if(void 0!==i){const t=s._propertyValueToAttribute(e,n);if(void 0===t)return;this._updateState=this._updateState|tt,null==t?this.removeAttribute(i):this.setAttribute(i,t),this._updateState=this._updateState&~tt}}_attributeToProperty(t,e){if(this._updateState&tt)return;const n=this.constructor,s=n._attributeToPropertyMap.get(t);if(void 0!==s){const t=n._classProperties.get(s)||G;this._updateState=this._updateState|et,this[s]=n._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~et}}requestUpdate(t,e){let n=!0;if(void 0!==t&&!this._changedProperties.has(t)){const s=this.constructor,i=s._classProperties.get(t)||G;s._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.set(t,e),!0!==i.reflect||this._updateState&et||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):n=!1}return!this._hasRequestedUpdate&&n&&this._enqueueUpdate(),this.updateComplete}async _enqueueUpdate(){let t;this._updateState=this._updateState|Q;const e=this._updatePromise;this._updatePromise=new Promise(e=>t=e),await e,this._hasConnected||await new Promise(t=>this._hasConnectedResolver=t);const n=this.performUpdate();null!=n&&"function"==typeof n.then&&await n,t(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&nt}get _hasRequestedUpdate(){return this._updateState&Q}get hasUpdated(){return this._updateState&K}performUpdate(){if(this._instanceProperties&&this._applyInstanceProperties(),this.shouldUpdate(this._changedProperties)){const t=this._changedProperties;this.update(t),this._markUpdated(),this._updateState&K||(this._updateState=this._updateState|K,this.firstUpdated(t)),this.updated(t)}else this._markUpdated()}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Q}get updateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){if(void 0!==this._reflectingProperties&&this._reflectingProperties.size>0){for(const[t,e]of this._reflectingProperties)this._propertyToAttribute(t,this[t],e);this._reflectingProperties=void 0}}updated(t){}firstUpdated(t){}}st.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const it=(t,e)=>({kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}}),rt=t=>(e,n)=>void 0!==n?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,n):it(t,e),ot=(lt((t,e)=>t.querySelector(e)),lt((t,e)=>t.querySelectorAll(e)),(t,e,n)=>{Object.defineProperty(e,n,t)}),at=(t,e)=>({kind:"method",placement:"prototype",key:e.key,descriptor:t});function lt(t){return e=>(n,s)=>{const i={get(){return t(this.renderRoot,e)},enumerable:!0,configurable:!0};return void 0!==s?ot(i,n,s):at(i,n)}}const ct="adoptedStyleSheets"in Document.prototype;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class ht extends st{static get styles(){return[]}static get _uniqueStyles(){if(void 0===this._styles){const t=this.styles.reduceRight((t,e)=>(t.add(e),t),new Set);this._styles=[],t.forEach(t=>this._styles.unshift(t))}return this._styles}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._uniqueStyles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?ct?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){super.update(t);const e=this.render();e instanceof v&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._uniqueStyles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){}}var dt;ht.finalized=!0,ht.render=((t,e,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const s=n.scopeName,i=D.has(e),r=q&&11===e.nodeType&&!!e.host,a=r&&!$.has(s),l=a?document.createDocumentFragment():e;if(((t,e,n)=>{let s=D.get(e);void 0===s&&(o(e,e.firstChild),D.set(e,s=new x(Object.assign({templateFactory:I},n))),s.appendInto(e)),s.setValue(t),s.commit()})(t,l,Object.assign({templateFactory:(t=>e=>{const n=V(e.type,t);let s=M.get(n);void 0===s&&(s={stringsArray:new WeakMap,keyString:new Map},M.set(n,s));let i=s.stringsArray.get(e.strings);if(void 0!==i)return i;const r=e.strings.join(c);if(void 0===(i=s.keyString.get(r))){const n=e.getTemplateElement();q&&window.ShadyCSS.prepareTemplateDom(n,t),i=new p(e,n),s.keyString.set(r,i)}return s.stringsArray.set(e.strings,i),i})(s)},n)),a){const t=D.get(l);D.delete(l);const n=t.value instanceof g?t.value.template:void 0;U(s,l,n),o(e,e.firstChild),e.appendChild(l),D.set(e,t)}!i&&r&&window.ShadyCSS.styleElement(e.host)}),function(t){t[t.Disconnected=1]="Disconnected",t[t.Connecting=2]="Connecting",t[t.Connected=3]="Connected",t[t.Disconnecting=4]="Disconnecting",t[t.Error=5]="Error"}(dt||(dt={}));var ut=function(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let pt=class extends ht{constructor(){super(),this.name="nameit",this.connectedStr="connect",this.connected=!1,this.buttonColour="blue",this.buttonPointer="pointer",this.bluetoothDevice=null,this.bluetoothGatt=null}bluetoothCallback(t){this.connectedStr=t}render(){return"connected"===this.connectedStr?this.buttonColour="green":"connect"===this.connectedStr?this.buttonColour="blue":"connecting"===this.connectedStr?this.buttonColour="orange":this.buttonColour="red",z`
       <style>
       
        .button {
        background-color: ${this.buttonColour}; //#4CAF50; /* Green */
        border: none;
        color: var(--btn-color, white);
        padding: 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 4px;
        border-radius: 15px 50px 30px;
        cursor: ${this.buttonPointer};
        outline:0;
        }
      </style>

      <button class="button" @click="${this.connect}"> ${this.name} ${this.connectedStr}</button>
  
      <p>
        ${this.name}
      </p>`}async connect(){null!=this.bluetoothGatt&&this.bluetoothGatt.disconnect(this.bluetoothGatt);try{this.bluetoothDevice=await navigator.bluetooth.requestDevice({filters:[{services:["heart_rate","battery_service"]}],optionalServices:["battery_service","heart_rate"]}),this.bluetoothGatt=new class{constructor(t,e,n){this.bluetoothDevice=null,this.connectionStr="disconnected",this.maxretry=0,this.state=dt.Disconnected,this.bluetoothDevice=t,this.state=dt.Disconnected,this.callback=e,this.callbackfunction=n}log(t){console.log(t)}setState(t){let e="old state = "+dt[this.state]+" new state = "+dt[t];switch(this.log(e),this.state=t,this.state){case dt.Disconnected:this.connectionStr="connect";break;case dt.Connecting:this.connectionStr="connecting";break;case dt.Disconnecting:this.connectionStr="disconnecting";break;case dt.Connected:this.connectionStr="connected";break;default:this.connectionStr="error"}this.callbackfunction.call(this.callback,this.connectionStr)}timeout(){this.maxretry<10&&this.state===dt.Connecting&&(this.maxretry++,this.connectit())}connect(){this.state===dt.Disconnected?(this.setState(dt.Connecting),this.maxretry=0,this.connectit()):setTimeout(function(){this.setState(dt.Connecting),this.maxretry=0,this.connectit()},2e3)}disconnect(t){this.bluetoothDevice&&(this.setState(dt.Disconnecting),console.log("Disconnecting from Bluetooth Device..."),this.bluetoothDevice.gatt.connected?this.bluetoothDevice.gatt.disconnect():console.log("> Bluetooth Device is already disconnected"),this.bluetoothDevice=null)}async connectit(){try{await this.bluetoothDevice.gatt.connect(),this.setState(dt.Connected)}catch(t){setTimeout(this.timeout.bind(this),5e3)}}onDisconnected(){switch(console.log("> Bluetooth Device disconnected"),this.state){case dt.Disconnecting:case dt.Error:this.setState(dt.Disconnected);break;default:this.setState(dt.Disconnected),this.connect()}}}(this.bluetoothDevice,this,this.bluetoothCallback),this.bluetoothDevice.addEventListener("gattserverdisconnected",this.bluetoothGatt.onDisconnected.bind(this.bluetoothGatt)),this.bluetoothGatt.connect()}catch(t){console.log("Argh! "+t)}}};ut([rt()],pt.prototype,"name",void 0),ut([rt()],pt.prototype,"connectedStr",void 0),ut([rt()],pt.prototype,"connected",void 0),pt=ut([(t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:n,elements:s}=e;return{kind:n,elements:s,finisher(e){window.customElements.define(t,e)}}})(t,e))("lsg-bluetooth")],pt);customElements.define("vaadin-lumo-styles",class extends HTMLElement{static get version(){return"1.5.0"}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let _t,mt=null,ft=window.HTMLImports&&window.HTMLImports.whenReady||null;function yt(t){requestAnimationFrame(function(){ft?ft(t):(mt||(mt=new Promise(t=>{_t=t}),"complete"===document.readyState?_t():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&_t()})),mt.then(function(){t&&t()}))})}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const gt="__seenByShadyCSS",bt="__shadyCSSCachedStyle";let vt=null,wt=null;class St{constructor(){this.customStyles=[],this.enqueued=!1,yt(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&wt&&(this.enqueued=!0,yt(wt))}addCustomStyle(t){t[gt]||(t[gt]=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[bt])return t[bt];let e;return e=t.getStyle?t.getStyle():t}processStyles(){const t=this.customStyles;for(let e=0;e<t.length;e++){const n=t[e];if(n[bt])continue;const s=this.getStyleForCustomStyle(n);if(s){const t=s.__appliedElement||s;vt&&vt(t),n[bt]=t}}return t}}St.prototype.addCustomStyle=St.prototype.addCustomStyle,St.prototype.getStyleForCustomStyle=St.prototype.getStyleForCustomStyle,St.prototype.processStyles=St.prototype.processStyles,Object.defineProperties(St.prototype,{transformCallback:{get:()=>vt,set(t){vt=t}},validateCallback:{get:()=>wt,set(t){let e=!1;wt||(e=!0),wt=t,e&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Ct=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Pt=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,xt=/@media\s(.*)/;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Et(t,e){for(let n in e)null===n?t.style.removeProperty(n):t.style.setProperty(n,e[n])}function Tt(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return n?n.trim():""}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Ot=!(window.ShadyDOM&&window.ShadyDOM.inUse);let Nt,At;function Rt(t){Nt=(!t||!t.shimcssproperties)&&(Ot||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(At=window.ShadyCSS.cssBuild);const kt=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Nt=window.ShadyCSS.nativeCss:window.ShadyCSS?(Rt(window.ShadyCSS),window.ShadyCSS=void 0):Rt(window.WebComponents&&window.WebComponents.flags);const It=Nt,Mt=new St;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/window.ShadyCSS||(window.ShadyCSS={prepareTemplate(t,e,n){},prepareTemplateDom(t,e){},prepareTemplateStyles(t,e,n){},styleSubtree(t,e){Mt.processStyles(),Et(t,e)},styleElement(t){Mt.processStyles()},styleDocument(t){Mt.processStyles(),Et(document.body,t)},getComputedStyleValue:(t,e)=>Tt(t,e),flushCustomStyles(){},nativeCss:It,nativeShadow:Ot,cssBuild:At,disableRuntime:kt}),window.ShadyCSS.CustomStyleInterface=Mt,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(t,e){return t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Dt,zt,Lt=/(url\()([^)]*)(\))/g,Ft=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function Ht(t,e){if(t&&Ft.test(t))return t;if("//"===t)return t;if(void 0===Dt){Dt=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",Dt="http://a/c%20d"===t.href}catch(t){}}if(e||(e=document.baseURI||window.location.href),Dt)try{return new URL(t,e).href}catch(e){return t}return zt||((zt=document.implementation.createHTMLDocument("temp")).base=zt.createElement("base"),zt.head.appendChild(zt.base),zt.anchor=zt.createElement("a"),zt.body.appendChild(zt.anchor)),zt.base.href=e,zt.anchor.href=t,zt.anchor.href||t}function jt(t,e){return t.replace(Lt,function(t,n,s,i){return n+"'"+Ht(s.replace(/["']/g,""),e)+"'"+i})}function Vt(t){return t.substring(0,t.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const qt=!window.ShadyDOM;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),window.customElements.polyfillWrapFlushCallback;let Bt=Vt(document.baseURI||window.location.href);let $t=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0;let Ut=!1;let Yt=!1;let Jt=!1;let Wt=!1;let Xt=!1;let Gt=!0;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Zt={},Kt={};function Qt(t,e){Zt[t]=Kt[t.toLowerCase()]=e}function te(t){return Zt[t]||Kt[t.toLowerCase()]}class ee extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let n=te(t);return n&&e?n.querySelector(e):n}return null}attributeChangedCallback(t,e,n,s){e!==n&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=Ht(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=Vt(e)}return this.__assetpath}register(t){if(t=t||this.id){if(Yt&&void 0!==te(t))throw Qt(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,Qt(t,this),function(t){t.querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}(this)}}}ee.prototype.modules=Zt,customElements.define("dom-module",ee);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const ne="link[rel=import][type~=css]",se="include",ie="shady-unscoped";function re(t){return ee.import(t)}function oe(t){const e=jt((t.body?t.body:t).textContent,t.baseURI),n=document.createElement("style");return n.textContent=e,n}function ae(t){const e=t.trim().split(/\s+/),n=[];for(let t=0;t<e.length;t++)n.push(...le(e[t]));return n}function le(t){const e=re(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(void 0===e._styles){const t=[];t.push(...he(e));const n=e.querySelector("template");n&&t.push(...ce(n,e.assetpath)),e._styles=t}return e._styles}function ce(t,e){if(!t._styles){const n=[],s=t.content.querySelectorAll("style");for(let t=0;t<s.length;t++){let i=s[t],r=i.getAttribute(se);r&&n.push(...ae(r).filter(function(t,e,n){return n.indexOf(t)===e})),e&&(i.textContent=jt(i.textContent,e)),n.push(i)}t._styles=n}return t._styles}function he(t){const e=[],n=t.querySelectorAll(ne);for(let t=0;t<n.length;t++){let s=n[t];if(s.import){const t=s.import,n=s.hasAttribute(ie);if(n&&!t._unscopedStyle){const e=oe(t);e.setAttribute(ie,""),t._unscopedStyle=e}else t._style||(t._style=oe(t));e.push(n?t._unscopedStyle:t._style)}}return e}function de(t){let e=re(t);if(e&&void 0===e._cssText){let t=ue(e),n=e.querySelector("template");n&&(t+=function(t,e){let n="";const s=ce(t,e);for(let t=0;t<s.length;t++){let e=s[t];e.parentNode&&e.parentNode.removeChild(e),n+=e.textContent}return n}(n,e.assetpath)),e._cssText=t||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}function ue(t){let e="",n=he(t);for(let t=0;t<n.length;t++)e+=n[t].textContent;return e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const pe="include",_e=window.ShadyCSS.CustomStyleInterface;window.customElements.define("custom-style",class extends HTMLElement{constructor(){super(),this._style=null,_e.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const e=t.getAttribute(pe);return e&&(t.removeAttribute(pe),t.textContent=function(t){let e=t.trim().split(/\s+/),n="";for(let t=0;t<e.length;t++)n+=de(e[t]);return n}(e)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}});const me=document.createElement("template");me.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(me.content);const fe=document.createElement("template");fe.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(fe.content);const ye=document.createElement("template");ye.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(ye.content);const ge=document.createElement("template");ge.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(ge.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class be{constructor(t){this.value=t.toString()}toString(){return this.value}}function ve(t){if(t instanceof be)return t.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${t}`)}const we=function(t,...e){const n=document.createElement("template");return n.innerHTML=e.reduce((e,n,s)=>e+function(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof be)return ve(t);throw new Error(`non-template value passed to Polymer's html function: ${t}`)}(n)+t[s+1],t[0]),n},Se=we`<dom-module id="lumo-split-layout" theme-for="vaadin-split-layout">
  <template>
    <style>
      [part="splitter"] {
        min-width: var(--lumo-space-s);
        min-height: var(--lumo-space-s);
        background-color: var(--lumo-contrast-5pct);
        transition: 0.1s background-color;
      }

      [part="handle"] {
        display: flex;
        align-items: center;
        justify-content: center;
        width: var(--lumo-size-m);
        height: var(--lumo-size-m);
      }

      [part="handle"]::after {
        content: "";
        display: block;
        width: 4px;
        height: 100%;
        max-width: 100%;
        max-height: 100%;
        border-radius: var(--lumo-border-radius);
        background-color: var(--lumo-contrast-30pct);
        transition: 0.1s opacity, 0.1s background-color;
      }

      :host([orientation="vertical"]) [part="handle"]::after {
        width: 100%;
        height: 4px;
      }

      /* Hover style */

      [part="splitter"]:hover [part="handle"]::after {
        background-color: var(--lumo-contrast-40pct);
      }

      /* Disable hover for touch devices */
      @media (pointer: coarse) {
        [part="splitter"]:hover [part="handle"]::after {
          background-color: var(--lumo-contrast-30pct);
        }
      }

      /* Active style */

      [part="splitter"]:active [part="handle"]::after {
        background-color: var(--lumo-contrast-50pct);
      }

      /* Small/minimal */

      :host([theme~="small"]) > [part="splitter"] {
        border-left: 1px solid var(--lumo-contrast-10pct);
        border-top: 1px solid var(--lumo-contrast-10pct);
      }

      :host([theme~="small"]) > [part="splitter"],
      :host([theme~="minimal"]) > [part="splitter"] {
        min-width: 0;
        min-height: 0;
        background-color: transparent;
      }

      :host([theme~="small"]) > [part="splitter"]::after,
      :host([theme~="minimal"]) > [part="splitter"]::after {
        content: "";
        position: absolute;
        top: -4px;
        right: -4px;
        bottom: -4px;
        left: -4px;
      }

      :host([theme~="small"]) > [part="splitter"] > [part="handle"]::after,
      :host([theme~="minimal"]) > [part="splitter"] > [part="handle"]::after {
        opacity: 0;
      }

      :host([theme~="small"]) > [part="splitter"]:hover > [part="handle"]::after,
      :host([theme~="small"]) > [part="splitter"]:active > [part="handle"]::after,
      :host([theme~="minimal"]) > [part="splitter"]:hover > [part="handle"]::after,
      :host([theme~="minimal"]) > [part="splitter"]:active > [part="handle"]::after {
        opacity: 1;
      }
    </style>
  </template>
</dom-module>`;document.head.appendChild(Se.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Ce=0;function Pe(){}Pe.prototype.__mixinApplications,Pe.prototype.__mixinSet;const xe=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let n=Ce++;return function(s){let i=s.__mixinSet;if(i&&i[n])return s;let r=e,o=r.get(s);o||(o=t(s),r.set(s,o));let a=Object.create(o.__mixinSet||i||null);return a[n]=!0,o.__mixinSet=a,o}},Ee=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Te(t){return t.indexOf(".")>=0}function Oe(t){let e=t.indexOf(".");return-1===e?t:t.slice(0,e)}function Ne(t,e){return 0===t.indexOf(e+".")}function Ae(t,e){return 0===e.indexOf(t+".")}function Re(t,e,n){return e+n.slice(t.length)}function ke(t){if(Array.isArray(t)){let e=[];for(let n=0;n<t.length;n++){let s=t[n].toString().split(".");for(let t=0;t<s.length;t++)e.push(s[t])}return e.join(".")}return t}function Ie(t){return Array.isArray(t)?ke(t).split("."):t.toString().split(".")}function Me(t,e,n){let s=t,i=Ie(e);for(let t=0;t<i.length;t++){if(!s)return;s=s[i[t]]}return n&&(n.path=i.join(".")),s}function De(t,e,n){let s=t,i=Ie(e),r=i[i.length-1];if(i.length>1){for(let t=0;t<i.length-1;t++){if(!(s=s[i[t]]))return}s[r]=n}else s[e]=n;return i.join(".")}const ze={},Le=/-[a-z]/g,Fe=/([A-Z])/g;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function He(t){return ze[t]||(ze[t]=t.indexOf("-")<0?t:t.replace(Le,t=>t[1].toUpperCase()))}function je(t){return ze[t]||(ze[t]=t.replace(Fe,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ve=0,qe=0,Be=[],$e=0,Ue=document.createTextNode("");new window.MutationObserver(function(){const t=Be.length;for(let e=0;e<t;e++){let t=Be[e];if(t)try{t()}catch(t){setTimeout(()=>{throw t})}}Be.splice(0,t),qe+=t}).observe(Ue,{characterData:!0});const Ye={after:t=>({run:e=>window.setTimeout(e,t),cancel(t){window.clearTimeout(t)}}),run:(t,e)=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}},Je={run:t=>window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,16),cancel(t){window.cancelIdleCallback?window.cancelIdleCallback(t):window.clearTimeout(t)}},We={run:t=>(Ue.textContent=$e++,Be.push(t),Ve++),cancel(t){const e=t-qe;if(e>=0){if(!Be[e])throw new Error("invalid async handle: "+t);Be[e]=null}}},Xe=We,Ge=xe(t=>{return class extends t{static createProperties(t){const e=this.prototype;for(let n in t)n in e||e._createPropertyAccessor(n)}static attributeNameForProperty(t){return t.toLowerCase()}static typeForProperty(t){}_createPropertyAccessor(t,e){this._addPropertyToAttributeMap(t),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[t]||(this.__dataHasAccessor[t]=!0,this._definePropertyAccessor(t,e))}_addPropertyToAttributeMap(t){if(this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[t]){const e=this.constructor.attributeNameForProperty(t);this.__dataAttributes[e]=t}}_definePropertyAccessor(t,e){Object.defineProperty(this,t,{get(){return this._getProperty(t)},set:e?function(){}:function(e){this._setProperty(t,e)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let t in this.__dataHasAccessor)this.hasOwnProperty(t)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[t]=this[t],delete this[t])}_initializeInstanceProperties(t){Object.assign(this,t)}_setProperty(t,e){this._setPendingProperty(t,e)&&this._invalidateProperties()}_getProperty(t){return this.__data[t]}_setPendingProperty(t,e,n){let s=this.__data[t],i=this._shouldPropertyChange(t,e,s);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||t in this.__dataOld||(this.__dataOld[t]=s),this.__data[t]=e,this.__dataPending[t]=e),i}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,Xe.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const t=this.__data,e=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(t,e,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(t,e,n))}_shouldPropertiesChange(t,e,n){return Boolean(e)}_propertiesChanged(t,e,n){}_shouldPropertyChange(t,e,n){return n!==e&&(n==n||e==e)}attributeChangedCallback(t,e,n,s){e!==n&&this._attributeToProperty(t,n),super.attributeChangedCallback&&super.attributeChangedCallback(t,e,n,s)}_attributeToProperty(t,e,n){if(!this.__serializing){const s=this.__dataAttributes,i=s&&s[t]||t;this[i]=this._deserializeValue(e,n||this.constructor.typeForProperty(i))}}_propertyToAttribute(t,e,n){this.__serializing=!0,n=arguments.length<3?this[t]:n,this._valueToNodeAttribute(this,n,e||this.constructor.attributeNameForProperty(t)),this.__serializing=!1}_valueToNodeAttribute(t,e,n){const s=this._serializeValue(e);"class"!==n&&"name"!==n&&"slot"!==n||(t=Ee(t)),void 0===s?t.removeAttribute(n):t.setAttribute(n,s)}_serializeValue(t){switch(typeof t){case"boolean":return t?"":void 0;default:return null!=t?t.toString():void 0}}_deserializeValue(t,e){switch(e){case Boolean:return null!==t;case Number:return Number(t);default:return t}}}}),Ze={};let Ke=HTMLElement.prototype;for(;Ke;){let t=Object.getOwnPropertyNames(Ke);for(let e=0;e<t.length;e++)Ze[t[e]]=!0;Ke=Object.getPrototypeOf(Ke)}const Qe=xe(t=>{const e=Ge(t);return class extends e{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let e=0;e<t.length;e++)this.prototype._createPropertyAccessor(He(t[e]))}static attributeNameForProperty(t){return je(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(t){for(let e in t)this._setProperty(e,t[e])}_ensureAttribute(t,e){const n=this;n.hasAttribute(t)||this._valueToNodeAttribute(n,e,t)}_serializeValue(t){switch(typeof t){case"object":if(t instanceof Date)return t.toString();if(t)try{return JSON.stringify(t)}catch(t){return""}default:return super._serializeValue(t)}}_deserializeValue(t,e){let n;switch(e){case Object:try{n=JSON.parse(t)}catch(e){n=t}break;case Array:try{n=JSON.parse(t)}catch(e){n=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${t}`)}break;case Date:n=isNaN(t)?String(t):Number(t),n=new Date(n);break;default:n=super._deserializeValue(t,e)}return n}_definePropertyAccessor(t,e){!function(t,e){if(!Ze[e]){let n=t[e];void 0!==n&&(t.__data?t._setPendingProperty(e,n):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=n))}}(this,t),super._definePropertyAccessor(t,e)}_hasAccessor(t){return this.__dataHasAccessor&&this.__dataHasAccessor[t]}_isPropertyPending(t){return Boolean(this.__dataPending&&t in this.__dataPending)}}}),tn={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let en=!1,nn=!1;function sn(t){(function(){if(!en){en=!0;const t=document.createElement("textarea");t.placeholder="a",nn=t.placeholder===t.textContent}return nn})()&&"textarea"===t.localName&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}function rn(t){let e=t.getAttribute("is");if(e&&tn[e]){let n=t;for(n.removeAttribute("is"),t=n.ownerDocument.createElement(e),n.parentNode.replaceChild(t,n),t.appendChild(n);n.attributes.length;)t.setAttribute(n.attributes[0].name,n.attributes[0].value),n.removeAttribute(n.attributes[0].name)}return t}function on(t,e){let n=e.parentInfo&&on(t,e.parentInfo);if(!n)return t;for(let t=n.firstChild,s=0;t;t=t.nextSibling)if(e.parentIndex===s++)return t}function an(t,e,n,s){s.id&&(e[s.id]=n)}function ln(t,e,n){if(n.events&&n.events.length)for(let s,i=0,r=n.events;i<r.length&&(s=r[i]);i++)t._addMethodEventListenerToNode(e,s.name,s.value,t)}function cn(t,e,n){n.templateInfo&&(e._templateInfo=n.templateInfo)}const hn=xe(t=>{return class extends t{static _parseTemplate(t,e){if(!t._templateInfo){let n=t._templateInfo={};n.nodeInfoList=[],n.stripWhiteSpace=e&&e.stripWhiteSpace||t.hasAttribute("strip-whitespace"),this._parseTemplateContent(t,n,{parent:null})}return t._templateInfo}static _parseTemplateContent(t,e,n){return this._parseTemplateNode(t.content,e,n)}static _parseTemplateNode(t,e,n){let s=!1,i=t;return"template"!=i.localName||i.hasAttribute("preserve-content")?"slot"===i.localName&&(e.hasInsertionPoint=!0):s=this._parseTemplateNestedTemplate(i,e,n)||s,sn(i),i.firstChild&&this._parseTemplateChildNodes(i,e,n),i.hasAttributes&&i.hasAttributes()&&(s=this._parseTemplateNodeAttributes(i,e,n)||s),s}static _parseTemplateChildNodes(t,e,n){if("script"!==t.localName&&"style"!==t.localName)for(let s,i=t.firstChild,r=0;i;i=s){if("template"==i.localName&&(i=rn(i)),s=i.nextSibling,i.nodeType===Node.TEXT_NODE){let n=s;for(;n&&n.nodeType===Node.TEXT_NODE;)i.textContent+=n.textContent,s=n.nextSibling,t.removeChild(n),n=s;if(e.stripWhiteSpace&&!i.textContent.trim()){t.removeChild(i);continue}}let o={parentIndex:r,parentInfo:n};this._parseTemplateNode(i,e,o)&&(o.infoIndex=e.nodeInfoList.push(o)-1),i.parentNode&&r++}}static _parseTemplateNestedTemplate(t,e,n){let s=t,i=this._parseTemplate(s,e);return(i.content=s.content.ownerDocument.createDocumentFragment()).appendChild(s.content),n.templateInfo=i,!0}static _parseTemplateNodeAttributes(t,e,n){let s=!1,i=Array.from(t.attributes);for(let r,o=i.length-1;r=i[o];o--)s=this._parseTemplateNodeAttribute(t,e,n,r.name,r.value)||s;return s}static _parseTemplateNodeAttribute(t,e,n,s,i){return"on-"===s.slice(0,3)?(t.removeAttribute(s),n.events=n.events||[],n.events.push({name:s.slice(3),value:i}),!0):"id"===s&&(n.id=i,!0)}static _contentForTemplate(t){let e=t._templateInfo;return e&&e.content||t.content}_stampTemplate(t){t&&!t.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t);let e=this.constructor._parseTemplate(t),n=e.nodeInfoList,s=e.content||t.content,i=document.importNode(s,!0);i.__noInsertionPoint=!e.hasInsertionPoint;let r=i.nodeList=new Array(n.length);i.$={};for(let t,e=0,s=n.length;e<s&&(t=n[e]);e++){let n=r[e]=on(i,t);an(0,i.$,n,t),cn(0,n,t),ln(this,n,t)}return i=i}_addMethodEventListenerToNode(t,e,n,s){let i=function(t,e,n){return t=t._methodHost||t,function(e){t[n]?t[n](e,e.detail):console.warn("listener method `"+n+"` not defined")}}(s=s||t,0,n);return this._addEventListenerToNode(t,e,i),i}_addEventListenerToNode(t,e,n){t.addEventListener(e,n)}_removeEventListenerFromNode(t,e,n){t.removeEventListener(e,n)}}});
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let dn=0;const un={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},pn=/[A-Z]/;function _n(t,e){let n=t[e];if(n){if(!t.hasOwnProperty(e)){n=t[e]=Object.create(t[e]);for(let t in n){let e=n[t],s=n[t]=Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t]}}}else n=t[e]={};return n}function mn(t,e,n,s,i,r){if(e){let o=!1,a=dn++;for(let l in n)fn(t,e,a,l,n,s,i,r)&&(o=!0);return o}return!1}function fn(t,e,n,s,i,r,o,a){let l=!1,c=e[o?Oe(s):s];if(c)for(let e,h=0,d=c.length;h<d&&(e=c[h]);h++)e.info&&e.info.lastRun===n||o&&!yn(s,e.trigger)||(e.info&&(e.info.lastRun=n),e.fn(t,s,i,r,e.info,o,a),l=!0);return l}function yn(t,e){if(e){let n=e.name;return n==t||!(!e.structured||!Ne(n,t))||!(!e.wildcard||!Ae(n,t))}return!0}function gn(t,e,n,s,i){let r="string"==typeof i.method?t[i.method]:i.method,o=i.property;r?r.call(t,t.__data[o],s[o]):i.dynamicFn||console.warn("observer method `"+i.method+"` not defined")}function bn(t,e,n){let s=Oe(e);if(s!==e){return vn(t,je(s)+"-changed",n[e],e),!0}return!1}function vn(t,e,n,s){let i={value:n,queueProperty:!0};s&&(i.path=s),Ee(t).dispatchEvent(new CustomEvent(e,{detail:i}))}function wn(t,e,n,s,i,r){let o=(r?Oe(e):e)!=e?e:null,a=o?Me(t,o):t.__data[e];o&&void 0===a&&(a=n[e]),vn(t,i.eventName,a,o)}function Sn(t,e,n,s,i){let r=t.__data[e];$t&&(r=$t(r,i.attrName,"attribute",t)),t._propertyToAttribute(e,i.attrName,r)}function Cn(t,e,n,s,i){let r=An(t,e,n,s,i),o=i.methodInfo;t.__dataHasAccessor&&t.__dataHasAccessor[o]?t._setPendingProperty(o,r,!0):t[o]=r}function Pn(t,e,n,s,i,r,o){n.bindings=n.bindings||[];let a={kind:s,target:i,parts:r,literal:o,isCompound:1!==r.length};if(n.bindings.push(a),function(t){return Boolean(t.target)&&"attribute"!=t.kind&&"text"!=t.kind&&!t.isCompound&&"{"===t.parts[0].mode}(a)){let{event:t,negate:e}=a.parts[0];a.listenerEvent=t||je(i)+"-changed",a.listenerNegate=e}let l=e.nodeInfoList.length;for(let n=0;n<a.parts.length;n++){let s=a.parts[n];s.compoundIndex=n,xn(t,e,a,s,l)}}function xn(t,e,n,s,i){if(!s.literal)if("attribute"===n.kind&&"-"===n.target[0])console.warn("Cannot set attribute "+n.target+' because "-" is not a valid attribute starting character');else{let r=s.dependencies,o={index:i,binding:n,part:s,evaluator:t};for(let n=0;n<r.length;n++){let s=r[n];"string"==typeof s&&((s=Dn(s)).wildcard=!0),t._addTemplatePropertyEffect(e,s.rootProperty,{fn:En,info:o,trigger:s})}}}function En(t,e,n,s,i,r,o){let a=o[i.index],l=i.binding,c=i.part;if(r&&c.source&&e.length>c.source.length&&"property"==l.kind&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let s=n[e];e=Re(c.source,l.target,e),a._setPendingPropertyOrPath(e,s,!1,!0)&&t._enqueueClient(a)}else{!function(t,e,n,s,i){i=function(t,e,n,s){if(n.isCompound){let i=t.__dataCompoundStorage[n.target];i[s.compoundIndex]=e,e=i.join("")}return"attribute"!==n.kind&&("textContent"!==n.target&&("value"!==n.target||"input"!==t.localName&&"textarea"!==t.localName)||(e=void 0==e?"":e)),e}(e,i,n,s),$t&&(i=$t(i,n.target,n.kind,e));if("attribute"==n.kind)t._valueToNodeAttribute(e,i,n.target);else{let s=n.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[s]?e[un.READ_ONLY]&&e[un.READ_ONLY][s]||e._setPendingProperty(s,i)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,s,i)}}(t,a,l,c,i.evaluator._evaluateBinding(t,c,e,n,s,r))}}function Tn(t,e){if(e.isCompound){let n=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),s=e.parts,i=new Array(s.length);for(let t=0;t<s.length;t++)i[t]=s[t].literal;let r=e.target;n[r]=i,e.literal&&"property"==e.kind&&("className"===r&&(t=Ee(t)),t[r]=e.literal)}}function On(t,e,n){if(n.listenerEvent){let s=n.parts[0];t.addEventListener(n.listenerEvent,function(t){!function(t,e,n,s,i){let r,o=t.detail,a=o&&o.path;a?(s=Re(n,s,a),r=o&&o.value):r=t.currentTarget[n],r=i?!r:r,e[un.READ_ONLY]&&e[un.READ_ONLY][s]||!e._setPendingPropertyOrPath(s,r,!0,Boolean(a))||o&&o.queueProperty||e._invalidateProperties()}(t,e,n.target,s.source,s.negate)})}}function Nn(t,e,n,s,i,r){r=e.static||r&&("object"!=typeof r||r[e.methodName]);let o={methodName:e.methodName,args:e.args,methodInfo:i,dynamicFn:r};for(let i,r=0;r<e.args.length&&(i=e.args[r]);r++)i.literal||t._addPropertyEffect(i.rootProperty,n,{fn:s,info:o,trigger:i});r&&t._addPropertyEffect(e.methodName,n,{fn:s,info:o})}function An(t,e,n,s,i){let r=t._methodHost||t,o=r[i.methodName];if(o){let s=t._marshalArgs(i.args,e,n);return o.apply(r,s)}i.dynamicFn||console.warn("method `"+i.methodName+"` not defined")}const Rn=[],kn=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function In(t){let e="";for(let n=0;n<t.length;n++){e+=t[n].literal||""}return e}function Mn(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let t={methodName:e[1],static:!0,args:Rn};if(e[2].trim()){return function(t,e){return e.args=t.map(function(t){let n=Dn(t);return n.literal||(e.static=!1),n},this),e}(e[2].replace(/\\,/g,"&comma;").split(","),t)}return t}return null}function Dn(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),n={name:e,value:"",literal:!1},s=e[0];switch("-"===s&&(s=e[1]),s>="0"&&s<="9"&&(s="#"),s){case"'":case'"':n.value=e.slice(1,-1),n.literal=!0;break;case"#":n.value=Number(e),n.literal=!0}return n.literal||(n.rootProperty=Oe(e),n.structured=Te(e),n.structured&&(n.wildcard=".*"==e.slice(-2),n.wildcard&&(n.name=e.slice(0,-2)))),n}function zn(t,e,n){let s=Me(t,n);return void 0===s&&(s=e[n]),s}function Ln(t,e,n,s){t.notifyPath(n+".splices",{indexSplices:s}),t.notifyPath(n+".length",e.length)}function Fn(t,e,n,s,i,r){Ln(t,e,n,[{index:s,addedCount:i,removed:r,object:e,type:"splice"}])}const Hn=xe(t=>{const e=hn(Qe(t));return class extends e{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataCounter=0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return un}_initializeProperties(){super._initializeProperties(),jn.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(t){this.__data=Object.create(t),this.__dataPending=Object.create(t),this.__dataOld={}}_initializeInstanceProperties(t){let e=this[un.READ_ONLY];for(let n in t)e&&e[n]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[n]=this.__dataPending[n]=t[n])}_addPropertyEffect(t,e,n){this._createPropertyAccessor(t,e==un.READ_ONLY);let s=_n(this,e)[t];s||(s=this[e][t]=[]),s.push(n)}_removePropertyEffect(t,e,n){let s=_n(this,e)[t],i=s.indexOf(n);i>=0&&s.splice(i,1)}_hasPropertyEffect(t,e){let n=this[e];return Boolean(n&&n[t])}_hasReadOnlyEffect(t){return this._hasPropertyEffect(t,un.READ_ONLY)}_hasNotifyEffect(t){return this._hasPropertyEffect(t,un.NOTIFY)}_hasReflectEffect(t){return this._hasPropertyEffect(t,un.REFLECT)}_hasComputedEffect(t){return this._hasPropertyEffect(t,un.COMPUTE)}_setPendingPropertyOrPath(t,e,n,s){if(s||Oe(Array.isArray(t)?t[0]:t)!==t){if(!s){let n=Me(this,t);if(!(t=De(this,t,e))||!super._shouldPropertyChange(t,e,n))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(t,e,n))return function(t,e,n){let s=t.__dataLinkedPaths;if(s){let i;for(let r in s){let o=s[r];Ae(r,e)?(i=Re(r,o,e),t._setPendingPropertyOrPath(i,n,!0,!0)):Ae(o,e)&&(i=Re(o,r,e),t._setPendingPropertyOrPath(i,n,!0,!0))}}}(this,t,e),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[t])return this._setPendingProperty(t,e,n);this[t]=e}return!1}_setUnmanagedPropertyToNode(t,e,n){n===t[e]&&"object"!=typeof n||("className"===e&&(t=Ee(t)),t[e]=n)}_setPendingProperty(t,e,n){let s=this.__dataHasPaths&&Te(t),i=s?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(t,e,i[t])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),t in this.__dataOld||(this.__dataOld[t]=this.__data[t]),s?this.__dataTemp[t]=e:this.__data[t]=e,this.__dataPending[t]=e,(s||this[un.NOTIFY]&&this[un.NOTIFY][t])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[t]=n),!0)}_setProperty(t,e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(t){this.__dataPendingClients=this.__dataPendingClients||[],t!==this&&this.__dataPendingClients.push(t)}_flushProperties(){this.__dataCounter++,super._flushProperties(),this.__dataCounter--}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let t=this.__dataPendingClients;if(t){this.__dataPendingClients=null;for(let e=0;e<t.length;e++){let n=t[e];n.__dataEnabled?n.__dataPending&&n._flushProperties():n._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(t,e){for(let n in t)!e&&this[un.READ_ONLY]&&this[un.READ_ONLY][n]||this._setPendingPropertyOrPath(n,t[n],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(t,e,n){let s=this.__dataHasPaths;this.__dataHasPaths=!1,function(t,e,n,s){let i=t[un.COMPUTE];if(i){let r=e;for(;mn(t,i,r,n,s);)Object.assign(n,t.__dataOld),Object.assign(e,t.__dataPending),r=t.__dataPending,t.__dataPending=null}}(this,e,n,s);let i=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(e,n,s),this._flushClients(),mn(this,this[un.REFLECT],e,n,s),mn(this,this[un.OBSERVE],e,n,s),i&&function(t,e,n,s,i){let r,o,a=t[un.NOTIFY],l=dn++;for(let o in e)e[o]&&(a&&fn(t,a,l,o,n,s,i)?r=!0:i&&bn(t,o,n)&&(r=!0));r&&(o=t.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}(this,i,e,n,s),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(t,e,n){this[un.PROPAGATE]&&mn(this,this[un.PROPAGATE],t,e,n);let s=this.__templateInfo;for(;s;)mn(this,s.propertyEffects,t,e,n,s.nodeList),s=s.nextTemplateInfo}linkPaths(t,e){t=ke(t),e=ke(e),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[t]=e}unlinkPaths(t){t=ke(t),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[t]}notifySplices(t,e){let n={path:""};Ln(this,Me(this,t,n),n.path,e)}get(t,e){return Me(e||this,t)}set(t,e,n){n?De(n,t,e):this[un.READ_ONLY]&&this[un.READ_ONLY][t]||this._setPendingPropertyOrPath(t,e,!0)&&this._invalidateProperties()}push(t,...e){let n={path:""},s=Me(this,t,n),i=s.length,r=s.push(...e);return e.length&&Fn(this,s,n.path,i,e.length,[]),r}pop(t){let e={path:""},n=Me(this,t,e),s=Boolean(n.length),i=n.pop();return s&&Fn(this,n,e.path,n.length,0,[i]),i}splice(t,e,n,...s){let i,r={path:""},o=Me(this,t,r);return e<0?e=o.length-Math.floor(-e):e&&(e=Math.floor(e)),i=2===arguments.length?o.splice(e):o.splice(e,n,...s),(s.length||i.length)&&Fn(this,o,r.path,e,s.length,i),i}shift(t){let e={path:""},n=Me(this,t,e),s=Boolean(n.length),i=n.shift();return s&&Fn(this,n,e.path,0,0,[i]),i}unshift(t,...e){let n={path:""},s=Me(this,t,n),i=s.unshift(...e);return e.length&&Fn(this,s,n.path,0,e.length,[]),i}notifyPath(t,e){let n;if(1==arguments.length){let s={path:""};e=Me(this,t,s),n=s.path}else n=Array.isArray(t)?ke(t):t;this._setPendingPropertyOrPath(n,e,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(t,e){this._addPropertyEffect(t,un.READ_ONLY),e&&(this["_set"+function(t){return t[0].toUpperCase()+t.substring(1)}(t)]=function(e){this._setProperty(t,e)})}_createPropertyObserver(t,e,n){let s={property:t,method:e,dynamicFn:Boolean(n)};this._addPropertyEffect(t,un.OBSERVE,{fn:gn,info:s,trigger:{name:t}}),n&&this._addPropertyEffect(e,un.OBSERVE,{fn:gn,info:s,trigger:{name:e}})}_createMethodObserver(t,e){let n=Mn(t);if(!n)throw new Error("Malformed observer expression '"+t+"'");Nn(this,n,un.OBSERVE,An,null,e)}_createNotifyingProperty(t){this._addPropertyEffect(t,un.NOTIFY,{fn:wn,info:{eventName:je(t)+"-changed",property:t}})}_createReflectedProperty(t){let e=this.constructor.attributeNameForProperty(t);"-"===e[0]?console.warn("Property "+t+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(t,un.REFLECT,{fn:Sn,info:{attrName:e}})}_createComputedProperty(t,e,n){let s=Mn(e);if(!s)throw new Error("Malformed computed expression '"+e+"'");Nn(this,s,un.COMPUTE,Cn,t,n)}_marshalArgs(t,e,n){const s=this.__data,i=[];for(let r=0,o=t.length;r<o;r++){let{name:o,structured:a,wildcard:l,value:c,literal:h}=t[r];if(!h)if(l){const t=Ae(o,e),i=zn(s,n,t?e:o);c={path:t?e:o,value:i,base:t?Me(s,o):i}}else c=a?zn(s,n,o):s[o];i[r]=c}return i}static addPropertyEffect(t,e,n){this.prototype._addPropertyEffect(t,e,n)}static createPropertyObserver(t,e,n){this.prototype._createPropertyObserver(t,e,n)}static createMethodObserver(t,e){this.prototype._createMethodObserver(t,e)}static createNotifyingProperty(t){this.prototype._createNotifyingProperty(t)}static createReadOnlyProperty(t,e){this.prototype._createReadOnlyProperty(t,e)}static createReflectedProperty(t){this.prototype._createReflectedProperty(t)}static createComputedProperty(t,e,n){this.prototype._createComputedProperty(t,e,n)}static bindTemplate(t){return this.prototype._bindTemplate(t)}_bindTemplate(t,e){let n=this.constructor._parseTemplate(t),s=this.__templateInfo==n;if(!s)for(let t in n.propertyEffects)this._createPropertyAccessor(t);if(e&&((n=Object.create(n)).wasPreBound=s,!s&&this.__templateInfo)){let t=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=t.nextTemplateInfo=n,n.previousTemplateInfo=t,n}return this.__templateInfo=n}static _addTemplatePropertyEffect(t,e,n){(t.hostProps=t.hostProps||{})[e]=!0;let s=t.propertyEffects=t.propertyEffects||{};(s[e]=s[e]||[]).push(n)}_stampTemplate(t){jn.beginHosting(this);let e=super._stampTemplate(t);jn.endHosting(this);let n=this._bindTemplate(t,!0);if(n.nodeList=e.nodeList,!n.wasPreBound){let t=n.childNodes=[];for(let n=e.firstChild;n;n=n.nextSibling)t.push(n)}return e.templateInfo=n,function(t,e){let{nodeList:n,nodeInfoList:s}=e;if(s.length)for(let e=0;e<s.length;e++){let i=s[e],r=n[e],o=i.bindings;if(o)for(let e=0;e<o.length;e++){let n=o[e];Tn(r,n),On(r,t,n)}r.__dataHost=t}}(this,n),this.__dataReady&&mn(this,n.propertyEffects,this.__data,null,!1,n.nodeList),e}_removeBoundDom(t){let e=t.templateInfo;e.previousTemplateInfo&&(e.previousTemplateInfo.nextTemplateInfo=e.nextTemplateInfo),e.nextTemplateInfo&&(e.nextTemplateInfo.previousTemplateInfo=e.previousTemplateInfo),this.__templateInfoLast==e&&(this.__templateInfoLast=e.previousTemplateInfo),e.previousTemplateInfo=e.nextTemplateInfo=null;let n=e.childNodes;for(let t=0;t<n.length;t++){let e=n[t];e.parentNode.removeChild(e)}}static _parseTemplateNode(t,n,s){let i=e._parseTemplateNode.call(this,t,n,s);if(t.nodeType===Node.TEXT_NODE){let e=this._parseBindings(t.textContent,n);e&&(t.textContent=In(e)||" ",Pn(this,n,s,"text","textContent",e),i=!0)}return i}static _parseTemplateNodeAttribute(t,n,s,i,r){let o=this._parseBindings(r,n);if(o){let e=i,r="property";pn.test(i)?r="attribute":"$"==i[i.length-1]&&(i=i.slice(0,-1),r="attribute");let a=In(o);return a&&"attribute"==r&&("class"==i&&t.hasAttribute("class")&&(a+=" "+t.getAttribute(i)),t.setAttribute(i,a)),"input"===t.localName&&"value"===e&&t.setAttribute(e,""),t.removeAttribute(e),"property"===r&&(i=He(i)),Pn(this,n,s,r,i,o,a),!0}return e._parseTemplateNodeAttribute.call(this,t,n,s,i,r)}static _parseTemplateNestedTemplate(t,n,s){let i=e._parseTemplateNestedTemplate.call(this,t,n,s),r=s.templateInfo.hostProps;for(let t in r)Pn(this,n,s,"property","_host_"+t,[{mode:"{",source:t,dependencies:[t]}]);return i}static _parseBindings(t,e){let n,s=[],i=0;for(;null!==(n=kn.exec(t));){n.index>i&&s.push({literal:t.slice(i,n.index)});let r=n[1][0],o=Boolean(n[2]),a=n[3].trim(),l=!1,c="",h=-1;"{"==r&&(h=a.indexOf("::"))>0&&(c=a.substring(h+2),a=a.substring(0,h),l=!0);let d=Mn(a),u=[];if(d){let{args:t,methodName:n}=d;for(let e=0;e<t.length;e++){let n=t[e];n.literal||u.push(n)}let s=e.dynamicFns;(s&&s[n]||d.static)&&(u.push(n),d.dynamicFn=!0)}else u.push(a);s.push({source:a,mode:r,negate:o,customEvent:l,signature:d,dependencies:u,event:c}),i=kn.lastIndex}if(i&&i<t.length){let e=t.substring(i);e&&s.push({literal:e})}return s.length?s:null}static _evaluateBinding(t,e,n,s,i,r){let o;return o=e.signature?An(t,n,s,0,e.signature):n!=e.source?Me(t,e.source):r&&Te(n)?Me(t,n):t.__data[n],e.negate&&(o=!o),o}}});const jn=new class{constructor(){this.stack=[]}registerHost(t){this.stack.length&&this.stack[this.stack.length-1]._enqueueClient(t)}beginHosting(t){this.stack.push(t)}endHosting(t){let e=this.stack.length;e&&this.stack[e-1]==t&&this.stack.pop()}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Vn=[];const qn=xe(t=>{const e=Ge(t);function n(t){const e=Object.getPrototypeOf(t);return e.prototype instanceof i?e:null}function s(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",t))){let e=null;if(t.hasOwnProperty(JSCompiler_renameProperty("properties",t))){const n=t.properties;n&&(e=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(t){const e={};for(let n in t){const s=t[n];e[n]="function"==typeof s?{type:s}:s}return e}(n))}t.__ownProperties=e}return t.__ownProperties}class i extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){!function(t){Vn.push(t)}(this.prototype);const t=this._properties;this.__observedAttributes=t?Object.keys(t).map(t=>this.attributeNameForProperty(t)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const t=n(this);t&&t.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const t=s(this);t&&this.createProperties(t)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const t=n(this);this.__properties=Object.assign({},t&&t._properties,s(this))}return this.__properties}static typeForProperty(t){const e=this._properties[t];return e&&e.type}_initializeProperties(){0,this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return i}),Bn="3.3.1",$n=window.ShadyCSS&&window.ShadyCSS.cssBuild,Un=xe(t=>{const e=qn(Hn(t));function n(t,e,n,s){n.computed&&(n.readOnly=!0),n.computed&&(t._hasReadOnlyEffect(e)?console.warn(`Cannot redefine computed property '${e}'.`):t._createComputedProperty(e,n.computed,s)),n.readOnly&&!t._hasReadOnlyEffect(e)?t._createReadOnlyProperty(e,!n.computed):!1===n.readOnly&&t._hasReadOnlyEffect(e)&&console.warn(`Cannot make readOnly property '${e}' non-readOnly.`),n.reflectToAttribute&&!t._hasReflectEffect(e)?t._createReflectedProperty(e):!1===n.reflectToAttribute&&t._hasReflectEffect(e)&&console.warn(`Cannot make reflected property '${e}' non-reflected.`),n.notify&&!t._hasNotifyEffect(e)?t._createNotifyingProperty(e):!1===n.notify&&t._hasNotifyEffect(e)&&console.warn(`Cannot make notify property '${e}' non-notify.`),n.observer&&t._createPropertyObserver(e,n.observer,s[n.observer]),t._addPropertyToAttributeMap(e)}function s(t,e,n,s){if(!$n){const i=e.content.querySelectorAll("style"),r=ce(e),o=function(t){let e=re(t);return e?he(e):[]}(n),a=e.content.firstElementChild;for(let n=0;n<o.length;n++){let i=o[n];i.textContent=t._processStyleText(i.textContent,s),e.content.insertBefore(i,a)}let l=0;for(let e=0;e<r.length;e++){let n=r[e],o=i[l];o!==n?(n=n.cloneNode(!0),o.parentNode.insertBefore(n,o)):l++,n.textContent=t._processStyleText(n.textContent,s)}}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,n)}return class extends e{static get polymerElementVersion(){return Bn}static _finalizeClass(){e._finalizeClass.call(this);const t=function(t){return t.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",t))||(t.__ownObservers=t.hasOwnProperty(JSCompiler_renameProperty("observers",t))?t.observers:null),t.__ownObservers}(this);t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):Wt||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let e in t)n(this.prototype,e,t[e],t)}static createObservers(t,e){const n=this.prototype;for(let s=0;s<t.length;s++)n._createMethodObserver(t[s],e)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:function(t){let e=null;if(t&&(!Yt||Jt)&&(e=ee.import(t,"template"),Yt&&!e))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${t}`);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=Vt(t.url);else{const t=ee.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Bt,this.importPath=this.constructor.importPath;let t=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let n in e){let s=e[n];"value"in s&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[n]=s)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let n=t[e];if(!this.hasOwnProperty(e)){let t="function"==typeof n.value?n.value.call(this):n.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}static _processStyleText(t,e){return jt(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const n=this.importPath;s(this,e,t,n?Ht(n):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=Ee(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t)),Xt&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=Ht(this.importPath)),Ht(t,e)}static _parseTemplateContent(t,n,s){return n.dynamicFns=n.dynamicFns||this._properties,e._parseTemplateContent.call(this,t,n,s)}static _addTemplatePropertyEffect(t,n,s){return!Wt||n in this._properties||console.warn(`Property '${n}' used in template but not declared in 'properties'; `+"attribute will not be observed."),e._addTemplatePropertyEffect.call(this,t,n,s)}}}),Yn=Un(HTMLElement);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Jn{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,e){this._asyncModule=t,this._callback=e,this._timer=this._asyncModule.run(()=>{this._timer=null,Wn.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Wn.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(t,e,n){return t instanceof Jn?t._cancelAsync():t=new Jn,t.setConfig(e,n),t}}let Wn=new Set;const Xn=function(t){Wn.add(t)},Gn=function(){const t=Boolean(Wn.size);return Wn.forEach(t=>{try{t.flush()}catch(t){setTimeout(()=>{throw t})}}),t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Zn="string"==typeof document.head.style.touchAction,Kn="__polymerGestures",Qn="__polymerGesturesHandled",ts="__polymerGesturesTouchAction",es=25,ns=5,ss=2500,is=["mousedown","mousemove","mouseup","click"],rs=[0,1,4,2],os=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(t){return!1}}();function as(t){return is.indexOf(t)>-1}let ls=!1;function cs(t){if(!as(t)&&"touchend"!==t)return Zn&&ls&&Ut?{passive:!0}:void 0}!function(){try{let t=Object.defineProperty({},"passive",{get(){ls=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}}();let hs=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const ds=[],us={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},ps={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function _s(t){return us[t.localName]||!1}function ms(t){let e=Array.prototype.slice.call(t.labels||[]);if(!e.length){e=[];let n=t.getRootNode();if(t.id){let s=n.querySelectorAll(`label[for = ${t.id}]`);for(let t=0;t<s.length;t++)e.push(s[t])}}return e}let fs=function(t){let e=t.sourceCapabilities;if((!e||e.firesTouchEvents)&&(t[Qn]={skip:!0},"click"===t.type)){let e=!1,n=Ss(t);for(let t=0;t<n.length;t++){if(n[t].nodeType===Node.ELEMENT_NODE)if("label"===n[t].localName)ds.push(n[t]);else if(_s(n[t])){let s=ms(n[t]);for(let t=0;t<s.length;t++)e=e||ds.indexOf(s[t])>-1}if(n[t]===bs.mouse.target)return}if(e)return;t.preventDefault(),t.stopPropagation()}};function ys(t){let e=hs?["click"]:is;for(let n,s=0;s<e.length;s++)n=e[s],t?(ds.length=0,document.addEventListener(n,fs,!0)):document.removeEventListener(n,fs,!0)}function gs(t){let e=t.type;if(!as(e))return!1;if("mousemove"===e){let e=void 0===t.buttons?1:t.buttons;return t instanceof window.MouseEvent&&!os&&(e=rs[t.which]||0),Boolean(1&e)}return 0===(void 0===t.button?0:t.button)}let bs={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function vs(t,e,n){t.movefn=e,t.upfn=n,document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}function ws(t){document.removeEventListener("mousemove",t.movefn),document.removeEventListener("mouseup",t.upfn),t.movefn=null,t.upfn=null}Gt&&document.addEventListener("touchend",function(t){if(!Gt)return;bs.mouse.mouseIgnoreJob||ys(!0),bs.mouse.target=Ss(t)[0],bs.mouse.mouseIgnoreJob=Jn.debounce(bs.mouse.mouseIgnoreJob,Ye.after(ss),function(){ys(),bs.mouse.target=null,bs.mouse.mouseIgnoreJob=null})},!!ls&&{passive:!0});const Ss=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:t=>t.composedPath&&t.composedPath()||[],Cs={},Ps=[];function xs(t){const e=Ss(t);return e.length>0?e[0]:t.target}function Es(t){let e,n=t.type,s=t.currentTarget[Kn];if(!s)return;let i=s[n];if(i){if(!t[Qn]&&(t[Qn]={},"touch"===n.slice(0,5))){let e=(t=t).changedTouches[0];if("touchstart"===n&&1===t.touches.length&&(bs.touch.id=e.identifier),bs.touch.id!==e.identifier)return;Zn||"touchstart"!==n&&"touchmove"!==n||function(t){let e=t.changedTouches[0],n=t.type;if("touchstart"===n)bs.touch.x=e.clientX,bs.touch.y=e.clientY,bs.touch.scrollDecided=!1;else if("touchmove"===n){if(bs.touch.scrollDecided)return;bs.touch.scrollDecided=!0;let n=function(t){let e="auto",n=Ss(t);for(let t,s=0;s<n.length;s++)if((t=n[s])[ts]){e=t[ts];break}return e}(t),s=!1,i=Math.abs(bs.touch.x-e.clientX),r=Math.abs(bs.touch.y-e.clientY);t.cancelable&&("none"===n?s=!0:"pan-x"===n?s=r>i:"pan-y"===n&&(s=i>r)),s?t.preventDefault():ks("track")}}(t)}if(!(e=t[Qn]).skip){for(let n,s=0;s<Ps.length;s++)i[(n=Ps[s]).name]&&!e[n.name]&&n.flow&&n.flow.start.indexOf(t.type)>-1&&n.reset&&n.reset();for(let s,r=0;r<Ps.length;r++)i[(s=Ps[r]).name]&&!e[s.name]&&(e[s.name]=!0,s[n](t))}}}function Ts(t,e,n){return!!Cs[e]&&(function(t,e,n){let s=Cs[e],i=s.deps,r=s.name,o=t[Kn];o||(t[Kn]=o={});for(let e,n,s=0;s<i.length;s++)e=i[s],hs&&as(e)&&"click"!==e||((n=o[e])||(o[e]=n={_count:0}),0===n._count&&t.addEventListener(e,Es,cs(e)),n[r]=(n[r]||0)+1,n._count=(n._count||0)+1);t.addEventListener(e,n),s.touchAction&&As(t,s.touchAction)}(t,e,n),!0)}function Os(t,e,n){return!!Cs[e]&&(function(t,e,n){let s=Cs[e],i=s.deps,r=s.name,o=t[Kn];if(o)for(let e,n,s=0;s<i.length;s++)e=i[s],(n=o[e])&&n[r]&&(n[r]=(n[r]||1)-1,n._count=(n._count||1)-1,0===n._count&&t.removeEventListener(e,Es,cs(e)));t.removeEventListener(e,n)}(t,e,n),!0)}function Ns(t){Ps.push(t);for(let e=0;e<t.emits.length;e++)Cs[t.emits[e]]=t}function As(t,e){Zn&&t instanceof HTMLElement&&We.run(()=>{t.style.touchAction=e}),t[ts]=e}function Rs(t,e,n){let s=new Event(e,{bubbles:!0,cancelable:!0,composed:!0});if(s.detail=n,Ee(t).dispatchEvent(s),s.defaultPrevented){let t=n.preventer||n.sourceEvent;t&&t.preventDefault&&t.preventDefault()}}function ks(t){let e=function(t){for(let e,n=0;n<Ps.length;n++){e=Ps[n];for(let n,s=0;s<e.emits.length;s++)if((n=e.emits[s])===t)return e}return null}(t);e.info&&(e.info.prevent=!0)}function Is(t,e,n,s){e&&Rs(e,t,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:s,prevent:function(t){return ks(t)}})}function Ms(t,e,n){if(t.prevent)return!1;if(t.started)return!0;let s=Math.abs(t.x-e),i=Math.abs(t.y-n);return s>=ns||i>=ns}function Ds(t,e,n){if(!e)return;let s,i=t.moves[t.moves.length-2],r=t.moves[t.moves.length-1],o=r.x-t.x,a=r.y-t.y,l=0;i&&(s=r.x-i.x,l=r.y-i.y),Rs(e,"track",{state:t.state,x:n.clientX,y:n.clientY,dx:o,dy:a,ddx:s,ddy:l,sourceEvent:n,hover:function(){return function(t,e){let n=document.elementFromPoint(t,e),s=n;for(;s&&s.shadowRoot&&!window.ShadyDOM&&s!==(s=s.shadowRoot.elementFromPoint(t,e));)s&&(n=s);return n}(n.clientX,n.clientY)}})}function zs(t,e,n){let s=Math.abs(e.clientX-t.x),i=Math.abs(e.clientY-t.y),r=xs(n||e);!r||ps[r.localName]&&r.hasAttribute("disabled")||(isNaN(s)||isNaN(i)||s<=es&&i<=es||function(t){if("click"===t.type){if(0===t.detail)return!0;let e=xs(t);if(!e.nodeType||e.nodeType!==Node.ELEMENT_NODE)return!0;let n=e.getBoundingClientRect(),s=t.pageX,i=t.pageY;return!(s>=n.left&&s<=n.right&&i>=n.top&&i<=n.bottom)}return!1}(e))&&(t.prevent||Rs(r,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:n}))}Ns({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){ws(this.info)},mousedown:function(t){if(!gs(t))return;let e=xs(t),n=this;vs(this.info,function(t){gs(t)||(Is("up",e,t),ws(n.info))},function(t){gs(t)&&Is("up",e,t),ws(n.info)}),Is("down",e,t)},touchstart:function(t){Is("down",xs(t),t.changedTouches[0],t)},touchend:function(t){Is("up",xs(t),t.changedTouches[0],t)}}),Ns({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(t){this.moves.length>2&&this.moves.shift(),this.moves.push(t)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,ws(this.info)},mousedown:function(t){if(!gs(t))return;let e=xs(t),n=this,s=function(t){let s=t.clientX,i=t.clientY;Ms(n.info,s,i)&&(n.info.state=n.info.started?"mouseup"===t.type?"end":"track":"start","start"===n.info.state&&ks("tap"),n.info.addMove({x:s,y:i}),gs(t)||(n.info.state="end",ws(n.info)),e&&Ds(n.info,e,t),n.info.started=!0)};vs(this.info,s,function(t){n.info.started&&s(t),ws(n.info)}),this.info.x=t.clientX,this.info.y=t.clientY},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(t){let e=xs(t),n=t.changedTouches[0],s=n.clientX,i=n.clientY;Ms(this.info,s,i)&&("start"===this.info.state&&ks("tap"),this.info.addMove({x:s,y:i}),Ds(this.info,e,n),this.info.state="track",this.info.started=!0)},touchend:function(t){let e=xs(t),n=t.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),Ds(this.info,e,n))}}),Ns({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(t){gs(t)&&(this.info.x=t.clientX,this.info.y=t.clientY)},click:function(t){gs(t)&&zs(this.info,t)},touchstart:function(t){const e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchend:function(t){zs(this.info,t.changedTouches[0],t)}});const Ls=xe(t=>{return class extends t{_addEventListenerToNode(t,e,n){Ts(t,e,n)||super._addEventListenerToNode(t,e,n)}_removeEventListenerFromNode(t,e,n){Os(t,e,n)||super._removeEventListenerFromNode(t,e,n)}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Fs(t,e,n){return{index:t,removed:e,addedCount:n}}const Hs=0,js=1,Vs=2,qs=3;function Bs(t,e,n,s,i,r){let o,a=0,l=0,c=Math.min(n-e,r-i);if(0==e&&0==i&&(a=function(t,e,n){for(let s=0;s<n;s++)if(!Us(t[s],e[s]))return s;return n}(t,s,c)),n==t.length&&r==s.length&&(l=function(t,e,n){let s=t.length,i=e.length,r=0;for(;r<n&&Us(t[--s],e[--i]);)r++;return r}(t,s,c-a)),i+=a,r-=l,(n-=l)-(e+=a)==0&&r-i==0)return[];if(e==n){for(o=Fs(e,[],0);i<r;)o.removed.push(s[i++]);return[o]}if(i==r)return[Fs(e,[],n-e)];let h=function(t){let e=t.length-1,n=t[0].length-1,s=t[e][n],i=[];for(;e>0||n>0;){if(0==e){i.push(Vs),n--;continue}if(0==n){i.push(qs),e--;continue}let r,o=t[e-1][n-1],a=t[e-1][n],l=t[e][n-1];(r=a<l?a<o?a:o:l<o?l:o)==o?(o==s?i.push(Hs):(i.push(js),s=o),e--,n--):r==a?(i.push(qs),e--,s=a):(i.push(Vs),n--,s=l)}return i.reverse(),i}(function(t,e,n,s,i,r){let o=r-i+1,a=n-e+1,l=new Array(o);for(let t=0;t<o;t++)l[t]=new Array(a),l[t][0]=t;for(let t=0;t<a;t++)l[0][t]=t;for(let n=1;n<o;n++)for(let r=1;r<a;r++)if(Us(t[e+r-1],s[i+n-1]))l[n][r]=l[n-1][r-1];else{let t=l[n-1][r]+1,e=l[n][r-1]+1;l[n][r]=t<e?t:e}return l}(t,e,n,s,i,r));o=void 0;let d=[],u=e,p=i;for(let t=0;t<h.length;t++)switch(h[t]){case Hs:o&&(d.push(o),o=void 0),u++,p++;break;case js:o||(o=Fs(u,[],0)),o.addedCount++,u++,o.removed.push(s[p]),p++;break;case Vs:o||(o=Fs(u,[],0)),o.addedCount++,u++;break;case qs:o||(o=Fs(u,[],0)),o.removed.push(s[p]),p++}return o&&d.push(o),d}function $s(t,e){return Bs(t,0,t.length,e,0,e.length)}function Us(t,e){return t===e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Ys(t){return"slot"===t.localName}let Js=class{static getFlattenedNodes(t){const e=Ee(t);return Ys(t)?(t=t,e.assignedNodes({flatten:!0})):Array.from(e.childNodes).map(t=>Ys(t)?Ee(t=t).assignedNodes({flatten:!0}):[t]).reduce((t,e)=>t.concat(e),[])}constructor(t,e){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=t,this.callback=e,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=(()=>{this._schedule()}),this.connect(),this._schedule()}connect(){Ys(this._target)?this._listenSlots([this._target]):Ee(this._target).children&&(this._listenSlots(Ee(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,t=>{this._processMutations(t)}):(this._nativeChildrenObserver=new MutationObserver(t=>{this._processMutations(t)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){Ys(this._target)?this._unlistenSlots([this._target]):Ee(this._target).children&&(this._unlistenSlots(Ee(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,We.run(()=>this.flush()))}_processMutations(t){this._processSlotMutations(t),this.flush()}_processSlotMutations(t){if(t)for(let e=0;e<t.length;e++){let n=t[e];n.addedNodes&&this._listenSlots(n.addedNodes),n.removedNodes&&this._unlistenSlots(n.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let t={target:this._target,addedNodes:[],removedNodes:[]},e=this.constructor.getFlattenedNodes(this._target),n=$s(e,this._effectiveNodes);for(let e,s=0;s<n.length&&(e=n[s]);s++)for(let n,s=0;s<e.removed.length&&(n=e.removed[s]);s++)t.removedNodes.push(n);for(let s,i=0;i<n.length&&(s=n[i]);i++)for(let n=s.index;n<s.index+s.addedCount;n++)t.addedNodes.push(e[n]);this._effectiveNodes=e;let s=!1;return(t.addedNodes.length||t.removedNodes.length)&&(s=!0,this.callback.call(this._target,t)),s}_listenSlots(t){for(let e=0;e<t.length;e++){let n=t[e];Ys(n)&&n.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(t){for(let e=0;e<t.length;e++){let n=t[e];Ys(n)&&n.removeEventListener("slotchange",this._boundSchedule)}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class Ws{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function Xs(t){return function t(e,n){let s=n.substring(e.start,e.end-1);e.parsedCssText=e.cssText=s.trim();if(e.parent){let t=e.previous?e.previous.end:e.parent.start;s=(s=(s=function(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let t=arguments[1],e=6-t.length;for(;e--;)t="0"+t;return"\\"+t})}(s=n.substring(t,e.start-1))).replace(ti.multipleSpaces," ")).substring(s.lastIndexOf(";")+1);let i=e.parsedSelector=e.selector=s.trim();e.atRule=0===i.indexOf(si),e.atRule?0===i.indexOf(ni)?e.type=Zs.MEDIA_RULE:i.match(ti.keyframesRule)&&(e.type=Zs.KEYFRAMES_RULE,e.keyframesName=e.selector.split(ti.multipleSpaces).pop()):0===i.indexOf(ei)?e.type=Zs.MIXIN_RULE:e.type=Zs.STYLE_RULE}let i=e.rules;if(i)for(let e,s=0,r=i.length;s<r&&(e=i[s]);s++)t(e,n);return e}(function(t){let e=new Ws;e.start=0,e.end=t.length;let n=e;for(let s=0,i=t.length;s<i;s++)if(t[s]===Ks){n.rules||(n.rules=[]);let t=n,e=t.rules[t.rules.length-1]||null;(n=new Ws).start=s+1,n.parent=t,n.previous=e,t.rules.push(n)}else t[s]===Qs&&(n.end=s+1,n=n.parent||e);return e}(t=function(t){return t.replace(ti.comments,"").replace(ti.port,"")}(t)),t)}function Gs(t,e,n=""){let s="";if(t.cssText||t.rules){let n=t.rules;if(n&&!function(t){let e=t[0];return Boolean(e)&&Boolean(e.selector)&&0===e.selector.indexOf(ei)}(n))for(let t,i=0,r=n.length;i<r&&(t=n[i]);i++)s=Gs(t,e,s);else(s=(s=e?t.cssText:function(t){return function(t){return t.replace(ti.mixinApply,"").replace(ti.varApply,"")}(t=function(t){return t.replace(ti.customProp,"").replace(ti.mixinProp,"")}(t))}(t.cssText)).trim())&&(s="  "+s+"\n")}return s&&(t.selector&&(n+=t.selector+" "+Ks+"\n"),n+=s,t.selector&&(n+=Qs+"\n\n")),n}const Zs={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},Ks="{",Qs="}",ti={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},ei="--",ni="@media",si="@",ii=new Set,ri="shady-unscoped";function oi(t){const e=t.textContent;if(!ii.has(e)){ii.add(e);const n=t.cloneNode(!0);document.head.appendChild(n)}}function ai(t){return t.hasAttribute(ri)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function li(t,e){return t?("string"==typeof t&&(t=Xs(t)),e&&hi(t,e),Gs(t,It)):""}function ci(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Xs(t.textContent)),t.__cssRules||null}function hi(t,e,n,s){if(!t)return;let i=!1,r=t.type;if(s&&r===Zs.MEDIA_RULE){let e=t.selector.match(xt);e&&(window.matchMedia(e[1]).matches||(i=!0))}r===Zs.STYLE_RULE?e(t):n&&r===Zs.KEYFRAMES_RULE?n(t):r===Zs.MIXIN_RULE&&(i=!0);let o=t.rules;if(o&&!i)for(let t,i=0,r=o.length;i<r&&(t=o[i]);i++)hi(t,e,n,s)}function di(t,e){let n=0;for(let s=e,i=t.length;s<i;s++)if("("===t[s])n++;else if(")"===t[s]&&0==--n)return s;return-1}window.ShadyDOM&&window.ShadyDOM.wrap;const ui="css-build";function pi(t){if(void 0!==At)return At;if(void 0===t.__cssBuild){const e=t.getAttribute(ui);if(e)t.__cssBuild=e;else{const e=function(t){const e="template"===t.localName?t.content.firstChild:t.firstChild;if(e instanceof Comment){const t=e.textContent.trim().split(":");if(t[0]===ui)return t[1]}return""}(t);""!==e&&function(t){const e="template"===t.localName?t.content.firstChild:t.firstChild;e.parentNode.removeChild(e)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(t),t.__cssBuild=e}}return t.__cssBuild||""}function _i(t){return""!==pi(t)}const mi=/;\s*/m,fi=/^\s*(initial)|(inherit)\s*$/,yi=/\s*!important/,gi="_-_";class bi{constructor(){this._map={}}set(t,e){t=t.trim(),this._map[t]={properties:e,dependants:{}}}get(t){return t=t.trim(),this._map[t]||null}}let vi=null;class wi{constructor(){this._currentElement=null,this._measureElement=null,this._map=new bi}detectMixin(t){return function(t){const e=Pt.test(t)||Ct.test(t);return Pt.lastIndex=0,Ct.lastIndex=0,e}(t)}gatherStyles(t){const e=function(t){const e=[],n=t.querySelectorAll("style");for(let t=0;t<n.length;t++){const s=n[t];ai(s)?Ot||(oi(s),s.parentNode.removeChild(s)):(e.push(s.textContent),s.parentNode.removeChild(s))}return e.join("").trim()}(t.content);if(e){const n=document.createElement("style");return n.textContent=e,t.content.insertBefore(n,t.content.firstChild),n}return null}transformTemplate(t,e){void 0===t._gatheredStyle&&(t._gatheredStyle=this.gatherStyles(t));const n=t._gatheredStyle;return n?this.transformStyle(n,e):null}transformStyle(t,e=""){let n=ci(t);return this.transformRules(n,e),t.textContent=li(n),n}transformCustomStyle(t){let e=ci(t);return hi(e,t=>{":root"===t.selector&&(t.selector="html"),this.transformRule(t)}),t.textContent=li(e),e}transformRules(t,e){this._currentElement=e,hi(t,t=>{this.transformRule(t)}),this._currentElement=null}transformRule(t){t.cssText=this.transformCssText(t.parsedCssText,t),":root"===t.selector&&(t.selector=":host > *")}transformCssText(t,e){return t=t.replace(Ct,(t,n,s,i)=>this._produceCssProperties(t,n,s,i,e)),this._consumeCssProperties(t,e)}_getInitialValueForProperty(t){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(t)}_fallbacksFromPreviousRules(t){let e=t;for(;e.parent;)e=e.parent;const n={};let s=!1;return hi(e,e=>{(s=s||e===t)||e.selector===t.selector&&Object.assign(n,this._cssTextToMap(e.parsedCssText))}),n}_consumeCssProperties(t,e){let n=null;for(;n=Pt.exec(t);){let s=n[0],i=n[1],r=n.index,o=r+s.indexOf("@apply"),a=r+s.length,l=t.slice(0,o),c=t.slice(a),h=e?this._fallbacksFromPreviousRules(e):{};Object.assign(h,this._cssTextToMap(l));let d=this._atApplyToCssProperties(i,h);t=`${l}${d}${c}`,Pt.lastIndex=r+d.length}return t}_atApplyToCssProperties(t,e){t=t.replace(mi,"");let n=[],s=this._map.get(t);if(s||(this._map.set(t,{}),s=this._map.get(t)),s){let i,r,o;this._currentElement&&(s.dependants[this._currentElement]=!0);const a=s.properties;for(i in a)o=e&&e[i],r=[i,": var(",t,gi,i],o&&r.push(",",o.replace(yi,"")),r.push(")"),yi.test(a[i])&&r.push(" !important"),n.push(r.join(""))}return n.join("; ")}_replaceInitialOrInherit(t,e){let n=fi.exec(e);return n&&(e=n[1]?this._getInitialValueForProperty(t):"apply-shim-inherit"),e}_cssTextToMap(t,e=!1){let n,s,i=t.split(";"),r={};for(let t,o,a=0;a<i.length;a++)(t=i[a])&&(o=t.split(":")).length>1&&(n=o[0].trim(),s=o.slice(1).join(":"),e&&(s=this._replaceInitialOrInherit(n,s)),r[n]=s);return r}_invalidateMixinEntry(t){if(vi)for(let e in t.dependants)e!==this._currentElement&&vi(e)}_produceCssProperties(t,e,n,s,i){if(n&&function t(e,n){let s=e.indexOf("var(");if(-1===s)return n(e,"","","");let i=di(e,s+3),r=e.substring(s+4,i),o=e.substring(0,s),a=t(e.substring(i+1),n),l=r.indexOf(",");return-1===l?n(o,r.trim(),"",a):n(o,r.substring(0,l).trim(),r.substring(l+1).trim(),a)}(n,(t,e)=>{e&&this._map.get(e)&&(s=`@apply ${e};`)}),!s)return t;let r=this._consumeCssProperties(""+s,i),o=t.slice(0,t.indexOf("--")),a=this._cssTextToMap(r,!0),l=a,c=this._map.get(e),h=c&&c.properties;h?l=Object.assign(Object.create(h),a):this._map.set(e,l);let d,u,p=[],_=!1;for(d in l)void 0===(u=a[d])&&(u="initial"),!h||d in h||(_=!0),p.push(`${e}${gi}${d}: ${u}`);return _&&this._invalidateMixinEntry(c),c&&(c.properties=l),n&&(o=`${t};${o}`),`${o}${p.join("; ")};`}}wi.prototype.detectMixin=wi.prototype.detectMixin,wi.prototype.transformStyle=wi.prototype.transformStyle,wi.prototype.transformCustomStyle=wi.prototype.transformCustomStyle,wi.prototype.transformRules=wi.prototype.transformRules,wi.prototype.transformRule=wi.prototype.transformRule,wi.prototype.transformTemplate=wi.prototype.transformTemplate,wi.prototype._separator=gi,Object.defineProperty(wi.prototype,"invalidCallback",{get:()=>vi,set(t){vi=t}});var Si=wi;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/var Ci={};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Pi="_applyShimCurrentVersion",xi="_applyShimNextVersion",Ei="_applyShimValidatingVersion",Ti=Promise.resolve();function Oi(t){let e=Ci[t];e&&function(t){t[Pi]=t[Pi]||0,t[Ei]=t[Ei]||0,t[xi]=(t[xi]||0)+1}(e)}function Ni(t){return t[Pi]===t[xi]}function Ai(t){return!Ni(t)&&t[Ei]===t[xi]}function Ri(t){t[Ei]=t[xi],t._validating||(t._validating=!0,Ti.then(function(){t[Pi]=t[xi],t._validating=!1}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const ki=new Si;if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const t=new class{constructor(){this.customStyleInterface=null,ki.invalidCallback=Oi}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=(t=>{ki.transformCustomStyle(t)}),this.customStyleInterface.validateCallback=(()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})}))}prepareTemplate(t,e){if(this.ensure(),_i(t))return;Ci[e]=t;let n=ki.transformTemplate(t,e);t._styleAst=n}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let t=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let e=0;e<t.length;e++){let n=t[e],s=this.customStyleInterface.getStyleForCustomStyle(n);s&&ki.transformCustomStyle(s)}this.customStyleInterface.enqueued=!1}}styleSubtree(t,e){if(this.ensure(),e&&Et(t,e),t.shadowRoot){this.styleElement(t);let e=t.shadowRoot.children||t.shadowRoot.childNodes;for(let t=0;t<e.length;t++)this.styleSubtree(e[t])}else{let e=t.children||t.childNodes;for(let t=0;t<e.length;t++)this.styleSubtree(e[t])}}styleElement(t){this.ensure();let{is:e}=function(t){let e=t.localName,n="",s="";return e?e.indexOf("-")>-1?n=e:(s=e,n=t.getAttribute&&t.getAttribute("is")||""):(n=t.is,s=t.extends),{is:n,typeExtension:s}}(t),n=Ci[e];if((!n||!_i(n))&&n&&!Ni(n)){Ai(n)||(this.prepareTemplate(n,e),Ri(n));let s=t.shadowRoot;if(s){let t=s.querySelector("style");t&&(t.__cssRules=n._styleAst,t.textContent=li(n._styleAst))}}}styleDocument(t){this.ensure(),this.styleSubtree(document.body,t)}};let e=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(e,n,s){t.flushCustomStyles(),t.prepareTemplate(e,n)},prepareTemplateStyles(t,e,n){window.ShadyCSS.prepareTemplate(t,e,n)},prepareTemplateDom(t,e){},styleSubtree(e,n){t.flushCustomStyles(),t.styleSubtree(e,n)},styleElement(e){t.flushCustomStyles(),t.styleElement(e)},styleDocument(e){t.flushCustomStyles(),t.styleDocument(e)},getComputedStyleValue:(t,e)=>Tt(t,e),flushCustomStyles(){t.flushCustomStyles()},nativeCss:It,nativeShadow:Ot,cssBuild:At,disableRuntime:kt},e&&(window.ShadyCSS.CustomStyleInterface=e)}window.ShadyCSS.ApplyShim=ki;
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const Ii=/:host\(:dir\((ltr|rtl)\)\)/g,Mi=':host([dir="$1"])',Di=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,zi=':host([dir="$2"]) $1',Li=/:dir\((?:ltr|rtl)\)/,Fi=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),Hi=[];let ji=null,Vi="";function qi(){Vi=document.documentElement.getAttribute("dir")}function Bi(t){if(!t.__autoDirOptOut){t.setAttribute("dir",Vi)}}function $i(){qi(),Vi=document.documentElement.getAttribute("dir");for(let t=0;t<Hi.length;t++)Bi(Hi[t])}const Ui=xe(t=>{Fi||ji||(qi(),(ji=new MutationObserver($i)).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const e=Qe(t);class n extends e{static _processStyleText(t,n){return t=e._processStyleText.call(this,t,n),!Fi&&Li.test(t)&&(t=this._replaceDirInCssText(t),this.__activateDir=!0),t}static _replaceDirInCssText(t){let e=t;return e=(e=e.replace(Ii,Mi)).replace(Di,zi)}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){e.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(ji&&ji.takeRecords().length&&$i(),Hi.push(this),Bi(this))}disconnectedCallback(){if(e.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const t=Hi.indexOf(this);t>-1&&Hi.splice(t,1)}}}return n.__activateDir=!1,n});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function Yi(){document.body.removeAttribute("unresolved")}"interactive"===document.readyState||"complete"===document.readyState?Yi():window.addEventListener("DOMContentLoaded",Yi);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ji=function(){let t,e;do{t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=Gn()}while(t||e)},Wi=Element.prototype,Xi=Wi.matches||Wi.matchesSelector||Wi.mozMatchesSelector||Wi.msMatchesSelector||Wi.oMatchesSelector||Wi.webkitMatchesSelector,Gi=function(t,e){return Xi.call(t,e)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class Zi{constructor(t){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(t),this.node=t}observeNodes(t){return new Js(this.node,t)}unobserveNodes(t){t.disconnect()}notifyObserver(){}deepContains(t){if(Ee(this.node).contains(t))return!0;let e=t,n=t.ownerDocument;for(;e&&e!==n&&e!==this.node;)e=Ee(e).parentNode||Ee(e).host;return e===this.node}getOwnerRoot(){return Ee(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?Ee(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let t=[],e=Ee(this.node).assignedSlot;for(;e;)t.push(e),e=Ee(e).assignedSlot;return t}importNode(t,e){let n=this.node instanceof Document?this.node:this.node.ownerDocument;return Ee(n).importNode(t,e)}getEffectiveChildNodes(){return Js.getFlattenedNodes(this.node)}queryDistributedElements(t){let e=this.getEffectiveChildNodes(),n=[];for(let s,i=0,r=e.length;i<r&&(s=e[i]);i++)s.nodeType===Node.ELEMENT_NODE&&Gi(s,t)&&n.push(s);return n}get activeElement(){let t=this.node;return void 0!==t._activeElement?t._activeElement:t.activeElement}}function Ki(t,e){for(let n=0;n<e.length;n++){let s=e[n];Object.defineProperty(t,s,{get:function(){return this.node[s]},configurable:!0})}}class Qi{constructor(t){this.event=t}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Zi.prototype.cloneNode,Zi.prototype.appendChild,Zi.prototype.insertBefore,Zi.prototype.removeChild,Zi.prototype.replaceChild,Zi.prototype.setAttribute,Zi.prototype.removeAttribute,Zi.prototype.querySelector,Zi.prototype.querySelectorAll,Zi.prototype.parentNode,Zi.prototype.firstChild,Zi.prototype.lastChild,Zi.prototype.nextSibling,Zi.prototype.previousSibling,Zi.prototype.firstElementChild,Zi.prototype.lastElementChild,Zi.prototype.nextElementSibling,Zi.prototype.previousElementSibling,Zi.prototype.childNodes,Zi.prototype.children,Zi.prototype.classList,Zi.prototype.textContent,Zi.prototype.innerHTML;let tr=Zi;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class t extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(Zi.prototype).forEach(e=>{"activeElement"!=e&&(t.prototype[e]=Zi.prototype[e])}),Ki(t.prototype,["classList"]),tr=t,Object.defineProperties(Qi.prototype,{localTarget:{get(){const t=this.event.currentTarget,e=t&&er(t).getOwnerRoot(),n=this.path;for(let t=0;t<n.length;t++){const s=n[t];if(er(s).getOwnerRoot()===e)return s}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else!function(t,e){for(let n=0;n<e.length;n++){let s=e[n];t[s]=function(){return this.node[s].apply(this.node,arguments)}}}(Zi.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),Ki(Zi.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(t,e){for(let n=0;n<e.length;n++){let s=e[n];Object.defineProperty(t,s,{get:function(){return this.node[s]},set:function(t){this.node[s]=t},configurable:!0})}}(Zi.prototype,["textContent","innerHTML","className"]);const er=function(t){if((t=t||document)instanceof tr)return t;if(t instanceof Qi)return t;let e=t.__domApi;return e||(e=t instanceof Event?new Qi(t):new tr(t),t.__domApi=e),e},nr=window.ShadyDOM,sr=window.ShadyCSS;function ir(t,e){return Ee(t).getRootNode()===e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let rr=window.ShadyCSS;const or=xe(t=>{const e=Ui(Ls(Un(t))),n={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class s extends e{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers}static get importMeta(){return this.prototype.importMeta}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(t,e,n,s){e!==n&&(super.attributeChangedCallback(t,e,n,s),this.attributeChanged(t,e,n))}attributeChanged(t,e,n){}_initializeProperties(){let t=Object.getPrototypeOf(this);t.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",t))||(this._registered(),t.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),this._applyListeners()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(t){return this._serializeValue(t)}deserialize(t,e){return this._deserializeValue(t,e)}reflectPropertyToAttribute(t,e,n){this._propertyToAttribute(t,e,n)}serializeValueToAttribute(t,e,n){this._valueToNodeAttribute(n||this,t,e)}extend(t,e){if(!t||!e)return t||e;let n=Object.getOwnPropertyNames(e);for(let s,i=0;i<n.length&&(s=n[i]);i++){let n=Object.getOwnPropertyDescriptor(e,s);n&&Object.defineProperty(t,s,n)}return t}mixin(t,e){for(let n in e)t[n]=e[n];return t}chainObject(t,e){return t&&e&&t!==e&&(t.__proto__=e),t}instanceTemplate(t){let e=this.constructor._contentForTemplate(t);return document.importNode(e,!0)}fire(t,e,n){n=n||{},e=null===e||void 0===e?{}:e;let s=new Event(t,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});s.detail=e;let i=n.node||this;return Ee(i).dispatchEvent(s),s}listen(t,e,n){t=t||this;let s=this.__boundListeners||(this.__boundListeners=new WeakMap),i=s.get(t);i||(i={},s.set(t,i));let r=e+n;i[r]||(i[r]=this._addMethodEventListenerToNode(t,e,n,this))}unlisten(t,e,n){t=t||this;let s=this.__boundListeners&&this.__boundListeners.get(t),i=e+n,r=s&&s[i];r&&(this._removeEventListenerFromNode(t,e,r),s[i]=null)}setScrollDirection(t,e){As(e||this,n[t]||"auto")}$$(t){return this.root.querySelector(t)}get domHost(){let t=Ee(this).getRootNode();return t instanceof DocumentFragment?t.host:t}distributeContent(){const t=er(this);window.ShadyDOM&&t.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return er(this).getEffectiveChildNodes()}queryDistributedElements(t){return er(this).queryDistributedElements(t)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(t){return t.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let t=this.getEffectiveChildNodes(),e=[];for(let n,s=0;n=t[s];s++)n.nodeType!==Node.COMMENT_NODE&&e.push(n.textContent);return e.join("")}queryEffectiveChildren(t){let e=this.queryDistributedElements(t);return e&&e[0]}queryAllEffectiveChildren(t){return this.queryDistributedElements(t)}getContentChildNodes(t){let e=this.root.querySelector(t||"slot");return e?er(e).getDistributedNodes():[]}getContentChildren(t){return this.getContentChildNodes(t).filter(function(t){return t.nodeType===Node.ELEMENT_NODE})}isLightDescendant(t){return this!==t&&Ee(this).contains(t)&&Ee(this).getRootNode()===Ee(t).getRootNode()}isLocalDescendant(t){return this.root===Ee(t).getRootNode()}scopeSubtree(t,e=!1){return function(t,e=!1){if(!nr||!sr)return null;if(!nr.handlesDynamicScoping)return null;const n=sr.ScopingShim;if(!n)return null;const s=n.scopeForNode(t),i=Ee(t).getRootNode(),r=t=>{if(!ir(t,i))return;const e=Array.from(nr.nativeMethods.querySelectorAll.call(t,"*"));e.push(t);for(let t=0;t<e.length;t++){const r=e[t];if(!ir(r,i))continue;const o=n.currentScopeForNode(r);o!==s&&(""!==o&&n.unscopeNode(r,o),n.scopeNode(r,s))}};if(r(t),e){const e=new MutationObserver(t=>{for(let e=0;e<t.length;e++){const n=t[e];for(let t=0;t<n.addedNodes.length;t++){const e=n.addedNodes[t];e.nodeType===Node.ELEMENT_NODE&&r(e)}}});return e.observe(t,{childList:!0,subtree:!0}),e}return null}(t,e)}getComputedStyleValue(t){return rr.getComputedStyleValue(this,t)}debounce(t,e,n){return this._debouncers=this._debouncers||{},this._debouncers[t]=Jn.debounce(this._debouncers[t],n>0?Ye.after(n):We,e.bind(this))}isDebouncerActive(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];return!(!e||!e.isActive())}flushDebouncer(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];e&&e.flush()}cancelDebouncer(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];e&&e.cancel()}async(t,e){return e>0?Ye.run(t.bind(this),e):~We.run(t.bind(this))}cancelAsync(t){t<0?We.cancel(~t):Ye.cancel(t)}create(t,e){let n=document.createElement(t);if(e)if(n.setProperties)n.setProperties(e);else for(let t in e)n[t]=e[t];return n}elementMatches(t,e){return Gi(e||this,t)}toggleAttribute(t,e){let n=this;return 3===arguments.length&&(n=arguments[2]),1==arguments.length&&(e=!n.hasAttribute(t)),e?(Ee(n).setAttribute(t,""),!0):(Ee(n).removeAttribute(t),!1)}toggleClass(t,e,n){n=n||this,1==arguments.length&&(e=!n.classList.contains(t)),e?n.classList.add(t):n.classList.remove(t)}transform(t,e){(e=e||this).style.webkitTransform=t,e.style.transform=t}translate3d(t,e,n,s){s=s||this,this.transform("translate3d("+t+","+e+","+n+")",s)}arrayDelete(t,e){let n;if(Array.isArray(t)){if((n=t.indexOf(e))>=0)return t.splice(n,1)}else{if((n=Me(this,t).indexOf(e))>=0)return this.splice(t,n,1)}return null}_logger(t,e){switch(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])&&(e=e[0]),t){case"log":case"warn":case"error":console[t](...e)}}_log(...t){this._logger("log",t)}_warn(...t){this._logger("warn",t)}_error(...t){this._logger("error",t)}_logf(t,...e){return["[%s::%s]",this.is,t,...e]}}return s.prototype.is="",s}),ar={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},lr={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},cr=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},lr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function hr(t,e,n,s){!function(t,e,n){const s=t._noAccessors,i=Object.getOwnPropertyNames(t);for(let r=0;r<i.length;r++){let o=i[r];if(!(o in n))if(s)e[o]=t[o];else{let n=Object.getOwnPropertyDescriptor(t,o);n&&(n.configurable=!0,Object.defineProperty(e,o,n))}}}(e,t,s);for(let t in ar)e[t]&&(n[t]=n[t]||[],n[t].push(e[t]))}function dr(t,e){for(const n in e){const s=t[n],i=e[n];t[n]=!("value"in i)&&s&&"value"in s?Object.assign({value:s.value},i):i}}function ur(t,e,n){let s;const i={};class r extends e{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(s)for(let t,e=0;e<s.length;e++)(t=s[e]).properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties);t.properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties),this._prepareTemplate()}else e._finalizeClass.call(this)}static get properties(){const e={};if(s)for(let t=0;t<s.length;t++)dr(e,s[t].properties);return dr(e,t.properties),e}static get observers(){let e=[];if(s)for(let t,n=0;n<s.length;n++)(t=s[n]).observers&&(e=e.concat(t.observers));return t.observers&&(e=e.concat(t.observers)),e}created(){super.created();const t=i.created;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}_registered(){const t=r.prototype;if(!t.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",t))){t.__hasRegisterFinished=!0,super._registered(),Wt&&o(t);const e=Object.getPrototypeOf(this);let n=i.beforeRegister;if(n)for(let t=0;t<n.length;t++)n[t].call(e);if(n=i.registered)for(let t=0;t<n.length;t++)n[t].call(e)}}_applyListeners(){super._applyListeners();const t=i.listeners;if(t)for(let e=0;e<t.length;e++){const n=t[e];if(n)for(let t in n)this._addMethodEventListenerToNode(this,t,n[t])}}_ensureAttributes(){const t=i.hostAttributes;if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];for(let t in n)this._ensureAttribute(t,n[t])}super._ensureAttributes()}ready(){super.ready();let t=i.ready;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}attached(){super.attached();let t=i.attached;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}detached(){super.detached();let t=i.detached;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}attributeChanged(t,e,n){super.attributeChanged();let s=i.attributeChanged;if(s)for(let i=0;i<s.length;i++)s[i].call(this,t,e,n)}}if(n){Array.isArray(n)||(n=[n]);let t=e.prototype.behaviors;s=function t(e,n,s){n=n||[];for(let i=e.length-1;i>=0;i--){let r=e[i];r?Array.isArray(r)?t(r,n):n.indexOf(r)<0&&(!s||s.indexOf(r)<0)&&n.unshift(r):console.warn("behavior is null, check for missing or 404 import")}return n}(n,null,t),r.prototype.behaviors=t?t.concat(n):s}const o=e=>{s&&function(t,e,n){for(let s=0;s<e.length;s++)hr(t,e[s],n,cr)}(e,s,i),hr(e,t,i,lr)};return Wt||o(r.prototype),r.generatedFrom=t,r}const pr=function(t){let e;return e="function"==typeof t?t:pr.Class(t),customElements.define(e.is,e),e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function _r(t,e,n,s,i){let r;i&&(r="object"==typeof n&&null!==n)&&(s=t.__dataTemp[e]);let o=s!==n&&(s==s||n==n);return r&&o&&(t.__dataTemp[e]=n),o}pr.Class=function(t,e){t||console.warn("Polymer.Class requires `info` argument");let n=e?e(or(HTMLElement)):or(HTMLElement);return(n=ur(t,n,t.behaviors)).is=n.prototype.is=t.is,n};const mr=xe(t=>{return class extends t{_shouldPropertyChange(t,e,n){return _r(this,t,e,n,!0)}}}),fr=xe(t=>{return class extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,e,n){return _r(this,t,e,n,this.mutableData)}}});mr._mutablePropertyChange=_r;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let yr=null;function gr(){return yr}gr.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:gr,writable:!0}});const br=Hn(gr),vr=mr(br);const wr=Hn(class{});class Sr extends wr{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(t&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,t=>{t.model=this,n(t)});else{let s=this.__dataHost.__dataHost;s&&s._addEventListenerToNode(t,e,n)}}_showHideChildren(t){let e=this.children;for(let n=0;n<e.length;n++){let s=e[n];if(Boolean(t)!=Boolean(s.__hideTemplateChildren__))if(s.nodeType===Node.TEXT_NODE)t?(s.__polymerTextContent__=s.textContent,s.textContent=""):s.textContent=s.__polymerTextContent__;else if("slot"===s.localName)if(t)s.__polymerReplaced__=document.createComment("hidden-slot"),Ee(Ee(s).parentNode).replaceChild(s.__polymerReplaced__,s);else{const t=s.__polymerReplaced__;t&&Ee(Ee(t).parentNode).replaceChild(s,t)}else s.style&&(t?(s.__polymerDisplay__=s.style.display,s.style.display="none"):s.style.display=s.__polymerDisplay__);s.__hideTemplateChildren__=t,s._showHideChildren&&s._showHideChildren(t)}}_setUnmanagedPropertyToNode(t,e,n){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(t,e,n)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}Sr.prototype.__dataHost,Sr.prototype.__templatizeOptions,Sr.prototype._methodHost,Sr.prototype.__templatizeOwner,Sr.prototype.__hostProps;const Cr=mr(Sr);function Pr(t){let e=t.__dataHost;return e&&e._methodHost||e}function xr(t,e,n){let s=n.mutableData?Cr:Sr;Nr.mixin&&(s=Nr.mixin(s));let i=class extends s{};return i.prototype.__templatizeOptions=n,i.prototype._bindTemplate(t),function(t,e,n,s){let i=n.hostProps||{};for(let e in s.instanceProps){delete i[e];let n=s.notifyInstanceProp;n&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Or(e,n)})}if(s.forwardHostProp&&e.__dataHost)for(let e in i)n.hasHostProps||(n.hasHostProps=!0),t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,n){t.__dataHost._setPendingPropertyOrPath("_host_"+e,n[e],!0,!0)}})}(i,t,e,n),i}function Er(t,e,n){let s=n.forwardHostProp;if(s&&e.hasHostProps){let i=e.templatizeTemplateClass;if(!i){let t=n.mutableData?vr:br;i=e.templatizeTemplateClass=class extends t{};let r=e.hostProps;for(let t in r)i.prototype._addPropertyEffect("_host_"+t,i.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Tr(t,s)}),i.prototype._createNotifyingProperty("_host_"+t)}!function(t,e){yr=t,Object.setPrototypeOf(t,e.prototype),new e,yr=null}(t,i),t.__dataProto&&Object.assign(t.__data,t.__dataProto),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties()}}function Tr(t,e){return function(t,n,s){e.call(t.__templatizeOwner,n.substring("_host_".length),s[n])}}function Or(t,e){return function(t,n,s){e.call(t.__templatizeOwner,t,n,s[n])}}function Nr(t,e,n){if(Yt&&!Pr(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(n=n||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let s=(e?e.constructor:Sr)._parseTemplate(t),i=s.templatizeInstanceClass;i||(i=xr(t,s,n),s.templatizeInstanceClass=i),Er(t,s,n);let r=class extends i{};return r.prototype._methodHost=Pr(t),r.prototype.__dataHost=t,r.prototype.__templatizeOwner=e,r.prototype.__hostProps=s.hostProps,r=r}function Ar(t,e){let n;for(;e;)if(n=e.__templatizeInstance){if(n.__dataHost==t)return n;e=n.__dataHost}else e=Ee(e).parentNode;return null}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Rr=!1;function kr(){if(Wt&&!qt){if(!Rr){Rr=!0;const t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ir=Ls(fr(Hn(HTMLElement)));customElements.define("dom-bind",class extends Ir{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),Yt)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(t,e,n,s){this.mutableData=!0}connectedCallback(){kr()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){Ee(Ee(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let t=0;t<this.__children.length;t++)this.root.appendChild(this.__children[t])}render(){let t;if(!this.__children){if(!(t=t||this.querySelector("template"))){let e=new MutationObserver(()=>{if(!(t=this.querySelector("template")))throw new Error("dom-bind requires a <template> child");e.disconnect(),this.render()});return void e.observe(this,{childList:!0})}this.root=this._stampTemplate(t),this.$=this.root.$,this.__children=[];for(let t=this.root.firstChild;t;t=t.nextSibling)this.__children[this.__children.length]=t;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Mr=fr(Yn);class Dr extends Mr{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__limit=1/0,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),kr()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=Ee(Ee(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){let t=this.template=this.querySelector("template");if(!t){let t=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");t.disconnect(),this.__render()});return t.observe(this,{childList:!0}),!1}let e={};e[this.as]=!0,e[this.indexAs]=!0,e[this.itemsIndexAs]=!0,this.__ctor=Nr(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:e,forwardHostProp:function(t,e){let n=this.__instances;for(let s,i=0;i<n.length&&(s=n[i]);i++)s.forwardHostProp(t,e)},notifyInstanceProp:function(t,e,n){if(function(t,e){return t===e||Ne(t,e)||Ae(t,e)}(this.as,e)){let s=t[this.itemsIndexAs];e==this.as&&(this.items[s]=n);let i=Re(this.as,`${JSCompiler_renameProperty("items",this)}.${s}`,e);this.notifyPath(i,n)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if("string"==typeof t){let e=t,n=this.__getMethodHost();return function(){return n[e].apply(n,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let t=performance.now(),e=this._targetFrameTime/(t-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*e)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=t,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let n=0;n<e.length;n++)0===t.indexOf(e[n])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__debounceRender(t,e=0){this.__renderDebouncer=Jn.debounce(this.__renderDebouncer,e>0?Ye.after(e):We,t.bind(this)),Xn(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Ji()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let t=this.items||[],e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=n;this.__filterFn&&(e=e.filter((e,n,s)=>this.__filterFn(t[e],n,s))),this.__sortFn&&e.sort((e,n)=>this.__sortFn(t[e],t[n]));const n=this.__itemsIdxToInstIdx={};let s=0;const i=Math.min(e.length,this.__limit);for(;s<i;s++){let i=this.__instances[s],r=e[s],o=t[r];n[r]=s,i?(i._setPendingProperty(this.as,o),i._setPendingProperty(this.indexAs,s),i._setPendingProperty(this.itemsIndexAs,r),i._flushProperties()):this.__insertInstance(o,s,r)}for(let t=this.__instances.length-1;t>=s;t--)this.__detachAndRemoveInstance(t)}__detachInstance(t){let e=this.__instances[t];const n=Ee(e.root);for(let t=0;t<e.children.length;t++){let s=e.children[t];n.appendChild(s)}return e}__attachInstance(t,e){let n=this.__instances[t];e.insertBefore(n.root,this)}__detachAndRemoveInstance(t){let e=this.__detachInstance(t);e&&this.__pool.push(e),this.__instances.splice(t,1)}__stampInstance(t,e,n){let s={};return s[this.as]=t,s[this.indexAs]=e,s[this.itemsIndexAs]=n,new this.__ctor(s)}__insertInstance(t,e,n){let s=this.__pool.pop();s?(s._setPendingProperty(this.as,t),s._setPendingProperty(this.indexAs,e),s._setPendingProperty(this.itemsIndexAs,n),s._flushProperties()):s=this.__stampInstance(t,e,n);let i=this.__instances[e+1],r=i?i.children[0]:this;return Ee(Ee(this).parentNode).insertBefore(s.root,r),this.__instances[e]=s,s}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let n=t.slice(6),s=n.indexOf("."),i=s<0?n:n.substring(0,s);if(i==parseInt(i,10)){let t=s<0?"":n.substring(s+1);this.__handleObservedPaths(t);let r=this.__itemsIdxToInstIdx[i],o=this.__instances[r];if(o){let n=this.as+(t?"."+t:"");o._setPendingPropertyOrPath(n,e,!1,!0),o._flushProperties()}return!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return Ar(this.template,t)}}customElements.define(Dr.is,Dr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class zr extends Yn{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null,this.__hideTemplateChildren__=!1}__debounceRender(){this.__renderDebouncer=Jn.debounce(this.__renderDebouncer,We,()=>this.__render()),Xn(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=Ee(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Ee(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),kr()||(this.style.display="none"),this.if&&this.__debounceRender()}render(){Ji()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let t=Ee(this).parentNode;if(t){if(!this.__ctor){let t=Ee(this).querySelector("template");if(!t){let t=new MutationObserver(()=>{if(!Ee(this).querySelector("template"))throw new Error("dom-if requires a <template> child");t.disconnect(),this.__render()});return t.observe(this,{childList:!0}),!1}this.__ctor=Nr(t,this,{mutableData:!0,forwardHostProp:function(t,e){this.__instance&&(this.if?this.__instance.forwardHostProp(t,e):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Oe(t)]=!0))}})}if(this.__instance){this.__syncHostProperties();let e=this.__instance.children;if(e&&e.length){if(Ee(this).previousSibling!==e[e.length-1])for(let n,s=0;s<e.length&&(n=e[s]);s++)Ee(t).insertBefore(n,this)}}else this.__instance=new this.__ctor,Ee(t).insertBefore(this.__instance.root,this)}return!0}__syncHostProperties(){let t=this.__invalidProps;if(t){for(let e in t)this.__instance._setPendingProperty(e,this.__dataHost[e]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let e=Ee(t[0]).parentNode;if(e){e=Ee(e);for(let n,s=0;s<t.length&&(n=t[s]);s++)e.removeChild(n)}}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let t=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(t)}}customElements.define(zr.is,zr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Lr,Fr=xe(t=>{let e=Un(t);return class extends e{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(t,e){let n=e.path;if(n==JSCompiler_renameProperty("items",this)){let n=e.base||[],s=this.__lastItems;if(t!==this.__lastMulti&&this.clearSelection(),s){let t=$s(n,s);this.__applySplices(t)}this.__lastItems=n,this.__lastMulti=t}else if(e.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(e.value.indexSplices);else{let t=n.slice(`${JSCompiler_renameProperty("items",this)}.`.length),e=parseInt(t,10);t.indexOf(".")<0&&t==e&&this.__deselectChangedIdx(e)}}__applySplices(t){let e=this.__selectedMap;for(let n=0;n<t.length;n++){let s=t[n];e.forEach((t,n)=>{t<s.index||(t>=s.index+s.removed.length?e.set(n,t+s.addedCount-s.removed.length):e.set(n,-1))});for(let t=0;t<s.addedCount;t++){let n=s.index+t;e.has(this.items[n])&&e.set(this.items[n],n)}}this.__updateLinks();let n=0;e.forEach((t,s)=>{t<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null,e.delete(s)):n++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let t=0;this.__selectedMap.forEach(e=>{e>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${e}`,`${JSCompiler_renameProperty("selected",this)}.${t++}`)})}else this.__selectedMap.forEach(t=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${t}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${t}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(t){return this.__selectedMap.has(t)}isIndexSelected(t){return this.isSelected(this.items[t])}__deselectChangedIdx(t){let e=this.__selectedIndexForItemIndex(t);if(e>=0){let t=0;this.__selectedMap.forEach((n,s)=>{e==t++&&this.deselect(s)})}}__selectedIndexForItemIndex(t){let e=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${t}`];if(e)return parseInt(e.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(t){let e=this.__selectedMap.get(t);if(e>=0){let n;this.__selectedMap.delete(t),this.multi&&(n=this.__selectedIndexForItemIndex(e)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),n,1):this.selected=this.selectedItem=null}}deselectIndex(t){this.deselect(this.items[t])}select(t){this.selectIndex(this.items.indexOf(t))}selectIndex(t){let e=this.items[t];this.isSelected(e)?this.toggle&&this.deselectIndex(t):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(e,t),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),e):this.selected=this.selectedItem=e)}}})(Yn);class Hr extends Fr{static get is(){return"array-selector"}static get template(){return null}}customElements.define(Hr.is,Hr),Lr=mr._mutablePropertyChange;Boolean,or(HTMLElement).prototype;
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
var jr=new Set;const Vr={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(jr.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(t){this.resizerShouldNotify(t)&&this._notifyDescendant(t)},this),this._fireResize())},assignParentResizable:function(t){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=t,t&&-1===t._interestedResizables.indexOf(this)&&(t._interestedResizables.push(this),t._subscribeIronResize(this))},stopResizeNotificationsFor:function(t){var e=this._interestedResizables.indexOf(t);e>-1&&(this._interestedResizables.splice(e,1),this._unsubscribeIronResize(t))},_subscribeIronResize:function(t){t.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(t){t.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(t){return!0},_onDescendantIronResize:function(t){this._notifyingDescendant?t.stopPropagation():qt||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(t){var e=er(t).rootTarget;e!==this&&(e.assignParentResizable(this),this._notifyDescendant(e),t.stopPropagation())},_parentResizableChanged:function(t){t&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(t){this.isAttached&&(this._notifyingDescendant=!0,t.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var t=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function e(){document.removeEventListener("readystatechange",e),t()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(t){t!==this&&t._findParent()},this):(jr.forEach(function(t){t!==this&&t._findParent()},this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?jr.delete(this):jr.add(this)}},qr=t=>(class extends t{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),"theme"===t&&this._setTheme(n)}}),Br=t=>(class extends(qr(t)){static finalize(){super.finalize();const t=this.prototype._template,e=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,n=Object.getPrototypeOf(this.prototype)._template;n&&!e&&Array.from(n.content.querySelectorAll("style[include]")).forEach(e=>{this._includeStyle(e.getAttribute("include"),t)}),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const e=ee.prototype.modules;let n=!1;const s=this.is+"-default-theme";Object.keys(e).sort((t,e)=>{const n=0===t.indexOf("vaadin-"),s=0===e.indexOf("vaadin-"),i=["lumo-","material-"],r=i.filter(e=>0===t.indexOf(e)).length>0,o=i.filter(t=>0===e.indexOf(t)).length>0;return n!==s?n?-1:1:r!==o?r?-1:1:0}).forEach(i=>{if(i!==s){const s=e[i].getAttribute("theme-for");s&&s.split(" ").forEach(e=>{new RegExp("^"+e.split("*").join(".*")+"$").test(this.is)&&(n=!0,this._includeStyle(i,t))})}}),!n&&e[s]&&this._includeStyle(s,t)}static _includeStyle(t,e){if(e&&!e.content.querySelector(`style[include="${t}"]`)){const n=document.createElement("style");n.setAttribute("include",t),e.content.appendChild(n)}}}),$r=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Ur=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function Yr(t,e){if("function"!=typeof t)return;const n=$r.exec(t.toString());if(n)try{t=new Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};const Jr=function(t,e){if(window.Vaadin.developmentMode)return Yr(t,e)};function Wr(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(Ur?!function(){if(Ur){const t=Object.keys(Ur).map(t=>Ur[t]).filter(t=>t.productionMode);if(t.length>0)return!0}return!1}():!Yr(function(){return!0}))}catch(t){return!1}}());const Xr=function(){return Jr(Wr)};let Gr;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Xr&&Xr()};const Zr=new Set,Kr=t=>(class extends t{static finalize(){super.finalize();const{is:t}=this;t&&!Zr.has(t)&&(window.Vaadin.registrations.push(this),Zr.add(t),window.Vaadin.developmentModeCallback&&(Gr=Jn.debounce(Gr,Je,()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()}),Xn(Gr)))}constructor(){super(),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}});
/**
@license
Copyright (c) 2016 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Qr extends(Kr(Br(Ls(function(t,e){return ur({},or(e),t)}([Vr],Yn))))){static get template(){return we`
    <style>
      :host {
        display: flex;
        overflow: hidden !important;
        transform: translateZ(0);
      }

      :host([hidden]) {
        display: none !important;
      }

      :host([orientation="vertical"]) {
        flex-direction: column;
      }

      :host ::slotted(*) {
        flex: 1 1 auto;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
      }

      [part="splitter"] {
        flex: none;
        position: relative;
        z-index: 1;
        overflow: visible;
        min-width: 8px;
        min-height: 8px;
      }

      :host(:not([orientation="vertical"])) > [part="splitter"] {
        cursor: ew-resize;
      }

      :host([orientation="vertical"]) > [part="splitter"] {
        cursor: ns-resize;
      }

      [part="handle"] {
        width: 40px;
        height: 40px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate3d(-50%, -50%, 0);
      }
    </style>
    <slot id="primary" name="primary"></slot>
    <div part="splitter" id="splitter" on-track="_onHandleTrack" on-down="_setPointerEventsNone" on-up="_restorePointerEvents">
      <div part="handle"></div>
    </div>
    <slot id="secondary" name="secondary"></slot>

    <div hidden="">
      <!-- Workaround to fix a Shady style scoping issue caused by dynamic slot naming of the child elements (primary/secondary) -->
      <slot></slot>
    </div>
`}static get is(){return"vaadin-split-layout"}static get version(){return"4.1.1"}static get properties(){return{orientation:{type:String,reflectToAttribute:!0,value:"horizontal"},_previousPrimaryPointerEvents:String,_previousSecondaryPointerEvents:String}}ready(){super.ready(),new Js(this,this._processChildren)}_processChildren(){this.getEffectiveChildren().forEach((t,e)=>{0===e?(this._primaryChild=t,t.setAttribute("slot","primary")):1==e?(this._secondaryChild=t,t.setAttribute("slot","secondary")):t.removeAttribute("slot")})}_setFlexBasis(t,e,n){0===(e=Math.max(0,Math.min(e,n)))&&(e=1e-6),t.style.flex="1 1 "+e+"px"}_setPointerEventsNone(t){this._primaryChild&&this._secondaryChild&&(this._previousPrimaryPointerEvents=this._primaryChild.style.pointerEvents,this._previousSecondaryPointerEvents=this._secondaryChild.style.pointerEvents,this._primaryChild.style.pointerEvents="none",this._secondaryChild.style.pointerEvents="none",t.preventDefault())}_restorePointerEvents(){this._primaryChild&&this._secondaryChild&&(this._primaryChild.style.pointerEvents=this._previousPrimaryPointerEvents,this._secondaryChild.style.pointerEvents=this._previousSecondaryPointerEvents)}_onHandleTrack(t){if(this._primaryChild&&this._secondaryChild){var e="vertical"===this.orientation?"height":"width";if("start"!==t.detail.state){var n="vertical"===this.orientation?t.detail.dy:t.detail.dx;this._setFlexBasis(this._primaryChild,this._startSize.primary+n,this._startSize.container),this._setFlexBasis(this._secondaryChild,this._startSize.secondary-n,this._startSize.container),this.notifyResize(),"end"===t.detail.state&&(this.dispatchEvent(new CustomEvent("splitter-dragend")),delete this._startSize)}else this._startSize={container:this.getBoundingClientRect()[e]-this.$.splitter.getBoundingClientRect()[e],primary:this._primaryChild.getBoundingClientRect()[e],secondary:this._secondaryChild.getBoundingClientRect()[e]}}}}customElements.define(Qr.is,Qr),window.addEventListener("load",()=>{!async function(){if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("./sw.js")}catch(t){console.log("ServiceWorker registration failed. Sorry about that.",t)}else console.log("Your browser does not support ServiceWorker.")}()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kaXJlY3RpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9wYXJ0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLXJlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3BhcnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL21vZGlmeS10ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvbGl0LWVsZW1lbnQvbGliL3VwZGF0aW5nLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2xpdC1lbGVtZW50L2xpYi9kZWNvcmF0b3JzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9saXQtZWxlbWVudC9saWIvY3NzLXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvbGl0LWVsZW1lbnQvbGl0LWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL0JUTEVjbGFzcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3MvbWFpbi12aWV3LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdmFhZGluL3ZhYWRpbi1sdW1vLXN0eWxlcy92ZXJzaW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvZG9jdW1lbnQtd2FpdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2N1c3RvbS1zdHlsZS1pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9jb21tb24tcmVnZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9jb21tb24tdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9zdHlsZS1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3MvZW50cnlwb2ludHMvY3VzdG9tLXN0eWxlLWludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvYm9vdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvcmVzb2x2ZS11cmwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3NldHRpbmdzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9lbGVtZW50cy9kb20tbW9kdWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9zdHlsZS1nYXRoZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2N1c3RvbS1zdHlsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tbHVtby1zdHlsZXMvY29sb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B2YWFkaW4vdmFhZGluLWx1bW8tc3R5bGVzL3NpemluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tbHVtby1zdHlsZXMvc3BhY2luZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tbHVtby1zdHlsZXMvc3R5bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdmFhZGluL3ZhYWRpbi1zcGxpdC1sYXlvdXQvdGhlbWUvbHVtby92YWFkaW4tc3BsaXQtbGF5b3V0LXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvbWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3dyYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2Nhc2UtbWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9hc3luYy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL3Byb3BlcnRpZXMtY2hhbmdlZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL3Byb3BlcnR5LWFjY2Vzc29ycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL3RlbXBsYXRlLXN0YW1wLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvcHJvcGVydHktZWZmZWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvdGVsZW1ldHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvcHJvcGVydGllcy1taXhpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL2VsZW1lbnQtbWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvZ2VzdHVyZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9nZXN0dXJlLWV2ZW50LWxpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvYXJyYXktc3BsaWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9mbGF0dGVuZWQtbm9kZXMtb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9jc3MtcGFyc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy91bnNjb3BlZC1zdHlsZS1oYW5kbGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvc3R5bGUtdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2FwcGx5LXNoaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy90ZW1wbGF0ZS1tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9hcHBseS1zaGltLXV0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9lbnRyeXBvaW50cy9hcHBseS1zaGltLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvZGlyLW1peGluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy91bnJlc29sdmVkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9mbHVzaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXIuZG9tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9zY29wZS1zdWJ0cmVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvbGVnYWN5LWVsZW1lbnQtbWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9jbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXItZm4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9tdXRhYmxlLWRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3RlbXBsYXRpemUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2hpZGUtdGVtcGxhdGUtY29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2RvbS1iaW5kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9lbGVtZW50cy9kb20tcmVwZWF0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9lbGVtZW50cy9kb20taWYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2FycmF5LXNlbGVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvbXV0YWJsZS1kYXRhLWJlaGF2aW9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcG9seW1lci9pcm9uLXJlc2l6YWJsZS1iZWhhdmlvci9pcm9uLXJlc2l6YWJsZS1iZWhhdmlvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tdGhlbWFibGUtbWl4aW4vdmFhZGluLXRoZW1lLXByb3BlcnR5LW1peGluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdmFhZGluL3ZhYWRpbi10aGVtYWJsZS1taXhpbi92YWFkaW4tdGhlbWFibGUtbWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B2YWFkaW4vdmFhZGluLWRldmVsb3BtZW50LW1vZGUtZGV0ZWN0b3IvdmFhZGluLWRldmVsb3BtZW50LW1vZGUtZGV0ZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B2YWFkaW4vdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MvdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MtY29sbGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tZWxlbWVudC1taXhpbi92YWFkaW4tZWxlbWVudC1taXhpbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHZhYWRpbi92YWFkaW4tc3BsaXQtbGF5b3V0L3NyYy92YWFkaW4tc3BsaXQtbGF5b3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImRpcmVjdGl2ZXMiLCJXZWFrTWFwIiwiaXNEaXJlY3RpdmUiLCJoYXMiLCJpc0NFUG9seWZpbGwiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJjdXN0b21FbGVtZW50cyIsInBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2siLCJyZW1vdmVOb2RlcyIsImNvbnRhaW5lciIsInN0YXJ0IiwiZW5kIiwibmV4dFNpYmxpbmciLCJyZW1vdmVDaGlsZCIsIm5vQ2hhbmdlIiwibm90aGluZyIsIm1hcmtlciIsIlN0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsIm5vZGVNYXJrZXIiLCJtYXJrZXJSZWdleCIsIlJlZ0V4cCIsImJvdW5kQXR0cmlidXRlU3VmZml4IiwiVGVtcGxhdGUiLCJbb2JqZWN0IE9iamVjdF0iLCJyZXN1bHQiLCJlbGVtZW50IiwidGhpcyIsInBhcnRzIiwibm9kZXNUb1JlbW92ZSIsInN0YWNrIiwid2Fsa2VyIiwiZG9jdW1lbnQiLCJjcmVhdGVUcmVlV2Fsa2VyIiwiY29udGVudCIsImxhc3RQYXJ0SW5kZXgiLCJpbmRleCIsInBhcnRJbmRleCIsInN0cmluZ3MiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJub2RlIiwibmV4dE5vZGUiLCJub2RlVHlwZSIsImhhc0F0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiY291bnQiLCJlbmRzV2l0aCIsInN0cmluZ0ZvclBhcnQiLCJsYXN0QXR0cmlidXRlTmFtZVJlZ2V4IiwiZXhlYyIsImF0dHJpYnV0ZUxvb2t1cE5hbWUiLCJ0b0xvd2VyQ2FzZSIsImF0dHJpYnV0ZVZhbHVlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic3RhdGljcyIsInNwbGl0IiwicHVzaCIsInR5cGUiLCJ0YWdOYW1lIiwiY3VycmVudE5vZGUiLCJkYXRhIiwiaW5kZXhPZiIsInBhcmVudCIsInBhcmVudE5vZGUiLCJsYXN0SW5kZXgiLCJpbnNlcnQiLCJjcmVhdGVNYXJrZXIiLCJtYXRjaCIsImNyZWF0ZVRleHROb2RlIiwiaW5zZXJ0QmVmb3JlIiwicHJldmlvdXNTaWJsaW5nIiwicG9wIiwic3RyIiwic3VmZml4IiwiaXNUZW1wbGF0ZVBhcnRBY3RpdmUiLCJwYXJ0IiwiY3JlYXRlQ29tbWVudCIsInRlbXBsYXRlX2luc3RhbmNlX1RlbXBsYXRlSW5zdGFuY2UiLCJ0ZW1wbGF0ZSIsInByb2Nlc3NvciIsIm9wdGlvbnMiLCJfX3BhcnRzIiwic2V0VmFsdWUiLCJjb21taXQiLCJmcmFnbWVudCIsImNsb25lTm9kZSIsImltcG9ydE5vZGUiLCJub2RlSW5kZXgiLCJub2RlTmFtZSIsImhhbmRsZVRleHRFeHByZXNzaW9uIiwiaW5zZXJ0QWZ0ZXJOb2RlIiwiaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMiLCJhZG9wdE5vZGUiLCJ1cGdyYWRlIiwiY29tbWVudE1hcmtlciIsInRlbXBsYXRlX3Jlc3VsdF9UZW1wbGF0ZVJlc3VsdCIsImh0bWwiLCJpc0NvbW1lbnRCaW5kaW5nIiwiY29tbWVudE9wZW4iLCJsYXN0SW5kZXhPZiIsImF0dHJpYnV0ZU1hdGNoIiwic3Vic3RyIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImdldEhUTUwiLCJpc1ByaW1pdGl2ZSIsImlzSXRlcmFibGUiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVyYXRvciIsIkF0dHJpYnV0ZUNvbW1pdHRlciIsImRpcnR5IiwiX2NyZWF0ZVBhcnQiLCJwYXJ0c19BdHRyaWJ1dGVQYXJ0IiwidGV4dCIsInYiLCJzZXRBdHRyaWJ1dGUiLCJfZ2V0VmFsdWUiLCJjb21taXR0ZXIiLCJkaXJlY3RpdmUiLCJwYXJ0c19Ob2RlUGFydCIsIl9fcGVuZGluZ1ZhbHVlIiwic3RhcnROb2RlIiwiYXBwZW5kQ2hpbGQiLCJlbmROb2RlIiwicmVmIiwiX19pbnNlcnQiLCJfX2NvbW1pdFRleHQiLCJfX2NvbW1pdFRlbXBsYXRlUmVzdWx0IiwiTm9kZSIsIl9fY29tbWl0Tm9kZSIsIl9fY29tbWl0SXRlcmFibGUiLCJjbGVhciIsInZhbHVlQXNTdHJpbmciLCJ0ZW1wbGF0ZUZhY3RvcnkiLCJ1cGRhdGUiLCJpbnN0YW5jZSIsIl9jbG9uZSIsIml0ZW1QYXJ0cyIsIml0ZW1QYXJ0IiwiaXRlbSIsImFwcGVuZEludG9QYXJ0IiwiaW5zZXJ0QWZ0ZXJQYXJ0IiwicGFydHNfQm9vbGVhbkF0dHJpYnV0ZVBhcnQiLCJFcnJvciIsIlByb3BlcnR5Q29tbWl0dGVyIiwic3VwZXIiLCJzaW5nbGUiLCJQcm9wZXJ0eVBhcnQiLCJldmVudE9wdGlvbnNTdXBwb3J0ZWQiLCJjYXB0dXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfZSIsInBhcnRzX0V2ZW50UGFydCIsImV2ZW50TmFtZSIsImV2ZW50Q29udGV4dCIsIl9fYm91bmRIYW5kbGVFdmVudCIsImUiLCJoYW5kbGVFdmVudCIsIm5ld0xpc3RlbmVyIiwib2xkTGlzdGVuZXIiLCJzaG91bGRSZW1vdmVMaXN0ZW5lciIsIm9uY2UiLCJwYXNzaXZlIiwic2hvdWxkQWRkTGlzdGVuZXIiLCJfX29wdGlvbnMiLCJnZXRPcHRpb25zIiwiZXZlbnQiLCJkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IiLCJwcmVmaXgiLCJ0ZW1wbGF0ZUNhY2hlIiwidGVtcGxhdGVDYWNoZXMiLCJzdHJpbmdzQXJyYXkiLCJrZXlTdHJpbmciLCJNYXAiLCJzZXQiLCJqb2luIiwiZ2V0VGVtcGxhdGVFbGVtZW50IiwicmVuZGVyX3BhcnRzIiwibGl0X2h0bWxfaHRtbCIsIndhbGtlck5vZGVGaWx0ZXIiLCJyZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSIsIm5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyIsInJlbW92ZUNvdW50Iiwibm9kZXNUb1JlbW92ZUluVGVtcGxhdGUiLCJjdXJyZW50UmVtb3ZpbmdOb2RlIiwiZm9yRWFjaCIsImNvdW50Tm9kZXMiLCJzdGFydEluZGV4IiwiZ2V0VGVtcGxhdGVDYWNoZUtleSIsInNjb3BlTmFtZSIsImNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24iLCJTaGFkeUNTUyIsInByZXBhcmVUZW1wbGF0ZURvbSIsImNvbnNvbGUiLCJ3YXJuIiwiVEVNUExBVEVfVFlQRVMiLCJzaGFkeVJlbmRlclNldCIsIlNldCIsInByZXBhcmVUZW1wbGF0ZVN0eWxlcyIsInJlbmRlcmVkRE9NIiwiYWRkIiwidGVtcGxhdGVFbGVtZW50Iiwic3R5bGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbmRlbnNlZFN0eWxlIiwic3R5bGUiLCJ0ZXh0Q29udGVudCIsInRlbXBsYXRlcyIsImZyb20iLCJyZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzIiwicmVmTm9kZSIsImluc2VydENvdW50Iiwid2Fsa2VySW5kZXgiLCJpbnNlcnROb2RlSW50b1RlbXBsYXRlIiwiZmlyc3RDaGlsZCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXRpdmVTaGFkb3ciLCJyZW1vdmVzIiwidXBkYXRpbmdfZWxlbWVudF9KU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5IiwicHJvcCIsIl9vYmoiLCJkZXNjcmlwdG9yRnJvbVByb3RvdHlwZSIsInByb3RvIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0UHJvdG90eXBlT2YiLCJkZWZhdWx0Q29udmVydGVyIiwiQm9vbGVhbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJOdW1iZXIiLCJwYXJzZSIsIm5vdEVxdWFsIiwib2xkIiwiZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24iLCJhdHRyaWJ1dGUiLCJjb252ZXJ0ZXIiLCJyZWZsZWN0IiwiaGFzQ2hhbmdlZCIsIm1pY3JvdGFza1Byb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsIlNUQVRFX0hBU19VUERBVEVEIiwiU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCIsIlNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFIiwiU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSIsIlNUQVRFX0hBU19DT05ORUNURUQiLCJVcGRhdGluZ0VsZW1lbnQiLCJIVE1MRWxlbWVudCIsIl91cGRhdGVTdGF0ZSIsIl9pbnN0YW5jZVByb3BlcnRpZXMiLCJfdXBkYXRlUHJvbWlzZSIsIl9oYXNDb25uZWN0ZWRSZXNvbHZlciIsIl9jaGFuZ2VkUHJvcGVydGllcyIsIl9yZWZsZWN0aW5nUHJvcGVydGllcyIsImluaXRpYWxpemUiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJfZmluYWxpemUiLCJfY2xhc3NQcm9wZXJ0aWVzIiwiYXR0ciIsIl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkiLCJfYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCIsInN1cGVyUHJvcGVydGllcyIsImsiLCJfZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzIiwibm9BY2Nlc3NvciIsInN1cGVyRGVzYyIsImRlc2MiLCJvbGRWYWx1ZSIsInJlcXVlc3RVcGRhdGUiLCJjb25maWd1cmFibGUiLCJmaW5hbGl6ZWQiLCJzdXBlckN0b3IiLCJwcm9wcyIsInByb3BlcnRpZXMiLCJwcm9wS2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJjcmVhdGVQcm9wZXJ0eSIsImZyb21BdHRyaWJ1dGUiLCJ0b0F0dHJpYnV0ZSIsIl9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzIiwiY29uc3RydWN0b3IiLCJfYXR0cmlidXRlVG9Qcm9wZXJ0eSIsImN0b3IiLCJhdHRyVmFsdWUiLCJfcHJvcGVydHlWYWx1ZVRvQXR0cmlidXRlIiwicHJvcE5hbWUiLCJfcHJvcGVydHlWYWx1ZUZyb21BdHRyaWJ1dGUiLCJzaG91bGRSZXF1ZXN0VXBkYXRlIiwiX3ZhbHVlSGFzQ2hhbmdlZCIsIl9oYXNSZXF1ZXN0ZWRVcGRhdGUiLCJfZW5xdWV1ZVVwZGF0ZSIsInVwZGF0ZUNvbXBsZXRlIiwicHJldmlvdXNVcGRhdGVQcm9taXNlIiwicmVzIiwiX2hhc0Nvbm5lY3RlZCIsInBlcmZvcm1VcGRhdGUiLCJ0aGVuIiwiaGFzVXBkYXRlZCIsIl9hcHBseUluc3RhbmNlUHJvcGVydGllcyIsInNob3VsZFVwZGF0ZSIsImNoYW5nZWRQcm9wZXJ0aWVzIiwiX21hcmtVcGRhdGVkIiwiZmlyc3RVcGRhdGVkIiwidXBkYXRlZCIsInNpemUiLCJfcHJvcGVydHlUb0F0dHJpYnV0ZSIsInN0YW5kYXJkUHJvcGVydHkiLCJraW5kIiwicGxhY2VtZW50IiwiZGVzY3JpcHRvciIsImluaXRpYWxpemVyIiwiY2xhenoiLCJkZWNvcmF0b3JzX3Byb3BlcnR5IiwicHJvdG9PckRlc2NyaXB0b3IiLCJsZWdhY3lQcm9wZXJ0eSIsImxlZ2FjeVF1ZXJ5IiwiX3F1ZXJ5IiwidGFyZ2V0Iiwic2VsZWN0b3IiLCJzdGFuZGFyZFF1ZXJ5IiwicXVlcnlGbiIsInJlbmRlclJvb3QiLCJzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMiLCJEb2N1bWVudCIsImxpdF9lbGVtZW50X0xpdEVsZW1lbnQiLCJfdW5pcXVlU3R5bGVzIiwiX3N0eWxlcyIsInN0eWxlU2V0IiwicmVkdWNlUmlnaHQiLCJ1bnNoaWZ0IiwiY3JlYXRlUmVuZGVyUm9vdCIsIlNoYWRvd1Jvb3QiLCJhZG9wdFN0eWxlcyIsImF0dGFjaFNoYWRvdyIsImFkb3B0ZWRTdHlsZVNoZWV0cyIsIm1hcCIsInN0eWxlU2hlZXQiLCJfbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzIiwiU2NvcGluZ1NoaW0iLCJwcmVwYXJlQWRvcHRlZENzc1RleHQiLCJjc3NUZXh0IiwibG9jYWxOYW1lIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJzdHlsZUVsZW1lbnQiLCJ0ZW1wbGF0ZVJlc3VsdCIsInJlbmRlciIsIkJsdWV0b290aEdhdHRTdGF0ZSIsImhhc1JlbmRlcmVkIiwibmVlZHNTY29waW5nIiwiaG9zdCIsImZpcnN0U2NvcGVSZW5kZXIiLCJyZW5kZXJDb250YWluZXIiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXNzaWduIiwiYXBwZW5kSW50byIsImNhY2hlS2V5Iiwic2hhZHlUZW1wbGF0ZUZhY3RvcnkiLCJkZWxldGUiLCJtYWluX3ZpZXdfTFNHX2JsdWV0b290aCIsImNvbm5lY3RlZFN0ciIsImNvbm5lY3RlZCIsImJ1dHRvbkNvbG91ciIsImJ1dHRvblBvaW50ZXIiLCJibHVldG9vdGhEZXZpY2UiLCJibHVldG9vdGhHYXR0IiwiY29uc3RyIiwiY29ubmVjdCIsImRpc2Nvbm5lY3QiLCJuYXZpZ2F0b3IiLCJibHVldG9vdGgiLCJyZXF1ZXN0RGV2aWNlIiwiZmlsdGVycyIsInNlcnZpY2VzIiwib3B0aW9uYWxTZXJ2aWNlcyIsImNhbGxpbmdDbGFzcyIsImNhbGxiYWNrZnVuY3Rpb24iLCJjb25uZWN0aW9uU3RyIiwibWF4cmV0cnkiLCJzdGF0ZSIsIkRpc2Nvbm5lY3RlZCIsImNhbGxiYWNrIiwibG9nU3RyIiwibG9nIiwibmV3U3RhdGUiLCJsb2dzdHIiLCJDb25uZWN0aW5nIiwiRGlzY29ubmVjdGluZyIsIkNvbm5lY3RlZCIsImNvbm5lY3RpdCIsInNldFN0YXRlIiwic2V0VGltZW91dCIsImNsYXNzSW5zdGFuY2UiLCJnYXR0IiwiZXJyb3IiLCJ0aW1lb3V0IiwiYmx1ZXRvb3RoQ2FsbGJhY2siLCJvbkRpc2Nvbm5lY3RlZCIsIl9fZGVjb3JhdGUiLCJjbGFzc09yRGVzY3JpcHRvciIsImRlZmluZSIsImxlZ2FjeUN1c3RvbUVsZW1lbnQiLCJlbGVtZW50cyIsInN0YW5kYXJkQ3VzdG9tRWxlbWVudCIsImN1c3RvbUVsZW1lbnQiLCJ2ZXJzaW9uIiwicmVzb2x2ZUZuIiwicmVhZHlQcm9taXNlIiwid2hlblJlYWR5IiwiZG9jdW1lbnRXYWl0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVhZHlTdGF0ZSIsIlNFRU5fTUFSS0VSIiwiQ0FDSEVEX1NUWUxFIiwidHJhbnNmb3JtRm4iLCJ2YWxpZGF0ZUZuIiwiY3VzdG9tX3N0eWxlX2ludGVyZmFjZV9DdXN0b21TdHlsZUludGVyZmFjZSIsImVucXVldWVEb2N1bWVudFZhbGlkYXRpb24iLCJjdXN0b21TdHlsZSIsImNzIiwiZ2V0U3R5bGVGb3JDdXN0b21TdHlsZSIsInN0eWxlVG9UcmFuc2Zvcm0iLCJhZGRDdXN0b21TdHlsZSIsInByb2Nlc3NTdHlsZXMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidHJhbnNmb3JtQ2FsbGJhY2siLCJmbiIsInZhbGlkYXRlQ2FsbGJhY2siLCJuZWVkc0VucXVldWUiLCJWQVJfQVNTSUdOIiwiTUlYSU5fTUFUQ0giLCJNRURJQV9NQVRDSCIsInVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ0cmltIiwibmF0aXZlQ3NzVmFyaWFibGVzXyIsInN0eWxlX3NldHRpbmdzX2Nzc0J1aWxkIiwiY2FsY0Nzc1ZhcmlhYmxlcyIsInNldHRpbmdzIiwidXNlckFnZW50IiwiQ1NTIiwic3VwcG9ydHMiLCJjc3NCdWlsZCIsImRpc2FibGVSdW50aW1lIiwibmF0aXZlQ3NzIiwibmF0aXZlQ3NzVmFyaWFibGVzIiwiY3VzdG9tU3R5bGVJbnRlcmZhY2UiLCJlbGVtZW50TmFtZSIsImVsZW1lbnRFeHRlbmRzIiwiYm9keSIsIkN1c3RvbVN0eWxlSW50ZXJmYWNlIiwiSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSIsIm9iaiIsIndvcmtpbmdVUkwiLCJyZXNvbHZlRG9jIiwiQ1NTX1VSTF9SWCIsIkFCU19VUkwiLCJyZXNvbHZlVXJsIiwidXJsIiwiYmFzZVVSSSIsInRlc3QiLCJ1IiwiVVJMIiwicGF0aG5hbWUiLCJocmVmIiwibG9jYXRpb24iLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImJhc2UiLCJoZWFkIiwiYW5jaG9yIiwicmVzb2x2ZUNzcyIsInJlcGxhY2UiLCJwcmUiLCJwb3N0IiwicGF0aEZyb21VcmwiLCJzdWJzdHJpbmciLCJ1c2VTaGFkb3ciLCJyb290UGF0aCIsInNhbml0aXplRE9NVmFsdWUiLCJQb2x5bWVyIiwicGFzc2l2ZVRvdWNoR2VzdHVyZXMiLCJzdHJpY3RUZW1wbGF0ZVBvbGljeSIsImFsbG93VGVtcGxhdGVGcm9tRG9tTW9kdWxlIiwibGVnYWN5T3B0aW1pemF0aW9ucyIsInN5bmNJbml0aWFsUmVuZGVyIiwiY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMiLCJkb21fbW9kdWxlX21vZHVsZXMiLCJsY01vZHVsZXMiLCJzZXRNb2R1bGUiLCJpZCIsImZpbmRNb2R1bGUiLCJkb21fbW9kdWxlX0RvbU1vZHVsZSIsIm5hbWVzcGFjZSIsInJlZ2lzdGVyIiwiYXNzZXRwYXRoIiwiX19hc3NldHBhdGgiLCJvd25lciIsIkhUTUxJbXBvcnRzIiwiaW1wb3J0Rm9yRWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJpbnN0Iiwic3R5bGVPdXRzaWRlVGVtcGxhdGVDaGVjayIsIk1PRFVMRV9TVFlMRV9MSU5LX1NFTEVDVE9SIiwiSU5DTFVERV9BVFRSIiwiU0hBRFlfVU5TQ09QRURfQVRUUiIsImltcG9ydE1vZHVsZSIsImltcG9ydCIsInN0eWxlRm9ySW1wb3J0IiwiaW1wb3J0RG9jIiwiaW1wb3J0Q3NzIiwic3R5bGVzRnJvbU1vZHVsZXMiLCJtb2R1bGVJZHMiLCJzdHlsZXNGcm9tTW9kdWxlIiwiX3N0eWxlc0Zyb21Nb2R1bGVJbXBvcnRzIiwic3R5bGVzRnJvbVRlbXBsYXRlIiwiZSQiLCJpbmNsdWRlIiwiZmlsdGVyIiwic2VsZiIsInAkIiwidW5zY29wZWQiLCJoYXNBdHRyaWJ1dGUiLCJfdW5zY29wZWRTdHlsZSIsIl9zdHlsZSIsImNzc0Zyb21Nb2R1bGUiLCJfY3NzVGV4dCIsIl9jc3NGcm9tTW9kdWxlSW1wb3J0cyIsImNzc0Zyb21UZW1wbGF0ZSIsImN1c3RvbV9zdHlsZV9DdXN0b21TdHlsZUludGVyZmFjZSIsImNzc0Zyb21Nb2R1bGVzIiwiJF9kb2N1bWVudENvbnRhaW5lciIsInNpemluZ18kX2RvY3VtZW50Q29udGFpbmVyIiwic3BhY2luZ18kX2RvY3VtZW50Q29udGFpbmVyIiwic3R5bGVfJF9kb2N1bWVudENvbnRhaW5lciIsIkxpdGVyYWxTdHJpbmciLCJzdHJpbmciLCJ0b1N0cmluZyIsImxpdGVyYWxWYWx1ZSIsImh0bWxfdGFnX2h0bWwiLCJyZWR1Y2UiLCJhY2MiLCJpZHgiLCJIVE1MVGVtcGxhdGVFbGVtZW50IiwiaHRtbFZhbHVlIiwidmFhZGluX3NwbGl0X2xheW91dF9zdHlsZXNfJF9kb2N1bWVudENvbnRhaW5lciIsIm1peGluX2RlZHVwZUlkIiwiTWl4aW5GdW5jdGlvbiIsIl9fbWl4aW5BcHBsaWNhdGlvbnMiLCJfX21peGluU2V0IiwiZGVkdXBpbmdNaXhpbiIsIm1peGluIiwibWl4aW5BcHBsaWNhdGlvbnMiLCJtaXhpbkRlZHVwZUlkIiwiYmFzZVNldCIsImV4dGVuZGVkIiwibWl4aW5TZXQiLCJ3cmFwIiwiU2hhZHlET00iLCJpc1BhdGgiLCJwYXRoIiwicGF0aF9yb290IiwiZG90SW5kZXgiLCJpc0FuY2VzdG9yIiwiaXNEZXNjZW5kYW50IiwidHJhbnNsYXRlIiwibmV3QmFzZSIsIm5vcm1hbGl6ZSIsImFyZ3MiLCJqIiwicm9vdCIsImluZm8iLCJsYXN0IiwiY2FzZU1hcCIsIkRBU0hfVE9fQ0FNRUwiLCJDQU1FTF9UT19EQVNIIiwiZGFzaFRvQ2FtZWxDYXNlIiwiZGFzaCIsInRvVXBwZXJDYXNlIiwiY2FtZWxUb0Rhc2hDYXNlIiwiY2FtZWwiLCJtaWNyb3Rhc2tDdXJySGFuZGxlIiwibWljcm90YXNrTGFzdEhhbmRsZSIsIm1pY3JvdGFza0NhbGxiYWNrcyIsIm1pY3JvdGFza05vZGVDb250ZW50IiwibWljcm90YXNrTm9kZSIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJsZW4iLCJjYiIsInNwbGljZSIsIm9ic2VydmUiLCJjaGFyYWN0ZXJEYXRhIiwidGltZU91dCIsImFmdGVyIiwiZGVsYXkiLCJydW4iLCJoYW5kbGUiLCJjbGVhclRpbWVvdXQiLCJpZGxlUGVyaW9kIiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNhbmNlbElkbGVDYWxsYmFjayIsIm1pY3JvVGFzayIsIm1pY3JvdGFzayIsInByb3BlcnRpZXNfY2hhbmdlZF9Qcm9wZXJ0aWVzQ2hhbmdlZCIsInN1cGVyQ2xhc3MiLCJfY3JlYXRlUHJvcGVydHlBY2Nlc3NvciIsInJlYWRPbmx5IiwiX2FkZFByb3BlcnR5VG9BdHRyaWJ1dGVNYXAiLCJfX2RhdGFIYXNBY2Nlc3NvciIsIl9kZWZpbmVQcm9wZXJ0eUFjY2Vzc29yIiwiX19kYXRhQXR0cmlidXRlcyIsImF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eSIsIl9nZXRQcm9wZXJ0eSIsIl9zZXRQcm9wZXJ0eSIsIl9fZGF0YUVuYWJsZWQiLCJfX2RhdGFSZWFkeSIsIl9fZGF0YUludmFsaWQiLCJfX2RhdGEiLCJfX2RhdGFQZW5kaW5nIiwiX19kYXRhT2xkIiwiX19kYXRhSW5zdGFuY2VQcm9wcyIsIl9fc2VyaWFsaXppbmciLCJfaW5pdGlhbGl6ZVByb3BlcnRpZXMiLCJfZmx1c2hQcm9wZXJ0aWVzIiwiX3NldFBlbmRpbmdQcm9wZXJ0eSIsIl9pbnZhbGlkYXRlUHJvcGVydGllcyIsImV4dCIsImNoYW5nZWQiLCJfc2hvdWxkUHJvcGVydHlDaGFuZ2UiLCJfaW5pdGlhbGl6ZUluc3RhbmNlUHJvcGVydGllcyIsInJlYWR5IiwiY2hhbmdlZFByb3BzIiwiX3Nob3VsZFByb3BlcnRpZXNDaGFuZ2UiLCJfcHJvcGVydGllc0NoYW5nZWQiLCJjdXJyZW50UHJvcHMiLCJvbGRQcm9wcyIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsIl9kZXNlcmlhbGl6ZVZhbHVlIiwidHlwZUZvclByb3BlcnR5IiwiYXJndW1lbnRzIiwiX3ZhbHVlVG9Ob2RlQXR0cmlidXRlIiwiX3NlcmlhbGl6ZVZhbHVlIiwibmF0aXZlUHJvcGVydGllcyIsInByb3BlcnR5X2FjY2Vzc29yc19wcm90byIsInByb3BlcnR5X2FjY2Vzc29yc19Qcm9wZXJ0eUFjY2Vzc29ycyIsImEkIiwiX19kYXRhUHJvdG8iLCJfaW5pdGlhbGl6ZVByb3RvUHJvcGVydGllcyIsImVsIiwiRGF0ZSIsIngiLCJvdXRWYWx1ZSIsImlzTmFOIiwibW9kZWwiLCJzYXZlQWNjZXNzb3JWYWx1ZSIsInRlbXBsYXRlRXh0ZW5zaW9ucyIsImRvbS1pZiIsImRvbS1yZXBlYXQiLCJwbGFjZWhvbGRlckJ1Z0RldGVjdCIsInBsYWNlaG9sZGVyQnVnIiwiZml4UGxhY2Vob2xkZXIiLCJwbGFjZWhvbGRlciIsImhhc1BsYWNlaG9sZGVyQnVnIiwid3JhcFRlbXBsYXRlRXh0ZW5zaW9uIiwiaXMiLCJyZXBsYWNlQ2hpbGQiLCJmaW5kVGVtcGxhdGVOb2RlIiwibm9kZUluZm8iLCJwYXJlbnRJbmZvIiwicGFyZW50SW5kZXgiLCJhcHBseUlkVG9NYXAiLCJhcHBseUV2ZW50TGlzdGVuZXIiLCJldmVudHMiLCJfYWRkTWV0aG9kRXZlbnRMaXN0ZW5lclRvTm9kZSIsImFwcGx5VGVtcGxhdGVDb250ZW50IiwidGVtcGxhdGVJbmZvIiwiX3RlbXBsYXRlSW5mbyIsIlRlbXBsYXRlU3RhbXAiLCJvdXRlclRlbXBsYXRlSW5mbyIsIm5vZGVJbmZvTGlzdCIsInN0cmlwV2hpdGVTcGFjZSIsIl9wYXJzZVRlbXBsYXRlQ29udGVudCIsIl9wYXJzZVRlbXBsYXRlTm9kZSIsIm5vdGVkIiwiaGFzSW5zZXJ0aW9uUG9pbnQiLCJfcGFyc2VUZW1wbGF0ZU5lc3RlZFRlbXBsYXRlIiwiX3BhcnNlVGVtcGxhdGVDaGlsZE5vZGVzIiwiX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlcyIsIm5leHQiLCJURVhUX05PREUiLCJjaGlsZEluZm8iLCJpbmZvSW5kZXgiLCJfcGFyc2VUZW1wbGF0ZSIsImF0dHJzIiwiYSIsIl9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZSIsImRlY29yYXRlIiwiZG9tIiwiX19ub0luc2VydGlvblBvaW50Iiwibm9kZXMiLCJub2RlTGlzdCIsIiQiLCJtZXRob2ROYW1lIiwiY29udGV4dCIsImhhbmRsZXIiLCJfbWV0aG9kSG9zdCIsImRldGFpbCIsImNyZWF0ZU5vZGVFdmVudEhhbmRsZXIiLCJfYWRkRXZlbnRMaXN0ZW5lclRvTm9kZSIsInByb3BlcnR5X2VmZmVjdHNfZGVkdXBlSWQiLCJUWVBFUyIsIkNPTVBVVEUiLCJSRUZMRUNUIiwiTk9USUZZIiwiUFJPUEFHQVRFIiwiT0JTRVJWRSIsIlJFQURfT05MWSIsImNhcGl0YWxBdHRyaWJ1dGVSZWdleCIsImVuc3VyZU93bkVmZmVjdE1hcCIsImVmZmVjdHMiLCJwcm90b0Z4IiwiaW5zdEZ4IiwicnVuRWZmZWN0cyIsImhhc1BhdGhzIiwiZXh0cmFBcmdzIiwicmFuIiwicnVuRWZmZWN0c0ZvclByb3BlcnR5IiwiZGVkdXBlSWQiLCJmeHMiLCJmeCIsImxhc3RSdW4iLCJwYXRoTWF0Y2hlc1RyaWdnZXIiLCJ0cmlnZ2VyIiwidHJpZ2dlclBhdGgiLCJzdHJ1Y3R1cmVkIiwid2lsZGNhcmQiLCJydW5PYnNlcnZlckVmZmVjdCIsIm1ldGhvZCIsImNoYW5nZWRQcm9wIiwiZHluYW1pY0ZuIiwibm90aWZ5UGF0aCIsInJvb3RQcm9wZXJ0eSIsImRpc3BhdGNoTm90aWZ5RXZlbnQiLCJxdWV1ZVByb3BlcnR5IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwicnVuTm90aWZ5RWZmZWN0IiwicnVuUmVmbGVjdEVmZmVjdCIsImF0dHJOYW1lIiwicnVuQ29tcHV0ZWRFZmZlY3QiLCJydW5NZXRob2RFZmZlY3QiLCJjb21wdXRlZFByb3AiLCJtZXRob2RJbmZvIiwiYWRkQmluZGluZyIsImxpdGVyYWwiLCJiaW5kaW5ncyIsImJpbmRpbmciLCJpc0NvbXBvdW5kIiwicHJvcGVydHlfZWZmZWN0c19zaG91bGRBZGRMaXN0ZW5lciIsIm5lZ2F0ZSIsImxpc3RlbmVyRXZlbnQiLCJsaXN0ZW5lck5lZ2F0ZSIsImNvbXBvdW5kSW5kZXgiLCJhZGRFZmZlY3RGb3JCaW5kaW5nUGFydCIsImRlcGVuZGVuY2llcyIsImV2YWx1YXRvciIsInBhcnNlQXJnIiwiX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QiLCJydW5CaW5kaW5nRWZmZWN0Iiwic291cmNlIiwiX19pc1Byb3BlcnR5RWZmZWN0c0NsaWVudCIsIl9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgiLCJfZW5xdWV1ZUNsaWVudCIsInN0b3JhZ2UiLCJfX2RhdGFDb21wb3VuZFN0b3JhZ2UiLCJjb21wdXRlQmluZGluZ1ZhbHVlIiwiX3NldFVubWFuYWdlZFByb3BlcnR5VG9Ob2RlIiwiYXBwbHlCaW5kaW5nVmFsdWUiLCJfZXZhbHVhdGVCaW5kaW5nIiwic2V0dXBDb21wb3VuZFN0b3JhZ2UiLCJsaXRlcmFscyIsImFkZE5vdGlmeUxpc3RlbmVyIiwiZnJvbVByb3AiLCJ0b1BhdGgiLCJmcm9tUGF0aCIsImN1cnJlbnRUYXJnZXQiLCJoYW5kbGVOb3RpZmljYXRpb24iLCJjcmVhdGVNZXRob2RFZmZlY3QiLCJzaWciLCJlZmZlY3RGbiIsInN0YXRpYyIsImFyZyIsIl9hZGRQcm9wZXJ0eUVmZmVjdCIsIl9tYXJzaGFsQXJncyIsImFwcGx5IiwiZW1wdHlBcnJheSIsImJpbmRpbmdSZWdleCIsIk9QRU5fQlJBQ0tFVCIsImxpdGVyYWxGcm9tUGFydHMiLCJwYXJzZU1ldGhvZCIsImV4cHJlc3Npb24iLCJhcmdMaXN0IiwicmF3QXJnIiwicGFyc2VBcmdzIiwiZmMiLCJnZXRBcmdWYWx1ZSIsIm5vdGlmeVNwbGljZXMiLCJhcnJheSIsInNwbGljZXMiLCJpbmRleFNwbGljZXMiLCJub3RpZnlTcGxpY2UiLCJhZGRlZENvdW50IiwicmVtb3ZlZCIsInByb3BlcnR5X2VmZmVjdHNfUHJvcGVydHlFZmZlY3RzIiwicHJvcGVydHlFZmZlY3RzQmFzZSIsIl9fZGF0YUNvdW50ZXIiLCJfX2RhdGFDbGllbnRzUmVhZHkiLCJfX2RhdGFQZW5kaW5nQ2xpZW50cyIsIl9fZGF0YVRvTm90aWZ5IiwiX19kYXRhTGlua2VkUGF0aHMiLCJfX2RhdGFIYXNQYXRocyIsIl9fZGF0YUhvc3QiLCJfX2RhdGFUZW1wIiwiX19kYXRhQ2xpZW50c0luaXRpYWxpemVkIiwiX19jb21wdXRlRWZmZWN0cyIsIl9fcmVmbGVjdEVmZmVjdHMiLCJfX25vdGlmeUVmZmVjdHMiLCJfX3Byb3BhZ2F0ZUVmZmVjdHMiLCJfX29ic2VydmVFZmZlY3RzIiwiX19yZWFkT25seSIsIl9fdGVtcGxhdGVJbmZvIiwiUFJPUEVSVFlfRUZGRUNUX1RZUEVTIiwiaG9zdFN0YWNrIiwicmVnaXN0ZXJIb3N0IiwiZWZmZWN0IiwiX2hhc1Byb3BlcnR5RWZmZWN0Iiwic2hvdWxkTm90aWZ5IiwiaXNQYXRoTm90aWZpY2F0aW9uIiwibGlua3MiLCJsaW5rIiwiYiIsImNvbXB1dGVMaW5rZWRQYXRocyIsInByb3BJc1BhdGgiLCJwcmV2UHJvcHMiLCJjbGllbnQiLCJfX2VuYWJsZU9yRmx1c2hDbGllbnRzIiwiX3JlYWR5Q2xpZW50cyIsImNsaWVudHMiLCJfZW5hYmxlUHJvcGVydGllcyIsInNldFJlYWRPbmx5IiwiX2ZsdXNoQ2xpZW50cyIsImNvbXB1dGVFZmZlY3RzIiwiaW5wdXRQcm9wcyIsInJ1bkNvbXB1dGVkRWZmZWN0cyIsIm5vdGlmeVByb3BzIiwiX3Byb3BhZ2F0ZVByb3BlcnR5Q2hhbmdlcyIsIm5vdGlmaWVkIiwicnVuTm90aWZ5RWZmZWN0cyIsInByb3BlcnR5RWZmZWN0cyIsIm5leHRUZW1wbGF0ZUluZm8iLCJ0byIsIml0ZW1zIiwicmV0IiwiaGFkTGVuZ3RoIiwiZGVsZXRlQ291bnQiLCJmbG9vciIsInNoaWZ0IiwicHJvcFBhdGgiLCJwcm90ZWN0ZWRTZXR0ZXIiLCJ1cHBlciIsIm1hdGNoZXMiLCJwYXRoVmFsdWUiLCJfY3JlYXRlUHJvcGVydHlPYnNlcnZlciIsIl9jcmVhdGVNZXRob2RPYnNlcnZlciIsIl9jcmVhdGVOb3RpZnlpbmdQcm9wZXJ0eSIsIl9jcmVhdGVSZWFkT25seVByb3BlcnR5IiwiX2NyZWF0ZVJlZmxlY3RlZFByb3BlcnR5IiwiX2NyZWF0ZUNvbXB1dGVkUHJvcGVydHkiLCJfYmluZFRlbXBsYXRlIiwiaW5zdGFuY2VCaW5kaW5nIiwid2FzUHJlQm91bmQiLCJfX3RlbXBsYXRlSW5mb0xhc3QiLCJwcmV2aW91c1RlbXBsYXRlSW5mbyIsImhvc3RQcm9wcyIsImJlZ2luSG9zdGluZyIsIl9zdGFtcFRlbXBsYXRlIiwiZW5kSG9zdGluZyIsImNoaWxkTm9kZXMiLCJzZXR1cEJpbmRpbmdzIiwiX3BhcnNlQmluZGluZ3MiLCJvcmlnTmFtZSIsImN1c3RvbUV2ZW50Iiwibm90aWZ5RXZlbnQiLCJjb2xvbiIsInNpZ25hdHVyZSIsImR5bmFtaWNGbnMiLCJzdGFja0xlbiIsInJlZ2lzdHJhdGlvbnMiLCJwcm9wZXJ0aWVzX21peGluX1Byb3BlcnRpZXNNaXhpbiIsInN1cGVyUHJvcGVydGllc0NsYXNzIiwiUHJvcGVydGllc01peGluIiwib3duUHJvcGVydGllcyIsIm91dHB1dCIsIm5vcm1hbGl6ZVByb3BlcnRpZXMiLCJfX293blByb3BlcnRpZXMiLCJfcHJvcGVydGllcyIsIl9fb2JzZXJ2ZWRBdHRyaWJ1dGVzIiwia2V5cyIsImZpbmFsaXplIiwiX19maW5hbGl6ZWQiLCJfZmluYWxpemVDbGFzcyIsImNyZWF0ZVByb3BlcnRpZXMiLCJfX3Byb3BlcnRpZXMiLCJpbnN0YW5jZUNvdW50IiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJidWlsdENTUyIsIkVsZW1lbnRNaXhpbiIsInBvbHltZXJFbGVtZW50QmFzZSIsImNyZWF0ZVByb3BlcnR5RnJvbUNvbmZpZyIsImFsbFByb3BzIiwiY29tcHV0ZWQiLCJfaGFzUmVhZE9ubHlFZmZlY3QiLCJyZWZsZWN0VG9BdHRyaWJ1dGUiLCJfaGFzUmVmbGVjdEVmZmVjdCIsIm5vdGlmeSIsIl9oYXNOb3RpZnlFZmZlY3QiLCJvYnNlcnZlciIsInByb2Nlc3NFbGVtZW50U3R5bGVzIiwia2xhc3MiLCJ0ZW1wbGF0ZVN0eWxlcyIsInN0eWxlc1dpdGhJbXBvcnRzIiwibGlua2VkU3R5bGVzIiwic3R5bGVzRnJvbU1vZHVsZUltcG9ydHMiLCJmaXJzdFRlbXBsYXRlQ2hpbGQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIl9wcm9jZXNzU3R5bGVUZXh0IiwidGVtcGxhdGVTdHlsZUluZGV4IiwidGVtcGxhdGVTdHlsZSIsInByZXBhcmVUZW1wbGF0ZSIsInBvbHltZXJFbGVtZW50VmVyc2lvbiIsIm9ic2VydmVycyIsIl9fb3duT2JzZXJ2ZXJzIiwib3duT2JzZXJ2ZXJzIiwiY3JlYXRlT2JzZXJ2ZXJzIiwiX3ByZXBhcmVUZW1wbGF0ZSIsIl90ZW1wbGF0ZSIsImdldFRlbXBsYXRlRnJvbURvbU1vZHVsZSIsImltcG9ydFBhdGgiLCJtZXRhIiwiaW1wb3J0TWV0YSIsIl9pbXBvcnRQYXRoIiwiX2ZpbmFsaXplVGVtcGxhdGUiLCJfX3Byb3BlcnR5RGVmYXVsdHMiLCJwcm9wZXJ0eURlZmF1bHRzIiwiX2hhc0FjY2Vzc29yIiwiX19wb2x5bWVyRmluYWxpemVkIiwiX2F0dGFjaERvbSIsInNoYWRvd1Jvb3QiLCJzaGFkeVVwZ3JhZGVGcmFnbWVudCIsImZsdXNoSW5pdGlhbCIsInN0eWxlU3VidHJlZSIsInBvbHltZXJfZWxlbWVudF9Qb2x5bWVyRWxlbWVudCIsIkRlYm91bmNlciIsIl9hc3luY01vZHVsZSIsIl9jYWxsYmFjayIsIl90aW1lciIsImFzeW5jTW9kdWxlIiwiZGVib3VuY2VyUXVldWUiLCJpc0FjdGl2ZSIsIl9jYW5jZWxBc3luYyIsImNhbmNlbCIsImRlYm91bmNlciIsInNldENvbmZpZyIsImVucXVldWVEZWJvdW5jZXIiLCJmbHVzaERlYm91bmNlcnMiLCJkaWRGbHVzaCIsImZsdXNoIiwiSEFTX05BVElWRV9UQSIsInRvdWNoQWN0aW9uIiwiR0VTVFVSRV9LRVkiLCJIQU5ETEVEX09CSiIsIlRPVUNIX0FDVElPTiIsIlRBUF9ESVNUQU5DRSIsIlRSQUNLX0RJU1RBTkNFIiwiTU9VU0VfVElNRU9VVCIsIk1PVVNFX0VWRU5UUyIsIk1PVVNFX1dISUNIX1RPX0JVVFRPTlMiLCJNT1VTRV9IQVNfQlVUVE9OUyIsIk1vdXNlRXZlbnQiLCJidXR0b25zIiwiaXNNb3VzZUV2ZW50Iiwic3VwcG9ydHNQYXNzaXZlIiwiUEFTU0lWRV9UT1VDSCIsIm9wdHMiLCJJU19UT1VDSF9PTkxZIiwiY2xpY2tlZExhYmVscyIsImxhYmVsbGFibGUiLCJidXR0b24iLCJpbnB1dCIsImtleWdlbiIsIm1ldGVyIiwidGV4dGFyZWEiLCJwcm9ncmVzcyIsInNlbGVjdCIsImNhbkJlRGlzYWJsZWQiLCJjb21tYW5kIiwiZmllbGRzZXQiLCJvcHRncm91cCIsIm9wdGlvbiIsImNhbkJlTGFiZWxsZWQiLCJtYXRjaGluZ0xhYmVscyIsImxhYmVscyIsImdldFJvb3ROb2RlIiwibWF0Y2hpbmciLCJtb3VzZUNhbmNlbGxlciIsIm1vdXNlRXZlbnQiLCJzYyIsInNvdXJjZUNhcGFiaWxpdGllcyIsImZpcmVzVG91Y2hFdmVudHMiLCJza2lwIiwiY2xpY2tGcm9tTGFiZWwiLCJnZXRDb21wb3NlZFBhdGgiLCJFTEVNRU5UX05PREUiLCJvd25lckxhYmVscyIsIlBPSU5URVJTVEFURSIsIm1vdXNlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXR1cFRlYXJkb3duTW91c2VDYW5jZWxsZXIiLCJzZXR1cCIsImVuIiwiaGFzTGVmdE1vdXNlQnV0dG9uIiwiZXYiLCJ3aGljaCIsIm1vdXNlSWdub3JlSm9iIiwidG91Y2giLCJ5Iiwic2Nyb2xsRGVjaWRlZCIsInRyYWNrRG9jdW1lbnQiLCJzdGF0ZU9iaiIsIm1vdmVmbiIsInVwZm4iLCJ1bnRyYWNrRG9jdW1lbnQiLCJkZWJvdW5jZSIsIm5vUGF0Y2giLCJjb21wb3NlZFBhdGgiLCJnZXN0dXJlcyIsInJlY29nbml6ZXJzIiwiX2ZpbmRPcmlnaW5hbFRhcmdldCIsIl9oYW5kbGVOYXRpdmUiLCJoYW5kbGVkIiwiZ29iaiIsImdzIiwiY2hhbmdlZFRvdWNoZXMiLCJ0b3VjaGVzIiwiaWRlbnRpZmllciIsImNsaWVudFgiLCJjbGllbnRZIiwidGEiLCJmaXJzdFRvdWNoQWN0aW9uIiwic2hvdWxkUHJldmVudCIsImR4IiwiYWJzIiwiZHkiLCJjYW5jZWxhYmxlIiwicHJldmVudCIsIl9oYW5kbGVUb3VjaEFjdGlvbiIsImZsb3ciLCJyZXNldCIsImFkZExpc3RlbmVyIiwiZXZUeXBlIiwicmVjb2duaXplciIsImRlcHMiLCJkZXAiLCJnZCIsIl9jb3VudCIsInNldFRvdWNoQWN0aW9uIiwiX2FkZCIsInJlbW92ZUxpc3RlbmVyIiwiX3JlbW92ZSIsImdlc3R1cmVzX3JlZ2lzdGVyIiwicmVjb2ciLCJlbWl0cyIsIl9maXJlIiwiRXZlbnQiLCJidWJibGVzIiwiY29tcG9zZWQiLCJkZWZhdWx0UHJldmVudGVkIiwicHJldmVudGVyIiwic291cmNlRXZlbnQiLCJldk5hbWUiLCJfZmluZFJlY29nbml6ZXJCeUV2ZW50IiwiZG93bnVwRmlyZSIsInRyYWNrSGFzTW92ZWRFbm91Z2giLCJzdGFydGVkIiwidHJhY2tGaXJlIiwiZGR4Iiwic2Vjb25kbGFzdCIsIm1vdmVzIiwibGFzdG1vdmUiLCJkZHkiLCJob3ZlciIsImVsZW1lbnRGcm9tUG9pbnQiLCJkZWVwVGFyZ2V0RmluZCIsInRyYWNrRm9yd2FyZCIsImJjciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhZ2VYIiwicGFnZVkiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJpc1N5bnRoZXRpY0NsaWNrIiwibW91c2Vkb3duIiwidG91Y2hzdGFydCIsInRvdWNoZW5kIiwiYWRkTW92ZSIsIm1vdmUiLCJjdCIsInRvdWNobW92ZSIsIk5hTiIsImNsaWNrIiwiZ2VzdHVyZV9ldmVudF9saXN0ZW5lcnNfR2VzdHVyZUV2ZW50TGlzdGVuZXJzIiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJGcm9tTm9kZSIsIm5ld1NwbGljZSIsIkVESVRfTEVBVkUiLCJFRElUX1VQREFURSIsIkVESVRfQUREIiwiRURJVF9ERUxFVEUiLCJjYWxjU3BsaWNlcyIsImN1cnJlbnQiLCJjdXJyZW50U3RhcnQiLCJjdXJyZW50RW5kIiwib2xkU3RhcnQiLCJvbGRFbmQiLCJwcmVmaXhDb3VudCIsInN1ZmZpeENvdW50IiwibWluTGVuZ3RoIiwibWluIiwic2VhcmNoTGVuZ3RoIiwiZXF1YWxzIiwic2hhcmVkUHJlZml4IiwiaW5kZXgxIiwiaW5kZXgyIiwic2hhcmVkU3VmZml4Iiwib3BzIiwiZGlzdGFuY2VzIiwiZWRpdHMiLCJub3J0aFdlc3QiLCJ3ZXN0Iiwibm9ydGgiLCJyZXZlcnNlIiwic3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzIiwicm93Q291bnQiLCJjb2x1bW5Db3VudCIsImNhbGNFZGl0RGlzdGFuY2VzIiwib2xkSW5kZXgiLCJjYWxjdWxhdGVTcGxpY2VzIiwicHJldmlvdXMiLCJjdXJyZW50VmFsdWUiLCJwcmV2aW91c1ZhbHVlIiwiaXNTbG90IiwiRmxhdHRlbmVkTm9kZXNPYnNlcnZlciIsIndyYXBwZWQiLCJhc3NpZ25lZE5vZGVzIiwiZmxhdHRlbiIsImNvbmNhdCIsIl9zaGFkeUNoaWxkcmVuT2JzZXJ2ZXIiLCJfbmF0aXZlQ2hpbGRyZW5PYnNlcnZlciIsIl9jb25uZWN0ZWQiLCJfdGFyZ2V0IiwiX2VmZmVjdGl2ZU5vZGVzIiwiX29ic2VydmVyIiwiX3NjaGVkdWxlZCIsIl9ib3VuZFNjaGVkdWxlIiwiX3NjaGVkdWxlIiwiX2xpc3RlblNsb3RzIiwiY2hpbGRyZW4iLCJvYnNlcnZlQ2hpbGRyZW4iLCJtdXRhdGlvbnMiLCJfcHJvY2Vzc011dGF0aW9ucyIsImNoaWxkTGlzdCIsIl91bmxpc3RlblNsb3RzIiwidW5vYnNlcnZlQ2hpbGRyZW4iLCJfcHJvY2Vzc1Nsb3RNdXRhdGlvbnMiLCJtdXRhdGlvbiIsImFkZGVkTm9kZXMiLCJyZW1vdmVkTm9kZXMiLCJ0YWtlUmVjb3JkcyIsIm5ld05vZGVzIiwiZ2V0RmxhdHRlbmVkTm9kZXMiLCJTdHlsZU5vZGUiLCJwYXJzZUNzcyIsInNzIiwiY29kZSIsInJlcGVhdCIsIl9leHBhbmRVbmljb2RlRXNjYXBlcyIsIlJYIiwibXVsdGlwbGVTcGFjZXMiLCJBVF9TVEFSVCIsIk1FRElBX1NUQVJUIiwidHlwZXMiLCJNRURJQV9SVUxFIiwia2V5ZnJhbWVzUnVsZSIsIktFWUZSQU1FU19SVUxFIiwiVkFSX1NUQVJUIiwiTUlYSU5fUlVMRSIsIlNUWUxFX1JVTEUiLCJyJCIsIk9QRU5fQlJBQ0UiLCJDTE9TRV9CUkFDRSIsImxleCIsImNvbW1lbnRzIiwicG9ydCIsImNsZWFuIiwicHJlc2VydmVQcm9wZXJ0aWVzIiwicnVsZXMiLCJfaGFzTWl4aW5SdWxlcyIsIm1peGluQXBwbHkiLCJ2YXJBcHBseSIsInJlbW92ZUN1c3RvbVByb3BBcHBseSIsImN1c3RvbVByb3AiLCJtaXhpblByb3AiLCJyZW1vdmVDdXN0b21Qcm9wQXNzaWdubWVudCIsInJlbW92ZUN1c3RvbVByb3BzIiwic3R5bGVUZXh0U2V0Iiwic2NvcGluZ0F0dHJpYnV0ZSIsInByb2Nlc3NVbnNjb3BlZFN0eWxlIiwibmV3U3R5bGUiLCJpc1Vuc2NvcGVkU3R5bGUiLCJ0b0Nzc1RleHQiLCJmb3JFYWNoUnVsZSIsInJ1bGVzRm9yU3R5bGUiLCJzdHlsZVJ1bGVDYWxsYmFjayIsImtleWZyYW1lc1J1bGVDYWxsYmFjayIsIm9ubHlBY3RpdmVSdWxlcyIsInNraXBSdWxlcyIsIm1hdGNoTWVkaWEiLCJmaW5kTWF0Y2hpbmdQYXJlbiIsImxldmVsIiwiQ1NTX0JVSUxEX0FUVFIiLCJnZXRDc3NCdWlsZCIsIl9fY3NzQnVpbGQiLCJidWlsZENvbW1lbnQiLCJDb21tZW50IiwiY29tbWVudFBhcnRzIiwiZ2V0QnVpbGRDb21tZW50IiwicmVtb3ZlQnVpbGRDb21tZW50IiwiZWxlbWVudEhhc0J1aWx0Q3NzIiwiQVBQTFlfTkFNRV9DTEVBTiIsIklOSVRJQUxfSU5IRVJJVCIsIklNUE9SVEFOVCIsIk1JWElOX1ZBUl9TRVAiLCJNaXhpbk1hcCIsIl9tYXAiLCJkZXBlbmRhbnRzIiwiaW52YWxpZENhbGxiYWNrIiwiYXBwbHlfc2hpbV9BcHBseVNoaW0iLCJfY3VycmVudEVsZW1lbnQiLCJfbWVhc3VyZUVsZW1lbnQiLCJkZXRlY3RNaXhpbiIsInN0eWxlVGV4dCIsInN0eWxlVGV4dFBhcnRzIiwiZ2F0aGVyU3R5bGVUZXh0IiwiX2dhdGhlcmVkU3R5bGUiLCJnYXRoZXJTdHlsZXMiLCJ0cmFuc2Zvcm1TdHlsZSIsImFzdCIsInRyYW5zZm9ybVJ1bGVzIiwicnVsZSIsInRyYW5zZm9ybVJ1bGUiLCJ0cmFuc2Zvcm1Dc3NUZXh0IiwibWF0Y2hUZXh0IiwicHJvcGVydHlOYW1lIiwidmFsdWVQcm9wZXJ0eSIsInZhbHVlTWl4aW4iLCJfcHJvZHVjZUNzc1Byb3BlcnRpZXMiLCJfY29uc3VtZUNzc1Byb3BlcnRpZXMiLCJhbGwiLCJzdGFydFJ1bGUiLCJ0b3BSdWxlIiwiZmFsbGJhY2tzIiwic2VlblN0YXJ0UnVsZSIsIl9jc3NUZXh0VG9NYXAiLCJtaXhpbk5hbWUiLCJhcHBseVBvcyIsImFmdGVyQXBwbHlQb3MiLCJ0ZXh0QmVmb3JlQXBwbHkiLCJ0ZXh0QWZ0ZXJBcHBseSIsImRlZmF1bHRzIiwiX2ZhbGxiYWNrc0Zyb21QcmV2aW91c1J1bGVzIiwicmVwbGFjZW1lbnQiLCJfYXRBcHBseVRvQ3NzUHJvcGVydGllcyIsInZhcnMiLCJtaXhpbkVudHJ5IiwiZiIsIl9nZXRJbml0aWFsVmFsdWVGb3JQcm9wZXJ0eSIsInJlcGxhY2VJbml0aWFsT3JJbmhlcml0Iiwib3V0Iiwic3AiLCJfcmVwbGFjZUluaXRpYWxPckluaGVyaXQiLCJwcm9jZXNzVmFyaWFibGVBbmRGYWxsYmFjayIsImlubmVyIiwiY29tbWEiLCJtaXhpbkFzUHJvcGVydGllcyIsIm1peGluVmFsdWVzIiwiY29tYmluZWRQcm9wcyIsIm5lZWRUb0ludmFsaWRhdGUiLCJfaW52YWxpZGF0ZU1peGluRW50cnkiLCJ0cmFuc2Zvcm1DdXN0b21TdHlsZSIsInRyYW5zZm9ybVRlbXBsYXRlIiwiYXBwbHlfc2hpbSIsInRlbXBsYXRlX21hcCIsIkNVUlJFTlRfVkVSU0lPTiIsIk5FWFRfVkVSU0lPTiIsIlZBTElEQVRJTkdfVkVSU0lPTiIsInByb21pc2UiLCJpbnZhbGlkYXRlIiwiaW52YWxpZGF0ZVRlbXBsYXRlIiwidGVtcGxhdGVJc1ZhbGlkIiwidGVtcGxhdGVJc1ZhbGlkYXRpbmciLCJzdGFydFZhbGlkYXRpbmdUZW1wbGF0ZSIsIl92YWxpZGF0aW5nIiwiYXBwbHlTaGltIiwiYXBwbHlTaGltSW50ZXJmYWNlIiwiZmx1c2hDdXN0b21TdHlsZXMiLCJlbnN1cmUiLCJzaGFkb3dDaGlsZHJlbiIsInR5cGVFeHRlbnNpb24iLCJleHRlbmRzIiwiZ2V0SXNFeHRlbmRzIiwic3R5bGVEb2N1bWVudCIsIkFwcGx5U2hpbSIsIkhPU1RfRElSIiwiSE9TVF9ESVJfUkVQTEFDTUVOVCIsIkVMX0RJUiIsIkVMX0RJUl9SRVBMQUNNRU5UIiwiRElSX0NIRUNLIiwiU0hJTV9TSEFET1ciLCJESVJfSU5TVEFOQ0VTIiwiZGlyX21peGluX29ic2VydmVyIiwiZG9jdW1lbnREaXIiLCJnZXRSVEwiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRSVEwiLCJfX2F1dG9EaXJPcHRPdXQiLCJ1cGRhdGVEaXJlY3Rpb24iLCJEaXJNaXhpbiIsImF0dHJpYnV0ZUZpbHRlciIsImVsZW1lbnRCYXNlIiwiRGlyIiwiX3JlcGxhY2VEaXJJbkNzc1RleHQiLCJfX2FjdGl2YXRlRGlyIiwicmVwbGFjZWRUZXh0IiwiZmx1c2hfZmx1c2giLCJzaGFkeURPTSIsImRlYm91bmNlcnMiLCJwb2x5bWVyX2RvbV9wIiwiRWxlbWVudCIsIm5vcm1hbGl6ZWRNYXRjaGVzU2VsZWN0b3IiLCJtYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJwb2x5bWVyX2RvbV9Eb21BcGlOYXRpdmUiLCJvYnNlcnZlckhhbmRsZSIsImNvbnRhaW5zIiwiZG9jIiwiaXAkIiwiYXNzaWduZWRTbG90IiwiZGVlcCIsImMkIiwiZ2V0RWZmZWN0aXZlQ2hpbGROb2RlcyIsImxpc3QiLCJhY3RpdmVFbGVtZW50IiwiX2FjdGl2ZUVsZW1lbnQiLCJmb3J3YXJkUmVhZE9ubHlQcm9wZXJ0aWVzIiwiRXZlbnRBcGkiLCJyb290VGFyZ2V0IiwibG9jYWxUYXJnZXQiLCJsYXN0Q2hpbGQiLCJsYXN0RWxlbWVudENoaWxkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsIkRvbUFwaUltcGwiLCJXcmFwcGVyIiwiY3VycmVudFJvb3QiLCJwb2x5bWVyX2RvbV9kb20iLCJnZXRPd25lclJvb3QiLCJtZXRob2RzIiwiZm9yd2FyZE1ldGhvZHMiLCJmb3J3YXJkUHJvcGVydGllcyIsImhlbHBlciIsInNjb3BlX3N1YnRyZWVfU2hhZHlET00iLCJzYW1lU2NvcGUiLCJzY29wZSIsInN0eWxlSW50ZXJmYWNlIiwiTGVnYWN5RWxlbWVudE1peGluIiwibGVnYWN5RWxlbWVudEJhc2UiLCJESVJFQ1RJT05fTUFQIiwibm9uZSIsIkxlZ2FjeUVsZW1lbnQiLCJpc0F0dGFjaGVkIiwiX19ib3VuZExpc3RlbmVycyIsIl9kZWJvdW5jZXJzIiwiYXR0YWNoZWQiLCJkZXRhY2hlZCIsImF0dHJpYnV0ZUNoYW5nZWQiLCJfcmVnaXN0ZXJlZCIsIl9faGFzUmVnaXN0ZXJGaW5pc2hlZCIsImNyZWF0ZWQiLCJfYXBwbHlMaXN0ZW5lcnMiLCJfZW5zdXJlQXR0cmlidXRlcyIsImFwaSIsIm4kIiwicGQiLCJfX3Byb3RvX18iLCJfY29udGVudEZvclRlbXBsYXRlIiwiaGJsIiwiYmwiLCJkaXJlY3Rpb24iLCJzbGN0ciIsImRvbUhvc3QiLCJEb2N1bWVudEZyYWdtZW50IiwiZG9tQXBpIiwicXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzIiwiY24iLCJ0YyIsIkNPTU1FTlRfTk9ERSIsImdldERpc3RyaWJ1dGVkTm9kZXMiLCJnZXRDb250ZW50Q2hpbGROb2RlcyIsInNob3VsZE9ic2VydmUiLCJjb250YWluZXJTY29wZSIsInNjb3BpZnkiLCJjdXJyZW50U2NvcGUiLCJtbyIsIm14bnMiLCJteG4iLCJhZGRlZE5vZGUiLCJzdWJ0cmVlIiwic2NvcGVTdWJ0cmVlIiwiam9iTmFtZSIsIndhaXQiLCJ3YWl0VGltZSIsInRhZyIsImVsdCIsInNldFByb3BlcnRpZXMiLCJib29sIiwicmVtb3ZlIiwidHJhbnNmb3JtVGV4dCIsIndlYmtpdFRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInoiLCJhcnJheU9yUGF0aCIsIl9sb2dnZXIiLCJsaWZlY3ljbGVQcm9wcyIsImJlZm9yZVJlZ2lzdGVyIiwicmVnaXN0ZXJlZCIsImxpc3RlbmVycyIsImhvc3RBdHRyaWJ1dGVzIiwiZXhjbHVkZU9uSW5mbyIsImJlaGF2aW9ycyIsIl9ub0FjY2Vzc29ycyIsImV4Y2x1ZGVPbkJlaGF2aW9ycyIsImFwcGx5SW5mbyIsImxpZmVjeWNsZSIsImV4Y2x1ZGVQcm9wcyIsIm5vQWNjZXNzb3JzIiwicHJvcGVydHlOYW1lcyIsImNvcHlQcm9wZXJ0aWVzIiwibWVyZ2VQcm9wZXJ0aWVzIiwidGFyZ2V0SW5mbyIsInNvdXJjZUluZm8iLCJHZW5lcmF0ZUNsYXNzRnJvbUluZm8iLCJCYXNlIiwiYmVoYXZpb3JMaXN0IiwiUG9seW1lckdlbmVyYXRlZCIsImdlbmVyYXRlZFByb3RvIiwiY29weVByb3BlcnRpZXNUb1Byb3RvIiwiX2Vuc3VyZUF0dHJpYnV0ZSIsInN1cGVyQmVoYXZpb3JzIiwiZmxhdHRlbkJlaGF2aW9ycyIsImV4Y2x1ZGUiLCJhcHBseUJlaGF2aW9ycyIsImdlbmVyYXRlZEZyb20iLCJDbGFzcyIsIm11dGFibGVQcm9wZXJ0eUNoYW5nZSIsIm11dGFibGVEYXRhIiwiaXNPYmplY3QiLCJzaG91bGRDaGFuZ2UiLCJNdXRhYmxlRGF0YSIsIk9wdGlvbmFsTXV0YWJsZURhdGEiLCJfbXV0YWJsZVByb3BlcnR5Q2hhbmdlIiwibmV3SW5zdGFuY2UiLCJIVE1MVGVtcGxhdGVFbGVtZW50RXh0ZW5zaW9uIiwid3JpdGFibGUiLCJEYXRhVGVtcGxhdGUiLCJNdXRhYmxlRGF0YVRlbXBsYXRlIiwidGVtcGxhdGVJbnN0YW5jZUJhc2UiLCJ0ZW1wbGF0aXplX1RlbXBsYXRlSW5zdGFuY2VCYXNlIiwiX2NvbmZpZ3VyZVByb3BlcnRpZXMiLCJfX3RlbXBsYXRpemVJbnN0YW5jZSIsIl9fdGVtcGxhdGl6ZU93bmVyIiwiX19oaWRlVGVtcGxhdGVDaGlsZHJlbl9fIiwiX3Nob3dIaWRlQ2hpbGRyZW4iLCJfX3RlbXBsYXRpemVPcHRpb25zIiwiaW5zdGFuY2VQcm9wcyIsImZvcndhcmRIb3N0UHJvcCIsImhwcm9wIiwiX19ob3N0UHJvcHMiLCJpcHJvcCIsInBhcmVudE1vZGVsIiwidGVtcGxhdGVIb3N0IiwiaGlkZSIsIl9fcG9seW1lclRleHRDb250ZW50X18iLCJfX3BvbHltZXJSZXBsYWNlZF9fIiwiX19wb2x5bWVyRGlzcGxheV9fIiwiZGlzcGxheSIsIl9fcGFyZW50TW9kZWwiLCJNdXRhYmxlVGVtcGxhdGVJbnN0YW5jZUJhc2UiLCJmaW5kTWV0aG9kSG9zdCIsImNyZWF0ZVRlbXBsYXRpemVyQ2xhc3MiLCJ0ZW1wbGF0aXplckJhc2UiLCJ0ZW1wbGF0aXplIiwidXNlck5vdGlmeUluc3RhbmNlUHJvcCIsIm5vdGlmeUluc3RhbmNlUHJvcCIsImNyZWF0ZU5vdGlmeUluc3RhbmNlUHJvcEVmZmVjdCIsImhhc0hvc3RQcm9wcyIsImFkZE5vdGlmeUVmZmVjdHMiLCJhZGRQcm9wYWdhdGVFZmZlY3RzIiwidXNlckZvcndhcmRIb3N0UHJvcCIsInRlbXBsYXRpemVUZW1wbGF0ZUNsYXNzIiwidGVtcGxhdGl6ZWRCYXNlIiwiY3JlYXRlRm9yd2FyZEhvc3RQcm9wRWZmZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ1cGdyYWRlVGVtcGxhdGUiLCJob3N0UHJvcCIsImluc3RQcm9wIiwiYmFzZUNsYXNzIiwidGVtcGxhdGl6ZUluc3RhbmNlQ2xhc3MiLCJtb2RlbEZvckVsZW1lbnQiLCJlbGVtZW50c0hpZGRlbiIsImhpZGVFbGVtZW50c0dsb2JhbGx5IiwiZG9tQmluZEJhc2UiLCJfX2NoaWxkcmVuIiwiX19yZW1vdmVDaGlsZHJlbiIsIl9faW5zZXJ0Q2hpbGRyZW4iLCJkb21SZXBlYXRCYXNlIiwiZG9tX3JlcGVhdF9Eb21SZXBlYXQiLCJhcyIsImluZGV4QXMiLCJpdGVtc0luZGV4QXMiLCJzb3J0IiwiRnVuY3Rpb24iLCJyZW5kZXJlZEl0ZW1Db3VudCIsImluaXRpYWxDb3VudCIsInRhcmdldEZyYW1lcmF0ZSIsIl90YXJnZXRGcmFtZVRpbWUiLCJfX2luc3RhbmNlcyIsIl9fbGltaXQiLCJJbmZpbml0eSIsIl9fcG9vbCIsIl9fcmVuZGVyRGVib3VuY2VyIiwiX19pdGVtc0lkeFRvSW5zdElkeCIsIl9fY2h1bmtDb3VudCIsIl9fbGFzdENodW5rVGltZSIsIl9fc29ydEZuIiwiX19maWx0ZXJGbiIsIl9fb2JzZXJ2ZVBhdGhzIiwiX19jdG9yIiwiX19pc0RldGFjaGVkIiwiX19kZXRhY2hJbnN0YW5jZSIsIndyYXBwZWRQYXJlbnQiLCJfX2F0dGFjaEluc3RhbmNlIiwiX19yZW5kZXIiLCJpJCIsInBhdGhfbWF0Y2hlcyIsImZ1bmN0aW9uT3JNZXRob2ROYW1lIiwiX19nZXRNZXRob2RIb3N0IiwiX19mdW5jdGlvbkZyb21Qcm9wZXJ0eVZhbHVlIiwiX19kZWJvdW5jZVJlbmRlciIsInJhdGUiLCJjZWlsIiwicGVyZm9ybWFuY2UiLCJub3ciLCJfX3JlcXVlc3RSZW5kZXJDaHVuayIsIl9fcmVuZGVyQ2h1bmsiLCJjdXJyQ2h1bmtUaW1lIiwicmF0aW8iLCJyb3VuZCIsImNoYW5nZSIsIl9faGFuZGxlSXRlbVBhdGgiLCJfX2luaXRpYWxpemVDaHVua2luZyIsInBhdGhzIiwiX19lbnN1cmVUZW1wbGF0aXplZCIsIl9fYXBwbHlGdWxsUmVmcmVzaCIsIl9zZXRSZW5kZXJlZEl0ZW1Db3VudCIsIl9fdHJ5UmVuZGVyQ2h1bmsiLCJpc250SWR4VG9JdGVtc0lkeCIsIml0ZW1zSWR4VG9JbnN0SWR4IiwiaW5zdElkeCIsImxpbWl0IiwiaXRlbUlkeCIsIl9faW5zZXJ0SW5zdGFuY2UiLCJfX2RldGFjaEFuZFJlbW92ZUluc3RhbmNlIiwid3JhcHBlZFJvb3QiLCJfX3N0YW1wSW5zdGFuY2UiLCJiZWZvcmVSb3ciLCJiZWZvcmVOb2RlIiwiaGlkZGVuIiwiaXRlbXNQYXRoIiwiZG90IiwiaXRlbXNJZHgiLCJwYXJzZUludCIsIml0ZW1TdWJQYXRoIiwiX19oYW5kbGVPYnNlcnZlZFBhdGhzIiwiaXRlbVBhdGgiLCJkb21faWZfRG9tSWYiLCJpZiIsInJlc3RhbXAiLCJfX2ludmFsaWRQcm9wcyIsIl9faW5zdGFuY2UiLCJfbGFzdElmIiwiRE9DVU1FTlRfRlJBR01FTlRfTk9ERSIsIl9fdGVhcmRvd25JbnN0YW5jZSIsIl9fZW5zdXJlSW5zdGFuY2UiLCJfX3N5bmNIb3N0UHJvcGVydGllcyIsIm11dGFibGVfZGF0YV9iZWhhdmlvcl9tdXRhYmxlUHJvcGVydHlDaGFuZ2UiLCJiYXNlQXJyYXlTZWxlY3RvciIsIm11bHRpIiwic2VsZWN0ZWQiLCJzZWxlY3RlZEl0ZW0iLCJ0b2dnbGUiLCJfX2xhc3RJdGVtcyIsIl9fbGFzdE11bHRpIiwiX19zZWxlY3RlZE1hcCIsIml0ZW1zSW5mbyIsIm5ld0l0ZW1zIiwibGFzdEl0ZW1zIiwiY2xlYXJTZWxlY3Rpb24iLCJfX2FwcGx5U3BsaWNlcyIsIl9fZGVzZWxlY3RDaGFuZ2VkSWR4IiwiX191cGRhdGVMaW5rcyIsInNpZHgiLCJsaW5rUGF0aHMiLCJpc1NlbGVjdGVkIiwiX19zZWxlY3RlZEluZGV4Rm9ySXRlbUluZGV4IiwiZGVzZWxlY3QiLCJzZWxlY3RJbmRleCIsImRlc2VsZWN0SW5kZXgiLCJhcnJheV9zZWxlY3Rvcl9BcnJheVNlbGVjdG9yTWl4aW4iLCJBcnJheVNlbGVjdG9yIiwiT1JQSEFOUyIsIklyb25SZXNpemFibGVCZWhhdmlvciIsIl9wYXJlbnRSZXNpemFibGUiLCJfbm90aWZ5aW5nRGVzY2VuZGFudCIsImlyb24tcmVxdWVzdC1yZXNpemUtbm90aWZpY2F0aW9ucyIsIl9pbnRlcmVzdGVkUmVzaXphYmxlcyIsIl9ib3VuZE5vdGlmeVJlc2l6ZSIsIm5vdGlmeVJlc2l6ZSIsIl9ib3VuZE9uRGVzY2VuZGFudElyb25SZXNpemUiLCJfb25EZXNjZW5kYW50SXJvblJlc2l6ZSIsIl9yZXF1ZXN0UmVzaXplTm90aWZpY2F0aW9ucyIsInN0b3BSZXNpemVOb3RpZmljYXRpb25zRm9yIiwicmVzaXphYmxlIiwicmVzaXplclNob3VsZE5vdGlmeSIsIl9ub3RpZnlEZXNjZW5kYW50IiwiX2ZpcmVSZXNpemUiLCJhc3NpZ25QYXJlbnRSZXNpemFibGUiLCJwYXJlbnRSZXNpemFibGUiLCJfc3Vic2NyaWJlSXJvblJlc2l6ZSIsIl91bnN1YnNjcmliZUlyb25SZXNpemUiLCJmaXJlIiwiX29uSXJvblJlcXVlc3RSZXNpemVOb3RpZmljYXRpb25zIiwiX3BhcmVudFJlc2l6YWJsZUNoYW5nZWQiLCJkZXNjZW5kYW50IiwicmVhZHlzdGF0ZWNoYW5nZWQiLCJfZmluZFBhcmVudCIsIm9ycGhhbiIsIlRoZW1lUHJvcGVydHlNaXhpbiIsInRoZW1lIiwibmV3VmFsdWUiLCJfc2V0VGhlbWUiLCJUaGVtYWJsZU1peGluIiwiaGFzT3duVGVtcGxhdGUiLCJwYXJlbnRFbGVtZW50IiwiaW5oZXJpdGVkVGVtcGxhdGUiLCJfaW5jbHVkZVN0eWxlIiwiX2luY2x1ZGVNYXRjaGluZ1RoZW1lcyIsImhhc1RoZW1lcyIsImRlZmF1bHRNb2R1bGVOYW1lIiwibW9kdWxlTmFtZUEiLCJtb2R1bGVOYW1lQiIsInZhYWRpbkEiLCJ2YWFkaW5CIiwidmFhZGluVGhlbWVQcmVmaXhlcyIsInZhYWRpblRoZW1lQSIsInZhYWRpblRoZW1lQiIsIm1vZHVsZU5hbWUiLCJ0aGVtZUZvciIsInRoZW1lRm9yVG9rZW4iLCJzdHlsZUVsIiwiREVWX01PREVfQ09ERV9SRUdFWFAiLCJGbG93Q2xpZW50cyIsIlZhYWRpbiIsIkZsb3ciLCJ1bmNvbW1lbnRBbmRSdW4iLCJydW5JZkRldmVsb3BtZW50TW9kZSIsImRldmVsb3BtZW50TW9kZSIsIm1heWJlR2F0aGVyQW5kU2VuZFN0YXRzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImhvc3RuYW1lIiwicHJvZHVjdGlvbk1vZGVBcHBzIiwicHJvZHVjdGlvbk1vZGUiLCJpc0Zsb3dQcm9kdWN0aW9uTW9kZSIsImlzRGV2ZWxvcG1lbnRNb2RlIiwidXNhZ2VTdGF0aXN0aWNzIiwic3RhdHNKb2IiLCJkZXZlbG9wbWVudE1vZGVDYWxsYmFjayIsInZhYWRpbl9lbGVtZW50X21peGluX0VsZW1lbnRNaXhpbiIsImRvY3R5cGUiLCJ2YWFkaW5fc3BsaXRfbGF5b3V0X1NwbGl0TGF5b3V0RWxlbWVudCIsIm1peGluQmVoYXZpb3JzIiwib3JpZW50YXRpb24iLCJfcHJldmlvdXNQcmltYXJ5UG9pbnRlckV2ZW50cyIsIl9wcmV2aW91c1NlY29uZGFyeVBvaW50ZXJFdmVudHMiLCJfcHJvY2Vzc0NoaWxkcmVuIiwiZ2V0RWZmZWN0aXZlQ2hpbGRyZW4iLCJjaGlsZCIsIl9wcmltYXJ5Q2hpbGQiLCJfc2Vjb25kYXJ5Q2hpbGQiLCJmbGV4QmFzaXMiLCJjb250YWluZXJTaXplIiwibWF4IiwiZmxleCIsInBvaW50ZXJFdmVudHMiLCJkaXN0YW5jZSIsIl9zZXRGbGV4QmFzaXMiLCJfc3RhcnRTaXplIiwicHJpbWFyeSIsInNlY29uZGFyeSIsInNwbGl0dGVyIiwiYXN5bmMiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXJTVyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVB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SUFBQXo1QyxFQUFBLGFBQUExUixLQUFBNHFELFlBQUEsaUJBQ0EsYUFBQTdoRCxFQUFBZ2lCLE9BQUEzVSxNQUFBLENBVUEsSUFBQXExQyxFQUFBLGFBQUF6ckQsS0FBQTRxRCxZQUFBN2hELEVBQUFnaUIsT0FBQXFXLEdBQUFyNEIsRUFBQWdpQixPQUFBbVcsR0FDQWxoQyxLQUFBMHJELGNBQUExckQsS0FBQWtyRCxjQUFBbHJELEtBQUEyckQsV0FBQUMsUUFBQUgsRUFBQXpyRCxLQUFBMnJELFdBQUEvc0QsV0FDQW9CLEtBQUEwckQsY0FBQTFyRCxLQUFBbXJELGdCQUFBbnJELEtBQUEyckQsV0FBQUUsVUFBQUosRUFBQXpyRCxLQUFBMnJELFdBQUEvc0QsV0FFQW9CLEtBQUEybUQsZUFFQSxRQUFBNTlDLEVBQUFnaUIsT0FBQTNVLFFBQ0FwVyxLQUFBcXRCLGNBQUEsSUFBQUMsWUFBQSw0QkFFQXR0QixLQUFBMnJELGlCQWxCQTNyRCxLQUFBMnJELFlBQ0Evc0QsVUFBQW9CLEtBQUErakMsd0JBQUFyeUIsR0FBQTFSLEtBQUEwcUIsRUFBQW9oQyxTQUFBL25CLHdCQUFBcnlCLEdBQ0FrNkMsUUFBQTVyRCxLQUFBa3JELGNBQUFubkIsd0JBQUFyeUIsR0FDQW02QyxVQUFBN3JELEtBQUFtckQsZ0JBQUFwbkIsd0JBQUFyeUIsTUFpQ0FqVCxlQUFBZ1osT0FBc0JpekMsR0FBa0JyaUMsR0FBS3FpQyxJQ3BWN0Nsc0QsT0FBT3NKLGlCQUFpQixPQUFRLE1BSWhDaWtELGlCQUNJLEdBQUksa0JBQW1CcjJDLFVBQ3JCLFVBQ1FBLFVBQVVzMkMsY0FBY3J1QyxTQUFTLFdBQ3ZDLE1BQU90VixHQUNQcUMsUUFBUThMLElBQUksdURBQXdEbk8sUUFHdEVxQyxRQUFROEwsSUFBSSxnREFYZHkxQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5jb25zdCBkaXJlY3RpdmVzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQnJhbmRzIGEgZnVuY3Rpb24gYXMgYSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBzbyB0aGF0IGxpdC1odG1sIHdpbGwgY2FsbFxuICogdGhlIGZ1bmN0aW9uIGR1cmluZyB0ZW1wbGF0ZSByZW5kZXJpbmcsIHJhdGhlciB0aGFuIHBhc3NpbmcgYXMgYSB2YWx1ZS5cbiAqXG4gKiBBIF9kaXJlY3RpdmVfIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIFBhcnQgYXMgYW4gYXJndW1lbnQuIEl0IGhhcyB0aGVcbiAqIHNpZ25hdHVyZTogYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC5cbiAqXG4gKiBBIGRpcmVjdGl2ZSBfZmFjdG9yeV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFyZ3VtZW50cyBmb3IgZGF0YSBhbmRcbiAqIGNvbmZpZ3VyYXRpb24gYW5kIHJldHVybnMgYSBkaXJlY3RpdmUuIFVzZXJzIG9mIGRpcmVjdGl2ZSB1c3VhbGx5IHJlZmVyIHRvXG4gKiB0aGUgZGlyZWN0aXZlIGZhY3RvcnkgYXMgdGhlIGRpcmVjdGl2ZS4gRm9yIGV4YW1wbGUsIFwiVGhlIHJlcGVhdCBkaXJlY3RpdmVcIi5cbiAqXG4gKiBVc3VhbGx5IGEgdGVtcGxhdGUgYXV0aG9yIHdpbGwgaW52b2tlIGEgZGlyZWN0aXZlIGZhY3RvcnkgaW4gdGhlaXIgdGVtcGxhdGVcbiAqIHdpdGggcmVsZXZhbnQgYXJndW1lbnRzLCB3aGljaCB3aWxsIHRoZW4gcmV0dXJuIGEgZGlyZWN0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBgcmVwZWF0KClgIGRpcmVjdGl2ZSBmYWN0b3J5IHRoYXQgdGFrZXMgYW5cbiAqIGFycmF5IGFuZCBhIGZ1bmN0aW9uIHRvIHJlbmRlciBhbiBpdGVtOlxuICpcbiAqIGBgYGpzXG4gKiBodG1sYDx1bD48JHtyZXBlYXQoaXRlbXMsIChpdGVtKSA9PiBodG1sYDxsaT4ke2l0ZW19PC9saT5gKX08L3VsPmBcbiAqIGBgYFxuICpcbiAqIFdoZW4gYHJlcGVhdGAgaXMgaW52b2tlZCwgaXQgcmV0dXJucyBhIGRpcmVjdGl2ZSBmdW5jdGlvbiB0aGF0IGNsb3NlcyBvdmVyXG4gKiBgaXRlbXNgIGFuZCB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uIFdoZW4gdGhlIG91dGVyIHRlbXBsYXRlIGlzIHJlbmRlcmVkLCB0aGVcbiAqIHJldHVybiBkaXJlY3RpdmUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIFBhcnQgZm9yIHRoZSBleHByZXNzaW9uLlxuICogYHJlcGVhdGAgdGhlbiBwZXJmb3JtcyBpdCdzIGN1c3RvbSBsb2dpYyB0byByZW5kZXIgbXVsdGlwbGUgaXRlbXMuXG4gKlxuICogQHBhcmFtIGYgVGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBNdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFcbiAqIGZ1bmN0aW9uIG9mIHRoZSBzaWduYXR1cmUgYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIHdpbGxcbiAqIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXJ0IG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCB7ZGlyZWN0aXZlLCBodG1sfSBmcm9tICdsaXQtaHRtbCc7XG4gKlxuICogY29uc3QgaW1tdXRhYmxlID0gZGlyZWN0aXZlKCh2KSA9PiAocGFydCkgPT4ge1xuICogICBpZiAocGFydC52YWx1ZSAhPT0gdikge1xuICogICAgIHBhcnQuc2V0VmFsdWUodilcbiAqICAgfVxuICogfSk7XG4gKi9cbmV4cG9ydCBjb25zdCBkaXJlY3RpdmUgPSAoZikgPT4gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgZCA9IGYoLi4uYXJncyk7XG4gICAgZGlyZWN0aXZlcy5zZXQoZCwgdHJ1ZSk7XG4gICAgcmV0dXJuIGQ7XG59KTtcbmV4cG9ydCBjb25zdCBpc0RpcmVjdGl2ZSA9IChvKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nICYmIGRpcmVjdGl2ZXMuaGFzKG8pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpcmVjdGl2ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIFRydWUgaWYgdGhlIGN1c3RvbSBlbGVtZW50cyBwb2x5ZmlsbCBpcyBpbiB1c2UuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0NFUG9seWZpbGwgPSB3aW5kb3cuY3VzdG9tRWxlbWVudHMgIT09IHVuZGVmaW5lZCAmJlxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrICE9PVxuICAgICAgICB1bmRlZmluZWQ7XG4vKipcbiAqIFJlcGFyZW50cyBub2Rlcywgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIChpbmNsdXNpdmUpIHRvIGBlbmRgIChleGNsdXNpdmUpLFxuICogaW50byBhbm90aGVyIGNvbnRhaW5lciAoY291bGQgYmUgdGhlIHNhbWUgY29udGFpbmVyKSwgYmVmb3JlIGBiZWZvcmVgLiBJZlxuICogYGJlZm9yZWAgaXMgbnVsbCwgaXQgYXBwZW5kcyB0aGUgbm9kZXMgdG8gdGhlIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcGFyZW50Tm9kZXMgPSAoY29udGFpbmVyLCBzdGFydCwgZW5kID0gbnVsbCwgYmVmb3JlID0gbnVsbCkgPT4ge1xuICAgIHdoaWxlIChzdGFydCAhPT0gZW5kKSB7XG4gICAgICAgIGNvbnN0IG4gPSBzdGFydC5uZXh0U2libGluZztcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShzdGFydCwgYmVmb3JlKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgIH1cbn07XG4vKipcbiAqIFJlbW92ZXMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSwgZnJvbVxuICogYGNvbnRhaW5lcmAuXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVOb2RlcyA9IChjb250YWluZXIsIHN0YXJ0LCBlbmQgPSBudWxsKSA9PiB7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0Lm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoc3RhcnQpO1xuICAgICAgICBzdGFydCA9IG47XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSB7fTtcbi8qKlxuICogQSBzZW50aW5lbCB2YWx1ZSB0aGF0IHNpZ25hbHMgYSBOb2RlUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSB7fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBBbiBleHByZXNzaW9uIG1hcmtlciB3aXRoIGVtYmVkZGVkIHVuaXF1ZSBrZXkgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGhcbiAqIHBvc3NpYmxlIHRleHQgaW4gdGVtcGxhdGVzLlxuICovXG5leHBvcnQgY29uc3QgbWFya2VyID0gYHt7bGl0LSR7U3RyaW5nKE1hdGgucmFuZG9tKCkpLnNsaWNlKDIpfX19YDtcbi8qKlxuICogQW4gZXhwcmVzc2lvbiBtYXJrZXIgdXNlZCB0ZXh0LXBvc2l0aW9ucywgbXVsdGktYmluZGluZyBhdHRyaWJ1dGVzLCBhbmRcbiAqIGF0dHJpYnV0ZXMgd2l0aCBtYXJrdXAtbGlrZSB0ZXh0IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vZGVNYXJrZXIgPSBgPCEtLSR7bWFya2VyfS0tPmA7XG5leHBvcnQgY29uc3QgbWFya2VyUmVnZXggPSBuZXcgUmVnRXhwKGAke21hcmtlcn18JHtub2RlTWFya2VyfWApO1xuLyoqXG4gKiBTdWZmaXggYXBwZW5kZWQgdG8gYWxsIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGJvdW5kQXR0cmlidXRlU3VmZml4ID0gJyRsaXQkJztcbi8qKlxuICogQW4gdXBkYXRlYWJsZSBUZW1wbGF0ZSB0aGF0IHRyYWNrcyB0aGUgbG9jYXRpb24gb2YgZHluYW1pYyBwYXJ0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBjb25zdCBub2Rlc1RvUmVtb3ZlID0gW107XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIC8vIEVkZ2UgbmVlZHMgYWxsIDQgcGFyYW1ldGVycyBwcmVzZW50OyBJRTExIG5lZWRzIDNyZCBwYXJhbWV0ZXIgdG8gYmUgbnVsbFxuICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsZW1lbnQuY29udGVudCwgMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBsYXN0IGluZGV4IGFzc29jaWF0ZWQgd2l0aCBhIHBhcnQuIFdlIHRyeSB0byBkZWxldGVcbiAgICAgICAgLy8gdW5uZWNlc3Nhcnkgbm9kZXMsIGJ1dCB3ZSBuZXZlciB3YW50IHRvIGFzc29jaWF0ZSB0d28gZGlmZmVyZW50IHBhcnRzXG4gICAgICAgIC8vIHRvIHRoZSBzYW1lIGluZGV4LiBUaGV5IG11c3QgaGF2ZSBhIGNvbnN0YW50IG5vZGUgYmV0d2Vlbi5cbiAgICAgICAgbGV0IGxhc3RQYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGNvbnN0IHsgc3RyaW5ncywgdmFsdWVzOiB7IGxlbmd0aCB9IH0gPSByZXN1bHQ7XG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgLyogTm9kZS5FTEVNRU5UX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTmFtZWROb2RlTWFwLFxuICAgICAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGVzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSByZXR1cm5lZCBpbiBkb2N1bWVudCBvcmRlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcGFydGljdWxhciwgRWRnZS9JRSBjYW4gcmV0dXJuIHRoZW0gb3V0IG9mIG9yZGVyLCBzbyB3ZSBjYW5ub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1lIGEgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBwYXJ0IGluZGV4IGFuZCBhdHRyaWJ1dGUgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRzV2l0aChhdHRyaWJ1dGVzW2ldLm5hbWUsIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRlbXBsYXRlIGxpdGVyYWwgc2VjdGlvbiBsZWFkaW5nIHVwIHRvIHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiBpbiB0aGlzIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nRm9yUGFydCA9IHN0cmluZ3NbcGFydEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFzdEF0dHJpYnV0ZU5hbWVSZWdleC5leGVjKHN0cmluZ0ZvclBhcnQpWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbCBib3VuZCBhdHRyaWJ1dGVzIGhhdmUgaGFkIGEgc3VmZml4IGFkZGVkIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZW1wbGF0ZVJlc3VsdCNnZXRIVE1MIHRvIG9wdCBvdXQgb2Ygc3BlY2lhbCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsaW5nLiBUbyBsb29rIHVwIHRoZSBhdHRyaWJ1dGUgdmFsdWUgd2UgYWxzbyBuZWVkIHRvIGFkZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN1ZmZpeC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUxvb2t1cE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkgKyBib3VuZEF0dHJpYnV0ZVN1ZmZpeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTG9va3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVMb29rdXBOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSBhdHRyaWJ1dGVWYWx1ZS5zcGxpdChtYXJrZXJSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnYXR0cmlidXRlJywgaW5kZXgsIG5hbWUsIHN0cmluZ3M6IHN0YXRpY3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggKz0gc3RhdGljcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbm9kZS5kYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YobWFya2VyKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5ncyA9IGRhdGEuc3BsaXQobWFya2VyUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHRleHQgbm9kZSBmb3IgZWFjaCBsaXRlcmFsIHNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3Igbm9kZSBwYXJ0c1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ID0gY3JlYXRlTWFya2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwgJiYgZW5kc1dpdGgobWF0Y2hbMl0sIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gcy5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyBtYXRjaFsxXSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXS5zbGljZSgwLCAtYm91bmRBdHRyaWJ1dGVTdWZmaXgubGVuZ3RoKSArIG1hdGNoWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoaW5zZXJ0LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXg6ICsraW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyB0ZXh0LCB3ZSBtdXN0IGluc2VydCBhIGNvbW1lbnQgdG8gbWFyayBvdXIgcGxhY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVsc2UsIHdlIGNhbiB0cnVzdCBpdCB3aWxsIHN0aWNrIGFyb3VuZCBhZnRlciBjbG9uaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nc1tsYXN0SW5kZXhdID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGEgPSBzdHJpbmdzW2xhc3RJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHBhcnQgZm9yIGVhY2ggbWF0Y2ggZm91bmRcbiAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ICs9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIE5vZGUuQ09NTUVOVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbmV3IG1hcmtlciBub2RlIHRvIGJlIHRoZSBzdGFydE5vZGUgb2YgdGhlIFBhcnQgaWYgYW55IG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIHRydWU6XG4gICAgICAgICAgICAgICAgICAgIC8vICAqIFdlIGRvbid0IGhhdmUgYSBwcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gICogVGhlIHByZXZpb3VzU2libGluZyBpcyBhbHJlYWR5IHRoZSBzdGFydCBvZiBhIHByZXZpb3VzIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBudWxsIHx8IGluZGV4ID09PSBsYXN0UGFydEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgbmV4dFNpYmxpbmcsIGtlZXAgdGhpcyBub2RlIHNvIHdlIGhhdmUgYW4gZW5kLlxuICAgICAgICAgICAgICAgICAgICAvLyBFbHNlLCB3ZSBjYW4gcmVtb3ZlIGl0IHRvIHNhdmUgZnV0dXJlIGNvc3RzLlxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChpID0gbm9kZS5kYXRhLmluZGV4T2YobWFya2VyLCBpICsgMSkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tbWVudCBub2RlIGhhcyBhIGJpbmRpbmcgbWFya2VyIGluc2lkZSwgbWFrZSBhbiBpbmFjdGl2ZSBwYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYmluZGluZyB3b24ndCB3b3JrLCBidXQgc3Vic2VxdWVudCBiaW5kaW5ncyB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogY29uc2lkZXIgd2hldGhlciBpdCdzIGV2ZW4gd29ydGggaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgYmluZGluZ3MgaW4gY29tbWVudHMgd29ya1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleDogLTEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgdGV4dCBiaW5kaW5nIG5vZGVzIGFmdGVyIHRoZSB3YWxrIHRvIG5vdCBkaXN0dXJiIHRoZSBUcmVlV2Fsa2VyXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBub2Rlc1RvUmVtb3ZlKSB7XG4gICAgICAgICAgICBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBlbmRzV2l0aCA9IChzdHIsIHN1ZmZpeCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gICAgcmV0dXJuIGluZGV4ID49IDAgJiYgc3RyLnNsaWNlKGluZGV4KSA9PT0gc3VmZml4O1xufTtcbmV4cG9ydCBjb25zdCBpc1RlbXBsYXRlUGFydEFjdGl2ZSA9IChwYXJ0KSA9PiBwYXJ0LmluZGV4ICE9PSAtMTtcbi8vIEFsbG93cyBgZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJylgIHRvIGJlIHJlbmFtZWQgZm9yIGFcbi8vIHNtYWxsIG1hbnVhbCBzaXplLXNhdmluZ3MuXG5leHBvcnQgY29uc3QgY3JlYXRlTWFya2VyID0gKCkgPT4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7XG4vKipcbiAqIFRoaXMgcmVnZXggZXh0cmFjdHMgdGhlIGF0dHJpYnV0ZSBuYW1lIHByZWNlZGluZyBhbiBhdHRyaWJ1dGUtcG9zaXRpb25cbiAqIGV4cHJlc3Npb24uIEl0IGRvZXMgdGhpcyBieSBtYXRjaGluZyB0aGUgc3ludGF4IGFsbG93ZWQgZm9yIGF0dHJpYnV0ZXNcbiAqIGFnYWluc3QgdGhlIHN0cmluZyBsaXRlcmFsIGRpcmVjdGx5IHByZWNlZGluZyB0aGUgZXhwcmVzc2lvbiwgYXNzdW1pbmcgdGhhdFxuICogdGhlIGV4cHJlc3Npb24gaXMgaW4gYW4gYXR0cmlidXRlLXZhbHVlIHBvc2l0aW9uLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxceDA5XFx4MGFcXHgwY1xceDBkXCIgYXJlIEhUTUwgc3BhY2UgY2hhcmFjdGVyczpcbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI3NwYWNlLWNoYXJhY3RlcnNcbiAqXG4gKiBcIlxcMC1cXHgxRlxceDdGLVxceDlGXCIgYXJlIFVuaWNvZGUgY29udHJvbCBjaGFyYWN0ZXJzLCB3aGljaCBpbmNsdWRlcyBldmVyeVxuICogc3BhY2UgY2hhcmFjdGVyIGV4Y2VwdCBcIiBcIi5cbiAqXG4gKiBTbyBhbiBhdHRyaWJ1dGUgaXM6XG4gKiAgKiBUaGUgbmFtZTogYW55IGNoYXJhY3RlciBleGNlcHQgYSBjb250cm9sIGNoYXJhY3Rlciwgc3BhY2UgY2hhcmFjdGVyLCAoJyksXG4gKiAgICAoXCIpLCBcIj5cIiwgXCI9XCIsIG9yIFwiL1wiXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5leHBvcnQgY29uc3QgbGFzdEF0dHJpYnV0ZU5hbWVSZWdleCA9IC8oWyBcXHgwOVxceDBhXFx4MGNcXHgwZF0pKFteXFwwLVxceDFGXFx4N0YtXFx4OUYgXCInPj0vXSspKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKj1bIFxceDA5XFx4MGFcXHgwY1xceDBkXSooPzpbXiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiJ2A8Pj1dKnxcIlteXCJdKnwnW14nXSopKSQvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IGlzQ0VQb2x5ZmlsbCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGlzVGVtcGxhdGVQYXJ0QWN0aXZlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIGEgYFRlbXBsYXRlYCB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgRE9NIGFuZCB1cGRhdGVkXG4gKiB3aXRoIG5ldyB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUluc3RhbmNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgcHJvY2Vzc29yLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX19wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuX19wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnQuc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfY2xvbmUoKSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBhIG51bWJlciBvZiBzdGVwcyBpbiB0aGUgbGlmZWN5Y2xlIG9mIGEgdGVtcGxhdGUgaW5zdGFuY2Unc1xuICAgICAgICAvLyBET00gZnJhZ21lbnQ6XG4gICAgICAgIC8vICAxLiBDbG9uZSAtIGNyZWF0ZSB0aGUgaW5zdGFuY2UgZnJhZ21lbnRcbiAgICAgICAgLy8gIDIuIEFkb3B0IC0gYWRvcHQgaW50byB0aGUgbWFpbiBkb2N1bWVudFxuICAgICAgICAvLyAgMy4gUHJvY2VzcyAtIGZpbmQgcGFydCBtYXJrZXJzIGFuZCBjcmVhdGUgcGFydHNcbiAgICAgICAgLy8gIDQuIFVwZ3JhZGUgLSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50c1xuICAgICAgICAvLyAgNS4gVXBkYXRlIC0gc2V0IG5vZGUsIGF0dHJpYnV0ZSwgcHJvcGVydHksIGV0Yy4sIHZhbHVlc1xuICAgICAgICAvLyAgNi4gQ29ubmVjdCAtIGNvbm5lY3QgdG8gdGhlIGRvY3VtZW50LiBPcHRpb25hbCBhbmQgb3V0c2lkZSBvZiB0aGlzXG4gICAgICAgIC8vICAgICBtZXRob2QuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGhhdmUgYSBmZXcgY29uc3RyYWludHMgb24gdGhlIG9yZGVyaW5nIG9mIHRoZXNlIHN0ZXBzOlxuICAgICAgICAvLyAgKiBXZSBuZWVkIHRvIHVwZ3JhZGUgYmVmb3JlIHVwZGF0aW5nLCBzbyB0aGF0IHByb3BlcnR5IHZhbHVlcyB3aWxsIHBhc3NcbiAgICAgICAgLy8gICAgdGhyb3VnaCBhbnkgcHJvcGVydHkgc2V0dGVycy5cbiAgICAgICAgLy8gICogV2Ugd291bGQgbGlrZSB0byBwcm9jZXNzIGJlZm9yZSB1cGdyYWRpbmcgc28gdGhhdCB3ZSdyZSBzdXJlIHRoYXQgdGhlXG4gICAgICAgIC8vICAgIGNsb25lZCBmcmFnbWVudCBpcyBpbmVydCBhbmQgbm90IGRpc3R1cmJlZCBieSBzZWxmLW1vZGlmeWluZyBET00uXG4gICAgICAgIC8vICAqIFdlIHdhbnQgY3VzdG9tIGVsZW1lbnRzIHRvIHVwZ3JhZGUgZXZlbiBpbiBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBHaXZlbiB0aGVzZSBjb25zdHJhaW50cywgd2l0aCBmdWxsIGN1c3RvbSBlbGVtZW50cyBzdXBwb3J0IHdlIHdvdWxkXG4gICAgICAgIC8vIHByZWZlciB0aGUgb3JkZXI6IENsb25lLCBQcm9jZXNzLCBBZG9wdCwgVXBncmFkZSwgVXBkYXRlLCBDb25uZWN0XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEJ1dCBTYWZhcmkgZG9vZXMgbm90IGltcGxlbWVudCBDdXN0b21FbGVtZW50UmVnaXN0cnkjdXBncmFkZSwgc28gd2VcbiAgICAgICAgLy8gY2FuIG5vdCBpbXBsZW1lbnQgdGhhdCBvcmRlciBhbmQgc3RpbGwgaGF2ZSB1cGdyYWRlLWJlZm9yZS11cGRhdGUgYW5kXG4gICAgICAgIC8vIHVwZ3JhZGUgZGlzY29ubmVjdGVkIGZyYWdtZW50cy4gU28gd2UgaW5zdGVhZCBzYWNyaWZpY2UgdGhlXG4gICAgICAgIC8vIHByb2Nlc3MtYmVmb3JlLXVwZ3JhZGUgY29uc3RyYWludCwgc2luY2UgaW4gQ3VzdG9tIEVsZW1lbnRzIHYxIGVsZW1lbnRzXG4gICAgICAgIC8vIG11c3Qgbm90IG1vZGlmeSB0aGVpciBsaWdodCBET00gaW4gdGhlIGNvbnN0cnVjdG9yLiBXZSBzdGlsbCBoYXZlIGlzc3Vlc1xuICAgICAgICAvLyB3aGVuIGNvLWV4aXN0aW5nIHdpdGggQ0V2MCBlbGVtZW50cyBsaWtlIFBvbHltZXIgMSwgYW5kIHdpdGggcG9seWZpbGxzXG4gICAgICAgIC8vIHRoYXQgZG9uJ3Qgc3RyaWN0bHkgYWRoZXJlIHRvIHRoZSBuby1tb2RpZmljYXRpb24gcnVsZSBiZWNhdXNlIHNoYWRvd1xuICAgICAgICAvLyBET00sIHdoaWNoIG1heSBiZSBjcmVhdGVkIGluIHRoZSBjb25zdHJ1Y3RvciwgaXMgZW11bGF0ZWQgYnkgYmVpbmcgcGxhY2VkXG4gICAgICAgIC8vIGluIHRoZSBsaWdodCBET00uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSByZXN1bHRpbmcgb3JkZXIgaXMgb24gbmF0aXZlIGlzOiBDbG9uZSwgQWRvcHQsIFVwZ3JhZGUsIFByb2Nlc3MsXG4gICAgICAgIC8vIFVwZGF0ZSwgQ29ubmVjdC4gZG9jdW1lbnQuaW1wb3J0Tm9kZSgpIHBlcmZvcm1zIENsb25lLCBBZG9wdCwgYW5kIFVwZ3JhZGVcbiAgICAgICAgLy8gaW4gb25lIHN0ZXAuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBDdXN0b20gRWxlbWVudHMgdjEgcG9seWZpbGwgc3VwcG9ydHMgdXBncmFkZSgpLCBzbyB0aGUgb3JkZXIgd2hlblxuICAgICAgICAvLyBwb2x5ZmlsbGVkIGlzIHRoZSBtb3JlIGlkZWFsOiBDbG9uZSwgUHJvY2VzcywgQWRvcHQsIFVwZ3JhZGUsIFVwZGF0ZSxcbiAgICAgICAgLy8gQ29ubmVjdC5cbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBpc0NFUG9seWZpbGwgP1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZS5lbGVtZW50LmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIDpcbiAgICAgICAgICAgIGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZS5lbGVtZW50LmNvbnRlbnQsIHRydWUpO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHRoaXMudGVtcGxhdGUucGFydHM7XG4gICAgICAgIC8vIEVkZ2UgbmVlZHMgYWxsIDQgcGFyYW1ldGVycyBwcmVzZW50OyBJRTExIG5lZWRzIDNyZCBwYXJhbWV0ZXIgdG8gYmUgbnVsbFxuICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGZyYWdtZW50LCAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi8sIG51bGwsIGZhbHNlKTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGxldCBub2RlSW5kZXggPSAwO1xuICAgICAgICBsZXQgcGFydDtcbiAgICAgICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgbm9kZXMgYW5kIHBhcnRzIG9mIGEgdGVtcGxhdGVcbiAgICAgICAgd2hpbGUgKHBhcnRJbmRleCA8IHBhcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgICAgICBpZiAoIWlzVGVtcGxhdGVQYXJ0QWN0aXZlKHBhcnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2dyZXNzIHRoZSB0cmVlIHdhbGtlciB1bnRpbCB3ZSBmaW5kIG91ciBuZXh0IHBhcnQncyBub2RlLlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IG11bHRpcGxlIHBhcnRzIG1heSBzaGFyZSB0aGUgc2FtZSBub2RlIChhdHRyaWJ1dGUgcGFydHNcbiAgICAgICAgICAgIC8vIG9uIGEgc2luZ2xlIGVsZW1lbnQpLCBzbyB0aGlzIGxvb3AgbWF5IG5vdCBydW4gYXQgYWxsLlxuICAgICAgICAgICAgd2hpbGUgKG5vZGVJbmRleCA8IHBhcnQuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgobm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBleGhhdXN0ZWQgdGhlIGNvbnRlbnQgaW5zaWRlIGEgbmVzdGVkIHRlbXBsYXRlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHRlbXBsYXRlIGluIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgICAgICAvLyAtIFRoZSB3YWxrZXIgd2lsbCBmaW5kIGEgbmV4dE5vZGUgb3V0c2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSd2ZSBhcnJpdmVkIGF0IG91ciBwYXJ0J3Mgbm9kZS5cbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdub2RlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnQgPSB0aGlzLnByb2Nlc3Nvci5oYW5kbGVUZXh0RXhwcmVzc2lvbih0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHBhcnQuaW5zZXJ0QWZ0ZXJOb2RlKG5vZGUucHJldmlvdXNTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKC4uLnRoaXMucHJvY2Vzc29yLmhhbmRsZUF0dHJpYnV0ZUV4cHJlc3Npb25zKG5vZGUsIHBhcnQubmFtZSwgcGFydC5zdHJpbmdzLCB0aGlzLm9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NFUG9seWZpbGwpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkb3B0Tm9kZShmcmFnbWVudCk7XG4gICAgICAgICAgICBjdXN0b21FbGVtZW50cy51cGdyYWRlKGZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJhZ21lbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtaW5zdGFuY2UuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IHJlcGFyZW50Tm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBib3VuZEF0dHJpYnV0ZVN1ZmZpeCwgbGFzdEF0dHJpYnV0ZU5hbWVSZWdleCwgbWFya2VyLCBub2RlTWFya2VyIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5jb25zdCBjb21tZW50TWFya2VyID0gYCAke21hcmtlcn0gYDtcbi8qKlxuICogVGhlIHJldHVybiB0eXBlIG9mIGBodG1sYCwgd2hpY2ggaG9sZHMgYSBUZW1wbGF0ZSBhbmQgdGhlIHZhbHVlcyBmcm9tXG4gKiBpbnRlcnBvbGF0ZWQgZXhwcmVzc2lvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3Ioc3RyaW5ncywgdmFsdWVzLCB0eXBlLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwgdXNlZCB0byBjcmVhdGUgYSBgPHRlbXBsYXRlPmAgZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXRIVE1MKCkge1xuICAgICAgICBjb25zdCBsID0gdGhpcy5zdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBodG1sID0gJyc7XG4gICAgICAgIGxldCBpc0NvbW1lbnRCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5zdHJpbmdzW2ldO1xuICAgICAgICAgICAgLy8gRm9yIGVhY2ggYmluZGluZyB3ZSB3YW50IHRvIGRldGVybWluZSB0aGUga2luZCBvZiBtYXJrZXIgdG8gaW5zZXJ0XG4gICAgICAgICAgICAvLyBpbnRvIHRoZSB0ZW1wbGF0ZSBzb3VyY2UgYmVmb3JlIGl0J3MgcGFyc2VkIGJ5IHRoZSBicm93c2VyJ3MgSFRNTFxuICAgICAgICAgICAgLy8gcGFyc2VyLiBUaGUgbWFya2VyIHR5cGUgaXMgYmFzZWQgb24gd2hldGhlciB0aGUgZXhwcmVzc2lvbiBpcyBpbiBhblxuICAgICAgICAgICAgLy8gYXR0cmlidXRlLCB0ZXh0LCBvciBjb21tZW50IHBvaXNpdGlvbi5cbiAgICAgICAgICAgIC8vICAgKiBGb3Igbm9kZS1wb3NpdGlvbiBiaW5kaW5ncyB3ZSBpbnNlcnQgYSBjb21tZW50IHdpdGggdGhlIG1hcmtlclxuICAgICAgICAgICAgLy8gICAgIHNlbnRpbmVsIGFzIGl0cyB0ZXh0IGNvbnRlbnQsIGxpa2UgPCEtLXt7bGl0LWd1aWR9fS0tPi5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgYXR0cmlidXRlIGJpbmRpbmdzIHdlIGluc2VydCBqdXN0IHRoZSBtYXJrZXIgc2VudGluZWwgZm9yIHRoZVxuICAgICAgICAgICAgLy8gICAgIGZpcnN0IGJpbmRpbmcsIHNvIHRoYXQgd2Ugc3VwcG9ydCB1bnF1b3RlZCBhdHRyaWJ1dGUgYmluZGluZ3MuXG4gICAgICAgICAgICAvLyAgICAgU3Vic2VxdWVudCBiaW5kaW5ncyBjYW4gdXNlIGEgY29tbWVudCBtYXJrZXIgYmVjYXVzZSBtdWx0aS1iaW5kaW5nXG4gICAgICAgICAgICAvLyAgICAgYXR0cmlidXRlcyBtdXN0IGJlIHF1b3RlZC5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgY29tbWVudCBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIHNvIHdlIGRvbid0XG4gICAgICAgICAgICAvLyAgICAgY2xvc2UgdGhlIGNvbW1lbnQuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGJ1dCBpcyAqbm90KiBhbiBIVE1MXG4gICAgICAgICAgICAvLyBwYXJzZXIuIFdlIGRvbid0IG5lZWQgdG8gdHJhY2sgdGhlIHRyZWUgc3RydWN0dXJlIG9mIHRoZSBIVE1MLCBvbmx5XG4gICAgICAgICAgICAvLyB3aGV0aGVyIGEgYmluZGluZyBpcyBpbnNpZGUgYSBjb21tZW50LCBhbmQgaWYgbm90LCBpZiBpdCBhcHBlYXJzIHRvIGJlXG4gICAgICAgICAgICAvLyB0aGUgZmlyc3QgYmluZGluZyBpbiBhbiBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBjb25zdCBjb21tZW50T3BlbiA9IHMubGFzdEluZGV4T2YoJzwhLS0nKTtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGluIGNvbW1lbnQgcG9zaXRpb24gaWYgd2UgaGF2ZSBhIGNvbW1lbnQgb3BlbiB3aXRoIG5vIGZvbGxvd2luZ1xuICAgICAgICAgICAgLy8gY29tbWVudCBjbG9zZS4gQmVjYXVzZSA8LS0gY2FuIGFwcGVhciBpbiBhbiBhdHRyaWJ1dGUgdmFsdWUgdGhlcmUgY2FuXG4gICAgICAgICAgICAvLyBiZSBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICAgICAgICBpc0NvbW1lbnRCaW5kaW5nID0gKGNvbW1lbnRPcGVuID4gLTEgfHwgaXNDb21tZW50QmluZGluZykgJiZcbiAgICAgICAgICAgICAgICBzLmluZGV4T2YoJy0tPicsIGNvbW1lbnRPcGVuICsgMSkgPT09IC0xO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYW4gYXR0cmlidXRlLWxpa2Ugc2VxdWVuY2UgcHJlY2VlZGluZyB0aGVcbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb24uIFRoaXMgY2FuIG1hdGNoIFwibmFtZT12YWx1ZVwiIGxpa2Ugc3RydWN0dXJlcyBpbiB0ZXh0LFxuICAgICAgICAgICAgLy8gY29tbWVudHMsIGFuZCBhdHRyaWJ1dGUgdmFsdWVzLCBzbyB0aGVyZSBjYW4gYmUgZmFsc2UtcG9zaXRpdmVzLlxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlTWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdyZSBvbmx5IGluIHRoaXMgYnJhbmNoIGlmIHdlIGRvbid0IGhhdmUgYSBhdHRyaWJ1dGUtbGlrZVxuICAgICAgICAgICAgICAgIC8vIHByZWNlZWRpbmcgc2VxdWVuY2UuIEZvciBjb21tZW50cywgdGhpcyBndWFyZHMgYWdhaW5zdCB1bnVzdWFsXG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHZhbHVlcyBsaWtlIDxkaXYgZm9vPVwiPCEtLSR7J2Jhcid9XCI+LiBDYXNlcyBsaWtlXG4gICAgICAgICAgICAgICAgLy8gPCEtLSBmb289JHsnYmFyJ30tLT4gYXJlIGhhbmRsZWQgY29ycmVjdGx5IGluIHRoZSBhdHRyaWJ1dGUgYnJhbmNoXG4gICAgICAgICAgICAgICAgLy8gYmVsb3cuXG4gICAgICAgICAgICAgICAgaHRtbCArPSBzICsgKGlzQ29tbWVudEJpbmRpbmcgPyBjb21tZW50TWFya2VyIDogbm9kZU1hcmtlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgYXR0cmlidXRlcyB3ZSB1c2UganVzdCBhIG1hcmtlciBzZW50aW5lbCwgYW5kIGFsc28gYXBwZW5kIGFcbiAgICAgICAgICAgICAgICAvLyAkbGl0JCBzdWZmaXggdG8gdGhlIG5hbWUgdG8gb3B0LW91dCBvZiBhdHRyaWJ1dGUtc3BlY2lmaWMgcGFyc2luZ1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgSUUgYW5kIEVkZ2UgZG8gZm9yIHN0eWxlIGFuZCBjZXJ0YWluIFNWRyBhdHRyaWJ1dGVzLlxuICAgICAgICAgICAgICAgIGh0bWwgKz0gcy5zdWJzdHIoMCwgYXR0cmlidXRlTWF0Y2guaW5kZXgpICsgYXR0cmlidXRlTWF0Y2hbMV0gK1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVNYXRjaFsyXSArIGJvdW5kQXR0cmlidXRlU3VmZml4ICsgYXR0cmlidXRlTWF0Y2hbM10gK1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaHRtbCArPSB0aGlzLnN0cmluZ3NbbF07XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdGhpcy5nZXRIVE1MKCk7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEEgVGVtcGxhdGVSZXN1bHQgZm9yIFNWRyBmcmFnbWVudHMuXG4gKlxuICogVGhpcyBjbGFzcyB3cmFwcyBIVE1MIGluIGFuIGA8c3ZnPmAgdGFnIGluIG9yZGVyIHRvIHBhcnNlIGl0cyBjb250ZW50cyBpbiB0aGVcbiAqIFNWRyBuYW1lc3BhY2UsIHRoZW4gbW9kaWZpZXMgdGhlIHRlbXBsYXRlIHRvIHJlbW92ZSB0aGUgYDxzdmc+YCB0YWcgc28gdGhhdFxuICogY2xvbmVzIG9ubHkgY29udGFpbmVyIHRoZSBvcmlnaW5hbCBmcmFnbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNWR1RlbXBsYXRlUmVzdWx0IGV4dGVuZHMgVGVtcGxhdGVSZXN1bHQge1xuICAgIGdldEhUTUwoKSB7XG4gICAgICAgIHJldHVybiBgPHN2Zz4ke3N1cGVyLmdldEhUTUwoKX08L3N2Zz5gO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gc3VwZXIuZ2V0VGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZS5jb250ZW50O1xuICAgICAgICBjb25zdCBzdmdFbGVtZW50ID0gY29udGVudC5maXJzdENoaWxkO1xuICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHN2Z0VsZW1lbnQpO1xuICAgICAgICByZXBhcmVudE5vZGVzKGNvbnRlbnQsIHN2Z0VsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1yZXN1bHQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IGlzRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmUuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBub0NoYW5nZSwgbm90aGluZyB9IGZyb20gJy4vcGFydC5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4vdGVtcGxhdGUtcmVzdWx0LmpzJztcbmltcG9ydCB7IGNyZWF0ZU1hcmtlciB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuZXhwb3J0IGNvbnN0IGlzUHJpbWl0aXZlID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuICh2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAhKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSk7XG59O1xuZXhwb3J0IGNvbnN0IGlzSXRlcmFibGUgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHxcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICAhISh2YWx1ZSAmJiB2YWx1ZVtTeW1ib2wuaXRlcmF0b3JdKTtcbn07XG4vKipcbiAqIFdyaXRlcyBhdHRyaWJ1dGUgdmFsdWVzIHRvIHRoZSBET00gZm9yIGEgZ3JvdXAgb2YgQXR0cmlidXRlUGFydHMgYm91bmQgdG8gYVxuICogc2luZ2xlIGF0dGlidXRlLiBUaGUgdmFsdWUgaXMgb25seSBzZXQgb25jZSBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0c1xuICogZm9yIGFuIGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZUNvbW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRzW2ldID0gdGhpcy5fY3JlYXRlUGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUgcGFydC4gT3ZlcnJpZGUgdGhpcyB0byBjcmVhdGUgYSBkaWZmZXJudCB0eXBlIG9mIHBhcnQuXG4gICAgICovXG4gICAgX2NyZWF0ZVBhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlUGFydCh0aGlzKTtcbiAgICB9XG4gICAgX2dldFZhbHVlKCkge1xuICAgICAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5zdHJpbmdzO1xuICAgICAgICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGV4dCArPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHBhcnQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHYpIHx8ICFpc0l0ZXJhYmxlKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gdiA6IFN0cmluZyh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHR5cGVvZiB0ID09PSAnc3RyaW5nJyA/IHQgOiBTdHJpbmcodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSBzdHJpbmdzW2xdO1xuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIHRoaXMuX2dldFZhbHVlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIFBhcnQgdGhhdCBjb250cm9scyBhbGwgb3IgcGFydCBvZiBhbiBhdHRyaWJ1dGUgdmFsdWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb21taXR0ZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb21taXR0ZXIgPSBjb21taXR0ZXI7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbm9DaGFuZ2UgJiYgKCFpc1ByaW1pdGl2ZSh2YWx1ZSkgfHwgdmFsdWUgIT09IHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgYSBub3QgYSBkaXJlY3RpdmUsIGRpcnR5IHRoZSBjb21taXR0ZXIgc28gdGhhdCBpdCdsbFxuICAgICAgICAgICAgLy8gY2FsbCBzZXRBdHRyaWJ1dGUuIElmIHRoZSB2YWx1ZSBpcyBhIGRpcmVjdGl2ZSwgaXQnbGwgZGlydHkgdGhlXG4gICAgICAgICAgICAvLyBjb21taXR0ZXIgaWYgaXQgY2FsbHMgc2V0VmFsdWUoKS5cbiAgICAgICAgICAgIGlmICghaXNEaXJlY3RpdmUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21taXR0ZXIuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tbWl0dGVyLmNvbW1pdCgpO1xuICAgIH1cbn1cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYSBsb2NhdGlvbiB3aXRoaW4gYSBOb2RlIHRyZWUuIExpa2UgYSBSYW5nZSwgTm9kZVBhcnRcbiAqIGhhcyBzdGFydCBhbmQgZW5kIGxvY2F0aW9ucyBhbmQgY2FuIHNldCBhbmQgdXBkYXRlIHRoZSBOb2RlcyBiZXR3ZWVuIHRob3NlXG4gKiBsb2NhdGlvbnMuXG4gKlxuICogTm9kZVBhcnRzIHN1cHBvcnQgc2V2ZXJhbCB2YWx1ZSB0eXBlczogcHJpbWl0aXZlcywgTm9kZXMsIFRlbXBsYXRlUmVzdWx0cyxcbiAqIGFzIHdlbGwgYXMgYXJyYXlzIGFuZCBpdGVyYWJsZXMgb2YgdGhvc2UgdHlwZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb2RlUGFydCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoaXMgcGFydCBpbnRvIGEgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgYXBwZW5kSW50byhjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5zdGFydE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoaXMgcGFydCBhZnRlciB0aGUgYHJlZmAgbm9kZSAoYmV0d2VlbiBgcmVmYCBhbmQgYHJlZmAncyBuZXh0XG4gICAgICogc2libGluZykuIEJvdGggYHJlZmAgYW5kIGl0cyBuZXh0IHNpYmxpbmcgbXVzdCBiZSBzdGF0aWMsIHVuY2hhbmdpbmcgbm9kZXNcbiAgICAgKiBzdWNoIGFzIHRob3NlIHRoYXQgYXBwZWFyIGluIGEgbGl0ZXJhbCBzZWN0aW9uIG9mIGEgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBpbnNlcnRBZnRlck5vZGUocmVmKSB7XG4gICAgICAgIHRoaXMuc3RhcnROb2RlID0gcmVmO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSByZWYubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhpcyBwYXJ0IGludG8gYSBwYXJlbnQgcGFydC5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGFwcGVuZEludG9QYXJ0KHBhcnQpIHtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLnN0YXJ0Tm9kZSA9IGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLmVuZE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhpcyBwYXJ0IGFmdGVyIHRoZSBgcmVmYCBwYXJ0LlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgaW5zZXJ0QWZ0ZXJQYXJ0KHJlZikge1xuICAgICAgICByZWYuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IHJlZi5lbmROb2RlO1xuICAgICAgICByZWYuZW5kTm9kZSA9IHRoaXMuc3RhcnROb2RlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzSXRlcmFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0SXRlcmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBub3RoaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbm90aGluZztcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrLCB3aWxsIHJlbmRlciB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19pbnNlcnQobm9kZSkge1xuICAgICAgICB0aGlzLmVuZE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgdGhpcy5lbmROb2RlKTtcbiAgICB9XG4gICAgX19jb21taXROb2RlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fX2luc2VydCh2YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jb21taXRUZXh0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZS5uZXh0U2libGluZztcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgLy8gSWYgYHZhbHVlYCBpc24ndCBhbHJlYWR5IGEgc3RyaW5nLCB3ZSBleHBsaWNpdGx5IGNvbnZlcnQgaXQgaGVyZSBpbiBjYXNlXG4gICAgICAgIC8vIGl0IGNhbid0IGJlIGltcGxpY2l0bHkgY29udmVydGVkIC0gaS5lLiBpdCdzIGEgc3ltYm9sLlxuICAgICAgICBjb25zdCB2YWx1ZUFzU3RyaW5nID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMuZW5kTm9kZS5wcmV2aW91c1NpYmxpbmcgJiZcbiAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgIC8vIElmIHdlIG9ubHkgaGF2ZSBhIHNpbmdsZSB0ZXh0IG5vZGUgYmV0d2VlbiB0aGUgbWFya2Vycywgd2UgY2FuIGp1c3RcbiAgICAgICAgICAgIC8vIHNldCBpdHMgdmFsdWUsIHJhdGhlciB0aGFuIHJlcGxhY2luZyBpdC5cbiAgICAgICAgICAgIC8vIFRPRE8oanVzdGluZmFnbmFuaSk6IENhbiB3ZSBqdXN0IGNoZWNrIGlmIHRoaXMudmFsdWUgaXMgcHJpbWl0aXZlP1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gdmFsdWVBc1N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlQXNTdHJpbmcpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIF9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMudGVtcGxhdGVGYWN0b3J5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlICYmXG4gICAgICAgICAgICB0aGlzLnZhbHVlLnRlbXBsYXRlID09PSB0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS51cGRhdGUodmFsdWUudmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBwcm9wYWdhdGUgdGhlIHRlbXBsYXRlIHByb2Nlc3NvciBmcm9tIHRoZSBUZW1wbGF0ZVJlc3VsdFxuICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSB1c2UgaXRzIHN5bnRheCBleHRlbnNpb24sIGV0Yy4gVGhlIHRlbXBsYXRlIGZhY3RvcnkgY29tZXNcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIHJlbmRlciBmdW5jdGlvbiBvcHRpb25zIHNvIHRoYXQgaXQgY2FuIGNvbnRyb2wgdGVtcGxhdGVcbiAgICAgICAgICAgIC8vIGNhY2hpbmcgYW5kIHByZXByb2Nlc3NpbmcuXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUluc3RhbmNlKHRlbXBsYXRlLCB2YWx1ZS5wcm9jZXNzb3IsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKHZhbHVlLnZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZShmcmFnbWVudCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19jb21taXRJdGVyYWJsZSh2YWx1ZSkge1xuICAgICAgICAvLyBGb3IgYW4gSXRlcmFibGUsIHdlIGNyZWF0ZSBhIG5ldyBJbnN0YW5jZVBhcnQgcGVyIGl0ZW0sIHRoZW4gc2V0IGl0c1xuICAgICAgICAvLyB2YWx1ZSB0byB0aGUgaXRlbS4gVGhpcyBpcyBhIGxpdHRsZSBiaXQgb2Ygb3ZlcmhlYWQgZm9yIGV2ZXJ5IGl0ZW0gaW5cbiAgICAgICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgICAgIC8vIG9mIFRlbXBsYXRlUmVzdWx0cyB0aGF0IHdpbGwgYmUgY29tbW9ubHkgcmV0dXJuZWQgZnJvbSBleHByZXNzaW9ucyBsaWtlOlxuICAgICAgICAvLyBhcnJheS5tYXAoKGkpID0+IGh0bWxgJHtpfWApLCBieSByZXVzaW5nIGV4aXN0aW5nIFRlbXBsYXRlSW5zdGFuY2VzLlxuICAgICAgICAvLyBJZiBfdmFsdWUgaXMgYW4gYXJyYXksIHRoZW4gdGhlIHByZXZpb3VzIHJlbmRlciB3YXMgb2YgYW5cbiAgICAgICAgLy8gaXRlcmFibGUgYW5kIF92YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIE5vZGVQYXJ0cyBmcm9tIHRoZSBwcmV2aW91c1xuICAgICAgICAvLyByZW5kZXIuIElmIF92YWx1ZSBpcyBub3QgYW4gYXJyYXksIGNsZWFyIHRoaXMgcGFydCBhbmQgbWFrZSBhIG5ld1xuICAgICAgICAvLyBhcnJheSBmb3IgTm9kZVBhcnRzLlxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMZXRzIHVzIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaXRlbXMgd2Ugc3RhbXBlZCBzbyB3ZSBjYW4gY2xlYXIgbGVmdG92ZXJcbiAgICAgICAgLy8gaXRlbXMgZnJvbSBhIHByZXZpb3VzIHJlbmRlclxuICAgICAgICBjb25zdCBpdGVtUGFydHMgPSB0aGlzLnZhbHVlO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IGl0ZW1QYXJ0O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byByZXVzZSBhbiBleGlzdGluZyBwYXJ0XG4gICAgICAgICAgICBpdGVtUGFydCA9IGl0ZW1QYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgLy8gSWYgbm8gZXhpc3RpbmcgcGFydCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgaWYgKGl0ZW1QYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtUGFydCA9IG5ldyBOb2RlUGFydCh0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGl0ZW1QYXJ0cy5wdXNoKGl0ZW1QYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1QYXJ0LmFwcGVuZEludG9QYXJ0KHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBhcnQuaW5zZXJ0QWZ0ZXJQYXJ0KGl0ZW1QYXJ0c1twYXJ0SW5kZXggLSAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbVBhcnQuc2V0VmFsdWUoaXRlbSk7XG4gICAgICAgICAgICBpdGVtUGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0SW5kZXggPCBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBUcnVuY2F0ZSB0aGUgcGFydHMgYXJyYXkgc28gX3ZhbHVlIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICBpdGVtUGFydHMubGVuZ3RoID0gcGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5jbGVhcihpdGVtUGFydCAmJiBpdGVtUGFydC5lbmROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhcihzdGFydE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSkge1xuICAgICAgICByZW1vdmVOb2Rlcyh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlLCBzdGFydE5vZGUubmV4dFNpYmxpbmcsIHRoaXMuZW5kTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgYm9vbGVhbiBhdHRyaWJ1dGUsIHJvdWdobHkgYXMgZGVmaW5lZCBpbiB0aGUgSFRNTFxuICogc3BlY2lmaWNhdGlvbi5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgaXMgdHJ1dGh5LCB0aGVuIHRoZSBhdHRyaWJ1dGUgaXMgcHJlc2VudCB3aXRoIGEgdmFsdWUgb2ZcbiAqICcnLiBJZiB0aGUgdmFsdWUgaXMgZmFsc2V5LCB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCb29sZWFuQXR0cmlidXRlUGFydCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RyaW5ncy5sZW5ndGggIT09IDIgfHwgc3RyaW5nc1swXSAhPT0gJycgfHwgc3RyaW5nc1sxXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm9vbGVhbiBhdHRyaWJ1dGVzIGNhbiBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgZXhwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19wZW5kaW5nVmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSAhIXRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgfVxufVxuLyoqXG4gKiBTZXRzIGF0dHJpYnV0ZSB2YWx1ZXMgZm9yIFByb3BlcnR5UGFydHMsIHNvIHRoYXQgdGhlIHZhbHVlIGlzIG9ubHkgc2V0IG9uY2VcbiAqIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzIGZvciBhIHByb3BlcnR5LlxuICpcbiAqIElmIGFuIGV4cHJlc3Npb24gY29udHJvbHMgdGhlIHdob2xlIHByb3BlcnR5IHZhbHVlLCB0aGVuIHRoZSB2YWx1ZSBpcyBzaW1wbHlcbiAqIGFzc2lnbmVkIHRvIHRoZSBwcm9wZXJ0eSB1bmRlciBjb250cm9sLiBJZiB0aGVyZSBhcmUgc3RyaW5nIGxpdGVyYWxzIG9yXG4gKiBtdWx0aXBsZSBleHByZXNzaW9ucywgdGhlbiB0aGUgc3RyaW5ncyBhcmUgZXhwcmVzc2lvbnMgYXJlIGludGVycG9sYXRlZCBpbnRvXG4gKiBhIHN0cmluZyBmaXJzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlcnR5Q29tbWl0dGVyIGV4dGVuZHMgQXR0cmlidXRlQ29tbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICB0aGlzLnNpbmdsZSA9XG4gICAgICAgICAgICAoc3RyaW5ncy5sZW5ndGggPT09IDIgJiYgc3RyaW5nc1swXSA9PT0gJycgJiYgc3RyaW5nc1sxXSA9PT0gJycpO1xuICAgIH1cbiAgICBfY3JlYXRlUGFydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eVBhcnQodGhpcyk7XG4gICAgfVxuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJ0c1swXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuX2dldFZhbHVlKCk7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFt0aGlzLm5hbWVdID0gdGhpcy5fZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbn1cbi8vIERldGVjdCBldmVudCBsaXN0ZW5lciBvcHRpb25zIHN1cHBvcnQuIElmIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkgaXMgcmVhZFxuLy8gZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QsIHRoZW4gb3B0aW9ucyBhcmUgc3VwcG9ydGVkLiBJZiBub3QsIHRoZW4gdGhlIHRocmlkXG4vLyBhcmd1bWVudCB0byBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lciBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYm9vbGVhbiBjYXB0dXJlXG4vLyB2YWx1ZSBzbyB3ZSBzaG91bGQgb25seSBwYXNzIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkuXG5sZXQgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gZmFsc2U7XG50cnkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGdldCBjYXB0dXJlKCkge1xuICAgICAgICAgICAgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgb3B0aW9ucyk7XG59XG5jYXRjaCAoX2UpIHtcbn1cbmV4cG9ydCBjbGFzcyBFdmVudFBhcnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRDb250ZXh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLmV2ZW50Q29udGV4dCA9IGV2ZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQgPSAoZSkgPT4gdGhpcy5oYW5kbGVFdmVudChlKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdMaXN0ZW5lciA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGNvbnN0IG9sZExpc3RlbmVyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciA9PSBudWxsIHx8XG4gICAgICAgICAgICBvbGRMaXN0ZW5lciAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgKG5ld0xpc3RlbmVyLmNhcHR1cmUgIT09IG9sZExpc3RlbmVyLmNhcHR1cmUgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlzdGVuZXIub25jZSAhPT0gb2xkTGlzdGVuZXIub25jZSB8fFxuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0ZW5lci5wYXNzaXZlICE9PSBvbGRMaXN0ZW5lci5wYXNzaXZlKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkQWRkTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciAhPSBudWxsICYmIChvbGRMaXN0ZW5lciA9PSBudWxsIHx8IHNob3VsZFJlbW92ZUxpc3RlbmVyKTtcbiAgICAgICAgaWYgKHNob3VsZFJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQWRkTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX19vcHRpb25zID0gZ2V0T3B0aW9ucyhuZXdMaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3TGlzdGVuZXI7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmNhbGwodGhpcy5ldmVudENvbnRleHQgfHwgdGhpcy5lbGVtZW50LCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIFdlIGNvcHkgb3B0aW9ucyBiZWNhdXNlIG9mIHRoZSBpbmNvbnNpc3RlbnQgYmVoYXZpb3Igb2YgYnJvd3NlcnMgd2hlbiByZWFkaW5nXG4vLyB0aGUgdGhpcmQgYXJndW1lbnQgb2YgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIuIElFMTEgZG9lc24ndCBzdXBwb3J0IG9wdGlvbnNcbi8vIGF0IGFsbC4gQ2hyb21lIDQxIG9ubHkgcmVhZHMgYGNhcHR1cmVgIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBvYmplY3QuXG5jb25zdCBnZXRPcHRpb25zID0gKG8pID0+IG8gJiZcbiAgICAoZXZlbnRPcHRpb25zU3VwcG9ydGVkID9cbiAgICAgICAgeyBjYXB0dXJlOiBvLmNhcHR1cmUsIHBhc3NpdmU6IG8ucGFzc2l2ZSwgb25jZTogby5vbmNlIH0gOlxuICAgICAgICBvLmNhcHR1cmUpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydHMuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBOb2RlUGFydCwgUHJvcGVydHlDb21taXR0ZXIgfSBmcm9tICcuL3BhcnRzLmpzJztcbi8qKlxuICogQ3JlYXRlcyBQYXJ0cyB3aGVuIGEgdGVtcGxhdGUgaXMgaW5zdGFudGlhdGVkLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGFuIGF0dHJpYnV0ZS1wb3NpdGlvbiBiaW5kaW5nLCBnaXZlbiB0aGUgZXZlbnQsIGF0dHJpYnV0ZVxuICAgICAqIG5hbWUsIGFuZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBiaW5kaW5nXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSBzdHJpbmdzIFRoZSBzdHJpbmcgbGl0ZXJhbHMuIFRoZXJlIGFyZSBhbHdheXMgYXQgbGVhc3QgdHdvIHN0cmluZ3MsXG4gICAgICogICBldmVudCBmb3IgZnVsbHktY29udHJvbGxlZCBiaW5kaW5ncyB3aXRoIGEgc2luZ2xlIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMoZWxlbWVudCwgbmFtZSwgc3RyaW5ncywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcmVmaXggPSBuYW1lWzBdO1xuICAgICAgICBpZiAocHJlZml4ID09PSAnLicpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBQcm9wZXJ0eUNvbW1pdHRlcihlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBzdHJpbmdzKTtcbiAgICAgICAgICAgIHJldHVybiBjb21taXR0ZXIucGFydHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWZpeCA9PT0gJ0AnKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBFdmVudFBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgb3B0aW9ucy5ldmVudENvbnRleHQpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZml4ID09PSAnPycpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEJvb2xlYW5BdHRyaWJ1dGVQYXJ0KGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21taXR0ZXIgPSBuZXcgQXR0cmlidXRlQ29tbWl0dGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICByZXR1cm4gY29tbWl0dGVyLnBhcnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGEgdGV4dC1wb3NpdGlvbiBiaW5kaW5nLlxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZUZhY3RvcnlcbiAgICAgKi9cbiAgICBoYW5kbGVUZXh0RXhwcmVzc2lvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZVBhcnQob3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciA9IG5ldyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IG1hcmtlciwgVGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgVGVtcGxhdGVGYWN0b3J5IHdoaWNoIGNhY2hlcyBUZW1wbGF0ZXMga2V5ZWQgb25cbiAqIHJlc3VsdC50eXBlIGFuZCByZXN1bHQuc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlRmFjdG9yeShyZXN1bHQpIHtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChyZXN1bHQudHlwZSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KHJlc3VsdC50eXBlLCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIC8vIElmIHRoZSBUZW1wbGF0ZVN0cmluZ3NBcnJheSBpcyBuZXcsIGdlbmVyYXRlIGEga2V5IGZyb20gdGhlIHN0cmluZ3NcbiAgICAvLyBUaGlzIGtleSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgdGVtcGxhdGVzIHdpdGggaWRlbnRpY2FsIGNvbnRlbnRcbiAgICBjb25zdCBrZXkgPSByZXN1bHQuc3RyaW5ncy5qb2luKG1hcmtlcik7XG4gICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgVGVtcGxhdGUgZm9yIHRoaXMga2V5XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5nZXQoa2V5KTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBzZWVuIHRoaXMga2V5IGJlZm9yZSwgY3JlYXRlIGEgbmV3IFRlbXBsYXRlXG4gICAgICAgIHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHJlc3VsdCwgcmVzdWx0LmdldFRlbXBsYXRlRWxlbWVudCgpKTtcbiAgICAgICAgLy8gQ2FjaGUgdGhlIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICAgICAgICB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5zZXQoa2V5LCB0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8vIENhY2hlIGFsbCBmdXR1cmUgcXVlcmllcyBmb3IgdGhpcyBUZW1wbGF0ZVN0cmluZ3NBcnJheVxuICAgIHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LnNldChyZXN1bHQuc3RyaW5ncywgdGVtcGxhdGUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhY2hlcyA9IG5ldyBNYXAoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLWZhY3RvcnkuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgTm9kZVBhcnQgfSBmcm9tICcuL3BhcnRzLmpzJztcbmltcG9ydCB7IHRlbXBsYXRlRmFjdG9yeSB9IGZyb20gJy4vdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5leHBvcnQgY29uc3QgcGFydHMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBSZW5kZXJzIGEgdGVtcGxhdGUgcmVzdWx0IG9yIG90aGVyIHZhbHVlIHRvIGEgY29udGFpbmVyLlxuICpcbiAqIFRvIHVwZGF0ZSBhIGNvbnRhaW5lciB3aXRoIG5ldyB2YWx1ZXMsIHJlZXZhbHVhdGUgdGhlIHRlbXBsYXRlIGxpdGVyYWwgYW5kXG4gKiBjYWxsIGByZW5kZXJgIHdpdGggdGhlIG5ldyByZXN1bHQuXG4gKlxuICogQHBhcmFtIHJlc3VsdCBBbnkgdmFsdWUgcmVuZGVyYWJsZSBieSBOb2RlUGFydCAtIHR5cGljYWxseSBhIFRlbXBsYXRlUmVzdWx0XG4gKiAgICAgY3JlYXRlZCBieSBldmFsdWF0aW5nIGEgdGVtcGxhdGUgdGFnIGxpa2UgYGh0bWxgIG9yIGBzdmdgLlxuICogQHBhcmFtIGNvbnRhaW5lciBBIERPTSBwYXJlbnQgdG8gcmVuZGVyIHRvLiBUaGUgZW50aXJlIGNvbnRlbnRzIGFyZSBlaXRoZXJcbiAqICAgICByZXBsYWNlZCwgb3IgZWZmaWNpZW50bHkgdXBkYXRlZCBpZiB0aGUgc2FtZSByZXN1bHQgdHlwZSB3YXMgcHJldmlvdXNcbiAqICAgICByZW5kZXJlZCB0aGVyZS5cbiAqIEBwYXJhbSBvcHRpb25zIFJlbmRlck9wdGlvbnMgZm9yIHRoZSBlbnRpcmUgcmVuZGVyIHRyZWUgcmVuZGVyZWQgdG8gdGhpc1xuICogICAgIGNvbnRhaW5lci4gUmVuZGVyIG9wdGlvbnMgbXVzdCAqbm90KiBjaGFuZ2UgYmV0d2VlbiByZW5kZXJzIHRvIHRoZSBzYW1lXG4gKiAgICAgY29udGFpbmVyLCBhcyB0aG9zZSBjaGFuZ2VzIHdpbGwgbm90IGVmZmVjdCBwcmV2aW91c2x5IHJlbmRlcmVkIERPTS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbmRlciA9IChyZXN1bHQsIGNvbnRhaW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBwYXJ0ID0gcGFydHMuZ2V0KGNvbnRhaW5lcik7XG4gICAgaWYgKHBhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZW1vdmVOb2Rlcyhjb250YWluZXIsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCA9IG5ldyBOb2RlUGFydChPYmplY3QuYXNzaWduKHsgdGVtcGxhdGVGYWN0b3J5IH0sIG9wdGlvbnMpKSk7XG4gICAgICAgIHBhcnQuYXBwZW5kSW50byhjb250YWluZXIpO1xuICAgIH1cbiAgICBwYXJ0LnNldFZhbHVlKHJlc3VsdCk7XG4gICAgcGFydC5jb21taXQoKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW5kZXIuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKlxuICogTWFpbiBsaXQtaHRtbCBtb2R1bGUuXG4gKlxuICogTWFpbiBleHBvcnRzOlxuICpcbiAqIC0gIFtbaHRtbF1dXG4gKiAtICBbW3N2Z11dXG4gKiAtICBbW3JlbmRlcl1dXG4gKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICogQHByZWZlcnJlZFxuICovXG4vKipcbiAqIERvIG5vdCByZW1vdmUgdGhpcyBjb21tZW50OyBpdCBrZWVwcyB0eXBlZG9jIGZyb20gbWlzcGxhY2luZyB0aGUgbW9kdWxlXG4gKiBkb2NzLlxuICovXG5pbXBvcnQgeyBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5pbXBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5leHBvcnQgeyBkaXJlY3RpdmUsIGlzRGlyZWN0aXZlIH0gZnJvbSAnLi9saWIvZGlyZWN0aXZlLmpzJztcbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IHJlbW92ZSBsaW5lIHdoZW4gd2UgZ2V0IE5vZGVQYXJ0IG1vdmluZyBtZXRob2RzXG5leHBvcnQgeyByZW1vdmVOb2RlcywgcmVwYXJlbnROb2RlcyB9IGZyb20gJy4vbGliL2RvbS5qcyc7XG5leHBvcnQgeyBub0NoYW5nZSwgbm90aGluZyB9IGZyb20gJy4vbGliL3BhcnQuanMnO1xuZXhwb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBBdHRyaWJ1dGVQYXJ0LCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBpc0l0ZXJhYmxlLCBpc1ByaW1pdGl2ZSwgTm9kZVBhcnQsIFByb3BlcnR5Q29tbWl0dGVyLCBQcm9wZXJ0eVBhcnQgfSBmcm9tICcuL2xpYi9wYXJ0cy5qcyc7XG5leHBvcnQgeyBwYXJ0cywgcmVuZGVyIH0gZnJvbSAnLi9saWIvcmVuZGVyLmpzJztcbmV4cG9ydCB7IHRlbXBsYXRlQ2FjaGVzLCB0ZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5leHBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgY3JlYXRlTWFya2VyLCBpc1RlbXBsYXRlUGFydEFjdGl2ZSwgVGVtcGxhdGUgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS5qcyc7XG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIGxpdC1odG1sIHVzYWdlLlxuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogaW5qZWN0IHZlcnNpb24gbnVtYmVyIGF0IGJ1aWxkIHRpbWVcbih3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddIHx8ICh3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddID0gW10pKS5wdXNoKCcxLjEuMicpO1xuLyoqXG4gKiBJbnRlcnByZXRzIGEgdGVtcGxhdGUgbGl0ZXJhbCBhcyBhbiBIVE1MIHRlbXBsYXRlIHRoYXQgY2FuIGVmZmljaWVudGx5XG4gKiByZW5kZXIgdG8gYW5kIHVwZGF0ZSBhIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnaHRtbCcsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzdmcgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgU1ZHVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnc3ZnJywgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1odG1sLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqL1xuaW1wb3J0IHsgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmNvbnN0IHdhbGtlck5vZGVGaWx0ZXIgPSAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi87XG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3Qgb2Ygbm9kZXMgZnJvbSBhIFRlbXBsYXRlIHNhZmVseS4gSW4gYWRkaXRpb24gdG8gcmVtb3ZpbmdcbiAqIG5vZGVzIGZyb20gdGhlIFRlbXBsYXRlLCB0aGUgVGVtcGxhdGUgcGFydCBpbmRpY2VzIGFyZSB1cGRhdGVkIHRvIG1hdGNoXG4gKiB0aGUgbXV0YXRlZCBUZW1wbGF0ZSBET00uXG4gKlxuICogQXMgdGhlIHRlbXBsYXRlIGlzIHdhbGtlZCB0aGUgcmVtb3ZhbCBzdGF0ZSBpcyB0cmFja2VkIGFuZFxuICogcGFydCBpbmRpY2VzIGFyZSBhZGp1c3RlZCBhcyBuZWVkZWQuXG4gKlxuICogZGl2XG4gKiAgIGRpdiMxIChyZW1vdmUpIDwtLSBzdGFydCByZW1vdmluZyAocmVtb3Zpbmcgbm9kZSBpcyBkaXYjMSlcbiAqICAgICBkaXZcbiAqICAgICAgIGRpdiMyIChyZW1vdmUpICA8LS0gY29udGludWUgcmVtb3ZpbmcgKHJlbW92aW5nIG5vZGUgaXMgc3RpbGwgZGl2IzEpXG4gKiAgICAgICAgIGRpdlxuICogZGl2IDwtLSBzdG9wIHJlbW92aW5nIHNpbmNlIHByZXZpb3VzIHNpYmxpbmcgaXMgdGhlIHJlbW92aW5nIG5vZGUgKGRpdiMxLFxuICogcmVtb3ZlZCA0IG5vZGVzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIG5vZGVzVG9SZW1vdmUpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihjb250ZW50LCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgbGV0IHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cyk7XG4gICAgbGV0IHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgIGxldCBub2RlSW5kZXggPSAtMTtcbiAgICBsZXQgcmVtb3ZlQ291bnQgPSAwO1xuICAgIGNvbnN0IG5vZGVzVG9SZW1vdmVJblRlbXBsYXRlID0gW107XG4gICAgbGV0IGN1cnJlbnRSZW1vdmluZ05vZGUgPSBudWxsO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgLy8gRW5kIHJlbW92YWwgaWYgc3RlcHBlZCBwYXN0IHRoZSByZW1vdmluZyBub2RlXG4gICAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyA9PT0gY3VycmVudFJlbW92aW5nTm9kZSkge1xuICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBub2RlIHRvIHJlbW92ZSB3YXMgZm91bmQgaW4gdGhlIHRlbXBsYXRlXG4gICAgICAgIGlmIChub2Rlc1RvUmVtb3ZlLmhhcyhub2RlKSkge1xuICAgICAgICAgICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUucHVzaChub2RlKTtcbiAgICAgICAgICAgIC8vIFRyYWNrIG5vZGUgd2UncmUgcmVtb3ZpbmdcbiAgICAgICAgICAgIGlmIChjdXJyZW50UmVtb3ZpbmdOb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiByZW1vdmluZywgaW5jcmVtZW50IGNvdW50IGJ5IHdoaWNoIHRvIGFkanVzdCBzdWJzZXF1ZW50IHBhcnQgaW5kaWNlc1xuICAgICAgICBpZiAoY3VycmVudFJlbW92aW5nTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVtb3ZlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydCAhPT0gdW5kZWZpbmVkICYmIHBhcnQuaW5kZXggPT09IG5vZGVJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgcGFydCBpcyBpbiBhIHJlbW92ZWQgbm9kZSBkZWFjdGl2YXRlIGl0IGJ5IHNldHRpbmcgaW5kZXggdG8gLTEgb3JcbiAgICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXggYXMgbmVlZGVkLlxuICAgICAgICAgICAgcGFydC5pbmRleCA9IGN1cnJlbnRSZW1vdmluZ05vZGUgIT09IG51bGwgPyAtMSA6IHBhcnQuaW5kZXggLSByZW1vdmVDb3VudDtcbiAgICAgICAgICAgIC8vIGdvIHRvIHRoZSBuZXh0IGFjdGl2ZSBwYXJ0LlxuICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICAgICAgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUuZm9yRWFjaCgobikgPT4gbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKTtcbn1cbmNvbnN0IGNvdW50Tm9kZXMgPSAobm9kZSkgPT4ge1xuICAgIGxldCBjb3VudCA9IChub2RlLm5vZGVUeXBlID09PSAxMSAvKiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgKi8pID8gMCA6IDE7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihub2RlLCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbn07XG5jb25zdCBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMgPSAocGFydHMsIHN0YXJ0SW5kZXggPSAtMSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4ICsgMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKGlzVGVtcGxhdGVQYXJ0QWN0aXZlKHBhcnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59O1xuLyoqXG4gKiBJbnNlcnRzIHRoZSBnaXZlbiBub2RlIGludG8gdGhlIFRlbXBsYXRlLCBvcHRpb25hbGx5IGJlZm9yZSB0aGUgZ2l2ZW5cbiAqIHJlZk5vZGUuIEluIGFkZGl0aW9uIHRvIGluc2VydGluZyB0aGUgbm9kZSBpbnRvIHRoZSBUZW1wbGF0ZSwgdGhlIFRlbXBsYXRlXG4gKiBwYXJ0IGluZGljZXMgYXJlIHVwZGF0ZWQgdG8gbWF0Y2ggdGhlIG11dGF0ZWQgVGVtcGxhdGUgRE9NLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgbm9kZSwgcmVmTm9kZSA9IG51bGwpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgLy8gSWYgdGhlcmUncyBubyByZWZOb2RlLCB0aGVuIHB1dCBub2RlIGF0IGVuZCBvZiB0ZW1wbGF0ZS5cbiAgICAvLyBObyBwYXJ0IGluZGljZXMgbmVlZCB0byBiZSBzaGlmdGVkIGluIHRoaXMgY2FzZS5cbiAgICBpZiAocmVmTm9kZSA9PT0gbnVsbCB8fCByZWZOb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGNvbnRlbnQsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICBsZXQgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzKTtcbiAgICBsZXQgaW5zZXJ0Q291bnQgPSAwO1xuICAgIGxldCB3YWxrZXJJbmRleCA9IC0xO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICB3YWxrZXJJbmRleCsrO1xuICAgICAgICBjb25zdCB3YWxrZXJOb2RlID0gd2Fsa2VyLmN1cnJlbnROb2RlO1xuICAgICAgICBpZiAod2Fsa2VyTm9kZSA9PT0gcmVmTm9kZSkge1xuICAgICAgICAgICAgaW5zZXJ0Q291bnQgPSBjb3VudE5vZGVzKG5vZGUpO1xuICAgICAgICAgICAgcmVmTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCByZWZOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSAmJiBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ID09PSB3YWxrZXJJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgd2UndmUgaW5zZXJ0ZWQgdGhlIG5vZGUsIHNpbXBseSBhZGp1c3QgYWxsIHN1YnNlcXVlbnQgcGFydHNcbiAgICAgICAgICAgIGlmIChpbnNlcnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ICs9IGluc2VydENvdW50O1xuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGlmeS10ZW1wbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIE1vZHVsZSB0byBhZGQgc2hhZHkgRE9NL3NoYWR5IENTUyBwb2x5ZmlsbCBzdXBwb3J0IHRvIGxpdC1odG1sIHRlbXBsYXRlXG4gKiByZW5kZXJpbmcuIFNlZSB0aGUgW1tyZW5kZXJdXSBtZXRob2QgZm9yIGRldGFpbHMuXG4gKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBpbnNlcnROb2RlSW50b1RlbXBsYXRlLCByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSB9IGZyb20gJy4vbW9kaWZ5LXRlbXBsYXRlLmpzJztcbmltcG9ydCB7IHBhcnRzLCByZW5kZXIgYXMgbGl0UmVuZGVyIH0gZnJvbSAnLi9yZW5kZXIuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVDYWNoZXMgfSBmcm9tICcuL3RlbXBsYXRlLWZhY3RvcnkuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgbWFya2VyLCBUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuZXhwb3J0IHsgaHRtbCwgc3ZnLCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbi8vIEdldCBhIGtleSB0byBsb29rdXAgaW4gYHRlbXBsYXRlQ2FjaGVzYC5cbmNvbnN0IGdldFRlbXBsYXRlQ2FjaGVLZXkgPSAodHlwZSwgc2NvcGVOYW1lKSA9PiBgJHt0eXBlfS0tJHtzY29wZU5hbWV9YDtcbmxldCBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gdHJ1ZTtcbmlmICh0eXBlb2Ygd2luZG93LlNoYWR5Q1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSBmYWxzZTtcbn1cbmVsc2UgaWYgKHR5cGVvZiB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUud2FybihgSW5jb21wYXRpYmxlIFNoYWR5Q1NTIHZlcnNpb24gZGV0ZWN0ZWQuIGAgK1xuICAgICAgICBgUGxlYXNlIHVwZGF0ZSB0byBhdCBsZWFzdCBAd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanNAMi4wLjIgYW5kIGAgK1xuICAgICAgICBgQHdlYmNvbXBvbmVudHMvc2hhZHljc3NAMS4zLjEuYCk7XG4gICAgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IGZhbHNlO1xufVxuLyoqXG4gKiBUZW1wbGF0ZSBmYWN0b3J5IHdoaWNoIHNjb3BlcyB0ZW1wbGF0ZSBET00gdXNpbmcgU2hhZHlDU1MuXG4gKiBAcGFyYW0gc2NvcGVOYW1lIHtzdHJpbmd9XG4gKi9cbmNvbnN0IHNoYWR5VGVtcGxhdGVGYWN0b3J5ID0gKHNjb3BlTmFtZSkgPT4gKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gZ2V0VGVtcGxhdGVDYWNoZUtleShyZXN1bHQudHlwZSwgc2NvcGVOYW1lKTtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChjYWNoZUtleSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KGNhY2hlS2V5LCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHJlc3VsdC5zdHJpbmdzLmpvaW4obWFya2VyKTtcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSByZXN1bHQuZ2V0VGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGlmIChjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tKGVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVzdWx0LCBlbGVtZW50KTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuc2V0KGtleSwgdGVtcGxhdGUpO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5zZXQocmVzdWx0LnN0cmluZ3MsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gdGVtcGxhdGU7XG59O1xuY29uc3QgVEVNUExBVEVfVFlQRVMgPSBbJ2h0bWwnLCAnc3ZnJ107XG4vKipcbiAqIFJlbW92ZXMgYWxsIHN0eWxlIGVsZW1lbnRzIGZyb20gVGVtcGxhdGVzIGZvciB0aGUgZ2l2ZW4gc2NvcGVOYW1lLlxuICovXG5jb25zdCByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzID0gKHNjb3BlTmFtZSkgPT4ge1xuICAgIFRFTVBMQVRFX1RZUEVTLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gdGVtcGxhdGVDYWNoZXMuZ2V0KGdldFRlbXBsYXRlQ2FjaGVLZXkodHlwZSwgc2NvcGVOYW1lKSk7XG4gICAgICAgIGlmICh0ZW1wbGF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGVtcGxhdGVzLmtleVN0cmluZy5mb3JFYWNoKCh0ZW1wbGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0gfSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIC8vIElFIDExIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgaXRlcmFibGUgcGFyYW0gU2V0IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpKS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcy5hZGQocyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHN0eWxlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHNoYWR5UmVuZGVyU2V0ID0gbmV3IFNldCgpO1xuLyoqXG4gKiBGb3IgdGhlIGdpdmVuIHNjb3BlIG5hbWUsIGVuc3VyZXMgdGhhdCBTaGFkeUNTUyBzdHlsZSBzY29waW5nIGlzIHBlcmZvcm1lZC5cbiAqIFRoaXMgaXMgZG9uZSBqdXN0IG9uY2UgcGVyIHNjb3BlIG5hbWUgc28gdGhlIGZyYWdtZW50IGFuZCB0ZW1wbGF0ZSBjYW5ub3RcbiAqIGJlIG1vZGlmaWVkLlxuICogKDEpIGV4dHJhY3RzIHN0eWxlcyBmcm9tIHRoZSByZW5kZXJlZCBmcmFnbWVudCBhbmQgaGFuZHMgdGhlbSB0byBTaGFkeUNTU1xuICogdG8gYmUgc2NvcGVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZG9jdW1lbnRcbiAqICgyKSByZW1vdmVzIHN0eWxlIGVsZW1lbnRzIGZyb20gYWxsIGxpdC1odG1sIFRlbXBsYXRlcyBmb3IgdGhpcyBzY29wZSBuYW1lLlxuICpcbiAqIE5vdGUsIDxzdHlsZT4gZWxlbWVudHMgY2FuIG9ubHkgYmUgcGxhY2VkIGludG8gdGVtcGxhdGVzIGZvciB0aGVcbiAqIGluaXRpYWwgcmVuZGVyaW5nIG9mIHRoZSBzY29wZS4gSWYgPHN0eWxlPiBlbGVtZW50cyBhcmUgaW5jbHVkZWQgaW4gdGVtcGxhdGVzXG4gKiBkeW5hbWljYWxseSByZW5kZXJlZCB0byB0aGUgc2NvcGUgKGFmdGVyIHRoZSBmaXJzdCBzY29wZSByZW5kZXIpLCB0aGV5IHdpbGxcbiAqIG5vdCBiZSBzY29wZWQgYW5kIHRoZSA8c3R5bGU+IHdpbGwgYmUgbGVmdCBpbiB0aGUgdGVtcGxhdGUgYW5kIHJlbmRlcmVkXG4gKiBvdXRwdXQuXG4gKi9cbmNvbnN0IHByZXBhcmVUZW1wbGF0ZVN0eWxlcyA9IChzY29wZU5hbWUsIHJlbmRlcmVkRE9NLCB0ZW1wbGF0ZSkgPT4ge1xuICAgIHNoYWR5UmVuZGVyU2V0LmFkZChzY29wZU5hbWUpO1xuICAgIC8vIElmIGByZW5kZXJlZERPTWAgaXMgc3RhbXBlZCBmcm9tIGEgVGVtcGxhdGUsIHRoZW4gd2UgbmVlZCB0byBlZGl0IHRoYXRcbiAgICAvLyBUZW1wbGF0ZSdzIHVuZGVybHlpbmcgdGVtcGxhdGUgZWxlbWVudC4gT3RoZXJ3aXNlLCB3ZSBjcmVhdGUgb25lIGhlcmVcbiAgICAvLyB0byBnaXZlIHRvIFNoYWR5Q1NTLCB3aGljaCBzdGlsbCByZXF1aXJlcyBvbmUgd2hpbGUgc2NvcGluZy5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSAhIXRlbXBsYXRlID8gdGVtcGxhdGUuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgLy8gTW92ZSBzdHlsZXMgb3V0IG9mIHJlbmRlcmVkIERPTSBhbmQgc3RvcmUuXG4gICAgY29uc3Qgc3R5bGVzID0gcmVuZGVyZWRET00ucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3R5bGVzO1xuICAgIC8vIElmIHRoZXJlIGFyZSBubyBzdHlsZXMsIHNraXAgdW5uZWNlc3Nhcnkgd29ya1xuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gRW5zdXJlIHByZXBhcmVUZW1wbGF0ZVN0eWxlcyBpcyBjYWxsZWQgdG8gc3VwcG9ydCBhZGRpbmdcbiAgICAgICAgLy8gc3R5bGVzIHZpYSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YCBzaW5jZSB0aGF0IHJlcXVpcmVzIHRoYXRcbiAgICAgICAgLy8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgaXMgY2FsbGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTaGFkeUNTUyB3aWxsIG9ubHkgdXBkYXRlIHN0eWxlcyBjb250YWluaW5nIEBhcHBseSBpbiB0aGUgdGVtcGxhdGVcbiAgICAgICAgLy8gZ2l2ZW4gdG8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AuIElmIG5vIGxpdCBUZW1wbGF0ZSB3YXMgZ2l2ZW4sXG4gICAgICAgIC8vIFNoYWR5Q1NTIHdpbGwgbm90IGJlIGFibGUgdG8gdXBkYXRlIHVzZXMgb2YgQGFwcGx5IGluIGFueSByZWxldmFudFxuICAgICAgICAvLyB0ZW1wbGF0ZS4gSG93ZXZlciwgdGhpcyBpcyBub3QgYSBwcm9ibGVtIGJlY2F1c2Ugd2Ugb25seSBjcmVhdGUgdGhlXG4gICAgICAgIC8vIHRlbXBsYXRlIGZvciB0aGUgcHVycG9zZSBvZiBzdXBwb3J0aW5nIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgLFxuICAgICAgICAvLyB3aGljaCBkb2Vzbid0IHN1cHBvcnQgQGFwcGx5IGF0IGFsbC5cbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZVN0eWxlcyh0ZW1wbGF0ZUVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29uZGVuc2VkU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIC8vIENvbGxlY3Qgc3R5bGVzIGludG8gYSBzaW5nbGUgc3R5bGUuIFRoaXMgaGVscHMgdXMgbWFrZSBzdXJlIFNoYWR5Q1NTXG4gICAgLy8gbWFuaXB1bGF0aW9ucyB3aWxsIG5vdCBwcmV2ZW50IHVzIGZyb20gYmVpbmcgYWJsZSB0byBmaXggdXAgdGVtcGxhdGVcbiAgICAvLyBwYXJ0IGluZGljZXMuXG4gICAgLy8gTk9URTogY29sbGVjdGluZyBzdHlsZXMgaXMgaW5lZmZpY2llbnQgZm9yIGJyb3dzZXJzIGJ1dCBTaGFkeUNTU1xuICAgIC8vIGN1cnJlbnRseSBkb2VzIHRoaXMgYW55d2F5LiBXaGVuIGl0IGRvZXMgbm90LCB0aGlzIHNob3VsZCBiZSBjaGFuZ2VkLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBzdHlsZXNbaV07XG4gICAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgICBjb25kZW5zZWRTdHlsZS50ZXh0Q29udGVudCArPSBzdHlsZS50ZXh0Q29udGVudDtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHN0eWxlcyBmcm9tIG5lc3RlZCB0ZW1wbGF0ZXMgaW4gdGhpcyBzY29wZS5cbiAgICByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzKHNjb3BlTmFtZSk7XG4gICAgLy8gQW5kIHRoZW4gcHV0IHRoZSBjb25kZW5zZWQgc3R5bGUgaW50byB0aGUgXCJyb290XCIgdGVtcGxhdGUgcGFzc2VkIGluIGFzXG4gICAgLy8gYHRlbXBsYXRlYC5cbiAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGVFbGVtZW50LmNvbnRlbnQ7XG4gICAgaWYgKCEhdGVtcGxhdGUpIHtcbiAgICAgICAgaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgLy8gTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCBTaGFkeUNTUyBnZXRzIHRoZSB0ZW1wbGF0ZSB0aGF0IGBsaXQtaHRtbGBcbiAgICAvLyB3aWxsIGFjdHVhbGx5IHJlbmRlciBzbyB0aGF0IGl0IGNhbiB1cGRhdGUgdGhlIHN0eWxlIGluc2lkZSB3aGVuXG4gICAgLy8gbmVlZGVkIChlLmcuIEBhcHBseSBuYXRpdmUgU2hhZG93IERPTSBjYXNlKS5cbiAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlRWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICBjb25zdCBzdHlsZSA9IGNvbnRlbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICBpZiAod2luZG93LlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdyAmJiBzdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBXaGVuIGluIG5hdGl2ZSBTaGFkb3cgRE9NLCBlbnN1cmUgdGhlIHN0eWxlIGNyZWF0ZWQgYnkgU2hhZHlDU1MgaXNcbiAgICAgICAgLy8gaW5jbHVkZWQgaW4gaW5pdGlhbGx5IHJlbmRlcmVkIG91dHB1dCAoYHJlbmRlcmVkRE9NYCkuXG4gICAgICAgIHJlbmRlcmVkRE9NLmluc2VydEJlZm9yZShzdHlsZS5jbG9uZU5vZGUodHJ1ZSksIHJlbmRlcmVkRE9NLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vIFdoZW4gbm8gc3R5bGUgaXMgbGVmdCBpbiB0aGUgdGVtcGxhdGUsIHBhcnRzIHdpbGwgYmUgYnJva2VuIGFzIGFcbiAgICAgICAgLy8gcmVzdWx0LiBUbyBmaXggdGhpcywgd2UgcHV0IGJhY2sgdGhlIHN0eWxlIG5vZGUgU2hhZHlDU1MgcmVtb3ZlZFxuICAgICAgICAvLyBhbmQgdGhlbiB0ZWxsIGxpdCB0byByZW1vdmUgdGhhdCBub2RlIGZyb20gdGhlIHRlbXBsYXRlLlxuICAgICAgICAvLyBUaGVyZSBjYW4gYmUgbm8gc3R5bGUgaW4gdGhlIHRlbXBsYXRlIGluIDIgY2FzZXMgKDEpIHdoZW4gU2hhZHkgRE9NXG4gICAgICAgIC8vIGlzIGluIHVzZSwgU2hhZHlDU1MgcmVtb3ZlcyBhbGwgc3R5bGVzLCAoMikgd2hlbiBuYXRpdmUgU2hhZG93IERPTVxuICAgICAgICAvLyBpcyBpbiB1c2UgU2hhZHlDU1MgcmVtb3ZlcyB0aGUgc3R5bGUgaWYgaXQgY29udGFpbnMgbm8gY29udGVudC5cbiAgICAgICAgLy8gTk9URSwgU2hhZHlDU1MgY3JlYXRlcyBpdHMgb3duIHN0eWxlIHNvIHdlIGNhbiBzYWZlbHkgYWRkL3JlbW92ZVxuICAgICAgICAvLyBgY29uZGVuc2VkU3R5bGVgIGhlcmUuXG4gICAgICAgIGNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb25zdCByZW1vdmVzID0gbmV3IFNldCgpO1xuICAgICAgICByZW1vdmVzLmFkZChjb25kZW5zZWRTdHlsZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCByZW1vdmVzKTtcbiAgICB9XG59O1xuLyoqXG4gKiBFeHRlbnNpb24gdG8gdGhlIHN0YW5kYXJkIGByZW5kZXJgIG1ldGhvZCB3aGljaCBzdXBwb3J0cyByZW5kZXJpbmdcbiAqIHRvIFNoYWRvd1Jvb3RzIHdoZW4gdGhlIFNoYWR5RE9NIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy9zaGFkeWRvbSlcbiAqIGFuZCBTaGFkeUNTUyAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvc2hhZHljc3MpIHBvbHlmaWxscyBhcmUgdXNlZFxuICogb3Igd2hlbiB0aGUgd2ViY29tcG9uZW50c2pzXG4gKiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzKSBwb2x5ZmlsbCBpcyB1c2VkLlxuICpcbiAqIEFkZHMgYSBgc2NvcGVOYW1lYCBvcHRpb24gd2hpY2ggaXMgdXNlZCB0byBzY29wZSBlbGVtZW50IERPTSBhbmQgc3R5bGVzaGVldHNcbiAqIHdoZW4gbmF0aXZlIFNoYWRvd0RPTSBpcyB1bmF2YWlsYWJsZS4gVGhlIGBzY29wZU5hbWVgIHdpbGwgYmUgYWRkZWQgdG9cbiAqIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb2YgYWxsIHJlbmRlcmVkIERPTS4gSW4gYWRkaXRpb24sIGFueSBzdHlsZSBlbGVtZW50cyB3aWxsXG4gKiBiZSBhdXRvbWF0aWNhbGx5IHJlLXdyaXR0ZW4gd2l0aCB0aGlzIGBzY29wZU5hbWVgIHNlbGVjdG9yIGFuZCBtb3ZlZCBvdXRcbiAqIG9mIHRoZSByZW5kZXJlZCBET00gYW5kIGludG8gdGhlIGRvY3VtZW50IGA8aGVhZD5gLlxuICpcbiAqIEl0IGlzIGNvbW1vbiB0byB1c2UgdGhpcyByZW5kZXIgbWV0aG9kIGluIGNvbmp1bmN0aW9uIHdpdGggYSBjdXN0b20gZWxlbWVudFxuICogd2hpY2ggcmVuZGVycyBhIHNoYWRvd1Jvb3QuIFdoZW4gdGhpcyBpcyBkb25lLCB0eXBpY2FsbHkgdGhlIGVsZW1lbnQnc1xuICogYGxvY2FsTmFtZWAgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGBzY29wZU5hbWVgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIERPTSBzY29waW5nLCBTaGFkeUNTUyBhbHNvIHN1cHBvcnRzIGEgYmFzaWMgc2hpbSBmb3IgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyAobmVlZGVkIG9ubHkgb24gb2xkZXIgYnJvd3NlcnMgbGlrZSBJRTExKSBhbmQgYSBzaGltIGZvclxuICogYSBkZXByZWNhdGVkIGZlYXR1cmUgY2FsbGVkIGBAYXBwbHlgIHRoYXQgc3VwcG9ydHMgYXBwbHlpbmcgYSBzZXQgb2YgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyB0byBhIGdpdmVuIGxvY2F0aW9uLlxuICpcbiAqIFVzYWdlIGNvbnNpZGVyYXRpb25zOlxuICpcbiAqICogUGFydCB2YWx1ZXMgaW4gYDxzdHlsZT5gIGVsZW1lbnRzIGFyZSBvbmx5IGFwcGxpZWQgdGhlIGZpcnN0IHRpbWUgYSBnaXZlblxuICogYHNjb3BlTmFtZWAgcmVuZGVycy4gU3Vic2VxdWVudCBjaGFuZ2VzIHRvIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHdpbGwgaGF2ZVxuICogbm8gZWZmZWN0LiBCZWNhdXNlIG9mIHRoaXMsIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yXG4gKiB2YWx1ZXMgdGhhdCB3aWxsIG5ldmVyIGNoYW5nZSwgZm9yIGV4YW1wbGUgcGFydHMgdGhhdCBzZXQgc2NvcGUtd2lkZSB0aGVtZVxuICogdmFsdWVzIG9yIHBhcnRzIHdoaWNoIHJlbmRlciBzaGFyZWQgc3R5bGUgZWxlbWVudHMuXG4gKlxuICogKiBOb3RlLCBkdWUgdG8gYSBsaW1pdGF0aW9uIG9mIHRoZSBTaGFkeURPTSBwb2x5ZmlsbCwgcmVuZGVyaW5nIGluIGFcbiAqIGN1c3RvbSBlbGVtZW50J3MgYGNvbnN0cnVjdG9yYCBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkIHJlbmRlcmluZyBzaG91bGRcbiAqIGVpdGhlciBkb25lIGFzeW5jaHJvbm91c2x5LCBmb3IgZXhhbXBsZSBhdCBtaWNyb3Rhc2sgdGltaW5nIChmb3IgZXhhbXBsZVxuICogYFByb21pc2UucmVzb2x2ZSgpYCksIG9yIGJlIGRlZmVycmVkIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSBlbGVtZW50J3NcbiAqIGBjb25uZWN0ZWRDYWxsYmFja2AgcnVucy5cbiAqXG4gKiBVc2FnZSBjb25zaWRlcmF0aW9ucyB3aGVuIHVzaW5nIHNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXMgb3IgYEBhcHBseWA6XG4gKlxuICogKiBXaGVuZXZlciBhbnkgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHdoaWNoIGFmZmVjdFxuICogY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50KGVsZW1lbnQpYCBtdXN0IGJlIGNhbGxlZFxuICogdG8gdXBkYXRlIHRoZSBlbGVtZW50LiBUaGVyZSBhcmUgdHdvIGNhc2VzIHdoZW4gdGhpcyBpcyBuZWVkZWQ6XG4gKiAoMSkgdGhlIGVsZW1lbnQgaXMgY29ubmVjdGVkIHRvIGEgbmV3IHBhcmVudCwgKDIpIGEgY2xhc3MgaXMgYWRkZWQgdG8gdGhlXG4gKiBlbGVtZW50IHRoYXQgY2F1c2VzIGl0IHRvIG1hdGNoIGRpZmZlcmVudCBjdXN0b20gcHJvcGVydGllcy5cbiAqIFRvIGFkZHJlc3MgdGhlIGZpcnN0IGNhc2Ugd2hlbiByZW5kZXJpbmcgYSBjdXN0b20gZWxlbWVudCwgYHN0eWxlRWxlbWVudGBcbiAqIHNob3VsZCBiZSBjYWxsZWQgaW4gdGhlIGVsZW1lbnQncyBgY29ubmVjdGVkQ2FsbGJhY2tgLlxuICpcbiAqICogU2hpbW1lZCBjdXN0b20gcHJvcGVydGllcyBtYXkgb25seSBiZSBkZWZpbmVkIGVpdGhlciBmb3IgYW4gZW50aXJlXG4gKiBzaGFkb3dSb290IChmb3IgZXhhbXBsZSwgaW4gYSBgOmhvc3RgIHJ1bGUpIG9yIHZpYSBhIHJ1bGUgdGhhdCBkaXJlY3RseVxuICogbWF0Y2hlcyBhbiBlbGVtZW50IHdpdGggYSBzaGFkb3dSb290LiBJbiBvdGhlciB3b3JkcywgaW5zdGVhZCBvZiBmbG93aW5nIGZyb21cbiAqIHBhcmVudCB0byBjaGlsZCBhcyBkbyBuYXRpdmUgY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBzaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKiBmbG93IG9ubHkgZnJvbSBzaGFkb3dSb290cyB0byBuZXN0ZWQgc2hhZG93Um9vdHMuXG4gKlxuICogKiBXaGVuIHVzaW5nIGBAYXBwbHlgIG1peGluZyBjc3Mgc2hvcnRoYW5kIHByb3BlcnR5IG5hbWVzIHdpdGhcbiAqIG5vbi1zaG9ydGhhbmQgbmFtZXMgKGZvciBleGFtcGxlIGBib3JkZXJgIGFuZCBgYm9yZGVyLXdpZHRoYCkgaXMgbm90XG4gKiBzdXBwb3J0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAocmVzdWx0LCBjb250YWluZXIsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnIHx8ICFvcHRpb25zLnNjb3BlTmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgc2NvcGVOYW1lYCBvcHRpb24gaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNjb3BlTmFtZSA9IG9wdGlvbnMuc2NvcGVOYW1lO1xuICAgIGNvbnN0IGhhc1JlbmRlcmVkID0gcGFydHMuaGFzKGNvbnRhaW5lcik7XG4gICAgY29uc3QgbmVlZHNTY29waW5nID0gY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiAmJlxuICAgICAgICBjb250YWluZXIubm9kZVR5cGUgPT09IDExIC8qIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLyAmJlxuICAgICAgICAhIWNvbnRhaW5lci5ob3N0O1xuICAgIC8vIEhhbmRsZSBmaXJzdCByZW5kZXIgdG8gYSBzY29wZSBzcGVjaWFsbHkuLi5cbiAgICBjb25zdCBmaXJzdFNjb3BlUmVuZGVyID0gbmVlZHNTY29waW5nICYmICFzaGFkeVJlbmRlclNldC5oYXMoc2NvcGVOYW1lKTtcbiAgICAvLyBPbiBmaXJzdCBzY29wZSByZW5kZXIsIHJlbmRlciBpbnRvIGEgZnJhZ21lbnQ7IHRoaXMgY2Fubm90IGJlIGEgc2luZ2xlXG4gICAgLy8gZnJhZ21lbnQgdGhhdCBpcyByZXVzZWQgc2luY2UgbmVzdGVkIHJlbmRlcnMgY2FuIG9jY3VyIHN5bmNocm9ub3VzbHkuXG4gICAgY29uc3QgcmVuZGVyQ29udGFpbmVyID0gZmlyc3RTY29wZVJlbmRlciA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGNvbnRhaW5lcjtcbiAgICBsaXRSZW5kZXIocmVzdWx0LCByZW5kZXJDb250YWluZXIsIE9iamVjdC5hc3NpZ24oeyB0ZW1wbGF0ZUZhY3Rvcnk6IHNoYWR5VGVtcGxhdGVGYWN0b3J5KHNjb3BlTmFtZSkgfSwgb3B0aW9ucykpO1xuICAgIC8vIFdoZW4gcGVyZm9ybWluZyBmaXJzdCBzY29wZSByZW5kZXIsXG4gICAgLy8gKDEpIFdlJ3ZlIHJlbmRlcmVkIGludG8gYSBmcmFnbWVudCBzbyB0aGF0IHRoZXJlJ3MgYSBjaGFuY2UgdG9cbiAgICAvLyBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBiZWZvcmUgc3ViLWVsZW1lbnRzIGhpdCB0aGUgRE9NXG4gICAgLy8gKHdoaWNoIG1pZ2h0IGNhdXNlIHRoZW0gdG8gcmVuZGVyIGJhc2VkIG9uIGEgY29tbW9uIHBhdHRlcm4gb2ZcbiAgICAvLyByZW5kZXJpbmcgaW4gYSBjdXN0b20gZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2ApO1xuICAgIC8vICgyKSBTY29wZSB0aGUgdGVtcGxhdGUgd2l0aCBTaGFkeUNTUyBvbmUgdGltZSBvbmx5IGZvciB0aGlzIHNjb3BlLlxuICAgIC8vICgzKSBSZW5kZXIgdGhlIGZyYWdtZW50IGludG8gdGhlIGNvbnRhaW5lciBhbmQgbWFrZSBzdXJlIHRoZVxuICAgIC8vIGNvbnRhaW5lciBrbm93cyBpdHMgYHBhcnRgIGlzIHRoZSBvbmUgd2UganVzdCByZW5kZXJlZC4gVGhpcyBlbnN1cmVzXG4gICAgLy8gRE9NIHdpbGwgYmUgcmUtdXNlZCBvbiBzdWJzZXF1ZW50IHJlbmRlcnMuXG4gICAgaWYgKGZpcnN0U2NvcGVSZW5kZXIpIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmdldChyZW5kZXJDb250YWluZXIpO1xuICAgICAgICBwYXJ0cy5kZWxldGUocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgLy8gU2hhZHlDU1MgbWlnaHQgaGF2ZSBzdHlsZSBzaGVldHMgKGUuZy4gZnJvbSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YClcbiAgICAgICAgLy8gdGhhdCBzaG91bGQgYXBwbHkgdG8gYHJlbmRlckNvbnRhaW5lcmAgZXZlbiBpZiB0aGUgcmVuZGVyZWQgdmFsdWUgaXNcbiAgICAgICAgLy8gbm90IGEgVGVtcGxhdGVJbnN0YW5jZS4gSG93ZXZlciwgaXQgd2lsbCBvbmx5IGluc2VydCBzY29wZWQgc3R5bGVzXG4gICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50IGlmIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkXG4gICAgICAgIC8vIGZvciB0aGUgZ2l2ZW4gc2NvcGUgbmFtZS5cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBwYXJ0LnZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVJbnN0YW5jZSA/XG4gICAgICAgICAgICBwYXJ0LnZhbHVlLnRlbXBsYXRlIDpcbiAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHNjb3BlTmFtZSwgcmVuZGVyQ29udGFpbmVyLCB0ZW1wbGF0ZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzKGNvbnRhaW5lciwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCk7XG4gICAgfVxuICAgIC8vIEFmdGVyIGVsZW1lbnRzIGhhdmUgaGl0IHRoZSBET00sIHVwZGF0ZSBzdHlsaW5nIGlmIHRoaXMgaXMgdGhlXG4gICAgLy8gaW5pdGlhbCByZW5kZXIgdG8gdGhpcyBjb250YWluZXIuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbmV2ZXIgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHNvIGl0IHdvdWxkIGJlXG4gICAgLy8gc2FmZXN0IHRvIGRvIGV2ZXJ5IHJlbmRlcjsgaG93ZXZlciwgdGhpcyB3b3VsZCByZWdyZXNzIHBlcmZvcm1hbmNlXG4gICAgLy8gc28gd2UgbGVhdmUgaXQgdXAgdG8gdGhlIHVzZXIgdG8gY2FsbCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50YFxuICAgIC8vIGZvciBkeW5hbWljIGNoYW5nZXMuXG4gICAgaWYgKCFoYXNSZW5kZXJlZCAmJiBuZWVkc1Njb3BpbmcpIHtcbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudChjb250YWluZXIuaG9zdCk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYWR5LXJlbmRlci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xuY29uc3QgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9IChwcm9wLCBfb2JqKSA9PiBwcm9wO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciBhIHByb3BlcnR5IG9uIHRoaXMgcHJvdG90eXBlIGJ5IHdhbGtpbmdcbiAqIHVwIHRoZSBwcm90b3R5cGUgY2hhaW4uIE5vdGUgdGhhdCB3ZSBzdG9wIGp1c3QgYmVmb3JlIE9iamVjdC5wcm90b3R5cGUsIHdoaWNoXG4gKiBhbHNvIGF2b2lkcyBpc3N1ZXMgd2l0aCBTeW1ib2wgcG9seWZpbGxzIChjb3JlLWpzLCBnZXQtb3duLXByb3BlcnR5LXN5bWJvbHMpLFxuICogd2hpY2ggY3JlYXRlIGFjY2Vzc29ycyBmb3IgdGhlIHN5bWJvbHMgb24gT2JqZWN0LnByb3RvdHlwZS5cbiAqL1xuY29uc3QgZGVzY3JpcHRvckZyb21Qcm90b3R5cGUgPSAobmFtZSwgcHJvdG8pID0+IHtcbiAgICBpZiAobmFtZSBpbiBwcm90bykge1xuICAgICAgICB3aGlsZSAocHJvdG8gIT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChwcm90by5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29udmVydGVyID0ge1xuICAgIHRvQXR0cmlidXRlKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA/ICcnIDogbnVsbDtcbiAgICAgICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgIHBhc3MgdGhpcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gdG8gYWxsb3cgcmVtb3Zpbmcvbm8gY2hhbmdlIGJlaGF2aW9yLlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgZnJvbUF0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IG51bGw7XG4gICAgICAgICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyBudWxsIDogTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn07XG4vKipcbiAqIENoYW5nZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGRpZmZlcmVudCBmcm9tIGBvbGRWYWx1ZWAuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IGZvciBhIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgY29uc3Qgbm90RXF1YWwgPSAodmFsdWUsIG9sZCkgPT4ge1xuICAgIC8vIFRoaXMgZW5zdXJlcyAob2xkPT1OYU4sIHZhbHVlPT1OYU4pIGFsd2F5cyByZXR1cm5zIGZhbHNlXG4gICAgcmV0dXJuIG9sZCAhPT0gdmFsdWUgJiYgKG9sZCA9PT0gb2xkIHx8IHZhbHVlID09PSB2YWx1ZSk7XG59O1xuY29uc3QgZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24gPSB7XG4gICAgYXR0cmlidXRlOiB0cnVlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjb252ZXJ0ZXI6IGRlZmF1bHRDb252ZXJ0ZXIsXG4gICAgcmVmbGVjdDogZmFsc2UsXG4gICAgaGFzQ2hhbmdlZDogbm90RXF1YWxcbn07XG5jb25zdCBtaWNyb3Rhc2tQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuY29uc3QgU1RBVEVfSEFTX1VQREFURUQgPSAxO1xuY29uc3QgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCA9IDEgPDwgMjtcbmNvbnN0IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFID0gMSA8PCAzO1xuY29uc3QgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSA9IDEgPDwgNDtcbmNvbnN0IFNUQVRFX0hBU19DT05ORUNURUQgPSAxIDw8IDU7XG4vKipcbiAqIEJhc2UgZWxlbWVudCBjbGFzcyB3aGljaCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcy4gV2hlblxuICogcHJvcGVydGllcyBjaGFuZ2UsIHRoZSBgdXBkYXRlYCBtZXRob2QgaXMgYXN5bmNocm9ub3VzbHkgY2FsbGVkLiBUaGlzIG1ldGhvZFxuICogc2hvdWxkIGJlIHN1cHBsaWVkIGJ5IHN1YmNsYXNzZXJzIHRvIHJlbmRlciB1cGRhdGVzIGFzIGRlc2lyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBVcGRhdGluZ0VsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gMDtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gbWljcm90YXNrUHJvbWlzZTtcbiAgICAgICAgdGhpcy5faGFzQ29ubmVjdGVkUmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgd2l0aCBrZXlzIGZvciBhbnkgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAgICAgKiB1cGRhdGUgY3ljbGUgd2l0aCBwcmV2aW91cyB2YWx1ZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCB3aXRoIGtleXMgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSByZWZsZWN0ZWQgd2hlbiB1cGRhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICAvLyBub3RlOiBwaWdneSBiYWNraW5nIG9uIHRoaXMgdG8gZW5zdXJlIHdlJ3JlIF9maW5hbGl6ZWQuXG4gICAgICAgIHRoaXMuX2ZpbmFsaXplKCk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbcCwgdl0gb2YgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyID0gdGhpcy5fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHAsIHYpO1xuICAgICAgICAgICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuc2V0KGF0dHIsIHApO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGUgcHJpdmF0ZSBgX2NsYXNzUHJvcGVydGllc2AgcHJvcGVydHkgbWV0YWRhdGEgaXMgY3JlYXRlZC5cbiAgICAgKiBJbiBhZGRpdGlvbiB0byBgX2ZpbmFsaXplYCB0aGlzIGlzIGFsc28gY2FsbGVkIGluIGBjcmVhdGVQcm9wZXJ0eWAgdG9cbiAgICAgKiBlbnN1cmUgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciBjYW4gYWRkIHByb3BlcnR5IG1ldGFkYXRhLlxuICAgICAqL1xuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBlbnN1cmUgcHJpdmF0ZSBzdG9yYWdlIGZvciBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMuXG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfY2xhc3NQcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAvLyBOT1RFOiBXb3JrYXJvdW5kIElFMTEgbm90IHN1cHBvcnRpbmcgTWFwIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICAgICAgICAgICAgY29uc3Qgc3VwZXJQcm9wZXJ0aWVzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9jbGFzc1Byb3BlcnRpZXM7XG4gICAgICAgICAgICBpZiAoc3VwZXJQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdXBlclByb3BlcnRpZXMuZm9yRWFjaCgodiwgaykgPT4gdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLnNldChrLCB2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHByb3BlcnR5IGFjY2Vzc29yIG9uIHRoZSBlbGVtZW50IHByb3RvdHlwZSBpZiBvbmUgZG9lcyBub3QgZXhpc3QuXG4gICAgICogVGhlIHByb3BlcnR5IHNldHRlciBjYWxscyB0aGUgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgcHJvcGVydHkgb3B0aW9uXG4gICAgICogb3IgdXNlcyBhIHN0cmljdCBpZGVudGl0eSBjaGVjayB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gcmVxdWVzdFxuICAgICAqIGFuIHVwZGF0ZS5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24pIHtcbiAgICAgICAgLy8gTm90ZSwgc2luY2UgdGhpcyBjYW4gYmUgY2FsbGVkIGJ5IHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3Igd2hpY2hcbiAgICAgICAgLy8gaXMgY2FsbGVkIGJlZm9yZSBgX2ZpbmFsaXplYCwgd2UgZW5zdXJlIHN0b3JhZ2UgZXhpc3RzIGZvciBwcm9wZXJ0eVxuICAgICAgICAvLyBtZXRhZGF0YS5cbiAgICAgICAgdGhpcy5fZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghb3B0aW9ucy5ub0FjY2Vzc29yKSB7XG4gICAgICAgICAgICBjb25zdCBzdXBlckRlc2MgPSBkZXNjcmlwdG9yRnJvbVByb3RvdHlwZShuYW1lLCB0aGlzLnByb3RvdHlwZSk7XG4gICAgICAgICAgICBsZXQgZGVzYztcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgc3VwZXIgYWNjZXNzb3IsIGNhcHR1cmUgaXQgYW5kIFwic3VwZXJcIiB0byBpdFxuICAgICAgICAgICAgaWYgKHN1cGVyRGVzYyAhPT0gdW5kZWZpbmVkICYmIChzdXBlckRlc2Muc2V0ICYmIHN1cGVyRGVzYy5nZXQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXQsIGdldCB9ID0gc3VwZXJEZXNjO1xuICAgICAgICAgICAgICAgIGRlc2MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGdldCgpIHsgcmV0dXJuIGdldC5jYWxsKHRoaXMpOyB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCcgPyBTeW1ib2woKSA6IGBfXyR7bmFtZX1gO1xuICAgICAgICAgICAgICAgIGRlc2MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGdldCgpIHsgcmV0dXJuIHRoaXNba2V5XTsgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXNbbmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGRlc2MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgcHJvcGVydHkgYWNjZXNzb3JzIGZvciByZWdpc3RlcmVkIHByb3BlcnRpZXMgYW5kIGVuc3VyZXNcbiAgICAgKiBhbnkgc3VwZXJjbGFzc2VzIGFyZSBhbHNvIGZpbmFsaXplZC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfZmluYWxpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2ZpbmFsaXplZCcsIHRoaXMpKSAmJlxuICAgICAgICAgICAgdGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaW5hbGl6ZSBhbnkgc3VwZXJjbGFzc2VzXG4gICAgICAgIGNvbnN0IHN1cGVyQ3RvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzdXBlckN0b3IuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBlckN0b3IuX2ZpbmFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9lbnN1cmVDbGFzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBNYXAgcG9wdWxhdGVkIGluIG9ic2VydmVkQXR0cmlidXRlc1xuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBtYWtlIGFueSBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIE5vdGUsIG9ubHkgcHJvY2VzcyBcIm93blwiIHByb3BlcnRpZXMgc2luY2UgdGhpcyBlbGVtZW50IHdpbGwgaW5oZXJpdFxuICAgICAgICAvLyBhbnkgcHJvcGVydGllcyBkZWZpbmVkIG9uIHRoZSBzdXBlckNsYXNzLCBhbmQgZmluYWxpemF0aW9uIGVuc3VyZXNcbiAgICAgICAgLy8gdGhlIGVudGlyZSBwcm90b3R5cGUgY2hhaW4gaXMgZmluYWxpemVkLlxuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdwcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgICAgICAgIC8vIHN1cHBvcnQgc3ltYm9scyBpbiBwcm9wZXJ0aWVzIChJRTExIGRvZXMgbm90IHN1cHBvcnQgdGhpcylcbiAgICAgICAgICAgIGNvbnN0IHByb3BLZXlzID0gW1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BzKSxcbiAgICAgICAgICAgICAgICAuLi4odHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgID8gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhwcm9wcylcbiAgICAgICAgICAgICAgICAgICAgOiBbXVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcm9wS2V5cykge1xuICAgICAgICAgICAgICAgIC8vIG5vdGUsIHVzZSBvZiBgYW55YCBpcyBkdWUgdG8gVHlwZVNyaXB0IGxhY2sgb2Ygc3VwcG9ydCBmb3Igc3ltYm9sIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXggdHlwZXNcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5KHAsIHByb3BzW3BdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGBuYW1lYC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGZhbHNlXG4gICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgOiAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIDogKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBwcm9wZXJ0eSBzaG91bGQgcmVxdWVzdCBhbiB1cGRhdGUuXG4gICAgICogQ2FsbGVkIHdoZW4gYSBwcm9wZXJ0eSB2YWx1ZSBpcyBzZXQgYW5kIHVzZXMgdGhlIGBoYXNDaGFuZ2VkYFxuICAgICAqIG9wdGlvbiBmb3IgdGhlIHByb3BlcnR5IGlmIHByZXNlbnQgb3IgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2suXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3ZhbHVlSGFzQ2hhbmdlZCh2YWx1ZSwgb2xkLCBoYXNDaGFuZ2VkID0gbm90RXF1YWwpIHtcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQodmFsdWUsIG9sZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIENhbGxlZCB2aWEgdGhlIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIGFuZCB1c2VzIHRoZSBwcm9wZXJ0eSdzXG4gICAgICogYGNvbnZlcnRlcmAgb3IgYGNvbnZlcnRlci5mcm9tQXR0cmlidXRlYCBwcm9wZXJ0eSBvcHRpb24uXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IG9wdGlvbnMuY29udmVydGVyIHx8IGRlZmF1bHRDb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IGZyb21BdHRyaWJ1dGUgPSAodHlwZW9mIGNvbnZlcnRlciA9PT0gJ2Z1bmN0aW9uJyA/IGNvbnZlcnRlciA6IGNvbnZlcnRlci5mcm9tQXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGZyb21BdHRyaWJ1dGUgPyBmcm9tQXR0cmlidXRlKHZhbHVlLCB0eXBlKSA6IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhpc1xuICAgICAqIHJldHVybnMgdW5kZWZpbmVkLCB0aGUgcHJvcGVydHkgd2lsbCAqbm90KiBiZSByZWZsZWN0ZWQgdG8gYW4gYXR0cmlidXRlLlxuICAgICAqIElmIHRoaXMgcmV0dXJucyBudWxsLCB0aGUgYXR0cmlidXRlIHdpbGwgYmUgcmVtb3ZlZCwgb3RoZXJ3aXNlIHRoZVxuICAgICAqIGF0dHJpYnV0ZSB3aWxsIGJlIHNldCB0byB0aGUgdmFsdWUuXG4gICAgICogVGhpcyB1c2VzIHRoZSBwcm9wZXJ0eSdzIGByZWZsZWN0YCBhbmQgYHR5cGUudG9BdHRyaWJ1dGVgIHByb3BlcnR5IG9wdGlvbnMuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBvcHRpb25zLmNvbnZlcnRlcjtcbiAgICAgICAgY29uc3QgdG9BdHRyaWJ1dGUgPSBjb252ZXJ0ZXIgJiYgY29udmVydGVyLnRvQXR0cmlidXRlIHx8XG4gICAgICAgICAgICBkZWZhdWx0Q29udmVydGVyLnRvQXR0cmlidXRlO1xuICAgICAgICByZXR1cm4gdG9BdHRyaWJ1dGUodmFsdWUsIHR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBlbGVtZW50IGluaXRpYWxpemF0aW9uLiBCeSBkZWZhdWx0IGNhcHR1cmVzIGFueSBwcmUtc2V0IHZhbHVlcyBmb3JcbiAgICAgKiByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHsgdGhpcy5fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpOyB9XG4gICAgLyoqXG4gICAgICogRml4ZXMgYW55IHByb3BlcnRpZXMgc2V0IG9uIHRoZSBpbnN0YW5jZSBiZWZvcmUgdXBncmFkZSB0aW1lLlxuICAgICAqIE90aGVyd2lzZSB0aGVzZSB3b3VsZCBzaGFkb3cgdGhlIGFjY2Vzc29yIGFuZCBicmVhayB0aGVzZSBwcm9wZXJ0aWVzLlxuICAgICAqIFRoZSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgaW4gYSBNYXAgd2hpY2ggaXMgcGxheWVkIGJhY2sgYWZ0ZXIgdGhlXG4gICAgICogY29uc3RydWN0b3IgcnVucy4gTm90ZSwgb24gdmVyeSBvbGQgdmVyc2lvbnMgb2YgU2FmYXJpICg8PTkpIG9yIENocm9tZVxuICAgICAqICg8PTQxKSwgcHJvcGVydGllcyBjcmVhdGVkIGZvciBuYXRpdmUgcGxhdGZvcm0gcHJvcGVydGllcyBsaWtlIChgaWRgIG9yXG4gICAgICogYG5hbWVgKSBtYXkgbm90IGhhdmUgZGVmYXVsdCB2YWx1ZXMgc2V0IGluIHRoZSBlbGVtZW50IGNvbnN0cnVjdG9yLiBPblxuICAgICAqIHRoZXNlIGJyb3dzZXJzIG5hdGl2ZSBwcm9wZXJ0aWVzIGFwcGVhciBvbiBpbnN0YW5jZXMgYW5kIHRoZXJlZm9yZSB0aGVpclxuICAgICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBvdmVyd3JpdGUgYW55IGVsZW1lbnQgZGVmYXVsdCAoZS5nLiBpZiB0aGUgZWxlbWVudCBzZXRzXG4gICAgICogdGhpcy5pZCA9ICdpZCcgaW4gdGhlIGNvbnN0cnVjdG9yLCB0aGUgJ2lkJyB3aWxsIGJlY29tZSAnJyBzaW5jZSB0aGlzIGlzXG4gICAgICogdGhlIG5hdGl2ZSBwbGF0Zm9ybSBkZWZhdWx0KS5cbiAgICAgKi9cbiAgICBfc2F2ZUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICAgICAgZm9yIChjb25zdCBbcF0gb2YgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgLl9jbGFzc1Byb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW3BdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzLnNldChwLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBwcmV2aW91c2x5IHNhdmVkIGluc3RhbmNlIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtwLCB2XSBvZiB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXNbcF0gPSB2O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9IQVNfQ09OTkVDVEVEO1xuICAgICAgICAvLyBFbnN1cmUgY29ubmVjdGlvbiB0cmlnZ2VycyBhbiB1cGRhdGUuIFVwZGF0ZXMgY2Fubm90IGNvbXBsZXRlIGJlZm9yZVxuICAgICAgICAvLyBjb25uZWN0aW9uIGFuZCBpZiBvbmUgaXMgcGVuZGluZyBjb25uZWN0aW9uIHRoZSBgX2hhc0Nvbm5lY3Rpb25SZXNvbHZlcmBcbiAgICAgICAgLy8gd2lsbCBleGlzdC4gSWYgc28sIHJlc29sdmUgaXQgdG8gY29tcGxldGUgdGhlIHVwZGF0ZSwgb3RoZXJ3aXNlXG4gICAgICAgIC8vIHJlcXVlc3RVcGRhdGUuXG4gICAgICAgIGlmICh0aGlzLl9oYXNDb25uZWN0ZWRSZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5faGFzQ29ubmVjdGVkUmVzb2x2ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhc0Nvbm5lY3RlZFJlc29sdmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIGZvciBgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAgaW4gZXh0ZW5zaW9ucyB3aGlsZVxuICAgICAqIHJlc2VydmluZyB0aGUgcG9zc2liaWxpdHkgb2YgbWFraW5nIG5vbi1icmVha2luZyBmZWF0dXJlIGFkZGl0aW9uc1xuICAgICAqIHdoZW4gZGlzY29ubmVjdGluZyBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7IH1cbiAgICAvKipcbiAgICAgKiBTeW5jaHJvbml6ZXMgcHJvcGVydHkgdmFsdWVzIHdoZW4gYXR0cmlidXRlcyBjaGFuZ2UuXG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9sZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wcm9wZXJ0eVRvQXR0cmlidXRlKG5hbWUsIHZhbHVlLCBvcHRpb25zID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24pIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IGF0dHIgPSBjdG9yLl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IGN0b3IuX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBhbiB1bmRlZmluZWQgdmFsdWUgZG9lcyBub3QgY2hhbmdlIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUcmFjayBpZiB0aGUgcHJvcGVydHkgaXMgYmVpbmcgcmVmbGVjdGVkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRoZSBwcm9wZXJ0eSBhZ2FpbiB2aWEgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AuIE5vdGU6XG4gICAgICAgICAgICAvLyAxLiB0aGlzIHRha2VzIGFkdmFudGFnZSBvZiB0aGUgZmFjdCB0aGF0IHRoZSBjYWxsYmFjayBpcyBzeW5jaHJvbm91cy5cbiAgICAgICAgICAgIC8vIDIuIHdpbGwgYmVoYXZlIGluY29ycmVjdGx5IGlmIG11bHRpcGxlIGF0dHJpYnV0ZXMgYXJlIGluIHRoZSByZWFjdGlvblxuICAgICAgICAgICAgLy8gc3RhY2sgYXQgdGltZSBvZiBjYWxsaW5nLiBIb3dldmVyLCBzaW5jZSB3ZSBwcm9jZXNzIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIC8vIGluIGB1cGRhdGVgIHRoaXMgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSAob3IgYW4gZXh0cmVtZSBjb3JuZXIgY2FzZVxuICAgICAgICAgICAgLy8gdGhhdCB3ZSdkIGxpa2UgdG8gZGlzY292ZXIpLlxuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEU7XG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIC8vIFVzZSB0cmFja2luZyBpbmZvIHRvIGF2b2lkIGRlc2VyaWFsaXppbmcgYXR0cmlidXRlIHZhbHVlIGlmIGl0IHdhc1xuICAgICAgICAvLyBqdXN0IHNldCBmcm9tIGEgcHJvcGVydHkgc2V0dGVyLlxuICAgICAgICBpZiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBwcm9wTmFtZSA9IGN0b3IuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAocHJvcE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGN0b3IuX2NsYXNzUHJvcGVydGllcy5nZXQocHJvcE5hbWUpIHx8IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uO1xuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWTtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID1cbiAgICAgICAgICAgICAgICBjdG9yLl9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgYW4gdXBkYXRlIHdoaWNoIGlzIHByb2Nlc3NlZCBhc3luY2hyb25vdXNseS4gVGhpcyBzaG91bGRcbiAgICAgKiBiZSBjYWxsZWQgd2hlbiBhbiBlbGVtZW50IHNob3VsZCB1cGRhdGUgYmFzZWQgb24gc29tZSBzdGF0ZSBub3QgdHJpZ2dlcmVkXG4gICAgICogYnkgc2V0dGluZyBhIHByb3BlcnR5LiBJbiB0aGlzIGNhc2UsIHBhc3Mgbm8gYXJndW1lbnRzLiBJdCBzaG91bGQgYWxzbyBiZVxuICAgICAqIGNhbGxlZCB3aGVuIG1hbnVhbGx5IGltcGxlbWVudGluZyBhIHByb3BlcnR5IHNldHRlci4gSW4gdGhpcyBjYXNlLCBwYXNzIHRoZVxuICAgICAqIHByb3BlcnR5IGBuYW1lYCBhbmQgYG9sZFZhbHVlYCB0byBlbnN1cmUgdGhhdCBhbnkgY29uZmlndXJlZCBwcm9wZXJ0eVxuICAgICAqIG9wdGlvbnMgYXJlIGhvbm9yZWQuIFJldHVybnMgdGhlIGB1cGRhdGVDb21wbGV0ZWAgUHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZFxuICAgICAqIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSB7UHJvcGVydHlLZXl9IChvcHRpb25hbCkgbmFtZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAgICogQHBhcmFtIG9sZFZhbHVlIHthbnl9IChvcHRpb25hbCkgb2xkIHZhbHVlIG9mIHJlcXVlc3RpbmcgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBQcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgdXBkYXRlIGNvbXBsZXRlcy5cbiAgICAgKi9cbiAgICByZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBzaG91bGRSZXF1ZXN0VXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHByb3BlcnR5IGtleSwgcGVyZm9ybSBwcm9wZXJ0eSB1cGRhdGUgc3RlcHMuXG4gICAgICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gY3Rvci5fY2xhc3NQcm9wZXJ0aWVzLmdldChuYW1lKSB8fCBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjtcbiAgICAgICAgICAgIGlmIChjdG9yLl92YWx1ZUhhc0NoYW5nZWQodGhpc1tuYW1lXSwgb2xkVmFsdWUsIG9wdGlvbnMuaGFzQ2hhbmdlZCkpIHtcbiAgICAgICAgICAgICAgICAvLyB0cmFjayBvbGQgdmFsdWUgd2hlbiBjaGFuZ2luZy5cbiAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcy5zZXQobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIC8vIGFkZCB0byByZWZsZWN0aW5nIHByb3BlcnRpZXMgc2V0XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVmbGVjdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAhKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLnNldChuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWJvcnQgdGhlIHJlcXVlc3QgaWYgdGhlIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBjaGFuZ2VkLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVxdWVzdFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faGFzUmVxdWVzdGVkVXBkYXRlICYmIHNob3VsZFJlcXVlc3RVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2VucXVldWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgZWxlbWVudCB0byBhc3luY2hyb25vdXNseSB1cGRhdGUuXG4gICAgICovXG4gICAgYXN5bmMgX2VucXVldWVVcGRhdGUoKSB7XG4gICAgICAgIC8vIE1hcmsgc3RhdGUgdXBkYXRpbmcuLi5cbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX1VQREFURV9SRVFVRVNURUQ7XG4gICAgICAgIGxldCByZXNvbHZlO1xuICAgICAgICBjb25zdCBwcmV2aW91c1VwZGF0ZVByb21pc2UgPSB0aGlzLl91cGRhdGVQcm9taXNlO1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlcykgPT4gcmVzb2x2ZSA9IHJlcyk7XG4gICAgICAgIC8vIEVuc3VyZSBhbnkgcHJldmlvdXMgdXBkYXRlIGhhcyByZXNvbHZlZCBiZWZvcmUgdXBkYXRpbmcuXG4gICAgICAgIC8vIFRoaXMgYGF3YWl0YCBhbHNvIGVuc3VyZXMgdGhhdCBwcm9wZXJ0eSBjaGFuZ2VzIGFyZSBiYXRjaGVkLlxuICAgICAgICBhd2FpdCBwcmV2aW91c1VwZGF0ZVByb21pc2U7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZWxlbWVudCBoYXMgY29ubmVjdGVkIGJlZm9yZSB1cGRhdGluZy5cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHRoaXMuX2hhc0Nvbm5lY3RlZFJlc29sdmVyID0gcmVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGxvdyBgcGVyZm9ybVVwZGF0ZWAgdG8gYmUgYXN5bmNocm9ub3VzIHRvIGVuYWJsZSBzY2hlZHVsaW5nIG9mIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGVyZm9ybVVwZGF0ZSgpO1xuICAgICAgICAvLyBOb3RlLCB0aGlzIGlzIHRvIGF2b2lkIGRlbGF5aW5nIGFuIGFkZGl0aW9uYWwgbWljcm90YXNrIHVubGVzcyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvLlxuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwgJiZcbiAgICAgICAgICAgIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoIXRoaXMuX2hhc1JlcXVlc3RlZFVwZGF0ZSk7XG4gICAgfVxuICAgIGdldCBfaGFzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSEFTX0NPTk5FQ1RFRCk7XG4gICAgfVxuICAgIGdldCBfaGFzUmVxdWVzdGVkVXBkYXRlKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCk7XG4gICAgfVxuICAgIGdldCBoYXNVcGRhdGVkKCkgeyByZXR1cm4gKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSEFTX1VQREFURUQpOyB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gZWxlbWVudCB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgdGltaW5nIG9mIHVwZGF0ZXMuIEZvciBpbnN0YW5jZSxcbiAgICAgKiB0byBzY2hlZHVsZSB1cGRhdGVzIHRvIG9jY3VyIGp1c3QgYmVmb3JlIHRoZSBuZXh0IGZyYW1lOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogcHJvdGVjdGVkIGFzeW5jIHBlcmZvcm1VcGRhdGUoKTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgICogICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xuICAgICAqICAgc3VwZXIucGVyZm9ybVVwZGF0ZSgpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwZXJmb3JtVXBkYXRlKCkge1xuICAgICAgICAvLyBNaXhpbiBpbnN0YW5jZSBwcm9wZXJ0aWVzIG9uY2UsIGlmIHRoZXkgZXhpc3QuXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkVXBkYXRlKHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlZFByb3BlcnRpZXMgPSB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgICAgICAgICBpZiAoISh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0hBU19VUERBVEVEKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9IQVNfVVBEQVRFRDtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfbWFya1VwZGF0ZWQoKSB7XG4gICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX1VQREFURV9SRVFVRVNURUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZWxlbWVudCBoYXMgY29tcGxldGVkIHVwZGF0aW5nLlxuICAgICAqIFRoZSBQcm9taXNlIHZhbHVlIGlzIGEgYm9vbGVhbiB0aGF0IGlzIGB0cnVlYCBpZiB0aGUgZWxlbWVudCBjb21wbGV0ZWQgdGhlXG4gICAgICogdXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS4gVGhlIFByb21pc2UgcmVzdWx0IGlzIGBmYWxzZWAgaWZcbiAgICAgKiBhIHByb3BlcnR5IHdhcyBzZXQgaW5zaWRlIGB1cGRhdGVkKClgLiBUaGlzIGdldHRlciBjYW4gYmUgaW1wbGVtZW50ZWQgdG9cbiAgICAgKiBhd2FpdCBhZGRpdGlvbmFsIHN0YXRlLiBGb3IgZXhhbXBsZSwgaXQgaXMgc29tZXRpbWVzIHVzZWZ1bCB0byBhd2FpdCBhXG4gICAgICogcmVuZGVyZWQgZWxlbWVudCBiZWZvcmUgZnVsZmlsbGluZyB0aGlzIFByb21pc2UuIFRvIGRvIHRoaXMsIGZpcnN0IGF3YWl0XG4gICAgICogYHN1cGVyLnVwZGF0ZUNvbXBsZXRlYCB0aGVuIGFueSBzdWJzZXF1ZW50IHN0YXRlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHJldHVybnMgYSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZVxuICAgICAqIHVwZGF0ZSByZXNvbHZlZCB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAgICovXG4gICAgZ2V0IHVwZGF0ZUNvbXBsZXRlKCkgeyByZXR1cm4gdGhpcy5fdXBkYXRlUHJvbWlzZTsgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHdoZXRoZXIgb3Igbm90IGB1cGRhdGVgIHNob3VsZCBiZSBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCByZXF1ZXN0c1xuICAgICAqIGFuIHVwZGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybnMgYHRydWVgLCBidXQgdGhpcyBjYW4gYmVcbiAgICAgKiBjdXN0b21pemVkIHRvIGNvbnRyb2wgd2hlbiB0byB1cGRhdGUuXG4gICAgICpcbiAgICAgKiAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBzaG91bGRVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlcy5cbiAgICAgKiBJdCBjYW4gYmUgb3ZlcnJpZGRlbiB0byByZW5kZXIgYW5kIGtlZXAgdXBkYXRlZCBlbGVtZW50IERPTS5cbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlclxuICAgICAqIGFub3RoZXIgdXBkYXRlLlxuICAgICAqXG4gICAgICogKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgdXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICBpZiAodGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvcGVydHlUb0F0dHJpYnV0ZShrLCB0aGlzW2tdLCB2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbmV2ZXIgdGhlIGVsZW1lbnQgaXMgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm1cbiAgICAgKiBwb3N0LXVwZGF0aW5nIHRhc2tzIHZpYSBET00gQVBJcywgZm9yIGV4YW1wbGUsIGZvY3VzaW5nIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllcykgeyB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGZpcnN0IHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtIG9uZSB0aW1lXG4gICAgICogd29yayBvbiB0aGUgZWxlbWVudCBhZnRlciB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBmaXJzdFVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7IH1cbn1cbi8qKlxuICogTWFya3MgY2xhc3MgYXMgaGF2aW5nIGZpbmlzaGVkIGNyZWF0aW5nIHByb3BlcnRpZXMuXG4gKi9cblVwZGF0aW5nRWxlbWVudC5maW5hbGl6ZWQgPSB0cnVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRpbmctZWxlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5jb25zdCBsZWdhY3lDdXN0b21FbGVtZW50ID0gKHRhZ05hbWUsIGNsYXp6KSA9PiB7XG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBjbGF6eik7XG4gICAgLy8gQ2FzdCBhcyBhbnkgYmVjYXVzZSBUUyBkb2Vzbid0IHJlY29nbml6ZSB0aGUgcmV0dXJuIHR5cGUgYXMgYmVpbmcgYVxuICAgIC8vIHN1YnR5cGUgb2YgdGhlIGRlY29yYXRlZCBjbGFzcyB3aGVuIGNsYXp6IGlzIHR5cGVkIGFzXG4gICAgLy8gYENvbnN0cnVjdG9yPEhUTUxFbGVtZW50PmAgZm9yIHNvbWUgcmVhc29uLlxuICAgIC8vIGBDb25zdHJ1Y3RvcjxIVE1MRWxlbWVudD5gIGlzIGhlbHBmdWwgdG8gbWFrZSBzdXJlIHRoZSBkZWNvcmF0b3IgaXNcbiAgICAvLyBhcHBsaWVkIHRvIGVsZW1lbnRzIGhvd2V2ZXIuXG4gICAgcmV0dXJuIGNsYXp6O1xufTtcbmNvbnN0IHN0YW5kYXJkQ3VzdG9tRWxlbWVudCA9ICh0YWdOYW1lLCBkZXNjcmlwdG9yKSA9PiB7XG4gICAgY29uc3QgeyBraW5kLCBlbGVtZW50cyB9ID0gZGVzY3JpcHRvcjtcbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kLFxuICAgICAgICBlbGVtZW50cyxcbiAgICAgICAgLy8gVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgb25jZSB0aGUgY2xhc3MgaXMgb3RoZXJ3aXNlIGZ1bGx5IGRlZmluZWRcbiAgICAgICAgZmluaXNoZXIoY2xhenopIHtcbiAgICAgICAgICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgY2xhenopO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vKipcbiAqIENsYXNzIGRlY29yYXRvciBmYWN0b3J5IHRoYXQgZGVmaW5lcyB0aGUgZGVjb3JhdGVkIGNsYXNzIGFzIGEgY3VzdG9tIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHRhZ05hbWUgdGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBlbGVtZW50IHRvIGRlZmluZVxuICpcbiAqIEluIFR5cGVTY3JpcHQsIHRoZSBgdGFnTmFtZWAgcGFzc2VkIHRvIGBjdXN0b21FbGVtZW50YCBzaG91bGQgYmUgYSBrZXkgb2YgdGhlXG4gKiBgSFRNTEVsZW1lbnRUYWdOYW1lTWFwYCBpbnRlcmZhY2UuIFRvIGFkZCB5b3VyIGVsZW1lbnQgdG8gdGhlIGludGVyZmFjZSxcbiAqIGRlY2xhcmUgdGhlIGludGVyZmFjZSBpbiB0aGlzIG1vZHVsZTpcbiAqXG4gKiAgICAgQGN1c3RvbUVsZW1lbnQoJ215LWVsZW1lbnQnKVxuICogICAgIGV4cG9ydCBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHt9XG4gKlxuICogICAgIGRlY2xhcmUgZ2xvYmFsIHtcbiAqICAgICAgIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICogICAgICAgICAnbXktZWxlbWVudCc6IE15RWxlbWVudDtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICovXG5leHBvcnQgY29uc3QgY3VzdG9tRWxlbWVudCA9ICh0YWdOYW1lKSA9PiAoY2xhc3NPckRlc2NyaXB0b3IpID0+ICh0eXBlb2YgY2xhc3NPckRlc2NyaXB0b3IgPT09ICdmdW5jdGlvbicpXG4gICAgPyBsZWdhY3lDdXN0b21FbGVtZW50KHRhZ05hbWUsIGNsYXNzT3JEZXNjcmlwdG9yKVxuICAgIDogc3RhbmRhcmRDdXN0b21FbGVtZW50KHRhZ05hbWUsIGNsYXNzT3JEZXNjcmlwdG9yKTtcbmNvbnN0IHN0YW5kYXJkUHJvcGVydHkgPSAob3B0aW9ucywgZWxlbWVudCkgPT4ge1xuICAgIC8vIGNyZWF0ZVByb3BlcnR5KCkgdGFrZXMgY2FyZSBvZiBkZWZpbmluZyB0aGUgcHJvcGVydHksIGJ1dCB3ZSBzdGlsbCBtdXN0XG4gICAgLy8gcmV0dXJuIHNvbWUga2luZCBvZiBkZXNjcmlwdG9yLCBzbyByZXR1cm4gYSBkZXNjcmlwdG9yIGZvciBhbiB1bnVzZWRcbiAgICAvLyBwcm90b3R5cGUgZmllbGQuIFRoZSBmaW5pc2hlciBjYWxscyBjcmVhdGVQcm9wZXJ0eSgpLlxuICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICdmaWVsZCcsXG4gICAgICAgIGtleTogU3ltYm9sKCksXG4gICAgICAgIHBsYWNlbWVudDogJ293bicsXG4gICAgICAgIGRlc2NyaXB0b3I6IHt9LFxuICAgICAgICAvLyBXaGVuIEBiYWJlbC9wbHVnaW4tcHJvcG9zYWwtZGVjb3JhdG9ycyBpbXBsZW1lbnRzIGluaXRpYWxpemVycyxcbiAgICAgICAgLy8gZG8gdGhpcyBpbnN0ZWFkIG9mIHRoZSBpbml0aWFsaXplciBiZWxvdy4gU2VlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwvaXNzdWVzLzkyNjAgZXh0cmFzOiBbXG4gICAgICAgIC8vICAge1xuICAgICAgICAvLyAgICAga2luZDogJ2luaXRpYWxpemVyJyxcbiAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ293bicsXG4gICAgICAgIC8vICAgICBpbml0aWFsaXplcjogZGVzY3JpcHRvci5pbml0aWFsaXplcixcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIF0sXG4gICAgICAgIGluaXRpYWxpemVyKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LmluaXRpYWxpemVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tlbGVtZW50LmtleV0gPSBlbGVtZW50LmluaXRpYWxpemVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICBjbGF6ei5jcmVhdGVQcm9wZXJ0eShlbGVtZW50LmtleSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbmNvbnN0IGxlZ2FjeVByb3BlcnR5ID0gKG9wdGlvbnMsIHByb3RvLCBuYW1lKSA9PiB7XG4gICAgcHJvdG8uY29uc3RydWN0b3IuY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG59O1xuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB3aGljaCBjcmVhdGVzIGEgTGl0RWxlbWVudCBwcm9wZXJ0eSB3aGljaCByZWZsZWN0cyBhXG4gKiBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSB2YWx1ZS4gQSBgUHJvcGVydHlEZWNsYXJhdGlvbmAgbWF5IG9wdGlvbmFsbHkgYmVcbiAqIHN1cHBsaWVkIHRvIGNvbmZpZ3VyZSBwcm9wZXJ0eSBmZWF0dXJlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHByb3BlcnR5ID0gKG9wdGlvbnMpID0+IChwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgPT4gKG5hbWUgIT09IHVuZGVmaW5lZClcbiAgICA/IGxlZ2FjeVByb3BlcnR5KG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKVxuICAgIDogc3RhbmRhcmRQcm9wZXJ0eShvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvcik7XG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHRoYXQgY29udmVydHMgYSBjbGFzcyBwcm9wZXJ0eSBpbnRvIGEgZ2V0dGVyIHRoYXRcbiAqIGV4ZWN1dGVzIGEgcXVlcnlTZWxlY3RvciBvbiB0aGUgZWxlbWVudCdzIHJlbmRlclJvb3QuXG4gKi9cbmV4cG9ydCBjb25zdCBxdWVyeSA9IF9xdWVyeSgodGFyZ2V0LCBzZWxlY3RvcikgPT4gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKTtcbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3IgdGhhdCBjb252ZXJ0cyBhIGNsYXNzIHByb3BlcnR5IGludG8gYSBnZXR0ZXJcbiAqIHRoYXQgZXhlY3V0ZXMgYSBxdWVyeVNlbGVjdG9yQWxsIG9uIHRoZSBlbGVtZW50J3MgcmVuZGVyUm9vdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHF1ZXJ5QWxsID0gX3F1ZXJ5KCh0YXJnZXQsIHNlbGVjdG9yKSA9PiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuY29uc3QgbGVnYWN5UXVlcnkgPSAoZGVzY3JpcHRvciwgcHJvdG8sIG5hbWUpID0+IHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCBuYW1lLCBkZXNjcmlwdG9yKTsgfTtcbmNvbnN0IHN0YW5kYXJkUXVlcnkgPSAoZGVzY3JpcHRvciwgZWxlbWVudCkgPT4gKHtcbiAgICBraW5kOiAnbWV0aG9kJyxcbiAgICBwbGFjZW1lbnQ6ICdwcm90b3R5cGUnLFxuICAgIGtleTogZWxlbWVudC5rZXksXG4gICAgZGVzY3JpcHRvcixcbn0pO1xuLyoqXG4gKiBCYXNlLWltcGxlbWVudGF0aW9uIG9mIGBAcXVlcnlgIGFuZCBgQHF1ZXJ5QWxsYCBkZWNvcmF0b3JzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUZuIGV4ZWN0dXRlIGEgYHNlbGVjdG9yYCAoaWUsIHF1ZXJ5U2VsZWN0b3Igb3IgcXVlcnlTZWxlY3RvckFsbClcbiAqIGFnYWluc3QgYHRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIF9xdWVyeShxdWVyeUZuKSB7XG4gICAgcmV0dXJuIChzZWxlY3RvcikgPT4gKHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBnZXQoKSB7IHJldHVybiBxdWVyeUZuKHRoaXMucmVuZGVyUm9vdCwgc2VsZWN0b3IpOyB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChuYW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICA/IGxlZ2FjeVF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKVxuICAgICAgICAgICAgOiBzdGFuZGFyZFF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yKTtcbiAgICB9O1xufVxuY29uc3Qgc3RhbmRhcmRFdmVudE9wdGlvbnMgPSAob3B0aW9ucywgZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBlbGVtZW50LCB7IGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNsYXp6LnByb3RvdHlwZVtlbGVtZW50LmtleV0sIG9wdGlvbnMpO1xuICAgICAgICB9IH0pO1xufTtcbmNvbnN0IGxlZ2FjeUV2ZW50T3B0aW9ucyA9IChvcHRpb25zLCBwcm90bywgbmFtZSkgPT4geyBPYmplY3QuYXNzaWduKHByb3RvW25hbWVdLCBvcHRpb25zKTsgfTtcbi8qKlxuICogQWRkcyBldmVudCBsaXN0ZW5lciBvcHRpb25zIHRvIGEgbWV0aG9kIHVzZWQgYXMgYW4gZXZlbnQgbGlzdGVuZXIgaW4gYVxuICogbGl0LWh0bWwgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IHRoYXQgc3BlY2lmaXMgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyBhcyBhY2NlcHRlZCBieVxuICogYEV2ZW50VGFyZ2V0I2FkZEV2ZW50TGlzdGVuZXJgIGFuZCBgRXZlbnRUYXJnZXQjcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuXG4gKlxuICogQ3VycmVudCBicm93c2VycyBzdXBwb3J0IHRoZSBgY2FwdHVyZWAsIGBwYXNzaXZlYCwgYW5kIGBvbmNlYCBvcHRpb25zLiBTZWU6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQvYWRkRXZlbnRMaXN0ZW5lciNQYXJhbWV0ZXJzXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqXG4gKiAgICAgICBjbGlja2VkID0gZmFsc2U7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gaHRtbGA8ZGl2IEBjbGljaz0ke3RoaXMuX29uQ2xpY2t9YD48YnV0dG9uPjwvYnV0dG9uPjwvZGl2PmA7XG4gKiAgICAgICB9XG4gKlxuICogICAgICAgQGV2ZW50T3B0aW9ucyh7Y2FwdHVyZTogdHJ1ZX0pXG4gKiAgICAgICBfb25DbGljayhlKSB7XG4gKiAgICAgICAgIHRoaXMuY2xpY2tlZCA9IHRydWU7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICovXG5leHBvcnQgY29uc3QgZXZlbnRPcHRpb25zID0gKG9wdGlvbnMpID0+IFxuLy8gUmV0dXJuIHZhbHVlIHR5cGVkIGFzIGFueSB0byBwcmV2ZW50IFR5cGVTY3JpcHQgZnJvbSBjb21wbGFpbmluZyB0aGF0XG4vLyBzdGFuZGFyZCBkZWNvcmF0b3IgZnVuY3Rpb24gc2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoIFR5cGVTY3JpcHQgZGVjb3JhdG9yXG4vLyBzaWduYXR1cmVcbi8vIFRPRE8oa3NjaGFhZik6IHVuY2xlYXIgd2h5IGl0IHdhcyBvbmx5IGZhaWxpbmcgb24gdGhpcyBkZWNvcmF0b3IgYW5kIG5vdFxuLy8gdGhlIG90aGVyc1xuKChwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgPT4gKG5hbWUgIT09IHVuZGVmaW5lZClcbiAgICA/IGxlZ2FjeUV2ZW50T3B0aW9ucyhvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSlcbiAgICA6IHN0YW5kYXJkRXZlbnRPcHRpb25zKG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWNvcmF0b3JzLmpzLm1hcCIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxOSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyA9ICgnYWRvcHRlZFN0eWxlU2hlZXRzJyBpbiBEb2N1bWVudC5wcm90b3R5cGUpO1xuZXhwb3J0IGNsYXNzIENTU1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoY3NzVGV4dCkgeyB0aGlzLmNzc1RleHQgPSBjc3NUZXh0OyB9XG4gICAgLy8gTm90ZSwgdGhpcyBpcyBhIGdldHRlciBzbyB0aGF0IGl0J3MgbGF6eS4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnNcbiAgICAvLyBzdHlsZXNoZWV0cyBhcmUgbm90IGNyZWF0ZWQgdW50aWwgdGhlIGZpcnN0IGVsZW1lbnQgaW5zdGFuY2UgaXMgbWFkZS5cbiAgICBnZXQgc3R5bGVTaGVldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gTm90ZSwgaWYgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgc3VwcG9ydGVkIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXRcbiAgICAgICAgICAgIC8vIGlzIGNvbnN0cnVjdGFibGUuXG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldC5yZXBsYWNlU3luYyh0aGlzLmNzc1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0eWxlU2hlZXQ7XG4gICAgfVxufVxuY29uc3QgdGV4dEZyb21DU1NSZXN1bHQgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBDU1NSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmNzc1RleHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIHBhc3NlZCB0byAnY3NzJyBmdW5jdGlvbiBtdXN0IGJlIGEgJ2NzcycgZnVuY3Rpb24gcmVzdWx0OiAke3ZhbHVlfS5gKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGNzcyA9IChzdHJpbmdzLCAuLi52YWx1ZXMpID0+IHtcbiAgICBjb25zdCBjc3NUZXh0ID0gdmFsdWVzLnJlZHVjZSgoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSwgc3RyaW5nc1swXSk7XG4gICAgcmV0dXJuIG5ldyBDU1NSZXN1bHQoY3NzVGV4dCk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLXRhZy5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJ2xpdC1odG1sJztcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ2xpdC1odG1sL2xpYi9zaGFkeS1yZW5kZXInO1xuaW1wb3J0IHsgVXBkYXRpbmdFbGVtZW50IH0gZnJvbSAnLi9saWIvdXBkYXRpbmctZWxlbWVudC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi91cGRhdGluZy1lbGVtZW50LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL2RlY29yYXRvcnMuanMnO1xuZXhwb3J0IHsgaHRtbCwgc3ZnLCBUZW1wbGF0ZVJlc3VsdCwgU1ZHVGVtcGxhdGVSZXN1bHQgfSBmcm9tICdsaXQtaHRtbC9saXQtaHRtbCc7XG5pbXBvcnQgeyBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMgfSBmcm9tICcuL2xpYi9jc3MtdGFnLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL2Nzcy10YWcuanMnO1xuZXhwb3J0IGNsYXNzIExpdEVsZW1lbnQgZXh0ZW5kcyBVcGRhdGluZ0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC4gVGhlIHN0eWxlcyBzaG91bGQgYmUgZGVmaW5lZFxuICAgICAqIHVzaW5nIHRoZSBgY3NzYCB0YWcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7IHJldHVybiBbXTsgfVxuICAgIHN0YXRpYyBnZXQgX3VuaXF1ZVN0eWxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0eWxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgICAgIC8vIEFzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRvIGF2b2lkIGR1cGxpY2F0ZWQgc3R5bGluZyB0aGF0IGNhblxuICAgICAgICAgICAgLy8gb2NjdXIgZXNwZWNpYWxseSB3aGVuIGNvbXBvc2luZyB2aWEgc3ViY2xhc3NpbmcsIGRlLWR1cGxpY2F0ZSBzdHlsZXNcbiAgICAgICAgICAgIC8vIHByZXNlcnZpbmcgdGhlIGxhc3QgaXRlbSBpbiB0aGUgbGlzdC4gVGhlIGxhc3QgaXRlbSBpcyBrZXB0IHRvXG4gICAgICAgICAgICAvLyB0cnkgdG8gcHJlc2VydmUgY2FzY2FkZSBvcmRlciB3aXRoIHRoZSBhc3N1bXB0aW9uIHRoYXQgaXQncyBtb3N0XG4gICAgICAgICAgICAvLyBpbXBvcnRhbnQgdGhhdCBsYXN0IGFkZGVkIHN0eWxlcyBvdmVycmlkZSBwcmV2aW91cyBzdHlsZXMuXG4gICAgICAgICAgICBjb25zdCBzdHlsZVNldCA9IHN0eWxlcy5yZWR1Y2VSaWdodCgoc2V0LCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0LmFkZChzKTtcbiAgICAgICAgICAgICAgICAvLyBvbiBJRSBzZXQuYWRkIGRvZXMgbm90IHJldHVybiB0aGUgc2V0LlxuICAgICAgICAgICAgICAgIHJldHVybiBzZXQ7XG4gICAgICAgICAgICB9LCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgLy8gQXJyYXkuZm9ybSBkb2VzIG5vdCB3b3JrIG9uIFNldCBpbiBJRVxuICAgICAgICAgICAgdGhpcy5fc3R5bGVzID0gW107XG4gICAgICAgICAgICBzdHlsZVNldC5mb3JFYWNoKCh2KSA9PiB0aGlzLl9zdHlsZXMudW5zaGlmdCh2KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0eWxlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZWxlbWVudCBpbml0aWFsaXphdGlvbi4gQnkgZGVmYXVsdCB0aGlzIGNhbGxzIGBjcmVhdGVSZW5kZXJSb290YFxuICAgICAqIHRvIGNyZWF0ZSB0aGUgZWxlbWVudCBgcmVuZGVyUm9vdGAgbm9kZSBhbmQgY2FwdHVyZXMgYW55IHByZS1zZXQgdmFsdWVzIGZvclxuICAgICAqIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUm9vdCA9IHRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpO1xuICAgICAgICAvLyBOb3RlLCBpZiByZW5kZXJSb290IGlzIG5vdCBhIHNoYWRvd1Jvb3QsIHN0eWxlcyB3b3VsZC9jb3VsZCBhcHBseSB0byB0aGVcbiAgICAgICAgLy8gZWxlbWVudCdzIGdldFJvb3ROb2RlKCkuIFdoaWxlIHRoaXMgY291bGQgYmUgZG9uZSwgd2UncmUgY2hvb3Npbmcgbm90IHRvXG4gICAgICAgIC8vIHN1cHBvcnQgdGhpcyBub3cgc2luY2UgaXQgd291bGQgcmVxdWlyZSBkaWZmZXJlbnQgbG9naWMgYXJvdW5kIGRlLWR1cGluZy5cbiAgICAgICAgaWYgKHdpbmRvdy5TaGFkb3dSb290ICYmIHRoaXMucmVuZGVyUm9vdCBpbnN0YW5jZW9mIHdpbmRvdy5TaGFkb3dSb290KSB7XG4gICAgICAgICAgICB0aGlzLmFkb3B0U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbm9kZSBpbnRvIHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCByZW5kZXIgYW5kIGJ5IGRlZmF1bHRcbiAgICAgKiBjcmVhdGVzIGFuZCByZXR1cm5zIGFuIG9wZW4gc2hhZG93Um9vdC4gSW1wbGVtZW50IHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGVcbiAgICAgKiBlbGVtZW50J3MgRE9NIGlzIHJlbmRlcmVkLiBGb3IgZXhhbXBsZSwgdG8gcmVuZGVyIGludG8gdGhlIGVsZW1lbnQnc1xuICAgICAqIGNoaWxkTm9kZXMsIHJldHVybiBgdGhpc2AuXG4gICAgICogQHJldHVybnMge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gUmV0dXJucyBhIG5vZGUgaW50byB3aGljaCB0byByZW5kZXIuXG4gICAgICovXG4gICAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHN0eWxpbmcgdG8gdGhlIGVsZW1lbnQgc2hhZG93Um9vdCB1c2luZyB0aGUgYHN0YXRpYyBnZXQgc3R5bGVzYFxuICAgICAqIHByb3BlcnR5LiBTdHlsaW5nIHdpbGwgYXBwbHkgdXNpbmcgYHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzYCB3aGVyZVxuICAgICAqIGF2YWlsYWJsZSBhbmQgd2lsbCBmYWxsYmFjayBvdGhlcndpc2UuIFdoZW4gU2hhZG93IERPTSBpcyBwb2x5ZmlsbGVkLFxuICAgICAqIFNoYWR5Q1NTIHNjb3BlcyBzdHlsZXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgZG9jdW1lbnQuIFdoZW4gU2hhZG93IERPTVxuICAgICAqIGlzIGF2YWlsYWJsZSBidXQgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgbm90LCBzdHlsZXMgYXJlIGFwcGVuZGVkIHRvIHRoZVxuICAgICAqIGVuZCBvZiB0aGUgYHNoYWRvd1Jvb3RgIHRvIFttaW1pYyBzcGVjXG4gICAgICogYmVoYXZpb3JdKGh0dHBzOi8vd2ljZy5naXRodWIuaW8vY29uc3RydWN0LXN0eWxlc2hlZXRzLyN1c2luZy1jb25zdHJ1Y3RlZC1zdHlsZXNoZWV0cykuXG4gICAgICovXG4gICAgYWRvcHRTdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHRoaXMuY29uc3RydWN0b3IuX3VuaXF1ZVN0eWxlcztcbiAgICAgICAgaWYgKHN0eWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVyZSBhcmUgdGhyZWUgc2VwYXJhdGUgY2FzZXMgaGVyZSBiYXNlZCBvbiBTaGFkb3cgRE9NIHN1cHBvcnQuXG4gICAgICAgIC8vICgxKSBzaGFkb3dSb290IHBvbHlmaWxsZWQ6IHVzZSBTaGFkeUNTU1xuICAgICAgICAvLyAoMikgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgYXZhaWxhYmxlOiB1c2UgaXQuXG4gICAgICAgIC8vICgzKSBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyBwb2x5ZmlsbGVkOiBhcHBlbmQgc3R5bGVzIGFmdGVyXG4gICAgICAgIC8vIHJlbmRlcmluZ1xuICAgICAgICBpZiAod2luZG93LlNoYWR5Q1NTICE9PSB1bmRlZmluZWQgJiYgIXdpbmRvdy5TaGFkeUNTUy5uYXRpdmVTaGFkb3cpIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5TY29waW5nU2hpbS5wcmVwYXJlQWRvcHRlZENzc1RleHQoc3R5bGVzLm1hcCgocykgPT4gcy5jc3NUZXh0KSwgdGhpcy5sb2NhbE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9XG4gICAgICAgICAgICAgICAgc3R5bGVzLm1hcCgocykgPT4gcy5zdHlsZVNoZWV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoaXMgbXVzdCBiZSBkb25lIGFmdGVyIHJlbmRlcmluZyBzbyB0aGUgYWN0dWFsIHN0eWxlIGluc2VydGlvbiBpcyBkb25lXG4gICAgICAgICAgICAvLyBpbiBgdXBkYXRlYC5cbiAgICAgICAgICAgIHRoaXMuX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIC8vIE5vdGUsIGZpcnN0IHVwZGF0ZS9yZW5kZXIgaGFuZGxlcyBzdHlsZUVsZW1lbnQgc28gd2Ugb25seSBjYWxsIHRoaXMgaWZcbiAgICAgICAgLy8gY29ubmVjdGVkIGFmdGVyIGZpcnN0IHVwZGF0ZS5cbiAgICAgICAgaWYgKHRoaXMuaGFzVXBkYXRlZCAmJiB3aW5kb3cuU2hhZHlDU1MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlc1xuICAgICAqIGFuZCBjYWxscyBgcmVuZGVyYCB0byByZW5kZXIgRE9NIHZpYSBsaXQtaHRtbC4gU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZVxuICAgICAqIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciBhbm90aGVyIHVwZGF0ZS5cbiAgICAgKiAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVSZXN1bHQgPSB0aGlzLnJlbmRlcigpO1xuICAgICAgICBpZiAodGVtcGxhdGVSZXN1bHQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIC5yZW5kZXIodGVtcGxhdGVSZXN1bHQsIHRoaXMucmVuZGVyUm9vdCwgeyBzY29wZU5hbWU6IHRoaXMubG9jYWxOYW1lLCBldmVudENvbnRleHQ6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiBuYXRpdmUgU2hhZG93IERPTSBpcyB1c2VkIGJ1dCBhZG9wdGVkU3R5bGVzIGFyZSBub3Qgc3VwcG9ydGVkLFxuICAgICAgICAvLyBpbnNlcnQgc3R5bGluZyBhZnRlciByZW5kZXJpbmcgdG8gZW5zdXJlIGFkb3B0ZWRTdHlsZXMgaGF2ZSBoaWdoZXN0XG4gICAgICAgIC8vIHByaW9yaXR5LlxuICAgICAgICBpZiAodGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuX3VuaXF1ZVN0eWxlcy5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gcy5jc3NUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUm9vdC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIGVhY2ggdXBkYXRlIHRvIHBlcmZvcm0gcmVuZGVyaW5nIHRhc2tzLiBUaGlzIG1ldGhvZCBtdXN0IHJldHVyblxuICAgICAqIGEgbGl0LWh0bWwgVGVtcGxhdGVSZXN1bHQuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KlxuICAgICAqIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHJlbmRlcigpIHsgfVxufVxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICovXG5MaXRFbGVtZW50LmZpbmFsaXplZCA9IHRydWU7XG4vKipcbiAqIFJlbmRlciBtZXRob2QgdXNlZCB0byByZW5kZXIgdGhlIGxpdC1odG1sIFRlbXBsYXRlUmVzdWx0IHRvIHRoZSBlbGVtZW50J3NcbiAqIERPTS5cbiAqIEBwYXJhbSB7VGVtcGxhdGVSZXN1bHR9IFRlbXBsYXRlIHRvIHJlbmRlci5cbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBOb2RlIGludG8gd2hpY2ggdG8gcmVuZGVyLlxuICogQHBhcmFtIHtTdHJpbmd9IEVsZW1lbnQgbmFtZS5cbiAqIEBub2NvbGxhcHNlXG4gKi9cbkxpdEVsZW1lbnQucmVuZGVyID0gcmVuZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0LWVsZW1lbnQuanMubWFwIiwiZW51bSBCbHVldG9vdGhHYXR0U3RhdGUge1xyXG4gICAgRGlzY29ubmVjdGVkID0gMSxcclxuICAgIENvbm5lY3RpbmcsXHJcbiAgICBDb25uZWN0ZWQsXHJcbiAgICBEaXNjb25uZWN0aW5nLFxyXG4gICAgRXJyb3IsXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCVExFY2xhc3Mge1xyXG4gICAgYmx1ZXRvb3RoRGV2aWNlOiBhbnkgPSBudWxsO1xyXG4gICAgY29ubmVjdGlvblN0cjogc3RyaW5nID0gJ2Rpc2Nvbm5lY3RlZCc7XHJcbiAgICBjYWxsYmFjazogYW55O1xyXG4gICAgY2FsbGJhY2tmdW5jdGlvbjogYW55O1xyXG5cclxuICAgIG1heHJldHJ5OiBudW1iZXIgPSAwO1xyXG4gICAgLy8gICBkaXNjb25uZWN0YmxlOiBib29sZWFuID0gZmFsc2U7IC8vIG9uIHB1cnBvc2UgZGlzY29ubmVjdFxyXG4gICAgLy8gICBjb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHN0YXRlOiBCbHVldG9vdGhHYXR0U3RhdGUgPSBCbHVldG9vdGhHYXR0U3RhdGUuRGlzY29ubmVjdGVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJsdWV0b290aERldmljZTogYW55LCBjYWxsaW5nQ2xhc3M6IGFueSwgY2FsbGJhY2tmdW5jdGlvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5ibHVldG9vdGhEZXZpY2UgPSBibHVldG9vdGhEZXZpY2U7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEJsdWV0b290aEdhdHRTdGF0ZS5EaXNjb25uZWN0ZWQ7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayAgPSBjYWxsaW5nQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja2Z1bmN0aW9uID0gY2FsbGJhY2tmdW5jdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvZyhsb2dTdHI6IFN0cmluZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGxvZ1N0cik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdGF0ZShuZXdTdGF0ZTogQmx1ZXRvb3RoR2F0dFN0YXRlKSB7XHJcbiAgICAgICAgbGV0IGxvZ3N0cjogU3RyaW5nID0gXCJvbGQgc3RhdGUgPSBcIiArIEJsdWV0b290aEdhdHRTdGF0ZVt0aGlzLnN0YXRlXSArIFwiIG5ldyBzdGF0ZSA9IFwiICsgQmx1ZXRvb3RoR2F0dFN0YXRlW25ld1N0YXRlXTtcclxuICAgICAgICB0aGlzLmxvZyhsb2dzdHIpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIEJsdWV0b290aEdhdHRTdGF0ZS5EaXNjb25uZWN0ZWQ6XHJcbiAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RyID0gJ2Nvbm5lY3QnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQmx1ZXRvb3RoR2F0dFN0YXRlLkNvbm5lY3Rpbmc6XHJcbiAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RyID0gJ2Nvbm5lY3RpbmcnXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJsdWV0b290aEdhdHRTdGF0ZS5EaXNjb25uZWN0aW5nOlxyXG4gICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0ciA9ICdkaXNjb25uZWN0aW5nJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQmx1ZXRvb3RoR2F0dFN0YXRlLkNvbm5lY3RlZDpcclxuICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdHIgPSAnY29ubmVjdGVkJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RyID0gJ2Vycm9yJ1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tmdW5jdGlvbi5jYWxsKHRoaXMuY2FsbGJhY2ssdGhpcy5jb25uZWN0aW9uU3RyKTtcclxuICAgIH1cclxuXHJcbiAgICB0aW1lb3V0KCkge1xyXG4gICAgICAgIGlmICgodGhpcy5tYXhyZXRyeSA8IDEwKSAmJiAodGhpcy5zdGF0ZSA9PT0gQmx1ZXRvb3RoR2F0dFN0YXRlLkNvbm5lY3RpbmcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4cmV0cnkrKztcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdCgpIC8vIGVudHJ5IHBvaW50IGZvciBjb25uZWN0IGZyb20gb3V0c2lkZVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBCbHVldG9vdGhHYXR0U3RhdGUuRGlzY29ubmVjdGVkKSAvLyBpdHMgZGlzY29ubmVjdGVkIHNvIHJlYWR5IHRvIGNvbm5lY3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoQmx1ZXRvb3RoR2F0dFN0YXRlLkNvbm5lY3RpbmcpO1xyXG4gICAgICAgICAgICB0aGlzLm1heHJldHJ5ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgLy8gd2FpdCBhIHdoaWxlIGJlZm9yZSBjb25uZWN0aW5nIGFnYWluLCBtYXliZSBpdCBpcyBzdGlsbCBkaXNjb25uZWN0aW5nXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoQmx1ZXRvb3RoR2F0dFN0YXRlLkNvbm5lY3RpbmcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhyZXRyeSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RpdCgpO1xyXG4gICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdChjbGFzc0luc3RhbmNlOiBCVExFY2xhc3MpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJsdWV0b290aERldmljZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoQmx1ZXRvb3RoR2F0dFN0YXRlLkRpc2Nvbm5lY3RpbmcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEaXNjb25uZWN0aW5nIGZyb20gQmx1ZXRvb3RoIERldmljZS4uLicpO1xyXG4gICAgICAgIGlmICh0aGlzLmJsdWV0b290aERldmljZS5nYXR0LmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmJsdWV0b290aERldmljZS5nYXR0LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPiBCbHVldG9vdGggRGV2aWNlIGlzIGFscmVhZHkgZGlzY29ubmVjdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYmx1ZXRvb3RoRGV2aWNlID0gbnVsbDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgIGNvbm5lY3RpdCgpIC8vIGNhbGxlZCBieSBjb25uZWN0IGFuZCB0aGUgdGltZW91dFxyXG4gICAge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmx1ZXRvb3RoRGV2aWNlLmdhdHQuY29ubmVjdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKEJsdWV0b290aEdhdHRTdGF0ZS5Db25uZWN0ZWQpOyAvLyBpZiBub3QgY29ubmVjdGVkIGl0IHdpbGwgZ290byB0aGUgY2F0Y2ggXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnRpbWVvdXQuYmluZCh0aGlzKSwgNTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGlzY29ubmVjdGVkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCc+IEJsdWV0b290aCBEZXZpY2UgZGlzY29ubmVjdGVkJyk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEJsdWV0b290aEdhdHRTdGF0ZS5EaXNjb25uZWN0aW5nOlxyXG4gICAgICAgICAgICBjYXNlIEJsdWV0b290aEdhdHRTdGF0ZS5FcnJvcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoQmx1ZXRvb3RoR2F0dFN0YXRlLkRpc2Nvbm5lY3RlZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKEJsdWV0b290aEdhdHRTdGF0ZS5EaXNjb25uZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7IC8vIGNvbm5lY3QgYWdhaW5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufSIsIi8qKlxyXG4gKiBJbXBvcnQgTGl0RWxlbWVudCBiYXNlIGNsYXNzLCBodG1sIGhlbHBlciBmdW5jdGlvbixcclxuICogYW5kIFR5cGVTY3JpcHQgZGVjb3JhdG9yc1xyXG4gKiovXHJcbmltcG9ydCB7XHJcbiAgTGl0RWxlbWVudCwgaHRtbCwgY3VzdG9tRWxlbWVudCwgcHJvcGVydHlcclxufSBmcm9tICdAcG9seW1lci9saXQtZWxlbWVudCc7XHJcbi8qaW1wb3J0IHtjbGFzc01hcH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAuanMnOyAqL1xyXG5pbXBvcnQgQlRMRWNsYXNzIGZyb20gJy4vQlRMRWNsYXNzJ1xyXG5cclxuXHJcblxyXG4vKipcclxuICogVXNlIHRoZSBjdXN0b21FbGVtZW50IGRlY29yYXRvciB0byBkZWZpbmUgeW91ciBjbGFzcyBhc1xyXG4gKiBhIGN1c3RvbSBlbGVtZW50LiBSZWdpc3RlcnMgPG15LWVsZW1lbnQ+IGFzIGFuIEhUTUwgdGFnLlxyXG4gKi9cclxuQGN1c3RvbUVsZW1lbnQoJ2xzZy1ibHVldG9vdGgnKVxyXG5leHBvcnQgY2xhc3MgTFNHX2JsdWV0b290aCBleHRlbmRzIExpdEVsZW1lbnQge1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYW4gb2JzZXJ2ZWQgcHJvcGVydHkuIFRyaWdnZXJzIHVwZGF0ZSBvbiBjaGFuZ2UuXHJcbiAgICovXHJcblxyXG4gIEBwcm9wZXJ0eSgpIG5hbWU6IHN0cmluZyA9ICduYW1laXQnO1xyXG4gIEBwcm9wZXJ0eSgpIGNvbm5lY3RlZFN0cjogc3RyaW5nID0gJ2Nvbm5lY3QnO1xyXG4gIEBwcm9wZXJ0eSgpIGNvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICBcclxuICAgIC8vICB0aGlzLmNsYXNzZXMgPSB7IG15ZGl2OiB0cnVlLCBzb21lY2xhc3M6IHRydWUgfTtcclxuICB9XHJcblxyXG4gIC8vIGNyZWF0ZVJlbmRlclJvb3QoKSB7XHJcbiAgLy8gICByZXR1cm4gdGhpcztcclxuICAvLyB9XHJcblxyXG4gIGJ1dHRvbkNvbG91ciA9ICdibHVlJztcclxuICBidXR0b25Qb2ludGVyID0gJ3BvaW50ZXInO1xyXG4gIGJsdWV0b290aERldmljZTphbnkgPSBudWxsO1xyXG4gIGJsdWV0b290aEdhdHQ6QlRMRWNsYXNzID0gbnVsbDtcclxuXHJcblxyXG4gIGJsdWV0b290aENhbGxiYWNrKGNvbnN0cjpzdHJpbmcpXHJcbiAge1xyXG4gICAgIHRoaXMuY29ubmVjdGVkU3RyID0gY29uc3RyO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBJbXBsZW1lbnQgYHJlbmRlcmAgdG8gZGVmaW5lIGEgdGVtcGxhdGUgZm9yIHlvdXIgZWxlbWVudC5cclxuICAgKi9cclxuICByZW5kZXIoKSB7XHJcbiAgICAvKipcclxuICAgICAqIFVzZSBKYXZhU2NyaXB0IGV4cHJlc3Npb25zIHRvIGluY2x1ZGUgcHJvcGVydHkgdmFsdWVzIGluXHJcbiAgICAgKiB0aGUgZWxlbWVudCB0ZW1wbGF0ZS5cclxuICAgICAqL1xyXG4gICAgaWYgKHRoaXMuY29ubmVjdGVkU3RyID09PSBcImNvbm5lY3RlZFwiKVxyXG4gICAge1xyXG4gICAgICAgdGhpcy5idXR0b25Db2xvdXIgPSAnZ3JlZW4nO1xyXG4gICAgfWVsc2VcclxuICAgIGlmICh0aGlzLmNvbm5lY3RlZFN0ciA9PT0gXCJjb25uZWN0XCIpXHJcbiAgICB7XHJcbiAgICAgICB0aGlzLmJ1dHRvbkNvbG91ciA9ICdibHVlJztcclxuICAgIH1lbHNlIFxyXG4gICAgaWYgKHRoaXMuY29ubmVjdGVkU3RyID09PSBcImNvbm5lY3RpbmdcIilcclxuICAgIHtcclxuICAgICAgdGhpcy5idXR0b25Db2xvdXIgPSAnb3JhbmdlJztcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdGhpcy5idXR0b25Db2xvdXIgPSAncmVkJztcclxuICAgIH1cclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICAgPHN0eWxlPlxyXG4gICAgICAgXHJcbiAgICAgICAgLmJ1dHRvbiB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLmJ1dHRvbkNvbG91cn07IC8vIzRDQUY1MDsgLyogR3JlZW4gKi9cclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgY29sb3I6IHZhcigtLWJ0bi1jb2xvciwgd2hpdGUpO1xyXG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICAgIG1hcmdpbjogNHB4IDRweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4IDUwcHggMzBweDtcclxuICAgICAgICBjdXJzb3I6ICR7dGhpcy5idXR0b25Qb2ludGVyfTtcclxuICAgICAgICBvdXRsaW5lOjA7XHJcbiAgICAgICAgfVxyXG4gICAgICA8L3N0eWxlPlxyXG5cclxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvblwiIEBjbGljaz1cIiR7dGhpcy5jb25uZWN0fVwiPiAke3RoaXMubmFtZX0gJHt0aGlzLmNvbm5lY3RlZFN0cn08L2J1dHRvbj5cclxuICBcclxuICAgICAgPHA+XHJcbiAgICAgICAgJHt0aGlzLm5hbWV9XHJcbiAgICAgIDwvcD5gO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29ubmVjdCgpIHtcclxuICAgIFxyXG5cclxuICAgIGlmICh0aGlzLmJsdWV0b290aEdhdHQgIT0gbnVsbClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmJsdWV0b290aEdhdHQuZGlzY29ubmVjdCh0aGlzLmJsdWV0b290aEdhdHQpOyAgLy8gZGlzY29ubmVjdCBvbGQgZ2F0dFxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuYmx1ZXRvb3RoRGV2aWNlID0gYXdhaXQgbmF2aWdhdG9yLmJsdWV0b290aC5yZXF1ZXN0RGV2aWNlKHtcclxuICAgICAgICBmaWx0ZXJzOiBbeyBzZXJ2aWNlczogWydoZWFydF9yYXRlJywgJ2JhdHRlcnlfc2VydmljZSddIH1dLFxyXG4gICAgICAgIG9wdGlvbmFsU2VydmljZXM6IFsnYmF0dGVyeV9zZXJ2aWNlJywgJ2hlYXJ0X3JhdGUnXVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5ibHVldG9vdGhHYXR0ID0gbmV3IEJUTEVjbGFzcyh0aGlzLmJsdWV0b290aERldmljZSwgdGhpcywgdGhpcy5ibHVldG9vdGhDYWxsYmFjayk7XHJcbiAgICAgIC8vIG5lZWQgdG8gYmluZCB0byB0aGUgY2xhc3MgZWxzZSB3ZSBjYW5ub3QgY2FsbCBhbnl0aGluZyBpbnNpZGUgdGhlIGJsdWV0b290aCBjbGFzc1xyXG4gICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MzcyNzUxNi9qYXZhc2NyaXB0LWhvdy1hZGRpbmctZXZlbnQtaGFuZGxlci1pbnNpZGUtYS1jbGFzcy13aXRoLWEtY2xhc3MtbWV0aG9kLWFzLXRoZS1jLzQzNzI3NTgyXHJcbiAgICAgIHRoaXMuYmx1ZXRvb3RoRGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2dhdHRzZXJ2ZXJkaXNjb25uZWN0ZWQnLCB0aGlzLmJsdWV0b290aEdhdHQub25EaXNjb25uZWN0ZWQuYmluZCh0aGlzLmJsdWV0b290aEdhdHQpKTtcclxuICAgICAgdGhpcy5ibHVldG9vdGhHYXR0LmNvbm5lY3QoKTtcclxuICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBcmdoISAnICsgZXJyb3IpO1xyXG4gICAgfVxyXG4gICBcclxuICB9XHJcblxyXG59XHJcbiIsImNsYXNzIEx1bW8gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgdmVyc2lvbigpIHtcbiAgICByZXR1cm4gJzEuNS4wJztcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3ZhYWRpbi1sdW1vLXN0eWxlcycsIEx1bW8pO1xuXG5leHBvcnQgeyBMdW1vIH07XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKiBAdHlwZSB7UHJvbWlzZTx2b2lkPn0gKi9cbmxldCByZWFkeVByb21pc2UgPSBudWxsO1xuXG4vKiogQHR5cGUgez9mdW5jdGlvbig/ZnVuY3Rpb24oKSl9ICovXG5sZXQgd2hlblJlYWR5ID0gd2luZG93WydIVE1MSW1wb3J0cyddICYmIHdpbmRvd1snSFRNTEltcG9ydHMnXVsnd2hlblJlYWR5J10gfHwgbnVsbDtcblxuLyoqIEB0eXBlIHtmdW5jdGlvbigpfSAqL1xubGV0IHJlc29sdmVGbjtcblxuLyoqXG4gKiBAcGFyYW0gez9mdW5jdGlvbigpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkb2N1bWVudFdhaXQoY2FsbGJhY2spIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aGVuUmVhZHkpIHtcbiAgICAgIHdoZW5SZWFkeShjYWxsYmFjaylcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFyZWFkeVByb21pc2UpIHtcbiAgICAgICAgcmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtyZXNvbHZlRm4gPSByZXNvbHZlfSk7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgcmVzb2x2ZUZuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgIHJlc29sdmVGbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWFkeVByb21pc2UudGhlbihmdW5jdGlvbigpeyBjYWxsYmFjayAmJiBjYWxsYmFjaygpOyB9KTtcbiAgICB9XG4gIH0pO1xufVxuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgZG9jdW1lbnRXYWl0IGZyb20gJy4vZG9jdW1lbnQtd2FpdC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge0hUTUxTdHlsZUVsZW1lbnQgfCB7Z2V0U3R5bGU6IGZ1bmN0aW9uKCk6SFRNTFN0eWxlRWxlbWVudH19XG4gKi9cbmV4cG9ydCBsZXQgQ3VzdG9tU3R5bGVQcm92aWRlcjtcblxuY29uc3QgU0VFTl9NQVJLRVIgPSAnX19zZWVuQnlTaGFkeUNTUyc7XG5jb25zdCBDQUNIRURfU1RZTEUgPSAnX19zaGFkeUNTU0NhY2hlZFN0eWxlJztcblxuLyoqIEB0eXBlIHs/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpfSAqL1xubGV0IHRyYW5zZm9ybUZuID0gbnVsbDtcblxuLyoqIEB0eXBlIHs/ZnVuY3Rpb24oKX0gKi9cbmxldCB2YWxpZGF0ZUZuID0gbnVsbDtcblxuLyoqXG5UaGlzIGludGVyZmFjZSBpcyBwcm92aWRlZCB0byBhZGQgZG9jdW1lbnQtbGV2ZWwgPHN0eWxlPiBlbGVtZW50cyB0byBTaGFkeUNTUyBmb3IgcHJvY2Vzc2luZy5cblRoZXNlIHN0eWxlcyBtdXN0IGJlIHByb2Nlc3NlZCBieSBTaGFkeUNTUyB0byBzaW11bGF0ZSBTaGFkb3dSb290IHVwcGVyLWJvdW5kIGVuY2Fwc3VsYXRpb24gZnJvbSBvdXRzaWRlIHN0eWxlc1xuSW4gYWRkaXRpb24sIHRoZXNlIHN0eWxlcyBtYXkgYWxzbyBuZWVkIHRvIGJlIHByb2Nlc3NlZCBmb3IgQGFwcGx5IHJ1bGVzIGFuZCBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcblxuVG8gYWRkIGRvY3VtZW50LWxldmVsIHN0eWxlcyB0byBTaGFkeUNTUywgb25lIGNhbiBjYWxsIGBTaGFkeUNTUy5hZGREb2N1bWVudFN0eWxlKHN0eWxlRWxlbWVudClgIG9yIGBTaGFkeUNTUy5hZGREb2N1bWVudFN0eWxlKHtnZXRTdHlsZTogKCkgPT4gc3R5bGVFbGVtZW50fSlgXG5cbkluIGFkZGl0aW9uLCBpZiB0aGUgcHJvY2VzcyB1c2VkIHRvIGRpc2NvdmVyIGRvY3VtZW50LWxldmVsIHN0eWxlcyBjYW4gYmUgc3luY2hyb25vdXNseSBmbHVzaGVkLCBvbmUgc2hvdWxkIHNldCBgU2hhZHlDU1MuZG9jdW1lbnRTdHlsZUZsdXNoYC5cblRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiBjYWxjdWxhdGluZyBzdHlsZXMuXG5cbkFuIGV4YW1wbGUgdXNhZ2Ugb2YgdGhlIGRvY3VtZW50LWxldmVsIHN0eWxpbmcgYXBpIGNhbiBiZSBmb3VuZCBpbiBgZXhhbXBsZXMvZG9jdW1lbnQtc3R5bGUtbGliLmpzYFxuXG5AdW5yZXN0cmljdGVkXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3VzdG9tU3R5bGVJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHR5cGUgeyFBcnJheTwhQ3VzdG9tU3R5bGVQcm92aWRlcj59ICovXG4gICAgdGhpc1snY3VzdG9tU3R5bGVzJ10gPSBbXTtcbiAgICB0aGlzWydlbnF1ZXVlZCddID0gZmFsc2U7XG4gICAgLy8gTk9URShkZnJlZWRtKTogdXNlIHF1b3RlcyBoZXJlIHRvIHByZXZlbnQgY2xvc3VyZSBpbmxpbmluZyB0byBgZnVuY3Rpb24oKXt9YDtcbiAgICBkb2N1bWVudFdhaXQoKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvd1snU2hhZHlDU1MnXVsnZmx1c2hDdXN0b21TdHlsZXMnXSkge1xuICAgICAgICB3aW5kb3dbJ1NoYWR5Q1NTJ11bJ2ZsdXNoQ3VzdG9tU3R5bGVzJ10oKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIC8qKlxuICAgKiBRdWV1ZSBhIHZhbGlkYXRpb24gZm9yIG5ldyBjdXN0b20gc3R5bGVzIHRvIGJhdGNoIHN0eWxlIHJlY2FsY3VsYXRpb25zXG4gICAqL1xuICBlbnF1ZXVlRG9jdW1lbnRWYWxpZGF0aW9uKCkge1xuICAgIGlmICh0aGlzWydlbnF1ZXVlZCddIHx8ICF2YWxpZGF0ZUZuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXNbJ2VucXVldWVkJ10gPSB0cnVlO1xuICAgIGRvY3VtZW50V2FpdCh2YWxpZGF0ZUZuKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAgICovXG4gIGFkZEN1c3RvbVN0eWxlKHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZVtTRUVOX01BUktFUl0pIHtcbiAgICAgIHN0eWxlW1NFRU5fTUFSS0VSXSA9IHRydWU7XG4gICAgICB0aGlzWydjdXN0b21TdHlsZXMnXS5wdXNoKHN0eWxlKTtcbiAgICAgIHRoaXMuZW5xdWV1ZURvY3VtZW50VmFsaWRhdGlvbigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshQ3VzdG9tU3R5bGVQcm92aWRlcn0gY3VzdG9tU3R5bGVcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAgICovXG4gIGdldFN0eWxlRm9yQ3VzdG9tU3R5bGUoY3VzdG9tU3R5bGUpIHtcbiAgICBpZiAoY3VzdG9tU3R5bGVbQ0FDSEVEX1NUWUxFXSkge1xuICAgICAgcmV0dXJuIGN1c3RvbVN0eWxlW0NBQ0hFRF9TVFlMRV07XG4gICAgfVxuICAgIGxldCBzdHlsZTtcbiAgICBpZiAoY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10pIHtcbiAgICAgIHN0eWxlID0gY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUgPSBjdXN0b21TdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUN1c3RvbVN0eWxlUHJvdmlkZXI+fVxuICAgKi9cbiAgcHJvY2Vzc1N0eWxlcygpIHtcbiAgICBjb25zdCBjcyA9IHRoaXNbJ2N1c3RvbVN0eWxlcyddO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1c3RvbVN0eWxlID0gY3NbaV07XG4gICAgICBpZiAoY3VzdG9tU3R5bGVbQ0FDSEVEX1NUWUxFXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZUZvckN1c3RvbVN0eWxlKGN1c3RvbVN0eWxlKTtcbiAgICAgIGlmIChzdHlsZSkge1xuICAgICAgICAvLyBIVE1MSW1wb3J0cyBwb2x5ZmlsbCBtYXkgaGF2ZSBjbG9uZWQgdGhlIHN0eWxlIGludG8gdGhlIG1haW4gZG9jdW1lbnQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlZmVyZW5jZWQgd2l0aCBfX2FwcGxpZWRFbGVtZW50LlxuICAgICAgICBjb25zdCBzdHlsZVRvVHJhbnNmb3JtID0gLyoqIEB0eXBlIHshSFRNTFN0eWxlRWxlbWVudH0gKi8oc3R5bGVbJ19fYXBwbGllZEVsZW1lbnQnXSB8fCBzdHlsZSk7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICAgIHRyYW5zZm9ybUZuKHN0eWxlVG9UcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbVN0eWxlW0NBQ0hFRF9TVFlMRV0gPSBzdHlsZVRvVHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3M7XG4gIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1hc3NpZ24gKi9cbkN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnYWRkQ3VzdG9tU3R5bGUnXSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5hZGRDdXN0b21TdHlsZTtcbkN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnZ2V0U3R5bGVGb3JDdXN0b21TdHlsZSddID0gQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlLmdldFN0eWxlRm9yQ3VzdG9tU3R5bGU7XG5DdXN0b21TdHlsZUludGVyZmFjZS5wcm90b3R5cGVbJ3Byb2Nlc3NTdHlsZXMnXSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5wcm9jZXNzU3R5bGVzO1xuLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWFzc2lnbiAqL1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21TdHlsZUludGVyZmFjZS5wcm90b3R5cGUsIHtcbiAgJ3RyYW5zZm9ybUNhbGxiYWNrJzoge1xuICAgIC8qKiBAcmV0dXJuIHs/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpfSAqL1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1GbjtcbiAgICB9LFxuICAgIC8qKiBAcGFyYW0gez9mdW5jdGlvbighSFRNTFN0eWxlRWxlbWVudCl9IGZuICovXG4gICAgc2V0KGZuKSB7XG4gICAgICB0cmFuc2Zvcm1GbiA9IGZuO1xuICAgIH1cbiAgfSxcbiAgJ3ZhbGlkYXRlQ2FsbGJhY2snOiB7XG4gICAgLyoqIEByZXR1cm4gez9mdW5jdGlvbigpfSAqL1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUZuO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/ZnVuY3Rpb24oKX0gZm5cbiAgICAgKiBAdGhpcyB7Q3VzdG9tU3R5bGVJbnRlcmZhY2V9XG4gICAgICovXG4gICAgc2V0KGZuKSB7XG4gICAgICBsZXQgbmVlZHNFbnF1ZXVlID0gZmFsc2U7XG4gICAgICBpZiAoIXZhbGlkYXRlRm4pIHtcbiAgICAgICAgbmVlZHNFbnF1ZXVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhbGlkYXRlRm4gPSBmbjtcbiAgICAgIGlmIChuZWVkc0VucXVldWUpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlRG9jdW1lbnRWYWxpZGF0aW9uKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfVxufSlcblxuLyoqIEB0eXBlZGVmIHt7XG4gKiBjdXN0b21TdHlsZXM6ICFBcnJheTwhQ3VzdG9tU3R5bGVQcm92aWRlcj4sXG4gKiBhZGRDdXN0b21TdHlsZTogZnVuY3Rpb24oIUN1c3RvbVN0eWxlUHJvdmlkZXIpLFxuICogZ2V0U3R5bGVGb3JDdXN0b21TdHlsZTogZnVuY3Rpb24oIUN1c3RvbVN0eWxlUHJvdmlkZXIpOiBIVE1MU3R5bGVFbGVtZW50LFxuICogZmluZFN0eWxlczogZnVuY3Rpb24oKSxcbiAqIHRyYW5zZm9ybUNhbGxiYWNrOiA/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpLFxuICogdmFsaWRhdGVDYWxsYmFjazogP2Z1bmN0aW9uKClcbiAqIH19XG4gKi9cbmV4cG9ydCBjb25zdCBDdXN0b21TdHlsZUludGVyZmFjZUludGVyZmFjZSA9IHt9O1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuZXhwb3J0IGNvbnN0IFZBUl9BU1NJR04gPSAvKD86XnxbO1xcc3tdXFxzKikoLS1bXFx3LV0qPylcXHMqOlxccyooPzooKD86Jyg/OlxcXFwnfC4pKj8nfFwiKD86XFxcXFwifC4pKj9cInxcXChbXildKj9cXCl8W159O3tdKSspfFxceyhbXn1dKilcXH0oPzooPz1bO1xcc31dKXwkKSkvZ2k7XG5leHBvcnQgY29uc3QgTUlYSU5fTUFUQ0ggPSAvKD86XnxcXFcrKUBhcHBseVxccypcXCg/KFteKTtcXG5dKilcXCk/L2dpO1xuZXhwb3J0IGNvbnN0IFZBUl9DT05TVU1FRCA9IC8oLS1bXFx3LV0rKVxccyooWzosOyldfCQpL2dpO1xuZXhwb3J0IGNvbnN0IEFOSU1BVElPTl9NQVRDSCA9IC8oYW5pbWF0aW9uXFxzKjopfChhbmltYXRpb24tbmFtZVxccyo6KS87XG5leHBvcnQgY29uc3QgTUVESUFfTUFUQ0ggPSAvQG1lZGlhXFxzKC4qKS87XG5leHBvcnQgY29uc3QgSVNfVkFSID0gL14tLS87XG5leHBvcnQgY29uc3QgQlJBQ0tFVEVEID0gL1xce1tefV0qXFx9L2c7XG5leHBvcnQgY29uc3QgSE9TVF9QUkVGSVggPSAnKD86XnxbXi4jWzpdKSc7XG5leHBvcnQgY29uc3QgSE9TVF9TVUZGSVggPSAnKCR8Wy46W1xcXFxzPit+XSknO1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBNSVhJTl9NQVRDSCwgVkFSX0FTU0lHTiB9IGZyb20gJy4vY29tbW9uLXJlZ2V4LmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTmF0aXZlUHJvcGVydGllcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gIC8vIHJlbW92ZSBwcmV2aW91cyBwcm9wZXJ0aWVzXG4gIGZvciAobGV0IHAgaW4gcHJvcGVydGllcykge1xuICAgIC8vIE5PVEU6IGZvciBiYyB3aXRoIHNoaW0sIGRvbid0IGFwcGx5IG51bGwgdmFsdWVzLlxuICAgIGlmIChwID09PSBudWxsKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KHApO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHAsIHByb3BlcnRpZXNbcF0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgLyoqXG4gICAqIEBjb25zdCB7c3RyaW5nfVxuICAgKi9cbiAgY29uc3QgdmFsdWUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KTtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiAnJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWUudHJpbSgpO1xuICB9XG59XG5cbi8qKlxuICogcmV0dXJuIHRydWUgaWYgYGNzc1RleHRgIGNvbnRhaW5zIGEgbWl4aW4gZGVmaW5pdGlvbiBvciBjb25zdW1wdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RNaXhpbihjc3NUZXh0KSB7XG4gIGNvbnN0IGhhcyA9IE1JWElOX01BVENILnRlc3QoY3NzVGV4dCkgfHwgVkFSX0FTU0lHTi50ZXN0KGNzc1RleHQpO1xuICAvLyByZXNldCBzdGF0ZSBvZiB0aGUgcmVnZXhlc1xuICBNSVhJTl9NQVRDSC5sYXN0SW5kZXggPSAwO1xuICBWQVJfQVNTSUdOLmxhc3RJbmRleCA9IDA7XG4gIHJldHVybiBoYXM7XG59XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBjb25zdCBuYXRpdmVTaGFkb3cgPSAhKHdpbmRvd1snU2hhZHlET00nXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ2luVXNlJ10pO1xubGV0IG5hdGl2ZUNzc1ZhcmlhYmxlc187XG5cbi8qKlxuICogQHBhcmFtIHsoU2hhZHlDU1NPcHRpb25zIHwgU2hhZHlDU1NJbnRlcmZhY2UpPX0gc2V0dGluZ3NcbiAqL1xuZnVuY3Rpb24gY2FsY0Nzc1ZhcmlhYmxlcyhzZXR0aW5ncykge1xuICBpZiAoc2V0dGluZ3MgJiYgc2V0dGluZ3NbJ3NoaW1jc3Nwcm9wZXJ0aWVzJ10pIHtcbiAgICBuYXRpdmVDc3NWYXJpYWJsZXNfID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgLy8gY2hyb21lIDQ5IGhhcyBzZW1pLXdvcmtpbmcgY3NzIHZhcnMsIGNoZWNrIGlmIGJveC1zaGFkb3cgd29ya3NcbiAgICAvLyBzYWZhcmkgOS4xIGhhcyBhIHJlY2FsYyBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTU3ODJcbiAgICAvLyBIb3dldmVyLCBzaGltIGNzcyBjdXN0b20gcHJvcGVydGllcyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCBTaGFkeURPTSBlbmFibGVkLFxuICAgIC8vIHNvIGZhbGwgYmFjayBvbiBuYXRpdmUgaWYgd2UgZG8gbm90IGRldGVjdCBTaGFkeURPTVxuICAgIC8vIEVkZ2UgMTU6IGN1c3RvbSBwcm9wZXJ0aWVzIHVzZWQgaW4gOjpiZWZvcmUgYW5kIDo6YWZ0ZXIgd2lsbCBhbHNvIGJlIHVzZWQgaW4gdGhlIHBhcmVudCBlbGVtZW50XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvMTI0MTQyNTcvXG4gICAgbmF0aXZlQ3NzVmFyaWFibGVzXyA9IG5hdGl2ZVNoYWRvdyB8fCBCb29sZWFuKCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLzYwMXxFZGdlXFwvMTUvKSAmJlxuICAgICAgd2luZG93LkNTUyAmJiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCdib3gtc2hhZG93JywgJzAgMCAwIHZhcigtLWZvbyknKSk7XG4gIH1cbn1cblxuLyoqIEB0eXBlIHtzdHJpbmcgfCB1bmRlZmluZWR9ICovXG5leHBvcnQgbGV0IGNzc0J1aWxkO1xuaWYgKHdpbmRvdy5TaGFkeUNTUyAmJiB3aW5kb3cuU2hhZHlDU1MuY3NzQnVpbGQgIT09IHVuZGVmaW5lZCkge1xuICBjc3NCdWlsZCA9IHdpbmRvdy5TaGFkeUNTUy5jc3NCdWlsZDtcbn1cblxuLyoqIEB0eXBlIHtib29sZWFufSAqL1xuZXhwb3J0IGNvbnN0IGRpc2FibGVSdW50aW1lID0gQm9vbGVhbih3aW5kb3cuU2hhZHlDU1MgJiYgd2luZG93LlNoYWR5Q1NTLmRpc2FibGVSdW50aW1lKTtcblxuaWYgKHdpbmRvdy5TaGFkeUNTUyAmJiB3aW5kb3cuU2hhZHlDU1MubmF0aXZlQ3NzICE9PSB1bmRlZmluZWQpIHtcbiAgbmF0aXZlQ3NzVmFyaWFibGVzXyA9IHdpbmRvdy5TaGFkeUNTUy5uYXRpdmVDc3M7XG59IGVsc2UgaWYgKHdpbmRvdy5TaGFkeUNTUykge1xuICBjYWxjQ3NzVmFyaWFibGVzKHdpbmRvdy5TaGFkeUNTUyk7XG4gIC8vIHJlc2V0IHdpbmRvdyB2YXJpYWJsZSB0byBsZXQgU2hhZHlDU1MgQVBJIHRha2UgaXRzIHBsYWNlXG4gIHdpbmRvdy5TaGFkeUNTUyA9IHVuZGVmaW5lZDtcbn0gZWxzZSB7XG4gIGNhbGNDc3NWYXJpYWJsZXMod2luZG93WydXZWJDb21wb25lbnRzJ10gJiYgd2luZG93WydXZWJDb21wb25lbnRzJ11bJ2ZsYWdzJ10pO1xufVxuXG4vLyBIYWNrIGZvciB0eXBlIGVycm9yIHVuZGVyIG5ldyB0eXBlIGluZmVyZW5jZSB3aGljaCBkb2Vzbid0IGxpa2UgdGhhdFxuLy8gbmF0aXZlQ3NzVmFyaWFibGVzIGlzIHVwZGF0ZWQgaW4gYSBmdW5jdGlvbiBhbmQgYXNzaWducyB0aGUgdHlwZVxuLy8gYGZ1bmN0aW9uKCk6ID9gIGluc3RlYWQgb2YgYGJvb2xlYW5gLlxuZXhwb3J0IGNvbnN0IG5hdGl2ZUNzc1ZhcmlhYmxlcyA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8obmF0aXZlQ3NzVmFyaWFibGVzXyk7IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQ3VzdG9tU3R5bGVJbnRlcmZhY2UgZnJvbSAnLi4vc3JjL2N1c3RvbS1zdHlsZS1pbnRlcmZhY2UuanMnO1xuaW1wb3J0IHtnZXRDb21wdXRlZFN0eWxlVmFsdWUsIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXN9IGZyb20gJy4uL3NyYy9jb21tb24tdXRpbHMuanMnO1xuaW1wb3J0IHtuYXRpdmVDc3NWYXJpYWJsZXMsIG5hdGl2ZVNoYWRvdywgY3NzQnVpbGQsIGRpc2FibGVSdW50aW1lfSBmcm9tICcuLi9zcmMvc3R5bGUtc2V0dGluZ3MuanMnO1xuXG5jb25zdCBjdXN0b21TdHlsZUludGVyZmFjZSA9IG5ldyBDdXN0b21TdHlsZUludGVyZmFjZSgpO1xuXG5pZiAoIXdpbmRvdy5TaGFkeUNTUykge1xuICB3aW5kb3cuU2hhZHlDU1MgPSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGVsZW1lbnRFeHRlbmRzXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgICAqL1xuICAgIHByZXBhcmVUZW1wbGF0ZURvbSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZWxlbWVudEV4dGVuZHNcbiAgICAgKi9cbiAgICBwcmVwYXJlVGVtcGxhdGVTdHlsZXModGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcykge30sIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgICAqL1xuICAgIHN0eWxlU3VidHJlZShlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gICAgICBjdXN0b21TdHlsZUludGVyZmFjZS5wcm9jZXNzU3R5bGVzKCk7XG4gICAgICB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBzdHlsZUVsZW1lbnQoZWxlbWVudCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICBjdXN0b21TdHlsZUludGVyZmFjZS5wcm9jZXNzU3R5bGVzKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgICAqL1xuICAgIHN0eWxlRG9jdW1lbnQocHJvcGVydGllcykge1xuICAgICAgY3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvY2Vzc1N0eWxlcygpO1xuICAgICAgdXBkYXRlTmF0aXZlUHJvcGVydGllcyhkb2N1bWVudC5ib2R5LCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldENvbXB1dGVkU3R5bGVWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGVWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSk7XG4gICAgfSxcblxuICAgIGZsdXNoQ3VzdG9tU3R5bGVzKCkge30sXG4gICAgbmF0aXZlQ3NzOiBuYXRpdmVDc3NWYXJpYWJsZXMsXG4gICAgbmF0aXZlU2hhZG93OiBuYXRpdmVTaGFkb3csXG4gICAgY3NzQnVpbGQ6IGNzc0J1aWxkLFxuICAgIGRpc2FibGVSdW50aW1lOiBkaXNhYmxlUnVudGltZSxcbiAgfVxufVxuXG53aW5kb3cuU2hhZHlDU1MuQ3VzdG9tU3R5bGVJbnRlcmZhY2UgPSBjdXN0b21TdHlsZUludGVyZmFjZTsiLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuLyoqXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXMgcmVwbGFjZWQgYnkgdGhlIG11bmdlZCBuYW1lIGZvciBvYmplY3RbcHJvcGVydHldXG4gKiBXZSBjYW5ub3QgYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0gez9PYmplY3R9IG9iaiBSZWZlcmVuY2Ugb2JqZWN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9IFBvdGVudGlhbGx5IHJlbmFtZWQgcHJvcGVydHkgbmFtZVxuICovXG53aW5kb3cuSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHByb3AsIG9iaikge1xuICByZXR1cm4gcHJvcDtcbn07XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbmV4cG9ydCB7fTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmxldCBDU1NfVVJMX1JYID0gLyh1cmxcXCgpKFteKV0qKShcXCkpL2c7XG5sZXQgQUJTX1VSTCA9IC8oXlxcL1teXFwvXSl8KF4jKXwoXltcXHctXFxkXSo6KS87XG5sZXQgd29ya2luZ1VSTDtcbmxldCByZXNvbHZlRG9jO1xuLyoqXG4gKiBSZXNvbHZlcyB0aGUgZ2l2ZW4gVVJMIGFnYWluc3QgdGhlIHByb3ZpZGVkIGBiYXNlVXJpJy5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBubyByZXNvbHV0aW9uIGZvciBVUkxzIHRoYXQgc3RhcnRcbiAqIHdpdGggYC9gIChhYnNvbHV0ZSBVUkxzKSBvciBgI2AgKGhhc2ggaWRlbnRpZmllcnMpLiAgRm9yIGdlbmVyYWwgcHVycG9zZVxuICogVVJMIHJlc29sdXRpb24sIHVzZSBgd2luZG93LlVSTGAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBJbnB1dCBVUkwgdG8gcmVzb2x2ZVxuICogQHBhcmFtIHs/c3RyaW5nPX0gYmFzZVVSSSBCYXNlIFVSSSB0byByZXNvbHZlIHRoZSBVUkwgYWdhaW5zdFxuICogQHJldHVybiB7c3RyaW5nfSByZXNvbHZlZCBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVVcmwodXJsLCBiYXNlVVJJKSB7XG4gIGlmICh1cmwgJiYgQUJTX1VSTC50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGlmICh1cmwgPT09ICcvLycpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIC8vIExhenkgZmVhdHVyZSBkZXRlY3Rpb24uXG4gIGlmICh3b3JraW5nVVJMID09PSB1bmRlZmluZWQpIHtcbiAgICB3b3JraW5nVVJMID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHUgPSBuZXcgVVJMKCdiJywgJ2h0dHA6Ly9hJyk7XG4gICAgICB1LnBhdGhuYW1lID0gJ2MlMjBkJztcbiAgICAgIHdvcmtpbmdVUkwgPSAodS5ocmVmID09PSAnaHR0cDovL2EvYyUyMGQnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBzaWxlbnRseSBmYWlsXG4gICAgfVxuICB9XG4gIGlmICghYmFzZVVSSSkge1xuICAgIGJhc2VVUkkgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB9XG4gIGlmICh3b3JraW5nVVJMKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAobmV3IFVSTCh1cmwsIGJhc2VVUkkpKS5ocmVmO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIEJhZCB1cmwgb3IgYmFzZVVSSSBzdHJ1Y3R1cmUuIERvIG5vdCBhdHRlbXB0IHRvIHJlc29sdmUuXG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfVxuICAvLyBGYWxsYmFjayB0byBjcmVhdGluZyBhbiBhbmNob3IgaW50byBhIGRpc2Nvbm5lY3RlZCBkb2N1bWVudC5cbiAgaWYgKCFyZXNvbHZlRG9jKSB7XG4gICAgcmVzb2x2ZURvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgndGVtcCcpO1xuICAgIHJlc29sdmVEb2MuYmFzZSA9IHJlc29sdmVEb2MuY3JlYXRlRWxlbWVudCgnYmFzZScpO1xuICAgIHJlc29sdmVEb2MuaGVhZC5hcHBlbmRDaGlsZChyZXNvbHZlRG9jLmJhc2UpO1xuICAgIHJlc29sdmVEb2MuYW5jaG9yID0gcmVzb2x2ZURvYy5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgcmVzb2x2ZURvYy5ib2R5LmFwcGVuZENoaWxkKHJlc29sdmVEb2MuYW5jaG9yKTtcbiAgfVxuICByZXNvbHZlRG9jLmJhc2UuaHJlZiA9IGJhc2VVUkk7XG4gIHJlc29sdmVEb2MuYW5jaG9yLmhyZWYgPSB1cmw7XG4gIHJldHVybiByZXNvbHZlRG9jLmFuY2hvci5ocmVmIHx8IHVybDtcblxufVxuXG4vKipcbiAqIFJlc29sdmVzIGFueSByZWxhdGl2ZSBVUkwncyBpbiB0aGUgZ2l2ZW4gQ1NTIHRleHQgYWdhaW5zdCB0aGUgcHJvdmlkZWRcbiAqIGBvd25lckRvY3VtZW50YCdzIGBiYXNlVVJJYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dCBDU1MgdGV4dCB0byBwcm9jZXNzXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSSSBCYXNlIFVSSSB0byByZXNvbHZlIHRoZSBVUkwgYWdhaW5zdFxuICogQHJldHVybiB7c3RyaW5nfSBQcm9jZXNzZWQgQ1NTIHRleHQgd2l0aCByZXNvbHZlZCBVUkwnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUNzcyhjc3NUZXh0LCBiYXNlVVJJKSB7XG4gIHJldHVybiBjc3NUZXh0LnJlcGxhY2UoQ1NTX1VSTF9SWCwgZnVuY3Rpb24obSwgcHJlLCB1cmwsIHBvc3QpIHtcbiAgICByZXR1cm4gcHJlICsgJ1xcJycgK1xuICAgICAgcmVzb2x2ZVVybCh1cmwucmVwbGFjZSgvW1wiJ10vZywgJycpLCBiYXNlVVJJKSArXG4gICAgICAnXFwnJyArIHBvc3Q7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwYXRoIGZyb20gYSBnaXZlbiBgdXJsYC4gVGhlIHBhdGggaW5jbHVkZXMgdGhlIHRyYWlsaW5nXG4gKiBgL2AgZnJvbSB0aGUgdXJsLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSW5wdXQgVVJMIHRvIHRyYW5zZm9ybVxuICogQHJldHVybiB7c3RyaW5nfSByZXNvbHZlZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXRoRnJvbVVybCh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbn1cbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmltcG9ydCB7IHBhdGhGcm9tVXJsIH0gZnJvbSAnLi9yZXNvbHZlLXVybC5qcyc7XG5leHBvcnQgY29uc3QgdXNlU2hhZG93ID0gISh3aW5kb3cuU2hhZHlET00pO1xuZXhwb3J0IGNvbnN0IHVzZU5hdGl2ZUNTU1Byb3BlcnRpZXMgPSBCb29sZWFuKCF3aW5kb3cuU2hhZHlDU1MgfHwgd2luZG93LlNoYWR5Q1NTLm5hdGl2ZUNzcyk7XG5leHBvcnQgY29uc3QgdXNlTmF0aXZlQ3VzdG9tRWxlbWVudHMgPSAhKHdpbmRvdy5jdXN0b21FbGVtZW50cy5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrKTtcblxuXG4vKipcbiAqIEdsb2JhbGx5IHNldHRhYmxlIHByb3BlcnR5IHRoYXQgaXMgYXV0b21hdGljYWxseSBhc3NpZ25lZCB0b1xuICogYEVsZW1lbnRNaXhpbmAgaW5zdGFuY2VzLCB1c2VmdWwgZm9yIGJpbmRpbmcgaW4gdGVtcGxhdGVzIHRvXG4gKiBtYWtlIFVSTCdzIHJlbGF0aXZlIHRvIGFuIGFwcGxpY2F0aW9uJ3Mgcm9vdC4gIERlZmF1bHRzIHRvIHRoZSBtYWluXG4gKiBkb2N1bWVudCBVUkwsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlbiBieSB1c2Vycy4gIEl0IG1heSBiZSB1c2VmdWwgdG8gc2V0XG4gKiBgcm9vdFBhdGhgIHRvIHByb3ZpZGUgYSBzdGFibGUgYXBwbGljYXRpb24gbW91bnQgcGF0aCB3aGVuXG4gKiB1c2luZyBjbGllbnQgc2lkZSByb3V0aW5nLlxuICovXG5leHBvcnQgbGV0IHJvb3RQYXRoID0gcGF0aEZyb21VcmwoZG9jdW1lbnQuYmFzZVVSSSB8fCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbi8qKlxuICogU2V0cyB0aGUgZ2xvYmFsIHJvb3RQYXRoIHByb3BlcnR5IHVzZWQgYnkgYEVsZW1lbnRNaXhpbmAgYW5kXG4gKiBhdmFpbGFibGUgdmlhIGByb290UGF0aGAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIG5ldyByb290IHBhdGhcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRSb290UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcm9vdFBhdGggPSBwYXRoO1xufTtcblxuLyoqXG4gKiBBIGdsb2JhbCBjYWxsYmFjayB1c2VkIHRvIHNhbml0aXplIGFueSB2YWx1ZSBiZWZvcmUgaW5zZXJ0aW5nIGl0IGludG8gdGhlIERPTS5cbiAqIFRoZSBjYWxsYmFjayBzaWduYXR1cmUgaXM6XG4gKlxuICogIGZ1bmN0aW9uIHNhbml0aXplRE9NVmFsdWUodmFsdWUsIG5hbWUsIHR5cGUsIG5vZGUpIHsgLi4uIH1cbiAqXG4gKiBXaGVyZTpcbiAqXG4gKiBgdmFsdWVgIGlzIHRoZSB2YWx1ZSB0byBzYW5pdGl6ZS5cbiAqIGBuYW1lYCBpcyB0aGUgbmFtZSBvZiBhbiBhdHRyaWJ1dGUgb3IgcHJvcGVydHkgKGZvciBleGFtcGxlLCBocmVmKS5cbiAqIGB0eXBlYCBpbmRpY2F0ZXMgd2hlcmUgdGhlIHZhbHVlIGlzIGJlaW5nIGluc2VydGVkOiBvbmUgb2YgcHJvcGVydHksIGF0dHJpYnV0ZSwgb3IgdGV4dC5cbiAqIGBub2RlYCBpcyB0aGUgbm9kZSB3aGVyZSB0aGUgdmFsdWUgaXMgYmVpbmcgaW5zZXJ0ZWQuXG4gKlxuICogQHR5cGUgeyhmdW5jdGlvbigqLHN0cmluZyxzdHJpbmcsTm9kZSk6Kil8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgbGV0IHNhbml0aXplRE9NVmFsdWUgPSB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5zYW5pdGl6ZURPTVZhbHVlIHx8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBTZXRzIHRoZSBnbG9iYWwgc2FuaXRpemVET01WYWx1ZSBhdmFpbGFibGUgdmlhIHRoaXMgbW9kdWxlJ3MgZXhwb3J0ZWRcbiAqIGBzYW5pdGl6ZURPTVZhbHVlYCB2YXJpYWJsZS5cbiAqXG4gKiBAcGFyYW0geyhmdW5jdGlvbigqLHN0cmluZyxzdHJpbmcsTm9kZSk6Kil8dW5kZWZpbmVkfSBuZXdTYW5pdGl6ZURPTVZhbHVlIHRoZSBnbG9iYWwgc2FuaXRpemVET01WYWx1ZSBjYWxsYmFja1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFNhbml0aXplRE9NVmFsdWUgPSBmdW5jdGlvbihuZXdTYW5pdGl6ZURPTVZhbHVlKSB7XG4gIHNhbml0aXplRE9NVmFsdWUgPSBuZXdTYW5pdGl6ZURPTVZhbHVlO1xufTtcblxuLyoqXG4gKiBHbG9iYWxseSBzZXR0YWJsZSBwcm9wZXJ0eSB0byBtYWtlIFBvbHltZXIgR2VzdHVyZXMgdXNlIHBhc3NpdmUgVG91Y2hFdmVudCBsaXN0ZW5lcnMgd2hlbiByZWNvZ25pemluZyBnZXN0dXJlcy5cbiAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgZ2VzdHVyZXMgbWFkZSBmcm9tIHRvdWNoIHdpbGwgbm90IGJlIGFibGUgdG8gcHJldmVudCBzY3JvbGxpbmcsIGFsbG93aW5nIGZvciBzbW9vdGhlclxuICogc2Nyb2xsaW5nIHBlcmZvcm1hbmNlLlxuICogRGVmYXVsdHMgdG8gYGZhbHNlYCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBsZXQgcGFzc2l2ZVRvdWNoR2VzdHVyZXMgPSBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBwYXNzaXZlVG91Y2hHZXN0dXJlc2AgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50cyB1c2luZyBQb2x5bWVyIEdlc3R1cmVzLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlUGFzc2l2ZSBlbmFibGUgb3IgZGlzYWJsZSBwYXNzaXZlIHRvdWNoIGdlc3R1cmVzIGdsb2JhbGx5XG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0UGFzc2l2ZVRvdWNoR2VzdHVyZXMgPSBmdW5jdGlvbih1c2VQYXNzaXZlKSB7XG4gIHBhc3NpdmVUb3VjaEdlc3R1cmVzID0gdXNlUGFzc2l2ZTtcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBlbnN1cmUgUG9seW1lciB0ZW1wbGF0ZSBldmFsdWF0aW9uIG9ubHkgb2NjdXJzIGJhc2VkIG9uIHRlbXBhdGVzXG4gKiBkZWZpbmVkIGluIHRydXN0ZWQgc2NyaXB0LiAgV2hlbiB0cnVlLCBgPGRvbS1tb2R1bGU+YCByZS1yZWdpc3RyYXRpb24gaXNcbiAqIGRpc2FsbG93ZWQsIGA8ZG9tLWJpbmQ+YCBpcyBkaXNhYmxlZCwgYW5kIGA8ZG9tLWlmPmAvYDxkb20tcmVwZWF0PmBcbiAqIHRlbXBsYXRlcyB3aWxsIG9ubHkgZXZhbHVhdGUgaW4gdGhlIGNvbnRleHQgb2YgYSB0cnVzdGVkIGVsZW1lbnQgdGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBsZXQgc3RyaWN0VGVtcGxhdGVQb2xpY3kgPSBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBzdHJpY3RUZW1wbGF0ZVBvbGljeWAgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50c1xuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlU3RyaWN0UG9saWN5IGVuYWJsZSBvciBkaXNhYmxlIHN0cmljdCB0ZW1wbGF0ZSBwb2xpY3lcbiAqICAgZ2xvYmFsbHlcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRTdHJpY3RUZW1wbGF0ZVBvbGljeSA9IGZ1bmN0aW9uKHVzZVN0cmljdFBvbGljeSkge1xuICBzdHJpY3RUZW1wbGF0ZVBvbGljeSA9IHVzZVN0cmljdFBvbGljeTtcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBlbmFibGUgZG9tLW1vZHVsZSBsb29rdXAgZnJvbSBQb2x5bWVyLkVsZW1lbnQuICBCeSBkZWZhdWx0LFxuICogdGVtcGxhdGVzIG11c3QgYmUgZGVmaW5lZCBpbiBzY3JpcHQgdXNpbmcgdGhlIGBzdGF0aWMgZ2V0IHRlbXBsYXRlKClgXG4gKiBnZXR0ZXIgYW5kIHRoZSBgaHRtbGAgdGFnIGZ1bmN0aW9uLiAgVG8gZW5hYmxlIGxlZ2FjeSBsb2FkaW5nIG9mIHRlbXBsYXRlc1xuICogdmlhIGRvbS1tb2R1bGUsIHNldCB0aGlzIGZsYWcgdG8gdHJ1ZS5cbiAqL1xuZXhwb3J0IGxldCBhbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSA9IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgYGxvb2t1cFRlbXBsYXRlRnJvbURvbU1vZHVsZWAgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50c1xuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYWxsb3dEb21Nb2R1bGUgZW5hYmxlIG9yIGRpc2FibGUgdGVtcGxhdGUgbG9va3VwXG4gKiAgIGdsb2JhbGx5XG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0QWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGUgPSBmdW5jdGlvbihhbGxvd0RvbU1vZHVsZSkge1xuICBhbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSA9IGFsbG93RG9tTW9kdWxlO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIHNraXAgcHJvY2Vzc2luZyBzdHlsZSBpbmNsdWRlcyBhbmQgcmUtd3JpdGluZyB1cmxzIGluIGNzcyBzdHlsZXMuXG4gKiBOb3JtYWxseSBcImluY2x1ZGVkXCIgc3R5bGVzIGFyZSBwdWxsZWQgaW50byB0aGUgZWxlbWVudCBhbmQgYWxsIHVybHMgaW4gc3R5bGVzXG4gKiBhcmUgcmUtd3JpdHRlbiB0byBiZSByZWxhdGl2ZSB0byB0aGUgY29udGFpbmluZyBzY3JpcHQgdXJsLlxuICogSWYgbm8gaW5jbHVkZXMgb3IgcmVsYXRpdmUgdXJscyBhcmUgdXNlZCBpbiBzdHlsZXMsIHRoZXNlIHN0ZXBzIGNhbiBiZVxuICogc2tpcHBlZCBhcyBhbiBvcHRpbWl6YXRpb24uXG4gKi9cbmV4cG9ydCBsZXQgbGVnYWN5T3B0aW1pemF0aW9ucyA9IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgYGxlZ2FjeU9wdGltaXphdGlvbnNgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHMgdG8gZW5hYmxlIG9wdGltaXphdGlvbnNcbiAqIHdoZW4gb25seSBsZWdhY3kgYmFzZWQgZWxlbWVudHMgYXJlIHVzZWQuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VMZWdhY3lPcHRpbWl6YXRpb25zIGVuYWJsZSBvciBkaXNhYmxlIGxlZ2FjeSBvcHRpbWl6YXRpb25zXG4gKiBpbmNsdWRlcyBhbmQgdXJsIHJld3JpdGluZ1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldExlZ2FjeU9wdGltaXphdGlvbnMgPSBmdW5jdGlvbih1c2VMZWdhY3lPcHRpbWl6YXRpb25zKSB7XG4gIGxlZ2FjeU9wdGltaXphdGlvbnMgPSB1c2VMZWdhY3lPcHRpbWl6YXRpb25zO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIHBlcmZvcm0gaW5pdGlhbCByZW5kZXJpbmcgc3luY2hyb25vdXNseSB3aGVuIHJ1bm5pbmcgdW5kZXIgU2hhZHlET00uXG4gKiBUaGlzIG1hdGNoZXMgdGhlIGJlaGF2aW9yIG9mIFBvbHltZXIgMS5cbiAqL1xuZXhwb3J0IGxldCBzeW5jSW5pdGlhbFJlbmRlciA9IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgYHN5bmNJbml0aWFsUmVuZGVyYCBnbG9iYWxseSBmb3IgYWxsIGVsZW1lbnRzIHRvIGVuYWJsZSBzeW5jaHJvbm91c1xuICogaW5pdGlhbCByZW5kZXJpbmcuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VTeW5jSW5pdGlhbFJlbmRlciBlbmFibGUgb3IgZGlzYWJsZSBzeW5jaHJvbm91cyBpbml0aWFsXG4gKiByZW5kZXJpbmcgZ2xvYmFsbHkuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0U3luY0luaXRpYWxSZW5kZXIgPSBmdW5jdGlvbih1c2VTeW5jSW5pdGlhbFJlbmRlcikge1xuICBzeW5jSW5pdGlhbFJlbmRlciA9IHVzZVN5bmNJbml0aWFsUmVuZGVyO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIGNhbmNlbCBzeW50aGV0aWMgY2xpY2sgZXZlbnRzIGZpcmVkIGJ5IG9sZGVyIG1vYmlsZSBicm93c2Vycy4gTW9kZXJuIGJyb3dzZXJzXG4gKiBubyBsb25nZXIgZmlyZSBzeW50aGV0aWMgY2xpY2sgZXZlbnRzLCBhbmQgdGhlIGNhbmNlbGxhdGlvbiBiZWhhdmlvciBjYW4gaW50ZXJmZXJlXG4gKiB3aGVuIHByb2dyYW1tYXRpY2FsbHkgY2xpY2tpbmcgb24gZWxlbWVudHMuXG4gKi9cbmV4cG9ydCBsZXQgY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMgPSB0cnVlO1xuXG4vKipcbiAqIFNldHMgYHNldENhbmNlbFN5bnRoZXRpY0V2ZW50c2AgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50cyB0byBjYW5jZWwgc3ludGhldGljIGNsaWNrIGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzIGVuYWJsZSBvciBkaXNhYmxlIGNhbmNlbGxpbmcgc3ludGhldGljXG4gKiBldmVudHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDYW5jZWxTeW50aGV0aWNDbGlja0V2ZW50cyA9IGZ1bmN0aW9uKHVzZUNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzKSB7XG4gIGNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzID0gdXNlQ2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHM7XG59O1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbmltcG9ydCB7IHJlc29sdmVVcmwsIHBhdGhGcm9tVXJsIH0gZnJvbSAnLi4vdXRpbHMvcmVzb2x2ZS11cmwuanMnO1xuaW1wb3J0IHsgc3RyaWN0VGVtcGxhdGVQb2xpY3kgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy5qcyc7XG5cbmxldCBtb2R1bGVzID0ge307XG5sZXQgbGNNb2R1bGVzID0ge307XG4vKipcbiAqIFNldHMgYSBkb20tbW9kdWxlIGludG8gdGhlIGdsb2JhbCByZWdpc3RyeSBieSBpZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgZG9tLW1vZHVsZSBpZFxuICogQHBhcmFtIHtEb21Nb2R1bGV9IG1vZHVsZSBkb20tbW9kdWxlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBzZXRNb2R1bGUoaWQsIG1vZHVsZSkge1xuICAvLyBzdG9yZSBpZCBzZXBhcmF0ZSBmcm9tIGxvd2VyY2FzZWQgaWQgc28gdGhhdFxuICAvLyBpbiBhbGwgY2FzZXMgbWl4ZWRDYXNlIGlkIHdpbGwgc3RvcmVkIGRpc3RpbmN0bHlcbiAgLy8gYW5kIGxvd2VyY2FzZSB2ZXJzaW9uIGlzIGEgZmFsbGJhY2tcbiAgbW9kdWxlc1tpZF0gPSBsY01vZHVsZXNbaWQudG9Mb3dlckNhc2UoKV0gPSBtb2R1bGU7XG59XG4vKipcbiAqIFJldHJpZXZlcyBhIGRvbS1tb2R1bGUgZnJvbSB0aGUgZ2xvYmFsIHJlZ2lzdHJ5IGJ5IGlkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBkb20tbW9kdWxlIGlkXG4gKiBAcmV0dXJuIHtEb21Nb2R1bGUhfSBkb20tbW9kdWxlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGZpbmRNb2R1bGUoaWQpIHtcbiAgcmV0dXJuIG1vZHVsZXNbaWRdIHx8IGxjTW9kdWxlc1tpZC50b0xvd2VyQ2FzZSgpXTtcbn1cblxuZnVuY3Rpb24gc3R5bGVPdXRzaWRlVGVtcGxhdGVDaGVjayhpbnN0KSB7XG4gIGlmIChpbnN0LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpIHtcbiAgICBjb25zb2xlLndhcm4oJ2RvbS1tb2R1bGUgJXMgaGFzIHN0eWxlIG91dHNpZGUgdGVtcGxhdGUnLCBpbnN0LmlkKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBgZG9tLW1vZHVsZWAgZWxlbWVudCByZWdpc3RlcnMgdGhlIGRvbSBpdCBjb250YWlucyB0byB0aGUgbmFtZSBnaXZlblxuICogYnkgdGhlIG1vZHVsZSdzIGlkIGF0dHJpYnV0ZS4gSXQgcHJvdmlkZXMgYSB1bmlmaWVkIGRhdGFiYXNlIG9mIGRvbVxuICogYWNjZXNzaWJsZSB2aWEgaXRzIHN0YXRpYyBgaW1wb3J0YCBBUEkuXG4gKlxuICogQSBrZXkgdXNlIGNhc2Ugb2YgYGRvbS1tb2R1bGVgIGlzIGZvciBwcm92aWRpbmcgY3VzdG9tIGVsZW1lbnQgYDx0ZW1wbGF0ZT5gc1xuICogdmlhIEhUTUwgaW1wb3J0cyB0aGF0IGFyZSBwYXJzZWQgYnkgdGhlIG5hdGl2ZSBIVE1MIHBhcnNlciwgdGhhdCBjYW4gYmVcbiAqIHJlbG9jYXRlZCBkdXJpbmcgYSBidW5kbGluZyBwYXNzIGFuZCBzdGlsbCBsb29rZWQgdXAgYnkgYGlkYC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICA8ZG9tLW1vZHVsZSBpZD1cImZvb1wiPlxuICogICAgICAgPGltZyBzcmM9XCJzdHVmZi5wbmdcIj5cbiAqICAgICA8L2RvbS1tb2R1bGU+XG4gKlxuICogVGhlbiBpbiBjb2RlIGluIHNvbWUgb3RoZXIgbG9jYXRpb24gdGhhdCBjYW5ub3QgYWNjZXNzIHRoZSBkb20tbW9kdWxlIGFib3ZlXG4gKlxuICogICAgIGxldCBpbWcgPSBjdXN0b21FbGVtZW50cy5nZXQoJ2RvbS1tb2R1bGUnKS5pbXBvcnQoJ2ZvbycsICdpbWcnKTtcbiAqXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IHRoYXQgcHJvdmlkZXMgYSByZWdpc3RyeSBvZiByZWxvY2F0YWJsZSBET00gY29udGVudFxuICogICBieSBgaWRgIHRoYXQgaXMgYWdub3N0aWMgdG8gYnVuZGxpbmcuXG4gKiBAdW5yZXN0cmljdGVkXG4gKi9cbmV4cG9ydCBjbGFzcyBEb21Nb2R1bGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHsgcmV0dXJuIFsnaWQnXTsgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGVsZW1lbnQgc3BlY2lmaWVkIGJ5IHRoZSBjc3MgYHNlbGVjdG9yYCBpbiB0aGUgbW9kdWxlXG4gICAqIHJlZ2lzdGVyZWQgYnkgYGlkYC4gRm9yIGV4YW1wbGUsIHRoaXMuaW1wb3J0KCdmb28nLCAnaW1nJyk7XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgaWQgb2YgdGhlIGRvbS1tb2R1bGUgaW4gd2hpY2ggdG8gc2VhcmNoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNlbGVjdG9yIFRoZSBjc3Mgc2VsZWN0b3IgYnkgd2hpY2ggdG8gZmluZCB0aGUgZWxlbWVudC5cbiAgICogQHJldHVybiB7RWxlbWVudH0gUmV0dXJucyB0aGUgZWxlbWVudCB3aGljaCBtYXRjaGVzIGBzZWxlY3RvcmAgaW4gdGhlXG4gICAqIG1vZHVsZSByZWdpc3RlcmVkIGF0IHRoZSBzcGVjaWZpZWQgYGlkYC5cbiAgICpcbiAgICogQGV4cG9ydFxuICAgKiBAbm9jb2xsYXBzZSBSZWZlcnJlZCB0byBpbmRpcmVjdGx5IGluIHN0eWxlLWdhdGhlci5qc1xuICAgKi9cbiAgc3RhdGljIGltcG9ydChpZCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGxldCBtID0gZmluZE1vZHVsZShpZCk7XG4gICAgICBpZiAobSAmJiBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gbS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBvbGQgT2xkIHZhbHVlIG9mIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBDdXJyZW50IHZhbHVlIG9mIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBuYW1lc3BhY2UgQXR0cmlidXRlIG5hbWVzcGFjZS5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSwgbmFtZXNwYWNlKSB7XG4gICAgaWYgKG9sZCAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXIoKTtcbiAgICB9XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtYXJncyAqL1xuXG4gIC8qKlxuICAgKiBUaGUgYWJzb2x1dGUgVVJMIG9mIHRoZSBvcmlnaW5hbCBsb2NhdGlvbiBvZiB0aGlzIGBkb20tbW9kdWxlYC5cbiAgICpcbiAgICogVGhpcyB2YWx1ZSB3aWxsIGRpZmZlciBmcm9tIHRoaXMgZWxlbWVudCdzIGBvd25lckRvY3VtZW50YCBpbiB0aGVcbiAgICogZm9sbG93aW5nIHdheXM6XG4gICAqIC0gVGFrZXMgaW50byBhY2NvdW50IGFueSBgYXNzZXRwYXRoYCBhdHRyaWJ1dGUgYWRkZWQgZHVyaW5nIGJ1bmRsaW5nXG4gICAqICAgdG8gaW5kaWNhdGUgdGhlIG9yaWdpbmFsIGxvY2F0aW9uIHJlbGF0aXZlIHRvIHRoZSBidW5kbGVkIGxvY2F0aW9uXG4gICAqIC0gVXNlcyB0aGUgSFRNTEltcG9ydHMgcG9seWZpbGwncyBgaW1wb3J0Rm9yRWxlbWVudGAgQVBJIHRvIGVuc3VyZVxuICAgKiAgIHRoZSBwYXRoIGlzIHJlbGF0aXZlIHRvIHRoZSBpbXBvcnQgZG9jdW1lbnQncyBsb2NhdGlvbiBzaW5jZVxuICAgKiAgIGBvd25lckRvY3VtZW50YCBpcyBub3QgY3VycmVudGx5IHBvbHlmaWxsZWRcbiAgICovXG4gIGdldCBhc3NldHBhdGgoKSB7XG4gICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYXNzZXRwYXRoLlxuICAgIGlmICghdGhpcy5fX2Fzc2V0cGF0aCkge1xuICAgICAgLy8gbm90ZTogYXNzZXRwYXRoIHNldCB2aWEgYW4gYXR0cmlidXRlIG11c3QgYmUgcmVsYXRpdmUgdG8gdGhpc1xuICAgICAgLy8gZWxlbWVudCdzIGxvY2F0aW9uOyBhY2NvbW9kYXRlIHBvbHlmaWxsZWQgSFRNTEltcG9ydHNcbiAgICAgIGNvbnN0IG93bmVyID0gd2luZG93LkhUTUxJbXBvcnRzICYmIEhUTUxJbXBvcnRzLmltcG9ydEZvckVsZW1lbnQgP1xuICAgICAgICBIVE1MSW1wb3J0cy5pbXBvcnRGb3JFbGVtZW50KHRoaXMpIHx8IGRvY3VtZW50IDogdGhpcy5vd25lckRvY3VtZW50O1xuICAgICAgY29uc3QgdXJsID0gcmVzb2x2ZVVybChcbiAgICAgICAgdGhpcy5nZXRBdHRyaWJ1dGUoJ2Fzc2V0cGF0aCcpIHx8ICcnLCBvd25lci5iYXNlVVJJKTtcbiAgICAgIHRoaXMuX19hc3NldHBhdGggPSBwYXRoRnJvbVVybCh1cmwpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX2Fzc2V0cGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIGRvbS1tb2R1bGUgYXQgYSBnaXZlbiBpZC4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkXG4gICAqIHdoZW4gYSBkb20tbW9kdWxlIGlzIGltcGVyYXRpdmVseSBjcmVhdGVkLiBGb3JcbiAgICogZXhhbXBsZSwgYGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RvbS1tb2R1bGUnKS5yZWdpc3RlcignZm9vJylgLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IGlkIFRoZSBpZCBhdCB3aGljaCB0byByZWdpc3RlciB0aGUgZG9tLW1vZHVsZS5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHJlZ2lzdGVyKGlkKSB7XG4gICAgaWQgPSBpZCB8fCB0aGlzLmlkO1xuICAgIGlmIChpZCkge1xuICAgICAgLy8gVW5kZXIgc3RyaWN0VGVtcGxhdGVQb2xpY3ksIHJlamVjdCBhbmQgbnVsbCBvdXQgYW55IHJlLXJlZ2lzdGVyZWRcbiAgICAgIC8vIGRvbS1tb2R1bGUgc2luY2UgaXQgaXMgYW1iaWd1b3VzIHdoZXRoZXIgZmlyc3QtaW4gb3IgbGFzdC1pbiBpcyB0cnVzdGVkXG4gICAgICBpZiAoc3RyaWN0VGVtcGxhdGVQb2xpY3kgJiYgZmluZE1vZHVsZShpZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRNb2R1bGUoaWQsIG51bGwpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN0cmljdFRlbXBsYXRlUG9saWN5OiBkb20tbW9kdWxlICR7aWR9IHJlLXJlZ2lzdGVyZWRgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgIHNldE1vZHVsZShpZCwgdGhpcyk7XG4gICAgICBzdHlsZU91dHNpZGVUZW1wbGF0ZUNoZWNrKHRoaXMpO1xuICAgIH1cbiAgfVxufVxuXG5Eb21Nb2R1bGUucHJvdG90eXBlWydtb2R1bGVzJ10gPSBtb2R1bGVzO1xuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2RvbS1tb2R1bGUnLCBEb21Nb2R1bGUpO1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLyoqXG4gKiBNb2R1bGUgd2l0aCB1dGlsaXRpZXMgZm9yIGNvbGxlY3Rpb24gQ1NTIHRleHQgZnJvbSBgPHRlbXBsYXRlcz5gLCBleHRlcm5hbFxuICogc3R5bGVzaGVldHMsIGFuZCBgZG9tLW1vZHVsZWBzLlxuICpcbiAqIEBzdW1tYXJ5IE1vZHVsZSB3aXRoIHV0aWxpdGllcyBmb3IgY29sbGVjdGlvbiBDU1MgdGV4dCBmcm9tIHZhcmlvdXMgc291cmNlcy5cbiAqL1xuXG5pbXBvcnQgeyBEb21Nb2R1bGUgfSBmcm9tICcuLi9lbGVtZW50cy9kb20tbW9kdWxlLmpzJztcbmltcG9ydCB7IHJlc29sdmVDc3MgfSBmcm9tICcuL3Jlc29sdmUtdXJsLmpzJztcblxuY29uc3QgTU9EVUxFX1NUWUxFX0xJTktfU0VMRUNUT1IgPSAnbGlua1tyZWw9aW1wb3J0XVt0eXBlfj1jc3NdJztcbmNvbnN0IElOQ0xVREVfQVRUUiA9ICdpbmNsdWRlJztcbmNvbnN0IFNIQURZX1VOU0NPUEVEX0FUVFIgPSAnc2hhZHktdW5zY29wZWQnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZCAuXG4gKiBAcmV0dXJuIHs/RG9tTW9kdWxlfSAuXG4gKi9cbmZ1bmN0aW9uIGltcG9ydE1vZHVsZShtb2R1bGVJZCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/RG9tTW9kdWxlfSAqLyhEb21Nb2R1bGUuaW1wb3J0KG1vZHVsZUlkKSk7XG59XG5cbmZ1bmN0aW9uIHN0eWxlRm9ySW1wb3J0KGltcG9ydERvYykge1xuICAvLyBOT1RFOiBwb2x5ZmlsbCBhZmZvcmRhbmNlLlxuICAvLyB1bmRlciB0aGUgSFRNTEltcG9ydHMgcG9seWZpbGwsIHRoZXJlIHdpbGwgYmUgbm8gJ2JvZHknLFxuICAvLyBidXQgdGhlIGltcG9ydCBwc2V1ZG8tZG9jIGNhbiBiZSB1c2VkIGRpcmVjdGx5LlxuICBsZXQgY29udGFpbmVyID0gaW1wb3J0RG9jLmJvZHkgPyBpbXBvcnREb2MuYm9keSA6IGltcG9ydERvYztcbiAgY29uc3QgaW1wb3J0Q3NzID0gcmVzb2x2ZUNzcyhjb250YWluZXIudGV4dENvbnRlbnQsXG4gICAgaW1wb3J0RG9jLmJhc2VVUkkpO1xuICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnRleHRDb250ZW50ID0gaW1wb3J0Q3NzO1xuICByZXR1cm4gc3R5bGU7XG59XG5cbi8qKiBAdHlwZWRlZiB7e2Fzc2V0cGF0aDogc3RyaW5nfX0gKi9cbmxldCB0ZW1wbGF0ZVdpdGhBc3NldFBhdGg7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuXG4vKipcbiAqIFJldHVybnMgYSBsaXN0IG9mIDxzdHlsZT4gZWxlbWVudHMgaW4gYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBgZG9tLW1vZHVsZWBzLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkcyBMaXN0IG9mIGRvbS1tb2R1bGUgaWQncyB3aXRoaW4gd2hpY2ggdG9cbiAqIHNlYXJjaCBmb3IgY3NzLlxuICogQHJldHVybiB7IUFycmF5PCFIVE1MU3R5bGVFbGVtZW50Pn0gQXJyYXkgb2YgY29udGFpbmVkIDxzdHlsZT4gZWxlbWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0eWxlc0Zyb21Nb2R1bGVzKG1vZHVsZUlkcykge1xuIGNvbnN0IG1vZHVsZXMgPSBtb2R1bGVJZHMudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gY29uc3Qgc3R5bGVzID0gW107XG4gZm9yIChsZXQgaT0wOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuICAgc3R5bGVzLnB1c2goLi4uc3R5bGVzRnJvbU1vZHVsZShtb2R1bGVzW2ldKSk7XG4gfVxuIHJldHVybiBzdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgPHN0eWxlPiBlbGVtZW50cyBpbiBhIGdpdmVuIGBkb20tbW9kdWxlYC5cbiAqIFN0eWxlcyBpbiBhIGBkb20tbW9kdWxlYCBjYW4gY29tZSBlaXRoZXIgZnJvbSBgPHN0eWxlPmBzIHdpdGhpbiB0aGVcbiAqIGZpcnN0IGA8dGVtcGxhdGU+YCwgb3IgZWxzZSBmcm9tIG9uZSBvciBtb3JlXG4gKiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgbGlua3Mgb3V0c2lkZSB0aGUgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkIGRvbS1tb2R1bGUgaWQgdG8gZ2F0aGVyIHN0eWxlcyBmcm9tXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxTdHlsZUVsZW1lbnQ+fSBBcnJheSBvZiBjb250YWluZWQgc3R5bGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVzRnJvbU1vZHVsZShtb2R1bGVJZCkge1xuICBjb25zdCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcblxuICBpZiAoIW0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBmaW5kIHN0eWxlIGRhdGEgaW4gbW9kdWxlIG5hbWVkJywgbW9kdWxlSWQpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChtLl9zdHlsZXMgPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIC8vIG1vZHVsZSBpbXBvcnRzOiA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+XG4gICAgc3R5bGVzLnB1c2goLi4uX3N0eWxlc0Zyb21Nb2R1bGVJbXBvcnRzKG0pKTtcbiAgICAvLyBpbmNsdWRlIGNzcyBmcm9tIHRoZSBmaXJzdCB0ZW1wbGF0ZSBpbiB0aGUgbW9kdWxlXG4gICAgY29uc3QgdGVtcGxhdGUgPSAvKiogQHR5cGUgez9IVE1MVGVtcGxhdGVFbGVtZW50fSAqLyhcbiAgICAgICAgbS5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIHN0eWxlcy5wdXNoKC4uLnN0eWxlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSxcbiAgICAgICAgLyoqIEB0eXBlIHt0ZW1wbGF0ZVdpdGhBc3NldFBhdGh9ICovKG0pLmFzc2V0cGF0aCkpO1xuICAgIH1cblxuICAgIG0uX3N0eWxlcyA9IHN0eWxlcztcbiAgfVxuXG4gIHJldHVybiBtLl9zdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYDxzdHlsZT5gIGVsZW1lbnRzIHdpdGhpbiBhIGdpdmVuIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIGdhdGhlciBzdHlsZXMgZnJvbVxuICogQHBhcmFtIHtzdHJpbmc9fSBiYXNlVVJJIGJhc2VVUkkgZm9yIHN0eWxlIGNvbnRlbnRcbiAqIEByZXR1cm4geyFBcnJheTwhSFRNTFN0eWxlRWxlbWVudD59IEFycmF5IG9mIHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBiYXNlVVJJKSB7XG4gIGlmICghdGVtcGxhdGUuX3N0eWxlcykge1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIC8vIGlmIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSwgZ2V0IGNvbnRlbnQgZnJvbSBpdHMgLmNvbnRlbnRcbiAgICBjb25zdCBlJCA9IHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICBmb3IgKGxldCBpPTA7IGkgPCBlJC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGUgPSBlJFtpXTtcbiAgICAgIC8vIHN1cHBvcnQgc3R5bGUgc2hhcmluZyBieSBhbGxvd2luZyBzdHlsZXMgdG8gXCJpbmNsdWRlXCJcbiAgICAgIC8vIG90aGVyIGRvbS1tb2R1bGVzIHRoYXQgY29udGFpbiBzdHlsaW5nXG4gICAgICBsZXQgaW5jbHVkZSA9IGUuZ2V0QXR0cmlidXRlKElOQ0xVREVfQVRUUik7XG4gICAgICBpZiAoaW5jbHVkZSkge1xuICAgICAgICBzdHlsZXMucHVzaCguLi5zdHlsZXNGcm9tTW9kdWxlcyhpbmNsdWRlKS5maWx0ZXIoZnVuY3Rpb24oaXRlbSwgaW5kZXgsIHNlbGYpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09PSBpbmRleDtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VVUkkpIHtcbiAgICAgICAgZS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICByZXNvbHZlQ3NzKGUudGV4dENvbnRlbnQsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoYmFzZVVSSSkpO1xuICAgICAgfVxuICAgICAgc3R5bGVzLnB1c2goZSk7XG4gICAgfVxuICAgIHRlbXBsYXRlLl9zdHlsZXMgPSBzdHlsZXM7XG4gIH1cbiAgcmV0dXJuIHRlbXBsYXRlLl9zdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgPHN0eWxlPiBlbGVtZW50cyAgZnJvbSBzdHlsZXNoZWV0cyBsb2FkZWQgdmlhIGA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+YCBsaW5rcyB3aXRoaW4gdGhlIHNwZWNpZmllZCBgZG9tLW1vZHVsZWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkIElkIG9mIGBkb20tbW9kdWxlYCB0byBnYXRoZXIgQ1NTIGZyb21cbiAqIEByZXR1cm4geyFBcnJheTwhSFRNTFN0eWxlRWxlbWVudD59IEFycmF5IG9mIGNvbnRhaW5lZCBzdHlsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGVJZCkge1xuIGxldCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcbiByZXR1cm4gbSA/IF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtKSA6IFtdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBtb2R1bGUgZG9tLW1vZHVsZSBlbGVtZW50IHRoYXQgY291bGQgY29udGFpbiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgc3R5bGVzXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxTdHlsZUVsZW1lbnQ+fSBBcnJheSBvZiBjb250YWluZWQgc3R5bGVzXG4gKi9cbmZ1bmN0aW9uIF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpIHtcbiAgY29uc3Qgc3R5bGVzID0gW107XG4gIGNvbnN0IHAkID0gbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoTU9EVUxFX1NUWUxFX0xJTktfU0VMRUNUT1IpO1xuICBmb3IgKGxldCBpPTA7IGkgPCBwJC5sZW5ndGg7IGkrKykge1xuICAgIGxldCBwID0gcCRbaV07XG4gICAgaWYgKHAuaW1wb3J0KSB7XG4gICAgICBjb25zdCBpbXBvcnREb2MgPSBwLmltcG9ydDtcbiAgICAgIGNvbnN0IHVuc2NvcGVkID0gcC5oYXNBdHRyaWJ1dGUoU0hBRFlfVU5TQ09QRURfQVRUUik7XG4gICAgICBpZiAodW5zY29wZWQgJiYgIWltcG9ydERvYy5fdW5zY29wZWRTdHlsZSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHN0eWxlRm9ySW1wb3J0KGltcG9ydERvYyk7XG4gICAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZShTSEFEWV9VTlNDT1BFRF9BVFRSLCAnJyk7XG4gICAgICAgIGltcG9ydERvYy5fdW5zY29wZWRTdHlsZSA9IHN0eWxlO1xuICAgICAgfSBlbHNlIGlmICghaW1wb3J0RG9jLl9zdHlsZSkge1xuICAgICAgICBpbXBvcnREb2MuX3N0eWxlID0gc3R5bGVGb3JJbXBvcnQoaW1wb3J0RG9jKTtcbiAgICAgIH1cbiAgICAgIHN0eWxlcy5wdXNoKHVuc2NvcGVkID8gaW1wb3J0RG9jLl91bnNjb3BlZFN0eWxlIDogaW1wb3J0RG9jLl9zdHlsZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG5cbi8qKlxuICpcbiAqIFJldHVybnMgQ1NTIHRleHQgb2Ygc3R5bGVzIGluIGEgc3BhY2Utc2VwYXJhdGVkIGxpc3Qgb2YgYGRvbS1tb2R1bGVgcy5cbiAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHVzZSBgc3R5bGVzRnJvbU1vZHVsZXNgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZHMgTGlzdCBvZiBkb20tbW9kdWxlIGlkJ3Mgd2l0aGluIHdoaWNoIHRvXG4gKiBzZWFyY2ggZm9yIGNzcy5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29uY2F0ZW5hdGVkIENTUyBjb250ZW50IGZyb20gc3BlY2lmaWVkIGBkb20tbW9kdWxlYHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0Zyb21Nb2R1bGVzKG1vZHVsZUlkcykge1xuIGxldCBtb2R1bGVzID0gbW9kdWxlSWRzLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuIGxldCBjc3NUZXh0ID0gJyc7XG4gZm9yIChsZXQgaT0wOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuICAgY3NzVGV4dCArPSBjc3NGcm9tTW9kdWxlKG1vZHVsZXNbaV0pO1xuIH1cbiByZXR1cm4gY3NzVGV4dDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIENTUyB0ZXh0IG9mIHN0eWxlcyBpbiBhIGdpdmVuIGBkb20tbW9kdWxlYC4gIENTUyBpbiBhIGBkb20tbW9kdWxlYFxuICogY2FuIGNvbWUgZWl0aGVyIGZyb20gYDxzdHlsZT5gcyB3aXRoaW4gdGhlIGZpcnN0IGA8dGVtcGxhdGU+YCwgb3IgZWxzZVxuICogZnJvbSBvbmUgb3IgbW9yZSBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgbGlua3Mgb3V0c2lkZSB0aGVcbiAqIHRlbXBsYXRlLlxuICpcbiAqIEFueSBgPHN0eWxlcz5gIHByb2Nlc3NlZCBhcmUgcmVtb3ZlZCBmcm9tIHRoZWlyIG9yaWdpbmFsIGxvY2F0aW9uLlxuICogTm90ZTogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIGBzdHlsZUZyb21Nb2R1bGVgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZCBkb20tbW9kdWxlIGlkIHRvIGdhdGhlciBzdHlsZXMgZnJvbVxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3NGcm9tTW9kdWxlKG1vZHVsZUlkKSB7XG4gIGxldCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcbiAgaWYgKG0gJiYgbS5fY3NzVGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gbW9kdWxlIGltcG9ydHM6IDxsaW5rIHJlbD1cImltcG9ydFwiIHR5cGU9XCJjc3NcIj5cbiAgICBsZXQgY3NzVGV4dCA9IF9jc3NGcm9tTW9kdWxlSW1wb3J0cyhtKTtcbiAgICAvLyBpbmNsdWRlIGNzcyBmcm9tIHRoZSBmaXJzdCB0ZW1wbGF0ZSBpbiB0aGUgbW9kdWxlXG4gICAgbGV0IHQgPSAvKiogQHR5cGUgez9IVE1MVGVtcGxhdGVFbGVtZW50fSAqLyhtLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpO1xuICAgIGlmICh0KSB7XG4gICAgICBjc3NUZXh0ICs9IGNzc0Zyb21UZW1wbGF0ZSh0LFxuICAgICAgICAvKiogQHR5cGUge3RlbXBsYXRlV2l0aEFzc2V0UGF0aH0gKi8obSkuYXNzZXRwYXRoKTtcbiAgICB9XG4gICAgbS5fY3NzVGV4dCA9IGNzc1RleHQgfHwgbnVsbDtcbiAgfVxuICBpZiAoIW0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBmaW5kIHN0eWxlIGRhdGEgaW4gbW9kdWxlIG5hbWVkJywgbW9kdWxlSWQpO1xuICB9XG4gIHJldHVybiBtICYmIG0uX2Nzc1RleHQgfHwgJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyBDU1MgdGV4dCBvZiBgPHN0eWxlcz5gIHdpdGhpbiBhIGdpdmVuIHRlbXBsYXRlLlxuICpcbiAqIEFueSBgPHN0eWxlcz5gIHByb2Nlc3NlZCBhcmUgcmVtb3ZlZCBmcm9tIHRoZWlyIG9yaWdpbmFsIGxvY2F0aW9uLlxuICogTm90ZTogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIGBzdHlsZUZyb21UZW1wbGF0ZWAgaW5zdGVhZC5cbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgdG8gZ2F0aGVyIHN0eWxlcyBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSSSBCYXNlIFVSSSB0byByZXNvbHZlIHRoZSBVUkwgYWdhaW5zdFxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBzcGVjaWZpZWQgdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgYmFzZVVSSSkge1xuICBsZXQgY3NzVGV4dCA9ICcnO1xuICBjb25zdCBlJCA9IHN0eWxlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgYmFzZVVSSSk7XG4gIC8vIGlmIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSwgZ2V0IGNvbnRlbnQgZnJvbSBpdHMgLmNvbnRlbnRcbiAgZm9yIChsZXQgaT0wOyBpIDwgZSQubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgZSA9IGUkW2ldO1xuICAgIGlmIChlLnBhcmVudE5vZGUpIHtcbiAgICAgIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTtcbiAgICB9XG4gICAgY3NzVGV4dCArPSBlLnRleHRDb250ZW50O1xuICB9XG4gIHJldHVybiBjc3NUZXh0O1xufVxuXG4vKipcbiAqIFJldHVybnMgQ1NTIHRleHQgZnJvbSBzdHlsZXNoZWV0cyBsb2FkZWQgdmlhIGA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+YFxuICogbGlua3Mgd2l0aGluIHRoZSBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgLlxuICpcbiAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHVzZSBgc3R5bGVzRnJvbU1vZHVsZUltcG9ydHNgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlSWQgSWQgb2YgYGRvbS1tb2R1bGVgIHRvIGdhdGhlciBDU1MgZnJvbVxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBsaW5rcyBpbiBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3NGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGVJZCkge1xuICBsZXQgbSA9IGltcG9ydE1vZHVsZShtb2R1bGVJZCk7XG4gIHJldHVybiBtID8gX2Nzc0Zyb21Nb2R1bGVJbXBvcnRzKG0pIDogJyc7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBtb2R1bGUgZG9tLW1vZHVsZSBlbGVtZW50IHRoYXQgY291bGQgY29udGFpbiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgc3R5bGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENvbmNhdGVuYXRlZCBDU1MgY29udGVudCBmcm9tIGxpbmtzIGluIHRoZSBkb20tbW9kdWxlXG4gKi9cbmZ1bmN0aW9uIF9jc3NGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpIHtcbiAgbGV0IGNzc1RleHQgPSAnJztcbiAgbGV0IHN0eWxlcyA9IF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpO1xuICBmb3IgKGxldCBpPTA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjc3NUZXh0ICs9IHN0eWxlc1tpXS50ZXh0Q29udGVudDtcbiAgfVxuICByZXR1cm4gY3NzVGV4dDtcbn1cbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2N1c3RvbS1zdHlsZS1pbnRlcmZhY2UuanMnO1xuXG5pbXBvcnQgeyBjc3NGcm9tTW9kdWxlcyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLWdhdGhlci5qcyc7XG5cbmNvbnN0IGF0dHIgPSAnaW5jbHVkZSc7XG5cbmNvbnN0IEN1c3RvbVN0eWxlSW50ZXJmYWNlID0gd2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlO1xuXG4vKipcbiAqIEN1c3RvbSBlbGVtZW50IGZvciBkZWZpbmluZyBzdHlsZXMgaW4gdGhlIG1haW4gZG9jdW1lbnQgdGhhdCBjYW4gdGFrZVxuICogYWR2YW50YWdlIG9mIFtzaGFkeSBET01dKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5Y3NzKSBzaGltc1xuICogZm9yIHN0eWxlIGVuY2Fwc3VsYXRpb24sIGN1c3RvbSBwcm9wZXJ0aWVzLCBhbmQgY3VzdG9tIG1peGlucy5cbiAqXG4gKiAtIERvY3VtZW50IHN0eWxlcyBkZWZpbmVkIGluIGEgYDxjdXN0b20tc3R5bGU+YCBhcmUgc2hpbW1lZCB0byBlbnN1cmUgdGhleVxuICogICBkbyBub3QgbGVhayBpbnRvIGxvY2FsIERPTSB3aGVuIHJ1bm5pbmcgb24gYnJvd3NlcnMgd2l0aG91dCBuYXRpdmVcbiAqICAgU2hhZG93IERPTS5cbiAqIC0gQ3VzdG9tIHByb3BlcnRpZXMgY2FuIGJlIGRlZmluZWQgaW4gYSBgPGN1c3RvbS1zdHlsZT5gLiBVc2UgdGhlIGBodG1sYCBzZWxlY3RvclxuICogICB0byBkZWZpbmUgY3VzdG9tIHByb3BlcnRpZXMgdGhhdCBhcHBseSB0byBhbGwgY3VzdG9tIGVsZW1lbnRzLlxuICogLSBDdXN0b20gbWl4aW5zIGNhbiBiZSBkZWZpbmVkIGluIGEgYDxjdXN0b20tc3R5bGU+YCwgaWYgeW91IGltcG9ydCB0aGUgb3B0aW9uYWxcbiAqICAgW2FwcGx5IHNoaW1dKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5Y3NzI2Fib3V0LWFwcGx5c2hpbSlcbiAqICAgKGBzaGFkeWNzcy9hcHBseS1zaGltLmh0bWxgKS5cbiAqXG4gKiBUbyB1c2U6XG4gKlxuICogLSBJbXBvcnQgYGN1c3RvbS1zdHlsZS5odG1sYC5cbiAqIC0gUGxhY2UgYSBgPGN1c3RvbS1zdHlsZT5gIGVsZW1lbnQgaW4gdGhlIG1haW4gZG9jdW1lbnQsIHdyYXBwaW5nIGFuIGlubGluZSBgPHN0eWxlPmAgdGFnIHRoYXRcbiAqICAgY29udGFpbnMgdGhlIENTUyBydWxlcyB5b3Ugd2FudCB0byBzaGltLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gaW1wb3J0IGFwcGx5IHNoaW0tLW9ubHkgcmVxdWlyZWQgaWYgdXNpbmcgbWl4aW5zIC0tPlxuICogPGxpbmsgcmVsPVwiaW1wb3J0XCIgaHJlZj1cImJvd2VyX2NvbXBvbmVudHMvc2hhZHljc3MvYXBwbHktc2hpbS5odG1sXCI+XG4gKiA8IS0tIGltcG9ydCBjdXN0b20tc3R5bGUgZWxlbWVudCAtLT5cbiAqIDxsaW5rIHJlbD1cImltcG9ydFwiIGhyZWY9XCJib3dlcl9jb21wb25lbnRzL3BvbHltZXIvbGliL2VsZW1lbnRzL2N1c3RvbS1zdHlsZS5odG1sXCI+XG4gKlxuICogPGN1c3RvbS1zdHlsZT5cbiAqICAgPHN0eWxlPlxuICogICAgIGh0bWwge1xuICogICAgICAgLS1jdXN0b20tY29sb3I6IGJsdWU7XG4gKiAgICAgICAtLWN1c3RvbS1taXhpbjoge1xuICogICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAqICAgICAgICAgY29sb3I6IHJlZDtcbiAqICAgICAgIH07XG4gKiAgICAgfVxuICogICA8L3N0eWxlPlxuICogPC9jdXN0b20tc3R5bGU+XG4gKiBgYGBcbiAqXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IGZvciBkZWZpbmluZyBzdHlsZXMgaW4gdGhlIG1haW4gZG9jdW1lbnQgdGhhdCBjYW5cbiAqICAgdGFrZSBhZHZhbnRhZ2Ugb2YgUG9seW1lcidzIHN0eWxlIHNjb3BpbmcgYW5kIGN1c3RvbSBwcm9wZXJ0aWVzIHNoaW1zLlxuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tU3R5bGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc3R5bGUgPSBudWxsO1xuICAgIEN1c3RvbVN0eWxlSW50ZXJmYWNlLmFkZEN1c3RvbVN0eWxlKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaWdodC1ET00gYDxzdHlsZT5gIGNoaWxkIHRoaXMgZWxlbWVudCB3cmFwcy4gIFVwb24gZmlyc3RcbiAgICogY2FsbCBhbnkgc3R5bGUgbW9kdWxlcyByZWZlcmVuY2VkIHZpYSB0aGUgYGluY2x1ZGVgIGF0dHJpYnV0ZSB3aWxsIGJlXG4gICAqIGNvbmNhdGVuYXRlZCB0byB0aGlzIGVsZW1lbnQncyBgPHN0eWxlPmAuXG4gICAqXG4gICAqIEBleHBvcnRcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH0gVGhpcyBlbGVtZW50J3MgbGlnaHQtRE9NIGA8c3R5bGU+YFxuICAgKi9cbiAgZ2V0U3R5bGUoKSB7XG4gICAgaWYgKHRoaXMuX3N0eWxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3R5bGU7XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlID0gLyoqIEB0eXBlIHtIVE1MU3R5bGVFbGVtZW50fSAqLyh0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpO1xuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9zdHlsZSA9IHN0eWxlO1xuICAgIGNvbnN0IGluY2x1ZGUgPSBzdHlsZS5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgaWYgKGluY2x1ZGUpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgIC8qKiBAc3VwcHJlc3Mge2RlcHJlY2F0ZWR9ICovXG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNzc0Zyb21Nb2R1bGVzKGluY2x1ZGUpICsgc3R5bGUudGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIC8qXG4gICAgSFRNTCBJbXBvcnRzIHN0eWxpbmcgdGhlIG1haW4gZG9jdW1lbnQgYXJlIGRlcHJlY2F0ZWQgaW4gQ2hyb21lXG4gICAgaHR0cHM6Ly9jcmJ1Zy5jb20vNTIzOTUyXG5cbiAgICBJZiB0aGlzIGVsZW1lbnQgaXMgbm90IGluIHRoZSBtYWluIGRvY3VtZW50LCB0aGVuIGl0IG11c3QgYmUgaW4gYW4gSFRNTCBJbXBvcnQgZG9jdW1lbnQuXG4gICAgSW4gdGhhdCBjYXNlLCBtb3ZlIHRoZSBjdXN0b20gc3R5bGUgdG8gdGhlIG1haW4gZG9jdW1lbnQuXG5cbiAgICBUaGUgb3JkZXJpbmcgb2YgYDxjdXN0b20tc3R5bGU+YCBzaG91bGQgc3RheSB0aGUgc2FtZSBhcyB3aGVuIGxvYWRlZCBieSBIVE1MIEltcG9ydHMsIGJ1dCB0aGVyZSBtYXkgYmUgb2RkXG4gICAgY2FzZXMgb2Ygb3JkZXJpbmcgdy5yLnQgdGhlIG1haW4gZG9jdW1lbnQgc3R5bGVzLlxuICAgICovXG4gICAgaWYgKHRoaXMub3duZXJEb2N1bWVudCAhPT0gd2luZG93LmRvY3VtZW50KSB7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3N0eWxlO1xuICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2N1c3RvbS1zdHlsZScsIEN1c3RvbVN0eWxlKTtcbiIsImltcG9ydCAnLi92ZXJzaW9uLmpzJztcbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9saWIvZWxlbWVudHMvY3VzdG9tLXN0eWxlLmpzJztcbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9saWIvZWxlbWVudHMvZG9tLW1vZHVsZS5qcyc7XG5jb25zdCAkX2RvY3VtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxuJF9kb2N1bWVudENvbnRhaW5lci5pbm5lckhUTUwgPSBgPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlPlxuICAgIGh0bWwge1xuICAgICAgLyogQmFzZSAoYmFja2dyb3VuZCkgKi9cbiAgICAgIC0tbHVtby1iYXNlLWNvbG9yOiAjRkZGO1xuXG4gICAgICAvKiBUaW50ICovXG4gICAgICAtLWx1bW8tdGludC01cGN0OiBoc2xhKDAsIDAlLCAxMDAlLCAwLjMpO1xuICAgICAgLS1sdW1vLXRpbnQtMTBwY3Q6IGhzbGEoMCwgMCUsIDEwMCUsIDAuMzcpO1xuICAgICAgLS1sdW1vLXRpbnQtMjBwY3Q6IGhzbGEoMCwgMCUsIDEwMCUsIDAuNDQpO1xuICAgICAgLS1sdW1vLXRpbnQtMzBwY3Q6IGhzbGEoMCwgMCUsIDEwMCUsIDAuNSk7XG4gICAgICAtLWx1bW8tdGludC00MHBjdDogaHNsYSgwLCAwJSwgMTAwJSwgMC41Nyk7XG4gICAgICAtLWx1bW8tdGludC01MHBjdDogaHNsYSgwLCAwJSwgMTAwJSwgMC42NCk7XG4gICAgICAtLWx1bW8tdGludC02MHBjdDogaHNsYSgwLCAwJSwgMTAwJSwgMC43KTtcbiAgICAgIC0tbHVtby10aW50LTcwcGN0OiBoc2xhKDAsIDAlLCAxMDAlLCAwLjc3KTtcbiAgICAgIC0tbHVtby10aW50LTgwcGN0OiBoc2xhKDAsIDAlLCAxMDAlLCAwLjg0KTtcbiAgICAgIC0tbHVtby10aW50LTkwcGN0OiBoc2xhKDAsIDAlLCAxMDAlLCAwLjkpO1xuICAgICAgLS1sdW1vLXRpbnQ6ICNGRkY7XG5cbiAgICAgIC8qIFNoYWRlICovXG4gICAgICAtLWx1bW8tc2hhZGUtNXBjdDogaHNsYSgyMTQsIDYxJSwgMjUlLCAwLjA1KTtcbiAgICAgIC0tbHVtby1zaGFkZS0xMHBjdDogaHNsYSgyMTQsIDU3JSwgMjQlLCAwLjEpO1xuICAgICAgLS1sdW1vLXNoYWRlLTIwcGN0OiBoc2xhKDIxNCwgNTMlLCAyMyUsIDAuMTYpO1xuICAgICAgLS1sdW1vLXNoYWRlLTMwcGN0OiBoc2xhKDIxNCwgNTAlLCAyMiUsIDAuMjYpO1xuICAgICAgLS1sdW1vLXNoYWRlLTQwcGN0OiBoc2xhKDIxNCwgNDclLCAyMSUsIDAuMzgpO1xuICAgICAgLS1sdW1vLXNoYWRlLTUwcGN0OiBoc2xhKDIxNCwgNDUlLCAyMCUsIDAuNSk7XG4gICAgICAtLWx1bW8tc2hhZGUtNjBwY3Q6IGhzbGEoMjE0LCA0MyUsIDE5JSwgMC42MSk7XG4gICAgICAtLWx1bW8tc2hhZGUtNzBwY3Q6IGhzbGEoMjE0LCA0MiUsIDE4JSwgMC43Mik7XG4gICAgICAtLWx1bW8tc2hhZGUtODBwY3Q6IGhzbGEoMjE0LCA0MSUsIDE3JSwgMC44Myk7XG4gICAgICAtLWx1bW8tc2hhZGUtOTBwY3Q6IGhzbGEoMjE0LCA0MCUsIDE2JSwgMC45NCk7XG4gICAgICAtLWx1bW8tc2hhZGU6IGhzbCgyMTQsIDM1JSwgMTUlKTtcblxuICAgICAgLyogQ29udHJhc3QgKi9cbiAgICAgIC0tbHVtby1jb250cmFzdC01cGN0OiB2YXIoLS1sdW1vLXNoYWRlLTVwY3QpO1xuICAgICAgLS1sdW1vLWNvbnRyYXN0LTEwcGN0OiB2YXIoLS1sdW1vLXNoYWRlLTEwcGN0KTtcbiAgICAgIC0tbHVtby1jb250cmFzdC0yMHBjdDogdmFyKC0tbHVtby1zaGFkZS0yMHBjdCk7XG4gICAgICAtLWx1bW8tY29udHJhc3QtMzBwY3Q6IHZhcigtLWx1bW8tc2hhZGUtMzBwY3QpO1xuICAgICAgLS1sdW1vLWNvbnRyYXN0LTQwcGN0OiB2YXIoLS1sdW1vLXNoYWRlLTQwcGN0KTtcbiAgICAgIC0tbHVtby1jb250cmFzdC01MHBjdDogdmFyKC0tbHVtby1zaGFkZS01MHBjdCk7XG4gICAgICAtLWx1bW8tY29udHJhc3QtNjBwY3Q6IHZhcigtLWx1bW8tc2hhZGUtNjBwY3QpO1xuICAgICAgLS1sdW1vLWNvbnRyYXN0LTcwcGN0OiB2YXIoLS1sdW1vLXNoYWRlLTcwcGN0KTtcbiAgICAgIC0tbHVtby1jb250cmFzdC04MHBjdDogdmFyKC0tbHVtby1zaGFkZS04MHBjdCk7XG4gICAgICAtLWx1bW8tY29udHJhc3QtOTBwY3Q6IHZhcigtLWx1bW8tc2hhZGUtOTBwY3QpO1xuICAgICAgLS1sdW1vLWNvbnRyYXN0OiB2YXIoLS1sdW1vLXNoYWRlKTtcblxuICAgICAgLyogVGV4dCAqL1xuICAgICAgLS1sdW1vLWhlYWRlci10ZXh0LWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0KTtcbiAgICAgIC0tbHVtby1ib2R5LXRleHQtY29sb3I6IHZhcigtLWx1bW8tY29udHJhc3QtOTBwY3QpO1xuICAgICAgLS1sdW1vLXNlY29uZGFyeS10ZXh0LWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTcwcGN0KTtcbiAgICAgIC0tbHVtby10ZXJ0aWFyeS10ZXh0LWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTUwcGN0KTtcbiAgICAgIC0tbHVtby1kaXNhYmxlZC10ZXh0LWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTMwcGN0KTtcblxuICAgICAgLyogUHJpbWFyeSAqL1xuICAgICAgLS1sdW1vLXByaW1hcnktY29sb3I6IGhzbCgyMTQsIDkwJSwgNTIlKTtcbiAgICAgIC0tbHVtby1wcmltYXJ5LWNvbG9yLTUwcGN0OiBoc2xhKDIxNCwgOTAlLCA1MiUsIDAuNSk7XG4gICAgICAtLWx1bW8tcHJpbWFyeS1jb2xvci0xMHBjdDogaHNsYSgyMTQsIDkwJSwgNTIlLCAwLjEpO1xuICAgICAgLS1sdW1vLXByaW1hcnktdGV4dC1jb2xvcjogdmFyKC0tbHVtby1wcmltYXJ5LWNvbG9yKTtcbiAgICAgIC0tbHVtby1wcmltYXJ5LWNvbnRyYXN0LWNvbG9yOiAjRkZGO1xuXG4gICAgICAvKiBFcnJvciAqL1xuICAgICAgLS1sdW1vLWVycm9yLWNvbG9yOiBoc2woMywgMTAwJSwgNjElKTtcbiAgICAgIC0tbHVtby1lcnJvci1jb2xvci01MHBjdDogaHNsYSgzLCAxMDAlLCA2MCUsIDAuNSk7XG4gICAgICAtLWx1bW8tZXJyb3ItY29sb3ItMTBwY3Q6IGhzbGEoMywgMTAwJSwgNjAlLCAwLjEpO1xuICAgICAgLS1sdW1vLWVycm9yLXRleHQtY29sb3I6IGhzbCgzLCA5MiUsIDUzJSk7XG4gICAgICAtLWx1bW8tZXJyb3ItY29udHJhc3QtY29sb3I6ICNGRkY7XG5cbiAgICAgIC8qIFN1Y2Nlc3MgKi9cbiAgICAgIC0tbHVtby1zdWNjZXNzLWNvbG9yOiBoc2woMTQ1LCA4MCUsIDQyJSk7IC8qIGhzbCgxNDQsODIlLDM3JSk7ICovXG4gICAgICAtLWx1bW8tc3VjY2Vzcy1jb2xvci01MHBjdDogaHNsYSgxNDUsIDc2JSwgNDQlLCAwLjU1KTtcbiAgICAgIC0tbHVtby1zdWNjZXNzLWNvbG9yLTEwcGN0OiBoc2xhKDE0NSwgNzYlLCA0NCUsIDAuMTIpO1xuICAgICAgLS1sdW1vLXN1Y2Nlc3MtdGV4dC1jb2xvcjogaHNsKDE0NSwgMTAwJSwgMzIlKTtcbiAgICAgIC0tbHVtby1zdWNjZXNzLWNvbnRyYXN0LWNvbG9yOiAjRkZGO1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvY3VzdG9tLXN0eWxlPjxkb20tbW9kdWxlIGlkPVwibHVtby1jb2xvclwiPlxuICA8dGVtcGxhdGU+XG4gICAgPHN0eWxlPlxuICAgICAgW3RoZW1lfj1cImRhcmtcIl0ge1xuICAgICAgICAvKiBCYXNlIChiYWNrZ3JvdW5kKSAqL1xuICAgICAgICAtLWx1bW8tYmFzZS1jb2xvcjogaHNsKDIxNCwgMzUlLCAyMSUpO1xuXG4gICAgICAgIC8qIFRpbnQgKi9cbiAgICAgICAgLS1sdW1vLXRpbnQtNXBjdDogaHNsYSgyMTQsIDY1JSwgODUlLCAwLjA2KTtcbiAgICAgICAgLS1sdW1vLXRpbnQtMTBwY3Q6IGhzbGEoMjE0LCA2MCUsIDgwJSwgMC4xNCk7XG4gICAgICAgIC0tbHVtby10aW50LTIwcGN0OiBoc2xhKDIxNCwgNjQlLCA4MiUsIDAuMjMpO1xuICAgICAgICAtLWx1bW8tdGludC0zMHBjdDogaHNsYSgyMTQsIDY5JSwgODQlLCAwLjMyKTtcbiAgICAgICAgLS1sdW1vLXRpbnQtNDBwY3Q6IGhzbGEoMjE0LCA3MyUsIDg2JSwgMC40MSk7XG4gICAgICAgIC0tbHVtby10aW50LTUwcGN0OiBoc2xhKDIxNCwgNzglLCA4OCUsIDAuNSk7XG4gICAgICAgIC0tbHVtby10aW50LTYwcGN0OiBoc2xhKDIxNCwgODIlLCA5MCUsIDAuNik7XG4gICAgICAgIC0tbHVtby10aW50LTcwcGN0OiBoc2xhKDIxNCwgODclLCA5MiUsIDAuNyk7XG4gICAgICAgIC0tbHVtby10aW50LTgwcGN0OiBoc2xhKDIxNCwgOTElLCA5NCUsIDAuOCk7XG4gICAgICAgIC0tbHVtby10aW50LTkwcGN0OiBoc2xhKDIxNCwgOTYlLCA5NiUsIDAuOSk7XG4gICAgICAgIC0tbHVtby10aW50OiBoc2woMjE0LCAxMDAlLCA5OCUpO1xuXG4gICAgICAgIC8qIFNoYWRlICovXG4gICAgICAgIC0tbHVtby1zaGFkZS01cGN0OiBoc2xhKDIxNCwgMCUsIDAlLCAwLjA3KTtcbiAgICAgICAgLS1sdW1vLXNoYWRlLTEwcGN0OiBoc2xhKDIxNCwgNCUsIDIlLCAwLjE1KTtcbiAgICAgICAgLS1sdW1vLXNoYWRlLTIwcGN0OiBoc2xhKDIxNCwgOCUsIDQlLCAwLjIzKTtcbiAgICAgICAgLS1sdW1vLXNoYWRlLTMwcGN0OiBoc2xhKDIxNCwgMTIlLCA2JSwgMC4zMik7XG4gICAgICAgIC0tbHVtby1zaGFkZS00MHBjdDogaHNsYSgyMTQsIDE2JSwgOCUsIDAuNDEpO1xuICAgICAgICAtLWx1bW8tc2hhZGUtNTBwY3Q6IGhzbGEoMjE0LCAyMCUsIDEwJSwgMC41KTtcbiAgICAgICAgLS1sdW1vLXNoYWRlLTYwcGN0OiBoc2xhKDIxNCwgMjQlLCAxMiUsIDAuNik7XG4gICAgICAgIC0tbHVtby1zaGFkZS03MHBjdDogaHNsYSgyMTQsIDI4JSwgMTMlLCAwLjcpO1xuICAgICAgICAtLWx1bW8tc2hhZGUtODBwY3Q6IGhzbGEoMjE0LCAzMiUsIDEzJSwgMC44KTtcbiAgICAgICAgLS1sdW1vLXNoYWRlLTkwcGN0OiBoc2xhKDIxNCwgMzMlLCAxMyUsIDAuOSk7XG4gICAgICAgIC0tbHVtby1zaGFkZTogaHNsKDIxNCwgMzMlLCAxMyUpO1xuXG4gICAgICAgIC8qIENvbnRyYXN0ICovXG4gICAgICAgIC0tbHVtby1jb250cmFzdC01cGN0OiB2YXIoLS1sdW1vLXRpbnQtNXBjdCk7XG4gICAgICAgIC0tbHVtby1jb250cmFzdC0xMHBjdDogdmFyKC0tbHVtby10aW50LTEwcGN0KTtcbiAgICAgICAgLS1sdW1vLWNvbnRyYXN0LTIwcGN0OiB2YXIoLS1sdW1vLXRpbnQtMjBwY3QpO1xuICAgICAgICAtLWx1bW8tY29udHJhc3QtMzBwY3Q6IHZhcigtLWx1bW8tdGludC0zMHBjdCk7XG4gICAgICAgIC0tbHVtby1jb250cmFzdC00MHBjdDogdmFyKC0tbHVtby10aW50LTQwcGN0KTtcbiAgICAgICAgLS1sdW1vLWNvbnRyYXN0LTUwcGN0OiB2YXIoLS1sdW1vLXRpbnQtNTBwY3QpO1xuICAgICAgICAtLWx1bW8tY29udHJhc3QtNjBwY3Q6IHZhcigtLWx1bW8tdGludC02MHBjdCk7XG4gICAgICAgIC0tbHVtby1jb250cmFzdC03MHBjdDogdmFyKC0tbHVtby10aW50LTcwcGN0KTtcbiAgICAgICAgLS1sdW1vLWNvbnRyYXN0LTgwcGN0OiB2YXIoLS1sdW1vLXRpbnQtODBwY3QpO1xuICAgICAgICAtLWx1bW8tY29udHJhc3QtOTBwY3Q6IHZhcigtLWx1bW8tdGludC05MHBjdCk7XG4gICAgICAgIC0tbHVtby1jb250cmFzdDogdmFyKC0tbHVtby10aW50KTtcblxuICAgICAgICAvKiBUZXh0ICovXG4gICAgICAgIC0tbHVtby1oZWFkZXItdGV4dC1jb2xvcjogdmFyKC0tbHVtby1jb250cmFzdCk7XG4gICAgICAgIC0tbHVtby1ib2R5LXRleHQtY29sb3I6IHZhcigtLWx1bW8tY29udHJhc3QtOTBwY3QpO1xuICAgICAgICAtLWx1bW8tc2Vjb25kYXJ5LXRleHQtY29sb3I6IHZhcigtLWx1bW8tY29udHJhc3QtNzBwY3QpO1xuICAgICAgICAtLWx1bW8tdGVydGlhcnktdGV4dC1jb2xvcjogdmFyKC0tbHVtby1jb250cmFzdC01MHBjdCk7XG4gICAgICAgIC0tbHVtby1kaXNhYmxlZC10ZXh0LWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTMwcGN0KTtcblxuICAgICAgICAvKiBQcmltYXJ5ICovXG4gICAgICAgIC0tbHVtby1wcmltYXJ5LWNvbG9yOiBoc2woMjE0LCA4NiUsIDU1JSk7XG4gICAgICAgIC0tbHVtby1wcmltYXJ5LWNvbG9yLTUwcGN0OiBoc2xhKDIxNCwgODYlLCA1NSUsIDAuNSk7XG4gICAgICAgIC0tbHVtby1wcmltYXJ5LWNvbG9yLTEwcGN0OiBoc2xhKDIxNCwgOTAlLCA2MyUsIDAuMSk7XG4gICAgICAgIC0tbHVtby1wcmltYXJ5LXRleHQtY29sb3I6IGhzbCgyMTQsIDEwMCUsIDcwJSk7XG4gICAgICAgIC0tbHVtby1wcmltYXJ5LWNvbnRyYXN0LWNvbG9yOiAjRkZGO1xuXG4gICAgICAgIC8qIEVycm9yICovXG4gICAgICAgIC0tbHVtby1lcnJvci1jb2xvcjogaHNsKDMsIDkwJSwgNjMlKTtcbiAgICAgICAgLS1sdW1vLWVycm9yLWNvbG9yLTUwcGN0OiBoc2xhKDMsIDkwJSwgNjMlLCAwLjUpO1xuICAgICAgICAtLWx1bW8tZXJyb3ItY29sb3ItMTBwY3Q6IGhzbGEoMywgOTAlLCA2MyUsIDAuMSk7XG4gICAgICAgIC0tbHVtby1lcnJvci10ZXh0LWNvbG9yOiBoc2woMywgMTAwJSwgNjclKTtcblxuICAgICAgICAvKiBTdWNjZXNzICovXG4gICAgICAgIC0tbHVtby1zdWNjZXNzLWNvbG9yOiBoc2woMTQ1LCA2NSUsIDQyJSk7XG4gICAgICAgIC0tbHVtby1zdWNjZXNzLWNvbG9yLTUwcGN0OiBoc2xhKDE0NSwgNjUlLCA0MiUsIDAuNSk7XG4gICAgICAgIC0tbHVtby1zdWNjZXNzLWNvbG9yLTEwcGN0OiBoc2xhKDE0NSwgNjUlLCA0MiUsIDAuMSk7XG4gICAgICAgIC0tbHVtby1zdWNjZXNzLXRleHQtY29sb3I6IGhzbCgxNDUsIDg1JSwgNDclKTtcbiAgICAgIH1cblxuICAgICAgaHRtbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1sdW1vLWJvZHktdGV4dC1jb2xvcik7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWx1bW8tYmFzZS1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIFt0aGVtZX49XCJkYXJrXCJdIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWx1bW8tYm9keS10ZXh0LWNvbG9yKTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbHVtby1iYXNlLWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgaDEsXG4gICAgICBoMixcbiAgICAgIGgzLFxuICAgICAgaDQsXG4gICAgICBoNSxcbiAgICAgIGg2IHtcbiAgICAgICAgY29sb3I6IHZhcigtLWx1bW8taGVhZGVyLXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICBhIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWx1bW8tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgYmxvY2txdW90ZSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1sdW1vLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cblxuICAgICAgY29kZSxcbiAgICAgIHByZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWx1bW8tY29udHJhc3QtMTBwY3QpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1sdW1vLWJvcmRlci1yYWRpdXMtbSk7XG4gICAgICB9XG4gICAgPC9zdHlsZT5cbiAgPC90ZW1wbGF0ZT5cbjwvZG9tLW1vZHVsZT48ZG9tLW1vZHVsZSBpZD1cImx1bW8tY29sb3ItbGVnYWN5XCI+XG4gIDx0ZW1wbGF0ZT5cbiAgICA8c3R5bGUgaW5jbHVkZT1cImx1bW8tY29sb3JcIj5cbiAgICAgIDpob3N0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLWx1bW8tYm9keS10ZXh0LWNvbG9yKSAhaW1wb3J0YW50O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1sdW1vLWJhc2UtY29sb3IpICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgPC9zdHlsZT5cbiAgPC90ZW1wbGF0ZT5cbjwvZG9tLW1vZHVsZT5gO1xuXG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCRfZG9jdW1lbnRDb250YWluZXIuY29udGVudCk7XG5cbi8qIE9ubHkgbmVlZGVkIGZvciBJRTExIHdoZW4geW91IHdhbnQgdG8gdXNlIHRoZSBkYXJrIHBhbGV0dGUgaW5zaWRlIHRoZSBsaWdodCBwYWxldHRlICovXG4vKlxuICBGSVhNRShwb2x5bWVyLW1vZHVsaXplcik6IHRoZSBhYm92ZSBjb21tZW50cyB3ZXJlIGV4dHJhY3RlZFxuICBmcm9tIEhUTUwgYW5kIG1heSBiZSBvdXQgb2YgcGxhY2UgaGVyZS4gUmV2aWV3IHRoZW0gYW5kXG4gIHRoZW4gZGVsZXRlIHRoaXMgY29tbWVudCFcbiovXG47XG4iLCJpbXBvcnQgJy4vdmVyc2lvbi5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2N1c3RvbS1zdHlsZS5qcyc7XG5jb25zdCAkX2RvY3VtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxuJF9kb2N1bWVudENvbnRhaW5lci5pbm5lckhUTUwgPSBgPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlPlxuICAgIGh0bWwge1xuICAgICAgLS1sdW1vLXNpemUteHM6IDEuNjI1cmVtO1xuICAgICAgLS1sdW1vLXNpemUtczogMS44NzVyZW07XG4gICAgICAtLWx1bW8tc2l6ZS1tOiAyLjI1cmVtO1xuICAgICAgLS1sdW1vLXNpemUtbDogMi43NXJlbTtcbiAgICAgIC0tbHVtby1zaXplLXhsOiAzLjVyZW07XG5cbiAgICAgIC8qIEljb25zICovXG4gICAgICAtLWx1bW8taWNvbi1zaXplLXM6IDEuMjVlbTtcbiAgICAgIC0tbHVtby1pY29uLXNpemUtbTogMS41ZW07XG4gICAgICAtLWx1bW8taWNvbi1zaXplLWw6IDIuMjVlbTtcbiAgICAgIC8qIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSAqL1xuICAgICAgLS1sdW1vLWljb24tc2l6ZTogdmFyKC0tbHVtby1pY29uLXNpemUtbSk7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9jdXN0b20tc3R5bGU+YDtcblxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCgkX2RvY3VtZW50Q29udGFpbmVyLmNvbnRlbnQpO1xuIiwiaW1wb3J0ICcuL3ZlcnNpb24uanMnO1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL2xpYi9lbGVtZW50cy9jdXN0b20tc3R5bGUuanMnO1xuY29uc3QgJF9kb2N1bWVudENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cbiRfZG9jdW1lbnRDb250YWluZXIuaW5uZXJIVE1MID0gYDxjdXN0b20tc3R5bGU+XG4gIDxzdHlsZT5cbiAgICBodG1sIHtcbiAgICAgIC8qIFNxdWFyZSAqL1xuICAgICAgLS1sdW1vLXNwYWNlLXhzOiAwLjI1cmVtO1xuICAgICAgLS1sdW1vLXNwYWNlLXM6IDAuNXJlbTtcbiAgICAgIC0tbHVtby1zcGFjZS1tOiAxcmVtO1xuICAgICAgLS1sdW1vLXNwYWNlLWw6IDEuNXJlbTtcbiAgICAgIC0tbHVtby1zcGFjZS14bDogMi41cmVtO1xuXG4gICAgICAvKiBXaWRlICovXG4gICAgICAtLWx1bW8tc3BhY2Utd2lkZS14czogY2FsYyh2YXIoLS1sdW1vLXNwYWNlLXhzKSAvIDIpIHZhcigtLWx1bW8tc3BhY2UteHMpO1xuICAgICAgLS1sdW1vLXNwYWNlLXdpZGUtczogY2FsYyh2YXIoLS1sdW1vLXNwYWNlLXMpIC8gMikgdmFyKC0tbHVtby1zcGFjZS1zKTtcbiAgICAgIC0tbHVtby1zcGFjZS13aWRlLW06IGNhbGModmFyKC0tbHVtby1zcGFjZS1tKSAvIDIpIHZhcigtLWx1bW8tc3BhY2UtbSk7XG4gICAgICAtLWx1bW8tc3BhY2Utd2lkZS1sOiBjYWxjKHZhcigtLWx1bW8tc3BhY2UtbCkgLyAyKSB2YXIoLS1sdW1vLXNwYWNlLWwpO1xuICAgICAgLS1sdW1vLXNwYWNlLXdpZGUteGw6IGNhbGModmFyKC0tbHVtby1zcGFjZS14bCkgLyAyKSB2YXIoLS1sdW1vLXNwYWNlLXhsKTtcblxuICAgICAgLyogVGFsbCAqL1xuICAgICAgLS1sdW1vLXNwYWNlLXRhbGwteHM6IHZhcigtLWx1bW8tc3BhY2UteHMpIGNhbGModmFyKC0tbHVtby1zcGFjZS14cykgLyAyKTtcbiAgICAgIC0tbHVtby1zcGFjZS10YWxsLXM6IHZhcigtLWx1bW8tc3BhY2UtcykgY2FsYyh2YXIoLS1sdW1vLXNwYWNlLXMpIC8gMik7XG4gICAgICAtLWx1bW8tc3BhY2UtdGFsbC1tOiB2YXIoLS1sdW1vLXNwYWNlLW0pIGNhbGModmFyKC0tbHVtby1zcGFjZS1tKSAvIDIpO1xuICAgICAgLS1sdW1vLXNwYWNlLXRhbGwtbDogdmFyKC0tbHVtby1zcGFjZS1sKSBjYWxjKHZhcigtLWx1bW8tc3BhY2UtbCkgLyAyKTtcbiAgICAgIC0tbHVtby1zcGFjZS10YWxsLXhsOiB2YXIoLS1sdW1vLXNwYWNlLXhsKSBjYWxjKHZhcigtLWx1bW8tc3BhY2UteGwpIC8gMik7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9jdXN0b20tc3R5bGU+YDtcblxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCgkX2RvY3VtZW50Q29udGFpbmVyLmNvbnRlbnQpO1xuIiwiaW1wb3J0ICcuL3ZlcnNpb24uanMnO1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL2xpYi9lbGVtZW50cy9jdXN0b20tc3R5bGUuanMnO1xuY29uc3QgJF9kb2N1bWVudENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cbiRfZG9jdW1lbnRDb250YWluZXIuaW5uZXJIVE1MID0gYDxjdXN0b20tc3R5bGU+XG4gIDxzdHlsZT5cbiAgICBodG1sIHtcbiAgICAgIC8qIEJvcmRlciByYWRpdXMgKi9cbiAgICAgIC0tbHVtby1ib3JkZXItcmFkaXVzLXM6IDAuMjVlbTsgLyogQ2hlY2tib3gsIGJhZGdlLCBkYXRlLXBpY2tlciB5ZWFyIGluZGljYXRvciwgZXRjICovXG4gICAgICAtLWx1bW8tYm9yZGVyLXJhZGl1cy1tOiB2YXIoLS1sdW1vLWJvcmRlci1yYWRpdXMsIDAuMjVlbSk7IC8qIEJ1dHRvbiwgdGV4dCBmaWVsZCwgbWVudSBvdmVybGF5LCBldGMgKi9cbiAgICAgIC0tbHVtby1ib3JkZXItcmFkaXVzLWw6IDAuNWVtOyAvKiBEaWFsb2csIG5vdGlmaWNhdGlvbiwgZXRjICovXG4gICAgICAtLWx1bW8tYm9yZGVyLXJhZGl1czogMC4yNWVtOyAvKiBEZXByZWNhdGVkICovXG5cbiAgICAgIC8qIFNoYWRvdyAqL1xuICAgICAgLS1sdW1vLWJveC1zaGFkb3cteHM6IDAgMXB4IDRweCAtMXB4IHZhcigtLWx1bW8tc2hhZGUtNTBwY3QpO1xuICAgICAgLS1sdW1vLWJveC1zaGFkb3ctczogMCAycHggNHB4IC0xcHggdmFyKC0tbHVtby1zaGFkZS0yMHBjdCksIDAgM3B4IDEycHggLTFweCB2YXIoLS1sdW1vLXNoYWRlLTMwcGN0KTtcbiAgICAgIC0tbHVtby1ib3gtc2hhZG93LW06IDAgMnB4IDZweCAtMXB4IHZhcigtLWx1bW8tc2hhZGUtMjBwY3QpLCAwIDhweCAyNHB4IC00cHggdmFyKC0tbHVtby1zaGFkZS00MHBjdCk7XG4gICAgICAtLWx1bW8tYm94LXNoYWRvdy1sOiAwIDNweCAxOHB4IC0ycHggdmFyKC0tbHVtby1zaGFkZS0yMHBjdCksIDAgMTJweCA0OHB4IC02cHggdmFyKC0tbHVtby1zaGFkZS00MHBjdCk7XG4gICAgICAtLWx1bW8tYm94LXNoYWRvdy14bDogMCA0cHggMjRweCAtM3B4IHZhcigtLWx1bW8tc2hhZGUtMjBwY3QpLCAwIDE4cHggNjRweCAtOHB4IHZhcigtLWx1bW8tc2hhZGUtNDBwY3QpO1xuXG4gICAgICAvKiBDbGlja2FibGUgZWxlbWVudCBjdXJzb3IgKi9cbiAgICAgIC0tbHVtby1jbGlja2FibGUtY3Vyc29yOiBkZWZhdWx0O1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvY3VzdG9tLXN0eWxlPmA7XG5cbmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoJF9kb2N1bWVudENvbnRhaW5lci5jb250ZW50KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgc3RhdGljIHN0cmluZyB2YWx1ZSB3aGljaCBjYW4gYmUgdXNlZCB0byBmaWx0ZXJcbiAqIHN0cmluZ3MgYnkgYXNzZXRpbmcgdGhhdCB0aGV5IGhhdmUgYmVlbiBjcmVhdGVkIHZpYSB0aGlzIGNsYXNzLiBUaGVcbiAqIGB2YWx1ZWAgcHJvcGVydHkgcmV0dXJucyB0aGUgc3RyaW5nIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gKi9cbmNsYXNzIExpdGVyYWxTdHJpbmcge1xuICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzLnZhbHVlID0gc3RyaW5nLnRvU3RyaW5nKCk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTGl0ZXJhbFN0cmluZyBzdHJpbmcgdmFsdWVcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgT2JqZWN0IHRvIHN0cmluZ2lmeSBpbnRvIEhUTUxcbiAqIEByZXR1cm4ge3N0cmluZ30gSFRNTCBzdHJpbmdpZmllZCBmb3JtIG9mIGBvYmpgXG4gKi9cbmZ1bmN0aW9uIGxpdGVyYWxWYWx1ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBMaXRlcmFsU3RyaW5nKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUxpdGVyYWxTdHJpbmd9ICovKHZhbHVlKS52YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBub24tbGl0ZXJhbCB2YWx1ZSBwYXNzZWQgdG8gUG9seW1lcidzIGh0bWxMaXRlcmFsIGZ1bmN0aW9uOiAke3ZhbHVlfWBcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBPYmplY3QgdG8gc3RyaW5naWZ5IGludG8gSFRNTFxuICogQHJldHVybiB7c3RyaW5nfSBIVE1MIHN0cmluZ2lmaWVkIGZvcm0gb2YgYG9iamBcbiAqL1xuZnVuY3Rpb24gaHRtbFZhbHVlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudCB9ICovKHZhbHVlKS5pbm5lckhUTUw7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBMaXRlcmFsU3RyaW5nKSB7XG4gICAgcmV0dXJuIGxpdGVyYWxWYWx1ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgbm9uLXRlbXBsYXRlIHZhbHVlIHBhc3NlZCB0byBQb2x5bWVyJ3MgaHRtbCBmdW5jdGlvbjogJHt2YWx1ZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgdGVtcGxhdGUgbGl0ZXJhbCB0YWcgdGhhdCBjcmVhdGVzIGFuIEhUTUwgPHRlbXBsYXRlPiBlbGVtZW50IGZyb20gdGhlXG4gKiBjb250ZW50cyBvZiB0aGUgc3RyaW5nLlxuICpcbiAqIFRoaXMgYWxsb3dzIHlvdSB0byB3cml0ZSBhIFBvbHltZXIgVGVtcGxhdGUgaW4gSmF2YVNjcmlwdC5cbiAqXG4gKiBUZW1wbGF0ZXMgY2FuIGJlIGNvbXBvc2VkIGJ5IGludGVycG9sYXRpbmcgYEhUTUxUZW1wbGF0ZUVsZW1lbnRgcyBpblxuICogZXhwcmVzc2lvbnMgaW4gdGhlIEphdmFTY3JpcHQgdGVtcGxhdGUgbGl0ZXJhbC4gVGhlIG5lc3RlZCB0ZW1wbGF0ZSdzXG4gKiBgaW5uZXJIVE1MYCBpcyBpbmNsdWRlZCBpbiB0aGUgY29udGFpbmluZyB0ZW1wbGF0ZS4gIFRoZSBvbmx5IG90aGVyXG4gKiB2YWx1ZXMgYWxsb3dlZCBpbiBleHByZXNzaW9ucyBhcmUgdGhvc2UgcmV0dXJuZWQgZnJvbSBgaHRtbExpdGVyYWxgXG4gKiB3aGljaCBlbnN1cmVzIG9ubHkgbGl0ZXJhbCB2YWx1ZXMgZnJvbSBKUyBzb3VyY2UgZXZlciByZWFjaCB0aGUgSFRNTCwgdG9cbiAqIGd1YXJkIGFnYWluc3QgWFNTIHJpc2tzLlxuICpcbiAqIEFsbCBvdGhlciB2YWx1ZXMgYXJlIGRpc2FsbG93ZWQgaW4gZXhwcmVzc2lvbnMgdG8gaGVscCBwcmV2ZW50IFhTU1xuICogYXR0YWNrczsgaG93ZXZlciwgYGh0bWxMaXRlcmFsYCBjYW4gYmUgdXNlZCB0byBjb21wb3NlIHN0YXRpY1xuICogc3RyaW5nIHZhbHVlcyBpbnRvIHRlbXBsYXRlcy4gVGhpcyBpcyB1c2VmdWwgdG8gY29tcG9zZSBzdHJpbmdzIGludG9cbiAqIHBsYWNlcyB0aGF0IGRvIG5vdCBhY2NlcHQgaHRtbCwgbGlrZSB0aGUgY3NzIHRleHQgb2YgYSBgc3R5bGVgXG4gKiBlbGVtZW50LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gKiAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgPHN0eWxlPjpob3N0eyBjb250ZW50OlwiLi4uXCIgfTwvc3R5bGU+XG4gKiAgICAgICAgIDxkaXYgY2xhc3M9XCJzaGFkb3dlZFwiPiR7dGhpcy5wYXJ0aWFsVGVtcGxhdGV9PC9kaXY+XG4gKiAgICAgICAgICR7c3VwZXIudGVtcGxhdGV9XG4gKiAgICAgICBgO1xuICogICAgIH1cbiAqICAgICBzdGF0aWMgZ2V0IHBhcnRpYWxUZW1wbGF0ZSgpIHsgcmV0dXJuIGh0bWxgPHNwYW4+UGFydGlhbCE8L3NwYW4+YDsgfVxuICpcbiAqIEBwYXJhbSB7IUlUZW1wbGF0ZUFycmF5fSBzdHJpbmdzIENvbnN0YW50IHBhcnRzIG9mIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsXG4gKiBAcGFyYW0gey4uLip9IHZhbHVlcyBWYXJpYWJsZSBwYXJ0cyBvZiB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbFxuICogQHJldHVybiB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IENvbnN0cnVjdGVkIEhUTUxUZW1wbGF0ZUVsZW1lbnRcbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSBmdW5jdGlvbiBodG1sKHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICBjb25zdCB0ZW1wbGF0ZSA9IC8qKiBAdHlwZSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJykpO1xuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB2YWx1ZXMucmVkdWNlKChhY2MsIHYsIGlkeCkgPT5cbiAgICAgIGFjYyArIGh0bWxWYWx1ZSh2KSArIHN0cmluZ3NbaWR4ICsgMV0sIHN0cmluZ3NbMF0pO1xuICByZXR1cm4gdGVtcGxhdGU7XG59O1xuXG4vKipcbiAqIEFuIGh0bWwgbGl0ZXJhbCB0YWcgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGBodG1sYCB0byBjb21wb3NlLlxuICogYSBsaXRlcmFsIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkge1xuICogICAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgIDxzdHlsZT5cbiAqICAgICAgICAgICA6aG9zdCB7IGRpc3BsYXk6IGJsb2NrOyB9XG4gKiAgICAgICAgICAgJHt0aGlzLnN0eWxlVGVtcGxhdGUoKX1cbiAqICAgICAgICAgPC9zdHlsZT5cbiAqICAgICAgICAgPGRpdiBjbGFzcz1cInNoYWRvd2VkXCI+JHtzdGF0aWNWYWx1ZX08L2Rpdj5cbiAqICAgICAgICAgJHtzdXBlci50ZW1wbGF0ZX1cbiAqICAgICAgIGA7XG4gKiAgICAgfVxuICogICAgIHN0YXRpYyBnZXQgc3R5bGVUZW1wbGF0ZSgpIHtcbiAqICAgICAgICByZXR1cm4gaHRtbExpdGVyYWxgLnNoYWRvd2VkIHsgYmFja2dyb3VuZDogZ3JheTsgfWA7XG4gKiAgICAgfVxuICpcbiAqIEBwYXJhbSB7IUlUZW1wbGF0ZUFycmF5fSBzdHJpbmdzIENvbnN0YW50IHBhcnRzIG9mIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsXG4gKiBAcGFyYW0gey4uLip9IHZhbHVlcyBWYXJpYWJsZSBwYXJ0cyBvZiB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbFxuICogQHJldHVybiB7IUxpdGVyYWxTdHJpbmd9IENvbnN0cnVjdGVkIGxpdGVyYWwgc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBodG1sTGl0ZXJhbCA9IGZ1bmN0aW9uKHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICByZXR1cm4gbmV3IExpdGVyYWxTdHJpbmcodmFsdWVzLnJlZHVjZSgoYWNjLCB2LCBpZHgpID0+XG4gICAgICBhY2MgKyBsaXRlcmFsVmFsdWUodikgKyBzdHJpbmdzW2lkeCArIDFdLCBzdHJpbmdzWzBdKSk7XG59O1xuIiwiaW1wb3J0ICdAdmFhZGluL3ZhYWRpbi1sdW1vLXN0eWxlcy9jb2xvci5qcyc7XG5pbXBvcnQgJ0B2YWFkaW4vdmFhZGluLWx1bW8tc3R5bGVzL3NpemluZy5qcyc7XG5pbXBvcnQgJ0B2YWFkaW4vdmFhZGluLWx1bW8tc3R5bGVzL3NwYWNpbmcuanMnO1xuaW1wb3J0ICdAdmFhZGluL3ZhYWRpbi1sdW1vLXN0eWxlcy9zdHlsZS5qcyc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG5jb25zdCAkX2RvY3VtZW50Q29udGFpbmVyID0gaHRtbGA8ZG9tLW1vZHVsZSBpZD1cImx1bW8tc3BsaXQtbGF5b3V0XCIgdGhlbWUtZm9yPVwidmFhZGluLXNwbGl0LWxheW91dFwiPlxuICA8dGVtcGxhdGU+XG4gICAgPHN0eWxlPlxuICAgICAgW3BhcnQ9XCJzcGxpdHRlclwiXSB7XG4gICAgICAgIG1pbi13aWR0aDogdmFyKC0tbHVtby1zcGFjZS1zKTtcbiAgICAgICAgbWluLWhlaWdodDogdmFyKC0tbHVtby1zcGFjZS1zKTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbHVtby1jb250cmFzdC01cGN0KTtcbiAgICAgICAgdHJhbnNpdGlvbjogMC4xcyBiYWNrZ3JvdW5kLWNvbG9yO1xuICAgICAgfVxuXG4gICAgICBbcGFydD1cImhhbmRsZVwiXSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICB3aWR0aDogdmFyKC0tbHVtby1zaXplLW0pO1xuICAgICAgICBoZWlnaHQ6IHZhcigtLWx1bW8tc2l6ZS1tKTtcbiAgICAgIH1cblxuICAgICAgW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyIHtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiA0cHg7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1sdW1vLWJvcmRlci1yYWRpdXMpO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTMwcGN0KTtcbiAgICAgICAgdHJhbnNpdGlvbjogMC4xcyBvcGFjaXR5LCAwLjFzIGJhY2tncm91bmQtY29sb3I7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtvcmllbnRhdGlvbj1cInZlcnRpY2FsXCJdKSBbcGFydD1cImhhbmRsZVwiXTo6YWZ0ZXIge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIEhvdmVyIHN0eWxlICovXG5cbiAgICAgIFtwYXJ0PVwic3BsaXR0ZXJcIl06aG92ZXIgW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbHVtby1jb250cmFzdC00MHBjdCk7XG4gICAgICB9XG5cbiAgICAgIC8qIERpc2FibGUgaG92ZXIgZm9yIHRvdWNoIGRldmljZXMgKi9cbiAgICAgIEBtZWRpYSAocG9pbnRlcjogY29hcnNlKSB7XG4gICAgICAgIFtwYXJ0PVwic3BsaXR0ZXJcIl06aG92ZXIgW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1sdW1vLWNvbnRyYXN0LTMwcGN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBBY3RpdmUgc3R5bGUgKi9cblxuICAgICAgW3BhcnQ9XCJzcGxpdHRlclwiXTphY3RpdmUgW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbHVtby1jb250cmFzdC01MHBjdCk7XG4gICAgICB9XG5cbiAgICAgIC8qIFNtYWxsL21pbmltYWwgKi9cblxuICAgICAgOmhvc3QoW3RoZW1lfj1cInNtYWxsXCJdKSA+IFtwYXJ0PVwic3BsaXR0ZXJcIl0ge1xuICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWx1bW8tY29udHJhc3QtMTBwY3QpO1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tbHVtby1jb250cmFzdC0xMHBjdCk7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFt0aGVtZX49XCJzbWFsbFwiXSkgPiBbcGFydD1cInNwbGl0dGVyXCJdLFxuICAgICAgOmhvc3QoW3RoZW1lfj1cIm1pbmltYWxcIl0pID4gW3BhcnQ9XCJzcGxpdHRlclwiXSB7XG4gICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFt0aGVtZX49XCJzbWFsbFwiXSkgPiBbcGFydD1cInNwbGl0dGVyXCJdOjphZnRlcixcbiAgICAgIDpob3N0KFt0aGVtZX49XCJtaW5pbWFsXCJdKSA+IFtwYXJ0PVwic3BsaXR0ZXJcIl06OmFmdGVyIHtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC00cHg7XG4gICAgICAgIHJpZ2h0OiAtNHB4O1xuICAgICAgICBib3R0b206IC00cHg7XG4gICAgICAgIGxlZnQ6IC00cHg7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFt0aGVtZX49XCJzbWFsbFwiXSkgPiBbcGFydD1cInNwbGl0dGVyXCJdID4gW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyLFxuICAgICAgOmhvc3QoW3RoZW1lfj1cIm1pbmltYWxcIl0pID4gW3BhcnQ9XCJzcGxpdHRlclwiXSA+IFtwYXJ0PVwiaGFuZGxlXCJdOjphZnRlciB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFt0aGVtZX49XCJzbWFsbFwiXSkgPiBbcGFydD1cInNwbGl0dGVyXCJdOmhvdmVyID4gW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyLFxuICAgICAgOmhvc3QoW3RoZW1lfj1cInNtYWxsXCJdKSA+IFtwYXJ0PVwic3BsaXR0ZXJcIl06YWN0aXZlID4gW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyLFxuICAgICAgOmhvc3QoW3RoZW1lfj1cIm1pbmltYWxcIl0pID4gW3BhcnQ9XCJzcGxpdHRlclwiXTpob3ZlciA+IFtwYXJ0PVwiaGFuZGxlXCJdOjphZnRlcixcbiAgICAgIDpob3N0KFt0aGVtZX49XCJtaW5pbWFsXCJdKSA+IFtwYXJ0PVwic3BsaXR0ZXJcIl06YWN0aXZlID4gW3BhcnQ9XCJoYW5kbGVcIl06OmFmdGVyIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuICA8L3RlbXBsYXRlPlxuPC9kb20tbW9kdWxlPmA7XG5cbmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoJF9kb2N1bWVudENvbnRhaW5lci5jb250ZW50KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbi8vIHVuaXF1ZSBnbG9iYWwgaWQgZm9yIGRlZHVwaW5nIG1peGlucy5cbmxldCBkZWR1cGVJZCA9IDA7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7RnVuY3Rpb259XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBNaXhpbkZ1bmN0aW9uKCl7fVxuLyoqIEB0eXBlIHsoV2Vha01hcCB8IHVuZGVmaW5lZCl9ICovXG5NaXhpbkZ1bmN0aW9uLnByb3RvdHlwZS5fX21peGluQXBwbGljYXRpb25zO1xuLyoqIEB0eXBlIHsoT2JqZWN0IHwgdW5kZWZpbmVkKX0gKi9cbk1peGluRnVuY3Rpb24ucHJvdG90eXBlLl9fbWl4aW5TZXQ7XG5cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG4vKipcbiAqIFdyYXBzIGFuIEVTNiBjbGFzcyBleHByZXNzaW9uIG1peGluIHN1Y2ggdGhhdCB0aGUgbWl4aW4gaXMgb25seSBhcHBsaWVkXG4gKiBpZiBpdCBoYXMgbm90IGFscmVhZHkgYmVlbiBhcHBsaWVkIGl0cyBiYXNlIGFyZ3VtZW50LiBBbHNvIG1lbW9pemVzIG1peGluXG4gKiBhcHBsaWNhdGlvbnMuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7VH0gbWl4aW4gRVM2IGNsYXNzIGV4cHJlc3Npb24gbWl4aW4gdG8gd3JhcFxuICogQHJldHVybiB7VH1cbiAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfVxuICovXG5leHBvcnQgY29uc3QgZGVkdXBpbmdNaXhpbiA9IGZ1bmN0aW9uKG1peGluKSB7XG4gIGxldCBtaXhpbkFwcGxpY2F0aW9ucyA9IC8qKiBAdHlwZSB7IU1peGluRnVuY3Rpb259ICovKG1peGluKS5fX21peGluQXBwbGljYXRpb25zO1xuICBpZiAoIW1peGluQXBwbGljYXRpb25zKSB7XG4gICAgbWl4aW5BcHBsaWNhdGlvbnMgPSBuZXcgV2Vha01hcCgpO1xuICAgIC8qKiBAdHlwZSB7IU1peGluRnVuY3Rpb259ICovKG1peGluKS5fX21peGluQXBwbGljYXRpb25zID0gbWl4aW5BcHBsaWNhdGlvbnM7XG4gIH1cbiAgLy8gbWFpbnRhaW4gYSB1bmlxdWUgaWQgZm9yIGVhY2ggbWl4aW5cbiAgbGV0IG1peGluRGVkdXBlSWQgPSBkZWR1cGVJZCsrO1xuICBmdW5jdGlvbiBkZWR1cGluZ01peGluKGJhc2UpIHtcbiAgICBsZXQgYmFzZVNldCA9IC8qKiBAdHlwZSB7IU1peGluRnVuY3Rpb259ICovKGJhc2UpLl9fbWl4aW5TZXQ7XG4gICAgaWYgKGJhc2VTZXQgJiYgYmFzZVNldFttaXhpbkRlZHVwZUlkXSkge1xuICAgICAgcmV0dXJuIGJhc2U7XG4gICAgfVxuICAgIGxldCBtYXAgPSBtaXhpbkFwcGxpY2F0aW9ucztcbiAgICBsZXQgZXh0ZW5kZWQgPSBtYXAuZ2V0KGJhc2UpO1xuICAgIGlmICghZXh0ZW5kZWQpIHtcbiAgICAgIGV4dGVuZGVkID0gLyoqIEB0eXBlIHshRnVuY3Rpb259ICovKG1peGluKShiYXNlKTtcbiAgICAgIG1hcC5zZXQoYmFzZSwgZXh0ZW5kZWQpO1xuICAgIH1cbiAgICAvLyBjb3B5IGluaGVyaXRlZCBtaXhpbiBzZXQgZnJvbSB0aGUgZXh0ZW5kZWQgY2xhc3MsIG9yIHRoZSBiYXNlIGNsYXNzXG4gICAgLy8gTk9URTogd2UgYXZvaWQgdXNlIG9mIFNldCBoZXJlIGJlY2F1c2Ugc29tZSBicm93c2VyIChJRTExKVxuICAgIC8vIGNhbm5vdCBleHRlbmQgYSBiYXNlIFNldCB2aWEgdGhlIGNvbnN0cnVjdG9yLlxuICAgIGxldCBtaXhpblNldCA9IE9iamVjdC5jcmVhdGUoLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8oZXh0ZW5kZWQpLl9fbWl4aW5TZXQgfHwgYmFzZVNldCB8fCBudWxsKTtcbiAgICBtaXhpblNldFttaXhpbkRlZHVwZUlkXSA9IHRydWU7XG4gICAgLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8oZXh0ZW5kZWQpLl9fbWl4aW5TZXQgPSBtaXhpblNldDtcbiAgICByZXR1cm4gZXh0ZW5kZWQ7XG4gIH1cblxuICByZXR1cm4gZGVkdXBpbmdNaXhpbjtcbn07XG4vKiBlc2xpbnQtZW5hYmxlIHZhbGlkLWpzZG9jICovXG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyoqXG4gKiBOb2RlIHdyYXBwZXIgdG8gZW5zdXJlIFNoYWRvd0RPTSBzYWZlIG9wZXJhdGlvbiByZWdhcmRsZXNzIG9mIHBvbHlmaWxsXG4gKiBwcmVzZW5jZSBvciBtb2RlLiBOb3RlIHRoYXQgd2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGBTaGFkeURPTS5ub1BhdGNoYCxcbiAqIGEgbm9kZSB3cmFwcGVyIG11c3QgYmUgdXNlZCB0byBhY2Nlc3MgU2hhZG93RE9NIEFQSS5cbiAqIFRoaXMgaXMgc2ltaWxhciB0byB1c2luZyBgUG9seW1lci5kb21gIGJ1dCByZWxpZXMgZXhjbHVzaXZlbHlcbiAqIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2hhZHlET00gcG9seWZpbGwgcmF0aGVyIHRoYW4gcmVxdWlyaW5nIHRoZSBsb2FkaW5nXG4gKiBvZiBsZWdhY3kgKFBvbHltZXIuZG9tKSBBUEkuXG4gKiBAdHlwZSB7ZnVuY3Rpb24oTm9kZSk6Tm9kZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHdyYXAgPSAod2luZG93WydTaGFkeURPTSddICYmIHdpbmRvd1snU2hhZHlET00nXVsnbm9QYXRjaCddICYmIHdpbmRvd1snU2hhZHlET00nXVsnd3JhcCddKSA/XG4gIHdpbmRvd1snU2hhZHlET00nXVsnd3JhcCddIDpcbiAgKHdpbmRvd1snU2hhZHlET00nXSA/IChuKSA9PiBTaGFkeURPTVsncGF0Y2gnXShuKSA6IChuKSA9PiBuKTtcblxuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuLyoqXG4gKiBNb2R1bGUgd2l0aCB1dGlsaXRpZXMgZm9yIG1hbmlwdWxhdGluZyBzdHJ1Y3R1cmVkIGRhdGEgcGF0aCBzdHJpbmdzLlxuICpcbiAqIEBzdW1tYXJ5IE1vZHVsZSB3aXRoIHV0aWxpdGllcyBmb3IgbWFuaXB1bGF0aW5nIHN0cnVjdHVyZWQgZGF0YSBwYXRoIHN0cmluZ3MuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHN0cmluZyBpcyBhIHN0cnVjdHVyZWQgZGF0YSBwYXRoIChoYXMgZG90cykuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIGlzUGF0aCgnZm9vLmJhci5iYXonKSAvLyB0cnVlXG4gKiBpc1BhdGgoJ2ZvbycpICAgICAgICAgLy8gZmFsc2VcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggc3RyaW5nXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBzdHJpbmcgY29udGFpbmVkIG9uZSBvciBtb3JlIGRvdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aChwYXRoKSB7XG4gIHJldHVybiBwYXRoLmluZGV4T2YoJy4nKSA+PSAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJvb3QgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGdpdmVuIHBhdGguXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHJvb3QoJ2Zvby5iYXIuYmF6JykgLy8gJ2ZvbydcbiAqIHJvb3QoJ2ZvbycpICAgICAgICAgLy8gJ2ZvbydcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJvb3QgcHJvcGVydHkgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm9vdChwYXRoKSB7XG4gIGxldCBkb3RJbmRleCA9IHBhdGguaW5kZXhPZignLicpO1xuICBpZiAoZG90SW5kZXggPT09IC0xKSB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cbiAgcmV0dXJuIHBhdGguc2xpY2UoMCwgZG90SW5kZXgpO1xufVxuXG4vKipcbiAqIEdpdmVuIGBiYXNlYCBpcyBgZm9vLmJhcmAsIGBmb29gIGlzIGFuIGFuY2VzdG9yLCBgZm9vLmJhcmAgaXMgbm90XG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHBhdGggaXMgYW4gYW5jZXN0b3Igb2YgdGhlIGJhc2UgcGF0aC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogaXNBbmNlc3RvcignZm9vLmJhcicsICdmb28nKSAgICAgICAgIC8vIHRydWVcbiAqIGlzQW5jZXN0b3IoJ2Zvby5iYXInLCAnZm9vLmJhcicpICAgICAvLyBmYWxzZVxuICogaXNBbmNlc3RvcignZm9vLmJhcicsICdmb28uYmFyLmJheicpIC8vIGZhbHNlXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZSBQYXRoIHN0cmluZyB0byB0ZXN0IGFnYWluc3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHN0cmluZyB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgcGF0aGAgaXMgYW4gYW5jZXN0b3Igb2YgYGJhc2VgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBbmNlc3RvcihiYXNlLCBwYXRoKSB7XG4gIC8vICAgICBiYXNlLnN0YXJ0c1dpdGgocGF0aCArICcuJyk7XG4gIHJldHVybiBiYXNlLmluZGV4T2YocGF0aCArICcuJykgPT09IDA7XG59XG5cbi8qKlxuICogR2l2ZW4gYGJhc2VgIGlzIGBmb28uYmFyYCwgYGZvby5iYXIuYmF6YCBpcyBhbiBkZXNjZW5kYW50XG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIGlzRGVzY2VuZGFudCgnZm9vLmJhcicsICdmb28uYmFyLmJheicpIC8vIHRydWVcbiAqIGlzRGVzY2VuZGFudCgnZm9vLmJhcicsICdmb28uYmFyJykgICAgIC8vIGZhbHNlXG4gKiBpc0Rlc2NlbmRhbnQoJ2Zvby5iYXInLCAnZm9vJykgICAgICAgICAvLyBmYWxzZVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2UgUGF0aCBzdHJpbmcgdG8gdGVzdCBhZ2FpbnN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCBzdHJpbmcgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYHBhdGhgIGlzIGEgZGVzY2VuZGFudCBvZiBgYmFzZWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rlc2NlbmRhbnQoYmFzZSwgcGF0aCkge1xuICAvLyAgICAgcGF0aC5zdGFydHNXaXRoKGJhc2UgKyAnLicpO1xuICByZXR1cm4gcGF0aC5pbmRleE9mKGJhc2UgKyAnLicpID09PSAwO1xufVxuXG4vKipcbiAqIFJlcGxhY2VzIGEgcHJldmlvdXMgYmFzZSBwYXRoIHdpdGggYSBuZXcgYmFzZSBwYXRoLCBwcmVzZXJ2aW5nIHRoZVxuICogcmVtYWluZGVyIG9mIHRoZSBwYXRoLlxuICpcbiAqIFVzZXIgbXVzdCBlbnN1cmUgYHBhdGhgIGhhcyBhIHByZWZpeCBvZiBgYmFzZWAuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHRyYW5zbGF0ZSgnZm9vLmJhcicsICd6b3QnLCAnZm9vLmJhci5iYXonKSAvLyAnem90LmJheidcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlIEN1cnJlbnQgYmFzZSBzdHJpbmcgdG8gcmVtb3ZlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmV3QmFzZSBOZXcgYmFzZSBzdHJpbmcgdG8gcmVwbGFjZSB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIHRyYW5zbGF0ZVxuICogQHJldHVybiB7c3RyaW5nfSBUcmFuc2xhdGVkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGJhc2UsIG5ld0Jhc2UsIHBhdGgpIHtcbiAgcmV0dXJuIG5ld0Jhc2UgKyBwYXRoLnNsaWNlKGJhc2UubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZSBQYXRoIHN0cmluZyB0byB0ZXN0IGFnYWluc3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggc3RyaW5nIHRvIHRlc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYHBhdGhgIGlzIGVxdWFsIHRvIGBiYXNlYFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlcyhiYXNlLCBwYXRoKSB7XG4gIHJldHVybiAoYmFzZSA9PT0gcGF0aCkgfHxcbiAgICAgICAgIGlzQW5jZXN0b3IoYmFzZSwgcGF0aCkgfHxcbiAgICAgICAgIGlzRGVzY2VuZGFudChiYXNlLCBwYXRoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhcnJheS1iYXNlZCBwYXRocyB0byBmbGF0dGVuZWQgcGF0aC4gIFN0cmluZy1iYXNlZCBwYXRoc1xuICogYXJlIHJldHVybmVkIGFzLWlzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBub3JtYWxpemUoWydmb28uYmFyJywgMCwgJ2JheiddKSAgLy8gJ2Zvby5iYXIuMC5iYXonXG4gKiBub3JtYWxpemUoJ2Zvby5iYXIuMC5iYXonKSAgICAgICAgLy8gJ2Zvby5iYXIuMC5iYXonXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBJbnB1dCBwYXRoXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZsYXR0ZW5lZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUocGF0aCkge1xuICBpZiAoQXJyYXkuaXNBcnJheShwYXRoKSkge1xuICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGk9MDsgaTxwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYXJncyA9IHBhdGhbaV0udG9TdHJpbmcoKS5zcGxpdCgnLicpO1xuICAgICAgZm9yIChsZXQgaj0wOyBqPGFyZ3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhcmdzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4oJy4nKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFNwbGl0cyBhIHBhdGggaW50byBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4gQWNjZXB0cyBlaXRoZXIgYXJyYXlzXG4gKiBvZiBwYXRoIHBhcnRzIG9yIHN0cmluZ3MuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHNwbGl0KFsnZm9vLmJhcicsIDAsICdiYXonXSkgIC8vIFsnZm9vJywgJ2JhcicsICcwJywgJ2JheiddXG4gKiBzcGxpdCgnZm9vLmJhci4wLmJheicpICAgICAgICAvLyBbJ2ZvbycsICdiYXInLCAnMCcsICdiYXonXVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggSW5wdXQgcGF0aFxuICogQHJldHVybiB7IUFycmF5PHN0cmluZz59IEFycmF5IG9mIHBhdGggcGFydHNcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0KHBhdGgpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplKHBhdGgpLnNwbGl0KCcuJyk7XG4gIH1cbiAgcmV0dXJuIHBhdGgudG9TdHJpbmcoKS5zcGxpdCgnLicpO1xufVxuXG4vKipcbiAqIFJlYWRzIGEgdmFsdWUgZnJvbSBhIHBhdGguICBJZiBhbnkgc3ViLXByb3BlcnR5IGluIHRoZSBwYXRoIGlzIGB1bmRlZmluZWRgLFxuICogdGhpcyBtZXRob2QgcmV0dXJucyBgdW5kZWZpbmVkYCAod2lsbCBuZXZlciB0aHJvdy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcm9vdCBPYmplY3QgZnJvbSB3aGljaCB0byBkZXJlZmVyZW5jZSBwYXRoIGZyb21cbiAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIFBhdGggdG8gcmVhZFxuICogQHBhcmFtIHtPYmplY3Q9fSBpbmZvIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCB0byBgaW5mb2AsIHRoZSBub3JtYWxpemVkXG4gKiAgKGZsYXR0ZW5lZCkgcGF0aCB3aWxsIGJlIHNldCB0byBgaW5mby5wYXRoYC5cbiAqIEByZXR1cm4geyp9IFZhbHVlIGF0IHBhdGgsIG9yIGB1bmRlZmluZWRgIGlmIHRoZSBwYXRoIGNvdWxkIG5vdCBiZVxuICogIGZ1bGx5IGRlcmVmZXJlbmNlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChyb290LCBwYXRoLCBpbmZvKSB7XG4gIGxldCBwcm9wID0gcm9vdDtcbiAgbGV0IHBhcnRzID0gc3BsaXQocGF0aCk7XG4gIC8vIExvb3Agb3ZlciBwYXRoIHBhcnRzWzAuLm4tMV0gYW5kIGRlcmVmZXJlbmNlXG4gIGZvciAobGV0IGk9MDsgaTxwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmICghcHJvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgcGFydCA9IHBhcnRzW2ldO1xuICAgIHByb3AgPSBwcm9wW3BhcnRdO1xuICB9XG4gIGlmIChpbmZvKSB7XG4gICAgaW5mby5wYXRoID0gcGFydHMuam9pbignLicpO1xuICB9XG4gIHJldHVybiBwcm9wO1xufVxuXG4vKipcbiAqIFNldHMgYSB2YWx1ZSB0byBhIHBhdGguICBJZiBhbnkgc3ViLXByb3BlcnR5IGluIHRoZSBwYXRoIGlzIGB1bmRlZmluZWRgLFxuICogdGhpcyBtZXRob2Qgd2lsbCBuby1vcC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcm9vdCBPYmplY3QgZnJvbSB3aGljaCB0byBkZXJlZmVyZW5jZSBwYXRoIGZyb21cbiAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIFBhdGggdG8gc2V0XG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldCB0byBwYXRoXG4gKiBAcmV0dXJuIHtzdHJpbmcgfCB1bmRlZmluZWR9IFRoZSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIGlucHV0IHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldChyb290LCBwYXRoLCB2YWx1ZSkge1xuICBsZXQgcHJvcCA9IHJvb3Q7XG4gIGxldCBwYXJ0cyA9IHNwbGl0KHBhdGgpO1xuICBsZXQgbGFzdCA9IHBhcnRzW3BhcnRzLmxlbmd0aC0xXTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAvLyBMb29wIG92ZXIgcGF0aCBwYXJ0c1swLi5uLTJdIGFuZCBkZXJlZmVyZW5jZVxuICAgIGZvciAobGV0IGk9MDsgaTxwYXJ0cy5sZW5ndGgtMTsgaSsrKSB7XG4gICAgICBsZXQgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgcHJvcCA9IHByb3BbcGFydF07XG4gICAgICBpZiAoIXByb3ApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXQgdmFsdWUgdG8gb2JqZWN0IGF0IGVuZCBvZiBwYXRoXG4gICAgcHJvcFtsYXN0XSA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIC8vIFNpbXBsZSBwcm9wZXJ0eSBzZXRcbiAgICBwcm9wW3BhdGhdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJy4nKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHN0cmluZyBpcyBhIHN0cnVjdHVyZWQgZGF0YSBwYXRoIChoYXMgZG90cykuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLiAgVXNlIGBpc1BhdGhgIGluc3RlYWQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIGlzRGVlcCgnZm9vLmJhci5iYXonKSAvLyB0cnVlXG4gKiBpc0RlZXAoJ2ZvbycpICAgICAgICAgLy8gZmFsc2VcbiAqIGBgYFxuICpcbiAqIEBkZXByZWNhdGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHN0cmluZ1xuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3RyaW5nIGNvbnRhaW5lZCBvbmUgb3IgbW9yZSBkb3RzXG4gKi9cbmV4cG9ydCBjb25zdCBpc0RlZXAgPSBpc1BhdGg7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuL2Jvb3QuanMnO1xuXG5jb25zdCBjYXNlTWFwID0ge307XG5jb25zdCBEQVNIX1RPX0NBTUVMID0gLy1bYS16XS9nO1xuY29uc3QgQ0FNRUxfVE9fREFTSCA9IC8oW0EtWl0pL2c7XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBNb2R1bGUgd2l0aCB1dGlsaXRpZXMgZm9yIGNvbnZlcnRpbmcgYmV0d2VlbiBcImRhc2gtY2FzZVwiIGFuZFxuICogXCJjYW1lbENhc2VcIiBpZGVudGlmaWVycy5cbiAqL1xuXG4vKipcbiAqIENvbnZlcnRzIFwiZGFzaC1jYXNlXCIgaWRlbnRpZmllciAoZS5nLiBgZm9vLWJhci1iYXpgKSB0byBcImNhbWVsQ2FzZVwiXG4gKiAoZS5nLiBgZm9vQmFyQmF6YCkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGRhc2ggRGFzaC1jYXNlIGlkZW50aWZpZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FtZWwtY2FzZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgaWRlbnRpZmllclxuICovXG5leHBvcnQgZnVuY3Rpb24gZGFzaFRvQ2FtZWxDYXNlKGRhc2gpIHtcbiAgcmV0dXJuIGNhc2VNYXBbZGFzaF0gfHwgKFxuICAgIGNhc2VNYXBbZGFzaF0gPSBkYXNoLmluZGV4T2YoJy0nKSA8IDAgPyBkYXNoIDogZGFzaC5yZXBsYWNlKERBU0hfVE9fQ0FNRUwsXG4gICAgICAobSkgPT4gbVsxXS50b1VwcGVyQ2FzZSgpXG4gICAgKVxuICApO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIFwiY2FtZWxDYXNlXCIgaWRlbnRpZmllciAoZS5nLiBgZm9vQmFyQmF6YCkgdG8gXCJkYXNoLWNhc2VcIlxuICogKGUuZy4gYGZvby1iYXItYmF6YCkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNhbWVsIENhbWVsLWNhc2UgaWRlbnRpZmllclxuICogQHJldHVybiB7c3RyaW5nfSBEYXNoLWNhc2UgcmVwcmVzZW50YXRpb24gb2YgdGhlIGlkZW50aWZpZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsVG9EYXNoQ2FzZShjYW1lbCkge1xuICByZXR1cm4gY2FzZU1hcFtjYW1lbF0gfHwgKFxuICAgIGNhc2VNYXBbY2FtZWxdID0gY2FtZWwucmVwbGFjZShDQU1FTF9UT19EQVNILCAnLSQxJykudG9Mb3dlckNhc2UoKVxuICApO1xufVxuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKlxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgYSBudW1iZXIgb2Ygc3RyYXRlZ2llcyBmb3IgZW5xdWV1aW5nIGFzeW5jaHJvbm91c1xuICogdGFza3MuIEVhY2ggc3ViLW1vZHVsZSBwcm92aWRlcyBhIHN0YW5kYXJkIGBydW4oZm4pYCBpbnRlcmZhY2UgdGhhdCByZXR1cm5zIGFcbiAqIGhhbmRsZSwgYW5kIGEgYGNhbmNlbChoYW5kbGUpYCBpbnRlcmZhY2UgZm9yIGNhbmNlbGluZyBhc3luYyB0YXNrcyBiZWZvcmVcbiAqIHRoZXkgcnVuLlxuICpcbiAqIEBzdW1tYXJ5IE1vZHVsZSB0aGF0IHByb3ZpZGVzIGEgbnVtYmVyIG9mIHN0cmF0ZWdpZXMgZm9yIGVucXVldWluZ1xuICogYXN5bmNocm9ub3VzIHRhc2tzLlxuICovXG5cbmltcG9ydCAnLi9ib290LmpzJztcblxuLy8gTWljcm90YXNrIGltcGxlbWVudGVkIHVzaW5nIE11dGF0aW9uIE9ic2VydmVyXG5sZXQgbWljcm90YXNrQ3VyckhhbmRsZSA9IDA7XG5sZXQgbWljcm90YXNrTGFzdEhhbmRsZSA9IDA7XG5sZXQgbWljcm90YXNrQ2FsbGJhY2tzID0gW107XG5sZXQgbWljcm90YXNrTm9kZUNvbnRlbnQgPSAwO1xubGV0IG1pY3JvdGFza05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5uZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIobWljcm90YXNrRmx1c2gpLm9ic2VydmUobWljcm90YXNrTm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTtcblxuZnVuY3Rpb24gbWljcm90YXNrRmx1c2goKSB7XG4gIGNvbnN0IGxlbiA9IG1pY3JvdGFza0NhbGxiYWNrcy5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBsZXQgY2IgPSBtaWNyb3Rhc2tDYWxsYmFja3NbaV07XG4gICAgaWYgKGNiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjYigpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhyb3cgZTsgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG1pY3JvdGFza0NhbGxiYWNrcy5zcGxpY2UoMCwgbGVuKTtcbiAgbWljcm90YXNrTGFzdEhhbmRsZSArPSBsZW47XG59XG5cbi8qKlxuICogQXN5bmMgaW50ZXJmYWNlIHdyYXBwZXIgYXJvdW5kIGBzZXRUaW1lb3V0YC5cbiAqXG4gKiBAbmFtZXNwYWNlXG4gKiBAc3VtbWFyeSBBc3luYyBpbnRlcmZhY2Ugd3JhcHBlciBhcm91bmQgYHNldFRpbWVvdXRgLlxuICovXG5jb25zdCB0aW1lT3V0ID0ge1xuICAvKipcbiAgICogUmV0dXJucyBhIHN1Yi1tb2R1bGUgd2l0aCB0aGUgYXN5bmMgaW50ZXJmYWNlIHByb3ZpZGluZyB0aGUgcHJvdmlkZWRcbiAgICogZGVsYXkuXG4gICAqXG4gICAqIEBtZW1iZXJvZiB0aW1lT3V0XG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsYXkgVGltZSB0byB3YWl0IGJlZm9yZSBjYWxsaW5nIGNhbGxiYWNrcyBpbiBtc1xuICAgKiBAcmV0dXJuIHshQXN5bmNJbnRlcmZhY2V9IEFuIGFzeW5jIHRpbWVvdXQgaW50ZXJmYWNlXG4gICAqL1xuICBhZnRlcihkZWxheSkge1xuICAgIHJldHVybiB7XG4gICAgICBydW4oZm4pIHsgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZuLCBkZWxheSk7IH0sXG4gICAgICBjYW5jZWwoaGFuZGxlKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBmdW5jdGlvbiBjYWxsZWQgaW4gdGhlIG5leHQgdGFzay5cbiAgICpcbiAgICogQG1lbWJlcm9mIHRpbWVPdXRcbiAgICogQHBhcmFtIHshRnVuY3Rpb259IGZuIENhbGxiYWNrIHRvIHJ1blxuICAgKiBAcGFyYW0ge251bWJlcj19IGRlbGF5IERlbGF5IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhhbmRsZSB1c2VkIGZvciBjYW5jZWxpbmcgdGFza1xuICAgKi9cbiAgcnVuKGZuLCBkZWxheSkge1xuICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmbiwgZGVsYXkpO1xuICB9LFxuICAvKipcbiAgICogQ2FuY2VscyBhIHByZXZpb3VzbHkgZW5xdWV1ZWQgYHRpbWVPdXRgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgdGltZU91dFxuICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlIEhhbmRsZSByZXR1cm5lZCBmcm9tIGBydW5gIG9mIGNhbGxiYWNrIHRvIGNhbmNlbFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY2FuY2VsKGhhbmRsZSkge1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgfVxufTtcbmV4cG9ydCB7dGltZU91dH07XG5cbi8qKlxuICogQXN5bmMgaW50ZXJmYWNlIHdyYXBwZXIgYXJvdW5kIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLlxuICpcbiAqIEBuYW1lc3BhY2VcbiAqIEBzdW1tYXJ5IEFzeW5jIGludGVyZmFjZSB3cmFwcGVyIGFyb3VuZCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYC5cbiAqL1xuY29uc3QgYW5pbWF0aW9uRnJhbWUgPSB7XG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhIGZ1bmN0aW9uIGNhbGxlZCBhdCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCB0aW1pbmcuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBhbmltYXRpb25GcmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlcik6dm9pZH0gZm4gQ2FsbGJhY2sgdG8gcnVuXG4gICAqIEByZXR1cm4ge251bWJlcn0gSGFuZGxlIHVzZWQgZm9yIGNhbmNlbGluZyB0YXNrXG4gICAqL1xuICBydW4oZm4pIHtcbiAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7XG4gIH0sXG4gIC8qKlxuICAgKiBDYW5jZWxzIGEgcHJldmlvdXNseSBlbnF1ZXVlZCBgYW5pbWF0aW9uRnJhbWVgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgYW5pbWF0aW9uRnJhbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZSBIYW5kbGUgcmV0dXJuZWQgZnJvbSBgcnVuYCBvZiBjYWxsYmFjayB0byBjYW5jZWxcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNhbmNlbChoYW5kbGUpIHtcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaGFuZGxlKTtcbiAgfVxufTtcbmV4cG9ydCB7YW5pbWF0aW9uRnJhbWV9O1xuXG4vKipcbiAqIEFzeW5jIGludGVyZmFjZSB3cmFwcGVyIGFyb3VuZCBgcmVxdWVzdElkbGVDYWxsYmFja2AuICBGYWxscyBiYWNrIHRvXG4gKiBgc2V0VGltZW91dGAgb24gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCBgcmVxdWVzdElkbGVDYWxsYmFja2AuXG4gKlxuICogQG5hbWVzcGFjZVxuICogQHN1bW1hcnkgQXN5bmMgaW50ZXJmYWNlIHdyYXBwZXIgYXJvdW5kIGByZXF1ZXN0SWRsZUNhbGxiYWNrYC5cbiAqL1xuY29uc3QgaWRsZVBlcmlvZCA9IHtcbiAgLyoqXG4gICAqIEVucXVldWVzIGEgZnVuY3Rpb24gY2FsbGVkIGF0IGByZXF1ZXN0SWRsZUNhbGxiYWNrYCB0aW1pbmcuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBpZGxlUGVyaW9kXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUlkbGVEZWFkbGluZSk6dm9pZH0gZm4gQ2FsbGJhY2sgdG8gcnVuXG4gICAqIEByZXR1cm4ge251bWJlcn0gSGFuZGxlIHVzZWQgZm9yIGNhbmNlbGluZyB0YXNrXG4gICAqL1xuICBydW4oZm4pIHtcbiAgICByZXR1cm4gd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sgP1xuICAgICAgd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2soZm4pIDpcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZuLCAxNik7XG4gIH0sXG4gIC8qKlxuICAgKiBDYW5jZWxzIGEgcHJldmlvdXNseSBlbnF1ZXVlZCBgaWRsZVBlcmlvZGAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBtZW1iZXJvZiBpZGxlUGVyaW9kXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUgSGFuZGxlIHJldHVybmVkIGZyb20gYHJ1bmAgb2YgY2FsbGJhY2sgdG8gY2FuY2VsXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjYW5jZWwoaGFuZGxlKSB7XG4gICAgd2luZG93LmNhbmNlbElkbGVDYWxsYmFjayA/XG4gICAgICB3aW5kb3cuY2FuY2VsSWRsZUNhbGxiYWNrKGhhbmRsZSkgOlxuICAgICAgd2luZG93LmNsZWFyVGltZW91dChoYW5kbGUpO1xuICB9XG59O1xuZXhwb3J0IHtpZGxlUGVyaW9kfTtcblxuLyoqXG4gKiBBc3luYyBpbnRlcmZhY2UgZm9yIGVucXVldWluZyBjYWxsYmFja3MgdGhhdCBydW4gYXQgbWljcm90YXNrIHRpbWluZy5cbiAqXG4gKiBOb3RlIHRoYXQgbWljcm90YXNrIHRpbWluZyBpcyBhY2hpZXZlZCB2aWEgYSBzaW5nbGUgYE11dGF0aW9uT2JzZXJ2ZXJgLFxuICogYW5kIHRodXMgY2FsbGJhY2tzIGVucXVldWVkIHdpdGggdGhpcyBBUEkgd2lsbCBhbGwgcnVuIGluIGEgc2luZ2xlXG4gKiBiYXRjaCwgYW5kIG5vdCBpbnRlcmxlYXZlZCB3aXRoIG90aGVyIG1pY3JvdGFza3Mgc3VjaCBhcyBwcm9taXNlcy5cbiAqIFByb21pc2VzIGFyZSBhdm9pZGVkIGFzIGFuIGltcGxlbWVudGF0aW9uIGNob2ljZSBmb3IgdGhlIHRpbWUgYmVpbmdcbiAqIGR1ZSB0byBTYWZhcmkgYnVncyB0aGF0IGNhdXNlIFByb21pc2VzIHRvIGxhY2sgbWljcm90YXNrIGd1YXJhbnRlZXMuXG4gKlxuICogQG5hbWVzcGFjZVxuICogQHN1bW1hcnkgQXN5bmMgaW50ZXJmYWNlIGZvciBlbnF1ZXVpbmcgY2FsbGJhY2tzIHRoYXQgcnVuIGF0IG1pY3JvdGFza1xuICogICB0aW1pbmcuXG4gKi9cbmNvbnN0IG1pY3JvVGFzayA9IHtcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBmdW5jdGlvbiBjYWxsZWQgYXQgbWljcm90YXNrIHRpbWluZy5cbiAgICpcbiAgICogQG1lbWJlcm9mIG1pY3JvVGFza1xuICAgKiBAcGFyYW0geyFGdW5jdGlvbj19IGNhbGxiYWNrIENhbGxiYWNrIHRvIHJ1blxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhhbmRsZSB1c2VkIGZvciBjYW5jZWxpbmcgdGFza1xuICAgKi9cbiAgcnVuKGNhbGxiYWNrKSB7XG4gICAgbWljcm90YXNrTm9kZS50ZXh0Q29udGVudCA9IG1pY3JvdGFza05vZGVDb250ZW50Kys7XG4gICAgbWljcm90YXNrQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiBtaWNyb3Rhc2tDdXJySGFuZGxlKys7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYSBwcmV2aW91c2x5IGVucXVldWVkIGBtaWNyb1Rhc2tgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgbWljcm9UYXNrXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUgSGFuZGxlIHJldHVybmVkIGZyb20gYHJ1bmAgb2YgY2FsbGJhY2sgdG8gY2FuY2VsXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjYW5jZWwoaGFuZGxlKSB7XG4gICAgY29uc3QgaWR4ID0gaGFuZGxlIC0gbWljcm90YXNrTGFzdEhhbmRsZTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGlmICghbWljcm90YXNrQ2FsbGJhY2tzW2lkeF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFzeW5jIGhhbmRsZTogJyArIGhhbmRsZSk7XG4gICAgICB9XG4gICAgICBtaWNyb3Rhc2tDYWxsYmFja3NbaWR4XSA9IG51bGw7XG4gICAgfVxuICB9XG5cbn07XG5leHBvcnQge21pY3JvVGFza307XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcblxuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCB7IG1pY3JvVGFzayB9IGZyb20gJy4uL3V0aWxzL2FzeW5jLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuLi91dGlscy93cmFwLmpzJztcblxuLyoqIEBjb25zdCB7IUFzeW5jSW50ZXJmYWNlfSAqL1xuY29uc3QgbWljcm90YXNrID0gbWljcm9UYXNrO1xuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyBiYXNpYyBtZXRhLXByb2dyYW1taW5nIGZvciBjcmVhdGluZyBvbmVcbiAqIG9yIG1vcmUgcHJvcGVydHkgYWNjZXNzb3JzIChnZXR0ZXIvc2V0dGVyIHBhaXIpIHRoYXQgZW5xdWV1ZSBhbiBhc3luY1xuICogKGJhdGNoZWQpIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICpcbiAqIEZvciBiYXNpYyB1c2FnZSBvZiB0aGlzIG1peGluLCBjYWxsIGBNeUNsYXNzLmNyZWF0ZVByb3BlcnRpZXMocHJvcHMpYFxuICogb25jZSBhdCBjbGFzcyBkZWZpbml0aW9uIHRpbWUgdG8gY3JlYXRlIHByb3BlcnR5IGFjY2Vzc29ycyBmb3IgcHJvcGVydGllc1xuICogbmFtZWQgaW4gcHJvcHMsIGltcGxlbWVudCBgX3Byb3BlcnRpZXNDaGFuZ2VkYCB0byByZWFjdCBhcyBkZXNpcmVkIHRvXG4gKiBwcm9wZXJ0eSBjaGFuZ2VzLCBhbmQgaW1wbGVtZW50IGBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpYCBhbmRcbiAqIGluY2x1ZGUgbG93ZXJjYXNlIHZlcnNpb25zIG9mIGFueSBwcm9wZXJ0eSBuYW1lcyB0aGF0IHNob3VsZCBiZSBzZXQgZnJvbVxuICogYXR0cmlidXRlcy4gTGFzdCwgY2FsbCBgdGhpcy5fZW5hYmxlUHJvcGVydGllcygpYCBpbiB0aGUgZWxlbWVudCdzXG4gKiBgY29ubmVjdGVkQ2FsbGJhY2tgIHRvIGVuYWJsZSB0aGUgYWNjZXNzb3JzLlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQHN1bW1hcnkgRWxlbWVudCBjbGFzcyBtaXhpbiBmb3IgcmVhY3RpbmcgdG8gcHJvcGVydHkgY2hhbmdlcyBmcm9tXG4gKiAgIGdlbmVyYXRlZCBwcm9wZXJ0eSBhY2Nlc3NvcnMuXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3Mgd2l0aCBtaXhpbiBhcHBsaWVkLlxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydGllc0NoYW5nZWQgPSBkZWR1cGluZ01peGluKFxuICAgIC8qKlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAgICAgKi9cbiAgICAoc3VwZXJDbGFzcykgPT4ge1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzQ2hhbmdlZH1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKi9cbiAgY2xhc3MgUHJvcGVydGllc0NoYW5nZWQgZXh0ZW5kcyBzdXBlckNsYXNzIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgcHJvcGVydHkgYWNjZXNzb3JzIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHBhcmFtIHshT2JqZWN0fSBwcm9wcyBPYmplY3Qgd2hvc2Uga2V5cyBhcmUgbmFtZXMgb2YgYWNjZXNzb3JzLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVByb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIGNvbnN0IHByb3RvID0gdGhpcy5wcm90b3R5cGU7XG4gICAgICBmb3IgKGxldCBwcm9wIGluIHByb3BzKSB7XG4gICAgICAgIC8vIGRvbid0IHN0b21wIGFuIGV4aXN0aW5nIGFjY2Vzc29yXG4gICAgICAgIGlmICghKHByb3AgaW4gcHJvdG8pKSB7XG4gICAgICAgICAgcHJvdG8uX2NyZWF0ZVByb3BlcnR5QWNjZXNzb3IocHJvcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGF0dHJpYnV0ZSBuYW1lIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIFRoZSBhdHRyaWJ1dGUgbmFtZSBpcyB0aGUgbG93ZXJjYXNlZCBwcm9wZXJ0eSBuYW1lLiBPdmVycmlkZSB0b1xuICAgICAqIGN1c3RvbWl6ZSB0aGlzIG1hcHBpbmcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IHRvIGNvbnZlcnRcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEF0dHJpYnV0ZSBuYW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgcG9pbnQgdG8gcHJvdmlkZSBhIHR5cGUgdG8gd2hpY2ggdG8gZGVzZXJpYWxpemUgYSB2YWx1ZSB0b1xuICAgICAqIGEgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBwcm9wZXJ0eVxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIHR5cGVGb3JQcm9wZXJ0eShuYW1lKSB7IH0gLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2V0dGVyL2dldHRlciBwYWlyIGZvciB0aGUgbmFtZWQgcHJvcGVydHkgd2l0aCBpdHMgb3duXG4gICAgICogbG9jYWwgc3RvcmFnZS4gIFRoZSBnZXR0ZXIgcmV0dXJucyB0aGUgdmFsdWUgaW4gdGhlIGxvY2FsIHN0b3JhZ2UsXG4gICAgICogYW5kIHRoZSBzZXR0ZXIgY2FsbHMgYF9zZXRQcm9wZXJ0eWAsIHdoaWNoIHVwZGF0ZXMgdGhlIGxvY2FsIHN0b3JhZ2VcbiAgICAgKiBmb3IgdGhlIHByb3BlcnR5IGFuZCBlbnF1ZXVlcyBhIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIGNhbGxlZCBvbiBhIHByb3RvdHlwZSBvciBhbiBpbnN0YW5jZS4gIENhbGxpbmdcbiAgICAgKiB0aGlzIG1ldGhvZCBtYXkgb3ZlcndyaXRlIGEgcHJvcGVydHkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvblxuICAgICAqIHRoZSBwcm90b3R5cGUvaW5zdGFuY2UgYnkgY3JlYXRpbmcgdGhlIGFjY2Vzc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gcmVhZE9ubHkgV2hlbiB0cnVlLCBubyBzZXR0ZXIgaXMgY3JlYXRlZDsgdGhlXG4gICAgICogICBwcm90ZWN0ZWQgYF9zZXRQcm9wZXJ0eWAgZnVuY3Rpb24gbXVzdCBiZSB1c2VkIHRvIHNldCB0aGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfY3JlYXRlUHJvcGVydHlBY2Nlc3Nvcihwcm9wZXJ0eSwgcmVhZE9ubHkpIHtcbiAgICAgIHRoaXMuX2FkZFByb3BlcnR5VG9BdHRyaWJ1dGVNYXAocHJvcGVydHkpO1xuICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19fZGF0YUhhc0FjY2Vzc29yJywgdGhpcykpKSB7XG4gICAgICAgIHRoaXMuX19kYXRhSGFzQWNjZXNzb3IgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9fZGF0YUhhc0FjY2Vzc29yKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fX2RhdGFIYXNBY2Nlc3Nvcltwcm9wZXJ0eV0pIHtcbiAgICAgICAgdGhpcy5fX2RhdGFIYXNBY2Nlc3Nvcltwcm9wZXJ0eV0gPSB0cnVlO1xuICAgICAgICB0aGlzLl9kZWZpbmVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCByZWFkT25seSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gYHByb3BlcnR5YCB0byBhIG1hcCBtYXRjaGluZyBhdHRyaWJ1dGUgbmFtZXNcbiAgICAgKiB0byBwcm9wZXJ0eSBuYW1lcywgdXNpbmcgYGF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eWAuIFRoaXMgbWFwIGlzXG4gICAgICogdXNlZCB3aGVuIGRlc2VyaWFsaXppbmcgYXR0cmlidXRlIHZhbHVlcyB0byBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2FkZFByb3BlcnR5VG9BdHRyaWJ1dGVNYXAocHJvcGVydHkpIHtcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX2RhdGFBdHRyaWJ1dGVzJywgdGhpcykpKSB7XG4gICAgICAgIHRoaXMuX19kYXRhQXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX19kYXRhQXR0cmlidXRlcyk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX19kYXRhQXR0cmlidXRlc1twcm9wZXJ0eV0pIHtcbiAgICAgICAgY29uc3QgYXR0ciA9IHRoaXMuY29uc3RydWN0b3IuYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHByb3BlcnR5KTtcbiAgICAgICAgdGhpcy5fX2RhdGFBdHRyaWJ1dGVzW2F0dHJdID0gcHJvcGVydHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIHByb3BlcnR5IGFjY2Vzc29yIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gcmVhZE9ubHkgV2hlbiB0cnVlLCBubyBzZXR0ZXIgaXMgY3JlYXRlZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgIF9kZWZpbmVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCByZWFkT25seSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHByb3BlcnR5LCB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG4gICAgICAgIC8qKiBAdGhpcyB7UHJvcGVydGllc0NoYW5nZWR9ICovXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgICB9LFxuICAgICAgICAvKiogQHRoaXMge1Byb3BlcnRpZXNDaGFuZ2VkfSAqL1xuICAgICAgICBzZXQ6IHJlYWRPbmx5ID8gZnVuY3Rpb24gKCkge30gOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICAgIHRoaXMuX19kYXRhRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fX2RhdGFSZWFkeSA9IGZhbHNlO1xuICAgICAgdGhpcy5fX2RhdGFJbnZhbGlkID0gZmFsc2U7XG4gICAgICB0aGlzLl9fZGF0YSA9IHt9O1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhT2xkID0gbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wcyA9IG51bGw7XG4gICAgICB0aGlzLl9fc2VyaWFsaXppbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2luaXRpYWxpemVQcm9wZXJ0aWVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlmZWN5Y2xlIGNhbGxiYWNrIGNhbGxlZCB3aGVuIHByb3BlcnRpZXMgYXJlIGVuYWJsZWQgdmlhXG4gICAgICogYF9lbmFibGVQcm9wZXJ0aWVzYC5cbiAgICAgKlxuICAgICAqIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGltcGxlbWVudCBiZWhhdmlvciB0aGF0IGlzXG4gICAgICogZGVwZW5kZW50IG9uIHRoZSBlbGVtZW50IGhhdmluZyBpdHMgcHJvcGVydHkgZGF0YSBpbml0aWFsaXplZCwgZS5nLlxuICAgICAqIGZyb20gZGVmYXVsdHMgKGluaXRpYWxpemVkIGZyb20gYGNvbnN0cnVjdG9yYCwgYF9pbml0aWFsaXplUHJvcGVydGllc2ApLFxuICAgICAqIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLCBvciB2YWx1ZXMgcHJvcGFnYXRlZCBmcm9tIGhvc3QgZS5nLiB2aWFcbiAgICAgKiBiaW5kaW5ncy4gIGBzdXBlci5yZWFkeSgpYCBtdXN0IGJlIGNhbGxlZCB0byBlbnN1cmUgdGhlIGRhdGEgc3lzdGVtXG4gICAgICogYmVjb21lcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgcmVhZHkoKSB7XG4gICAgICB0aGlzLl9fZGF0YVJlYWR5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2ZsdXNoUHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRoZSBsb2NhbCBzdG9yYWdlIGZvciBwcm9wZXJ0eSBhY2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBQcm92aWRlZCBhcyBhbiBvdmVycmlkZSBwb2ludCBmb3IgcGVyZm9ybWluZyBhbnkgc2V0dXAgd29yayBwcmlvclxuICAgICAqIHRvIGluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgYWNjZXNzb3Igc3lzdGVtLlxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm9wZXJ0aWVzKCkge1xuICAgICAgLy8gQ2FwdHVyZSBpbnN0YW5jZSBwcm9wZXJ0aWVzOyB0aGVzZSB3aWxsIGJlIHNldCBpbnRvIGFjY2Vzc29yc1xuICAgICAgLy8gZHVyaW5nIGZpcnN0IGZsdXNoLiBEb24ndCBzZXQgdGhlbSBoZXJlLCBzaW5jZSB3ZSB3YW50XG4gICAgICAvLyB0aGVzZSB0byBvdmVyd3JpdGUgZGVmYXVsdHMvY29uc3RydWN0b3IgYXNzaWdubWVudHNcbiAgICAgIGZvciAobGV0IHAgaW4gdGhpcy5fX2RhdGFIYXNBY2Nlc3Nvcikge1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgIHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wcyA9IHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wcyB8fCB7fTtcbiAgICAgICAgICB0aGlzLl9fZGF0YUluc3RhbmNlUHJvcHNbcF0gPSB0aGlzW3BdO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGF0IHJlYWR5IHRpbWUgd2l0aCBiYWcgb2YgaW5zdGFuY2UgcHJvcGVydGllcyB0aGF0IG92ZXJ3cm90ZVxuICAgICAqIGFjY2Vzc29ycyB3aGVuIHRoZSBlbGVtZW50IHVwZ3JhZGVkLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2V0cyB0aGVzZSBwcm9wZXJ0aWVzIGJhY2sgaW50byB0aGVcbiAgICAgKiBzZXR0ZXIgYXQgcmVhZHkgdGltZS4gIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGFzIGFuIG92ZXJyaWRlXG4gICAgICogcG9pbnQgZm9yIGN1c3RvbWl6aW5nIG9yIHByb3ZpZGluZyBtb3JlIGVmZmljaWVudCBpbml0aWFsaXphdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgcHJvcGVydHkgdmFsdWVzIHRoYXQgd2VyZSBvdmVyd3JpdHRlblxuICAgICAqICAgd2hlbiBjcmVhdGluZyBwcm9wZXJ0eSBhY2Nlc3NvcnMuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2luaXRpYWxpemVJbnN0YW5jZVByb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGxvY2FsIHN0b3JhZ2UgZm9yIGEgcHJvcGVydHkgKHZpYSBgX3NldFBlbmRpbmdQcm9wZXJ0eWApXG4gICAgICogYW5kIGVucXVldWVzIGEgYF9wcm9lcHJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkocHJvcGVydHksIHZhbHVlKSkge1xuICAgICAgICB0aGlzLl9pbnZhbGlkYXRlUHJvcGVydGllcygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZSBmb3IgdGhlIGdpdmVuIHByb3BlcnR5XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9nZXRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhW3Byb3BlcnR5XTtcbiAgICB9XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGxvY2FsIHN0b3JhZ2UgZm9yIGEgcHJvcGVydHksIHJlY29yZHMgdGhlIHByZXZpb3VzIHZhbHVlLFxuICAgICAqIGFuZCBhZGRzIGl0IHRvIHRoZSBzZXQgb2YgXCJwZW5kaW5nIGNoYW5nZXNcIiB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAqIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLiAgVGhpcyBtZXRob2QgZG9lcyBub3QgZW5xdWV1ZSB0aGVcbiAgICAgKiBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gZXh0IE5vdCB1c2VkIGhlcmU7IGFmZm9yZGFuY2UgZm9yIGNsb3N1cmVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3BlcnR5IGNoYW5nZWRcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUsIGV4dCkge1xuICAgICAgbGV0IG9sZCA9IHRoaXMuX19kYXRhW3Byb3BlcnR5XTtcbiAgICAgIGxldCBjaGFuZ2VkID0gdGhpcy5fc2hvdWxkUHJvcGVydHlDaGFuZ2UocHJvcGVydHksIHZhbHVlLCBvbGQpO1xuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fZGF0YVBlbmRpbmcpIHtcbiAgICAgICAgICB0aGlzLl9fZGF0YVBlbmRpbmcgPSB7fTtcbiAgICAgICAgICB0aGlzLl9fZGF0YU9sZCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSBvbGQgaXMgY2FwdHVyZWQgZnJvbSB0aGUgbGFzdCB0dXJuXG4gICAgICAgIGlmICh0aGlzLl9fZGF0YU9sZCAmJiAhKHByb3BlcnR5IGluIHRoaXMuX19kYXRhT2xkKSkge1xuICAgICAgICAgIHRoaXMuX19kYXRhT2xkW3Byb3BlcnR5XSA9IG9sZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgKi9cblxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoZSBwcm9wZXJ0aWVzIGFzIGludmFsaWQsIGFuZCBlbnF1ZXVlcyBhbiBhc3luY1xuICAgICAqIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCkge1xuICAgICAgaWYgKCF0aGlzLl9fZGF0YUludmFsaWQgJiYgdGhpcy5fX2RhdGFSZWFkeSkge1xuICAgICAgICB0aGlzLl9fZGF0YUludmFsaWQgPSB0cnVlO1xuICAgICAgICBtaWNyb3Rhc2sucnVuKCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5fX2RhdGFJbnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9fZGF0YUludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoUHJvcGVydGllcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCB0byBlbmFibGUgcHJvcGVydHkgYWNjZXNzb3IgcHJvY2Vzc2luZy4gQmVmb3JlIHRoaXMgbWV0aG9kIGlzXG4gICAgICogY2FsbGVkIGFjY2Vzc29yIHZhbHVlcyB3aWxsIGJlIHNldCBidXQgc2lkZSBlZmZlY3RzIGFyZVxuICAgICAqIHF1ZXVlZC4gV2hlbiBjYWxsZWQsIGFueSBwZW5kaW5nIHNpZGUgZWZmZWN0cyBvY2N1ciBpbW1lZGlhdGVseS5cbiAgICAgKiBGb3IgZWxlbWVudHMsIGdlbmVyYWxseSBgY29ubmVjdGVkQ2FsbGJhY2tgIGlzIGEgbm9ybWFsIHNwb3QgdG8gZG8gc28uXG4gICAgICogSXQgaXMgc2FmZSB0byBjYWxsIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRpbWVzIGFzIGl0IG9ubHkgdHVybnMgb25cbiAgICAgKiBwcm9wZXJ0eSBhY2Nlc3NvcnMgb25jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9lbmFibGVQcm9wZXJ0aWVzKCkge1xuICAgICAgaWYgKCF0aGlzLl9fZGF0YUVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wcykge1xuICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVJbnN0YW5jZVByb3BlcnRpZXModGhpcy5fX2RhdGFJbnN0YW5jZVByb3BzKTtcbiAgICAgICAgICB0aGlzLl9fZGF0YUluc3RhbmNlUHJvcHMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVhZHkoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2sgd2l0aCB0aGUgY3VycmVudCBzZXQgb2ZcbiAgICAgKiBwZW5kaW5nIGNoYW5nZXMgKGFuZCBvbGQgdmFsdWVzIHJlY29yZGVkIHdoZW4gcGVuZGluZyBjaGFuZ2VzIHdlcmVcbiAgICAgKiBzZXQpLCBhbmQgcmVzZXRzIHRoZSBwZW5kaW5nIHNldCBvZiBjaGFuZ2VzLiBHZW5lcmFsbHksIHRoaXMgbWV0aG9kXG4gICAgICogc2hvdWxkIG5vdCBiZSBjYWxsZWQgaW4gdXNlciBjb2RlLlxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2ZsdXNoUHJvcGVydGllcygpIHtcbiAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5fX2RhdGE7XG4gICAgICBjb25zdCBjaGFuZ2VkUHJvcHMgPSB0aGlzLl9fZGF0YVBlbmRpbmc7XG4gICAgICBjb25zdCBvbGQgPSB0aGlzLl9fZGF0YU9sZDtcbiAgICAgIGlmICh0aGlzLl9zaG91bGRQcm9wZXJ0aWVzQ2hhbmdlKHByb3BzLCBjaGFuZ2VkUHJvcHMsIG9sZCkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5fX2RhdGFPbGQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzQ2hhbmdlZChwcm9wcywgY2hhbmdlZFByb3BzLCBvbGQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBpbiBgX2ZsdXNoUHJvcGVydGllc2AgdG8gZGV0ZXJtaW5lIGlmIGBfcHJvcGVydGllc0NoYW5nZWRgXG4gICAgICogc2hvdWxkIGJlIGNhbGxlZC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gcmV0dXJucyB0cnVlIGlmXG4gICAgICogcHJvcGVydGllcyBhcmUgcGVuZGluZy4gT3ZlcnJpZGUgdG8gY3VzdG9taXplIHdoZW5cbiAgICAgKiBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBpcyBjYWxsZWQuXG4gICAgICogQHBhcmFtIHshT2JqZWN0fSBjdXJyZW50UHJvcHMgQmFnIG9mIGFsbCBjdXJyZW50IGFjY2Vzc29yIHZhbHVlc1xuICAgICAqIEBwYXJhbSB7P09iamVjdH0gY2hhbmdlZFByb3BzIEJhZyBvZiBwcm9wZXJ0aWVzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3RcbiAgICAgKiAgIGNhbGwgdG8gYF9wcm9wZXJ0aWVzQ2hhbmdlZGBcbiAgICAgKiBAcGFyYW0gez9PYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGVhY2ggcHJvcGVydHlcbiAgICAgKiAgIGluIGBjaGFuZ2VkUHJvcHNgXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBjaGFuZ2VkUHJvcHMgaXMgdHJ1dGh5XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3Nob3VsZFByb3BlcnRpZXNDaGFuZ2UoY3VycmVudFByb3BzLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIHJldHVybiBCb29sZWFuKGNoYW5nZWRQcm9wcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgY2FsbGVkIHdoZW4gYW55IHByb3BlcnRpZXMgd2l0aCBhY2Nlc3NvcnMgY3JlYXRlZCB2aWFcbiAgICAgKiBgX2NyZWF0ZVByb3BlcnR5QWNjZXNzb3JgIGhhdmUgYmVlbiBzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IGN1cnJlbnRQcm9wcyBCYWcgb2YgYWxsIGN1cnJlbnQgYWNjZXNzb3IgdmFsdWVzXG4gICAgICogQHBhcmFtIHs/T2JqZWN0fSBjaGFuZ2VkUHJvcHMgQmFnIG9mIHByb3BlcnRpZXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAqICAgY2FsbCB0byBgX3Byb3BlcnRpZXNDaGFuZ2VkYFxuICAgICAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgZWFjaCBwcm9wZXJ0eVxuICAgICAqICAgaW4gYGNoYW5nZWRQcm9wc2BcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfcHJvcGVydGllc0NoYW5nZWQoY3VycmVudFByb3BzLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGRldGVybWluZSB3aGV0aGVyIGEgcHJvcGVydHkgdmFsdWUgc2hvdWxkIGJlXG4gICAgICogY29uc2lkZXJlZCBhcyBhIGNoYW5nZSBhbmQgY2F1c2UgdGhlIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrXG4gICAgICogdG8gYmUgZW5xdWV1ZWQuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGB0cnVlYCBpZiBhIHN0cmljdCBlcXVhbGl0eVxuICAgICAqIGNoZWNrIGZhaWxzLiBUaGUgbWV0aG9kIGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBgTmFOYC5cbiAgICAgKlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGUuZy4gcHJvdmlkZSBzdHJpY3RlciBjaGVja2luZyBmb3JcbiAgICAgKiBPYmplY3RzL0FycmF5cyB3aGVuIHVzaW5nIGltbXV0YWJsZSBwYXR0ZXJucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBOZXcgcHJvcGVydHkgdmFsdWVcbiAgICAgKiBAcGFyYW0geyp9IG9sZCBQcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgY2hhbmdlXG4gICAgICogICBhbmQgZW5xdWV1ZSBhIGBfcHJvZXBydGllc0NoYW5nZWRgIGNhbGxiYWNrXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIG9sZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gU3RyaWN0IGVxdWFsaXR5IGNoZWNrXG4gICAgICAgIChvbGQgIT09IHZhbHVlICYmXG4gICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIChvbGQ9PU5hTiwgdmFsdWU9PU5hTikgYWx3YXlzIHJldHVybnMgZmFsc2VcbiAgICAgICAgICAob2xkID09PSBvbGQgfHwgdmFsdWUgPT09IHZhbHVlKSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBuYXRpdmUgQ3VzdG9tIEVsZW1lbnRzIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIHRvXG4gICAgICogc2V0IGFuIGF0dHJpYnV0ZSB2YWx1ZSB0byBhIHByb3BlcnR5IHZpYSBgX2F0dHJpYnV0ZVRvUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUgdGhhdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBvbGQgT2xkIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWUgTmV3IGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gbmFtZXNwYWNlIEF0dHJpYnV0ZSBuYW1lc3BhY2UuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBTdXBlciBtYXkgb3IgbWF5IG5vdCBpbXBsZW1lbnQgdGhlIGNhbGxiYWNrXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUsIG5hbWVzcGFjZSkge1xuICAgICAgaWYgKG9sZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlLCBuYW1lc3BhY2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc2VyaWFsaXplcyBhbiBhdHRyaWJ1dGUgdG8gaXRzIGFzc29jaWF0ZWQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYWxscyB0aGUgYF9kZXNlcmlhbGl6ZVZhbHVlYCBtZXRob2QgdG8gY29udmVydCB0aGUgc3RyaW5nIHRvXG4gICAgICogYSB0eXBlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgTmFtZSBvZiBhdHRyaWJ1dGUgdG8gZGVzZXJpYWxpemUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7Kj19IHR5cGUgdHlwZSB0byBkZXNlcmlhbGl6ZSB0bywgZGVmYXVsdHMgdG8gdGhlIHZhbHVlXG4gICAgICogcmV0dXJuZWQgZnJvbSBgdHlwZUZvclByb3BlcnR5YFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2F0dHJpYnV0ZVRvUHJvcGVydHkoYXR0cmlidXRlLCB2YWx1ZSwgdHlwZSkge1xuICAgICAgaWYgKCF0aGlzLl9fc2VyaWFsaXppbmcpIHtcbiAgICAgICAgY29uc3QgbWFwID0gdGhpcy5fX2RhdGFBdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IG1hcCAmJiBtYXBbYXR0cmlidXRlXSB8fCBhdHRyaWJ1dGU7XG4gICAgICAgIHRoaXNbcHJvcGVydHldID0gdGhpcy5fZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSB8fFxuICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IudHlwZUZvclByb3BlcnR5KHByb3BlcnR5KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyBhIHByb3BlcnR5IHRvIGl0cyBhc3NvY2lhdGVkIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfSBDbG9zdXJlIGNhbid0IGZpZ3VyZSBvdXQgYHRoaXNgIGlzIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZSB0byByZWZsZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYXR0cmlidXRlIEF0dHJpYnV0ZSBuYW1lIHRvIHJlZmxlY3QgdG8uXG4gICAgICogQHBhcmFtIHsqPX0gdmFsdWUgUHJvcGVydHkgdmFsdWUgdG8gcmVmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3Byb3BlcnR5VG9BdHRyaWJ1dGUocHJvcGVydHksIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICAgIHRoaXMuX19zZXJpYWxpemluZyA9IHRydWU7XG4gICAgICB2YWx1ZSA9IChhcmd1bWVudHMubGVuZ3RoIDwgMykgPyB0aGlzW3Byb3BlcnR5XSA6IHZhbHVlO1xuICAgICAgdGhpcy5fdmFsdWVUb05vZGVBdHRyaWJ1dGUoLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMpLCB2YWx1ZSxcbiAgICAgICAgYXR0cmlidXRlIHx8IHRoaXMuY29uc3RydWN0b3IuYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHByb3BlcnR5KSk7XG4gICAgICB0aGlzLl9fc2VyaWFsaXppbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdHlwZWQgdmFsdWUgdG8gYW4gSFRNTCBhdHRyaWJ1dGUgb24gYSBub2RlLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgY2FsbHMgdGhlIGBfc2VyaWFsaXplVmFsdWVgIG1ldGhvZCB0byBjb252ZXJ0IHRoZSB0eXBlZFxuICAgICAqIHZhbHVlIHRvIGEgc3RyaW5nLiAgSWYgdGhlIGBfc2VyaWFsaXplVmFsdWVgIG1ldGhvZCByZXR1cm5zIGB1bmRlZmluZWRgLFxuICAgICAqIHRoZSBhdHRyaWJ1dGUgd2lsbCBiZSByZW1vdmVkICh0aGlzIGlzIHRoZSBkZWZhdWx0IGZvciBib29sZWFuXG4gICAgICogdHlwZSBgZmFsc2VgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZSBFbGVtZW50IHRvIHNldCBhdHRyaWJ1dGUgdG8uXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBzZXJpYWxpemUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSBBdHRyaWJ1dGUgbmFtZSB0byBzZXJpYWxpemUgdG8uXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfdmFsdWVUb05vZGVBdHRyaWJ1dGUobm9kZSwgdmFsdWUsIGF0dHJpYnV0ZSkge1xuICAgICAgY29uc3Qgc3RyID0gdGhpcy5fc2VyaWFsaXplVmFsdWUodmFsdWUpO1xuICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ2NsYXNzJyB8fCBhdHRyaWJ1dGUgPT09ICduYW1lJyB8fCBhdHRyaWJ1dGUgPT09ICdzbG90Jykge1xuICAgICAgICBub2RlID0gLyoqIEB0eXBlIHs/RWxlbWVudH0gKi8od3JhcChub2RlKSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgc3RyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIHR5cGVkIEphdmFTY3JpcHQgdmFsdWUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiBzZXR0aW5nIEpTIHByb3BlcnR5IHZhbHVlcyB0b1xuICAgICAqIEhUTUwgYXR0cmlidXRlcy4gIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBwcm92aWRlXG4gICAgICogc2VyaWFsaXphdGlvbiBmb3IgY3VzdG9tIHR5cGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBQcm9wZXJ0eSB2YWx1ZSB0byBzZXJpYWxpemUuXG4gICAgICogQHJldHVybiB7c3RyaW5nIHwgdW5kZWZpbmVkfSBTdHJpbmcgc2VyaWFsaXplZCBmcm9tIHRoZSBwcm92aWRlZFxuICAgICAqIHByb3BlcnR5ICB2YWx1ZS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfc2VyaWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgIHJldHVybiB2YWx1ZSA/ICcnIDogdW5kZWZpbmVkO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gdmFsdWUudG9TdHJpbmcoKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIHN0cmluZyB0byBhIHR5cGVkIEphdmFTY3JpcHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiByZWFkaW5nIEhUTUwgYXR0cmlidXRlIHZhbHVlcyB0b1xuICAgICAqIEpTIHByb3BlcnRpZXMuICBVc2VycyBtYXkgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcHJvdmlkZVxuICAgICAqIGRlc2VyaWFsaXphdGlvbiBmb3IgY3VzdG9tIGB0eXBlYHMuIFR5cGVzIGZvciBgQm9vbGVhbmAsIGBTdHJpbmdgLFxuICAgICAqIGFuZCBgTnVtYmVyYCBjb252ZXJ0IGF0dHJpYnV0ZXMgdG8gdGhlIGV4cGVjdGVkIHR5cGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byBkZXNlcmlhbGl6ZS5cbiAgICAgKiBAcGFyYW0geyo9fSB0eXBlIFR5cGUgdG8gZGVzZXJpYWxpemUgdGhlIHN0cmluZyB0by5cbiAgICAgKiBAcmV0dXJuIHsqfSBUeXBlZCB2YWx1ZSBkZXNlcmlhbGl6ZWQgZnJvbSB0aGUgcHJvdmlkZWQgc3RyaW5nLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9kZXNlcmlhbGl6ZVZhbHVlKHZhbHVlLCB0eXBlKSB7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgIHJldHVybiAodmFsdWUgIT09IG51bGwpO1xuICAgICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gUHJvcGVydGllc0NoYW5nZWQ7XG59KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgY2FtZWxUb0Rhc2hDYXNlLCBkYXNoVG9DYW1lbENhc2UgfSBmcm9tICcuLi91dGlscy9jYXNlLW1hcC5qcyc7XG5pbXBvcnQgeyBQcm9wZXJ0aWVzQ2hhbmdlZCB9IGZyb20gJy4vcHJvcGVydGllcy1jaGFuZ2VkLmpzJztcblxuLy8gU2F2ZSBtYXAgb2YgbmF0aXZlIHByb3BlcnRpZXM7IHRoaXMgZm9ybXMgYSBibGFja2xpc3Qgb3IgcHJvcGVydGllc1xuLy8gdGhhdCB3b24ndCBoYXZlIHRoZWlyIHZhbHVlcyBcInNhdmVkXCIgYnkgYHNhdmVBY2Nlc3NvclZhbHVlYCwgc2luY2Vcbi8vIHJlYWRpbmcgZnJvbSBhbiBIVE1MRWxlbWVudCBhY2Nlc3NvciBmcm9tIHRoZSBjb250ZXh0IG9mIGEgcHJvdG90eXBlIHRocm93c1xuY29uc3QgbmF0aXZlUHJvcGVydGllcyA9IHt9O1xubGV0IHByb3RvID0gSFRNTEVsZW1lbnQucHJvdG90eXBlO1xud2hpbGUgKHByb3RvKSB7XG4gIGxldCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKTtcbiAgZm9yIChsZXQgaT0wOyBpPHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgbmF0aXZlUHJvcGVydGllc1twcm9wc1tpXV0gPSB0cnVlO1xuICB9XG4gIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIHNhdmUgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgdGhhdCB3aWxsIGJlIG92ZXJyaWRkZW4gd2l0aFxuICogYW4gYWNjZXNzb3IuIElmIHRoZSBgbW9kZWxgIGlzIGEgcHJvdG90eXBlLCB0aGUgdmFsdWVzIHdpbGwgYmUgc2F2ZWRcbiAqIGluIGBfX2RhdGFQcm90b2AsIGFuZCBpdCdzIHVwIHRvIHRoZSB1c2VyIChvciBkb3duc3RyZWFtIG1peGluKSB0b1xuICogZGVjaWRlIGhvdy93aGVuIHRvIHNldCB0aGVzZSB2YWx1ZXMgYmFjayBpbnRvIHRoZSBhY2Nlc3NvcnMuXG4gKiBJZiBgbW9kZWxgIGlzIGFscmVhZHkgYW4gaW5zdGFuY2UgKGl0IGhhcyBhIGBfX2RhdGFgIHByb3BlcnR5KSwgdGhlblxuICogdGhlIHZhbHVlIHdpbGwgYmUgc2V0IGFzIGEgcGVuZGluZyBwcm9wZXJ0eSwgbWVhbmluZyB0aGUgdXNlciBzaG91bGRcbiAqIGNhbGwgYF9pbnZhbGlkYXRlUHJvcGVydGllc2Agb3IgYF9mbHVzaFByb3BlcnRpZXNgIHRvIHRha2UgZWZmZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1vZGVsIFByb3RvdHlwZSBvciBpbnN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgcHJvcGVydHlcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlQWNjZXNzb3JWYWx1ZShtb2RlbCwgcHJvcGVydHkpIHtcbiAgLy8gRG9uJ3QgcmVhZC9zdG9yZSB2YWx1ZSBmb3IgYW55IG5hdGl2ZSBwcm9wZXJ0aWVzIHNpbmNlIHRoZXkgY291bGQgdGhyb3dcbiAgaWYgKCFuYXRpdmVQcm9wZXJ0aWVzW3Byb3BlcnR5XSkge1xuICAgIGxldCB2YWx1ZSA9IG1vZGVsW3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKG1vZGVsLl9fZGF0YSkge1xuICAgICAgICAvLyBBZGRpbmcgYWNjZXNzb3IgdG8gaW5zdGFuY2U7IHVwZGF0ZSB0aGUgcHJvcGVydHlcbiAgICAgICAgLy8gSXQgaXMgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0byBjYWxsIF9mbHVzaFByb3BlcnRpZXNcbiAgICAgICAgbW9kZWwuX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkaW5nIGFjY2Vzc29yIHRvIHByb3RvOyBzYXZlIHByb3RvJ3MgdmFsdWUgZm9yIGluc3RhbmNlLXRpbWUgdXNlXG4gICAgICAgIGlmICghbW9kZWwuX19kYXRhUHJvdG8pIHtcbiAgICAgICAgICBtb2RlbC5fX2RhdGFQcm90byA9IHt9O1xuICAgICAgICB9IGVsc2UgaWYgKCFtb2RlbC5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX2RhdGFQcm90bycsIG1vZGVsKSkpIHtcbiAgICAgICAgICBtb2RlbC5fX2RhdGFQcm90byA9IE9iamVjdC5jcmVhdGUobW9kZWwuX19kYXRhUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIG1vZGVsLl9fZGF0YVByb3RvW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyBiYXNpYyBtZXRhLXByb2dyYW1taW5nIGZvciBjcmVhdGluZyBvbmVcbiAqIG9yIG1vcmUgcHJvcGVydHkgYWNjZXNzb3JzIChnZXR0ZXIvc2V0dGVyIHBhaXIpIHRoYXQgZW5xdWV1ZSBhbiBhc3luY1xuICogKGJhdGNoZWQpIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICpcbiAqIEZvciBiYXNpYyB1c2FnZSBvZiB0aGlzIG1peGluOlxuICpcbiAqIC0gICBEZWNsYXJlIGF0dHJpYnV0ZXMgdG8gb2JzZXJ2ZSB2aWEgdGhlIHN0YW5kYXJkIGBzdGF0aWMgZ2V0XG4gKiAgICAgb2JzZXJ2ZWRBdHRyaWJ1dGVzKClgLiBVc2UgYGRhc2gtY2FzZWAgYXR0cmlidXRlIG5hbWVzIHRvIHJlcHJlc2VudFxuICogICAgIGBjYW1lbENhc2VgIHByb3BlcnR5IG5hbWVzLlxuICogLSAgIEltcGxlbWVudCB0aGUgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2sgb24gdGhlIGNsYXNzLlxuICogLSAgIENhbGwgYE15Q2xhc3MuY3JlYXRlUHJvcGVydGllc0ZvckF0dHJpYnV0ZXMoKWAgKipvbmNlKiogb24gdGhlIGNsYXNzIHRvXG4gKiAgICAgZ2VuZXJhdGUgcHJvcGVydHkgYWNjZXNzb3JzIGZvciBlYWNoIG9ic2VydmVkIGF0dHJpYnV0ZS4gVGhpcyBtdXN0IGJlXG4gKiAgICAgY2FsbGVkIGJlZm9yZSB0aGUgZmlyc3QgaW5zdGFuY2UgaXMgY3JlYXRlZCwgZm9yIGV4YW1wbGUsIGJ5IGNhbGxpbmcgaXRcbiAqICAgICBiZWZvcmUgY2FsbGluZyBgY3VzdG9tRWxlbWVudHMuZGVmaW5lYC4gSXQgY2FuIGFsc28gYmUgY2FsbGVkIGxhemlseSBmcm9tXG4gKiAgICAgdGhlIGVsZW1lbnQncyBgY29uc3RydWN0b3JgLCBhcyBsb25nIGFzIGl0J3MgZ3VhcmRlZCBzbyB0aGF0IHRoZSBjYWxsIGlzXG4gKiAgICAgb25seSBtYWRlIG9uY2UsIHdoZW4gdGhlIGZpcnN0IGluc3RhbmNlIGlzIGNyZWF0ZWQuXG4gKiAtICAgQ2FsbCBgdGhpcy5fZW5hYmxlUHJvcGVydGllcygpYCBpbiB0aGUgZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2AgdG9cbiAqICAgICBlbmFibGUgdGhlIGFjY2Vzc29ycy5cbiAqXG4gKiBBbnkgYG9ic2VydmVkQXR0cmlidXRlc2Agd2lsbCBhdXRvbWF0aWNhbGx5IGJlXG4gKiBkZXNlcmlhbGl6ZWQgdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIGFuZCBzZXQgdG8gdGhlIGFzc29jaWF0ZWRcbiAqIHByb3BlcnR5IHVzaW5nIGBkYXNoLWNhc2VgLXRvLWBjYW1lbENhc2VgIGNvbnZlbnRpb24uXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAYXBwbGllc01peGluIFByb3BlcnRpZXNDaGFuZ2VkXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIGZvciByZWFjdGluZyB0byBwcm9wZXJ0eSBjaGFuZ2VzIGZyb21cbiAqICAgZ2VuZXJhdGVkIHByb3BlcnR5IGFjY2Vzc29ycy5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0eUFjY2Vzc29ycyA9IGRlZHVwaW5nTWl4aW4oc3VwZXJDbGFzcyA9PiB7XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzQ2hhbmdlZH1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgIGNvbnN0IGJhc2UgPSBQcm9wZXJ0aWVzQ2hhbmdlZChzdXBlckNsYXNzKTtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlBY2Nlc3NvcnN9XG4gICAqIEBleHRlbmRzIHtiYXNlfVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBQcm9wZXJ0eUFjY2Vzc29ycyBleHRlbmRzIGJhc2Uge1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHByb3BlcnR5IGFjY2Vzc29ycyBmb3IgYWxsIGF0dHJpYnV0ZXMgaW4gdGhlIHN0YW5kYXJkXG4gICAgICogc3RhdGljIGBvYnNlcnZlZEF0dHJpYnV0ZXNgIGFycmF5LlxuICAgICAqXG4gICAgICogQXR0cmlidXRlIG5hbWVzIGFyZSBtYXBwZWQgdG8gcHJvcGVydHkgbmFtZXMgdXNpbmcgdGhlIGBkYXNoLWNhc2VgIHRvXG4gICAgICogYGNhbWVsQ2FzZWAgY29udmVudGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0aWVzRm9yQXR0cmlidXRlcygpIHtcbiAgICAgIGxldCBhJCA9ICAvKiogQHR5cGUgez99ICovICh0aGlzKS5vYnNlcnZlZEF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKGxldCBpPTA7IGkgPCBhJC5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnByb3RvdHlwZS5fY3JlYXRlUHJvcGVydHlBY2Nlc3NvcihkYXNoVG9DYW1lbENhc2UoYSRbaV0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGF0dHJpYnV0ZSBuYW1lIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIEJ5IGRlZmF1bHQsIGNvbnZlcnRzIGNhbWVsIHRvIGRhc2ggY2FzZSwgZS5nLiBgZm9vQmFyYCB0byBgZm9vLWJhcmAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IHRvIGNvbnZlcnRcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEF0dHJpYnV0ZSBuYW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIGNhbWVsVG9EYXNoQ2FzZShwcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIFByb3BlcnRpZXNDaGFuZ2VkIGltcGxlbWVudGF0aW9uIHRvIGluaXRpYWxpemUgdmFsdWVzIGZvclxuICAgICAqIGFjY2Vzc29ycyBjcmVhdGVkIGZvciB2YWx1ZXMgdGhhdCBhbHJlYWR5IGV4aXN0ZWQgb24gdGhlIGVsZW1lbnRcbiAgICAgKiBwcm90b3R5cGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgICBpZiAodGhpcy5fX2RhdGFQcm90bykge1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplUHJvdG9Qcm9wZXJ0aWVzKHRoaXMuX19kYXRhUHJvdG8pO1xuICAgICAgICB0aGlzLl9fZGF0YVByb3RvID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN1cGVyLl9pbml0aWFsaXplUHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBhdCBpbnN0YW5jZSB0aW1lIHdpdGggYmFnIG9mIHByb3BlcnRpZXMgdGhhdCB3ZXJlIG92ZXJ3cml0dGVuXG4gICAgICogYnkgYWNjZXNzb3JzIG9uIHRoZSBwcm90b3R5cGUgd2hlbiBhY2Nlc3NvcnMgd2VyZSBjcmVhdGVkLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2V0cyB0aGVzZSBwcm9wZXJ0aWVzIGJhY2sgaW50byB0aGVcbiAgICAgKiBzZXR0ZXIgYXQgaW5zdGFuY2UgdGltZS4gIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGFzIGFuIG92ZXJyaWRlXG4gICAgICogcG9pbnQgZm9yIGN1c3RvbWl6aW5nIG9yIHByb3ZpZGluZyBtb3JlIGVmZmljaWVudCBpbml0aWFsaXphdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgcHJvcGVydHkgdmFsdWVzIHRoYXQgd2VyZSBvdmVyd3JpdHRlblxuICAgICAqICAgd2hlbiBjcmVhdGluZyBwcm9wZXJ0eSBhY2Nlc3NvcnMuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm90b1Byb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIGZvciAobGV0IHAgaW4gcHJvcHMpIHtcbiAgICAgICAgdGhpcy5fc2V0UHJvcGVydHkocCwgcHJvcHNbcF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIGVsZW1lbnQgaGFzIHRoZSBnaXZlbiBhdHRyaWJ1dGUuIElmIGl0IGRvZXMgbm90LFxuICAgICAqIGFzc2lnbnMgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c30gQ2xvc3VyZSBjYW4ndCBmaWd1cmUgb3V0IGB0aGlzYCBpcyBpbmZhY3QgYW5cbiAgICAgKiAgICAgZWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSBOYW1lIG9mIGF0dHJpYnV0ZSB0byBlbnN1cmUgaXMgc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2Vuc3VyZUF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgICBjb25zdCBlbCA9IC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKTtcbiAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVUb05vZGVBdHRyaWJ1dGUoZWwsIHZhbHVlLCBhdHRyaWJ1dGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBQcm9wZXJ0aWVzQ2hhbmdlZCBpbXBsZW1lbnRpb24gdG8gc2VyaWFsaXplIG9iamVjdHMgYXMgSlNPTi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgUHJvcGVydHkgdmFsdWUgdG8gc2VyaWFsaXplLlxuICAgICAqIEByZXR1cm4ge3N0cmluZyB8IHVuZGVmaW5lZH0gU3RyaW5nIHNlcmlhbGl6ZWQgZnJvbSB0aGUgcHJvdmlkZWQgcHJvcGVydHlcbiAgICAgKiAgICAgdmFsdWUuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3NlcmlhbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xuICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gc3VwZXIuX3NlcmlhbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIHN0cmluZyB0byBhIHR5cGVkIEphdmFTY3JpcHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUG9seW1lciB3aGVuIHJlYWRpbmcgSFRNTCBhdHRyaWJ1dGUgdmFsdWVzIHRvXG4gICAgICogSlMgcHJvcGVydGllcy4gIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCBvbiBQb2x5bWVyIGVsZW1lbnRcbiAgICAgKiBwcm90b3R5cGVzIHRvIHByb3ZpZGUgZGVzZXJpYWxpemF0aW9uIGZvciBjdXN0b20gYHR5cGVgcy4gIE5vdGUsXG4gICAgICogdGhlIGB0eXBlYCBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIGB0eXBlYCBmaWVsZCBwcm92aWRlZCBpbiB0aGVcbiAgICAgKiBgcHJvcGVydGllc2AgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIGEgZ2l2ZW4gcHJvcGVydHksIGFuZCBpc1xuICAgICAqIGJ5IGNvbnZlbnRpb24gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSB0byBkZXNlcmlhbGl6ZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUgdG8gZGVzZXJpYWxpemUuXG4gICAgICogQHBhcmFtIHsqPX0gdHlwZSBUeXBlIHRvIGRlc2VyaWFsaXplIHRoZSBzdHJpbmcgdG8uXG4gICAgICogQHJldHVybiB7Kn0gVHlwZWQgdmFsdWUgZGVzZXJpYWxpemVkIGZyb20gdGhlIHByb3ZpZGVkIHN0cmluZy5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAqL1xuICAgICAgbGV0IG91dFZhbHVlO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovKHZhbHVlKSk7XG4gICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICAvLyBhbGxvdyBub24tSlNPTiBsaXRlcmFscyBsaWtlIFN0cmluZ3MgYW5kIE51bWJlcnNcbiAgICAgICAgICAgIG91dFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovKHZhbHVlKSk7XG4gICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFBvbHltZXI6OkF0dHJpYnV0ZXM6IGNvdWxkbid0IGRlY29kZSBBcnJheSBhcyBKU09OOiAke3ZhbHVlfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEYXRlOlxuICAgICAgICAgIG91dFZhbHVlID0gaXNOYU4odmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgb3V0VmFsdWUgPSBuZXcgRGF0ZShvdXRWYWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3V0VmFsdWUgPSBzdXBlci5fZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0VmFsdWU7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tZmFsbHRocm91Z2ggKi9cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBQcm9wZXJ0aWVzQ2hhbmdlZCBpbXBsZW1lbnRhdGlvbiB0byBzYXZlIGV4aXN0aW5nIHByb3RvdHlwZVxuICAgICAqIHByb3BlcnR5IHZhbHVlIHNvIHRoYXQgaXQgY2FuIGJlIHJlc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlYWRPbmx5IFdoZW4gdHJ1ZSwgbm8gc2V0dGVyIGlzIGNyZWF0ZWRcbiAgICAgKlxuICAgICAqIFdoZW4gY2FsbGluZyBvbiBhIHByb3RvdHlwZSwgYW55IG92ZXJ3cml0dGVuIHZhbHVlcyBhcmUgc2F2ZWQgaW5cbiAgICAgKiBgX19kYXRhUHJvdG9gLCBhbmQgaXQgaXMgdXAgdG8gdGhlIHN1YmNsYXNzZXIgdG8gZGVjaWRlIGhvdy93aGVuXG4gICAgICogdG8gc2V0IHRob3NlIHByb3BlcnRpZXMgYmFjayBpbnRvIHRoZSBhY2Nlc3Nvci4gIFdoZW4gY2FsbGluZyBvbiBhblxuICAgICAqIGluc3RhbmNlLCB0aGUgb3ZlcndyaXR0ZW4gdmFsdWUgaXMgc2V0IHZpYSBgX3NldFBlbmRpbmdQcm9wZXJ0eWAsXG4gICAgICogYW5kIHRoZSB1c2VyIHNob3VsZCBjYWxsIGBfaW52YWxpZGF0ZVByb3BlcnRpZXNgIG9yIGBfZmx1c2hQcm9wZXJ0aWVzYFxuICAgICAqIGZvciB0aGUgdmFsdWVzIHRvIHRha2UgZWZmZWN0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9kZWZpbmVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCByZWFkT25seSkge1xuICAgICAgc2F2ZUFjY2Vzc29yVmFsdWUodGhpcywgcHJvcGVydHkpO1xuICAgICAgc3VwZXIuX2RlZmluZVByb3BlcnR5QWNjZXNzb3IocHJvcGVydHksIHJlYWRPbmx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBsaWJyYXJ5IGNyZWF0ZWQgYW4gYWNjZXNzb3IgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhbiBhY2Nlc3NvciB3YXMgY3JlYXRlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9oYXNBY2Nlc3Nvcihwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhSGFzQWNjZXNzb3IgJiYgdGhpcy5fX2RhdGFIYXNBY2Nlc3Nvcltwcm9wZXJ0eV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaGFzIGEgcGVuZGluZyBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBwcm9wZXJ0eSBoYXMgYSBwZW5kaW5nIGNoYW5nZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaXNQcm9wZXJ0eVBlbmRpbmcocHJvcCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fX2RhdGFQZW5kaW5nICYmIChwcm9wIGluIHRoaXMuX19kYXRhUGVuZGluZykpO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFByb3BlcnR5QWNjZXNzb3JzO1xuXG59KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuXG4vLyAxLnggYmFja3dhcmRzLWNvbXBhdGlibGUgYXV0by13cmFwcGVyIGZvciB0ZW1wbGF0ZSB0eXBlIGV4dGVuc2lvbnNcbi8vIFRoaXMgaXMgYSBjbGVhciBsYXllcmluZyB2aW9sYXRpb24gYW5kIGdpdmVzIGZhdm9yZWQtbmF0aW9uIHN0YXR1cyB0b1xuLy8gZG9tLWlmIGFuZCBkb20tcmVwZWF0IHRlbXBsYXRlcy4gIFRoaXMgaXMgYSBjb25jZWl0IHdlJ3JlIGNob29zaW5nIHRvIGtlZXBcbi8vIGEuKSB0byBlYXNlIDEueCBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBkdWUgdG8gbG9zcyBvZiBgaXNgLCBhbmRcbi8vIGIuKSB0byBtYWludGFpbiBpZi9yZXBlYXQgY2FwYWJpbGl0eSBpbiBwYXJzZXItY29uc3RyYWluZWQgZWxlbWVudHNcbi8vICAgICAoZS5nLiB0YWJsZSwgc2VsZWN0KSBpbiBsaWV1IG9mIG5hdGl2ZSBDRSB0eXBlIGV4dGVuc2lvbnMgd2l0aG91dFxuLy8gICAgIG1hc3NpdmUgbmV3IGludmVudGlvbiBpbiB0aGlzIHNwYWNlIChlLmcuIGRpcmVjdGl2ZSBzeXN0ZW0pXG5jb25zdCB0ZW1wbGF0ZUV4dGVuc2lvbnMgPSB7XG4gICdkb20taWYnOiB0cnVlLFxuICAnZG9tLXJlcGVhdCc6IHRydWVcbn07XG5cbmxldCBwbGFjZWhvbGRlckJ1Z0RldGVjdCA9IGZhbHNlO1xubGV0IHBsYWNlaG9sZGVyQnVnID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGhhc1BsYWNlaG9sZGVyQnVnKCkge1xuICBpZiAoIXBsYWNlaG9sZGVyQnVnRGV0ZWN0KSB7XG4gICAgcGxhY2Vob2xkZXJCdWdEZXRlY3QgPSB0cnVlO1xuICAgIGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAnYSc7XG4gICAgcGxhY2Vob2xkZXJCdWcgPSB0LnBsYWNlaG9sZGVyID09PSB0LnRleHRDb250ZW50O1xuICB9XG4gIHJldHVybiBwbGFjZWhvbGRlckJ1Zztcbn1cblxuLyoqXG4gKiBTb21lIGJyb3dzZXJzIGhhdmUgYSBidWcgd2l0aCB0ZXh0YXJlYSwgd2hlcmUgcGxhY2Vob2xkZXIgdGV4dCBpcyBjb3BpZWQgYXNcbiAqIGEgdGV4dG5vZGUgY2hpbGQgb2YgdGhlIHRleHRhcmVhLlxuICpcbiAqIElmIHRoZSBwbGFjZWhvbGRlciBpcyBhIGJpbmRpbmcsIHRoaXMgY2FuIGJyZWFrIHRlbXBsYXRlIHN0YW1waW5nIGluIHR3b1xuICogd2F5cy5cbiAqXG4gKiBPbmUgaXNzdWUgaXMgdGhhdCB3aGVuIHRoZSBgcGxhY2Vob2xkZXJgIGF0dHJpYnV0ZSBpcyByZW1vdmVkIHdoZW4gdGhlXG4gKiBiaW5kaW5nIGlzIHByb2Nlc3NlZCwgdGhlIHRleHRub2RlIGNoaWxkIG9mIHRoZSB0ZXh0YXJlYSBpcyBkZWxldGVkLCBhbmQgdGhlXG4gKiB0ZW1wbGF0ZSBpbmZvIHRyaWVzIHRvIGJpbmQgaW50byB0aGF0IG5vZGUuXG4gKlxuICogV2l0aCBgbGVnYWN5T3B0aW1pemF0aW9uc2AgaW4gdXNlLCB3aGVuIHRoZSB0ZW1wbGF0ZSBpcyBzdGFtcGVkIGFuZCB0aGVcbiAqIGB0ZXh0YXJlYS50ZXh0Q29udGVudGAgYmluZGluZyBpcyBwcm9jZXNzZWQsIG5vIGNvcnJlc3BvbmRpbmcgbm9kZSBpcyBmb3VuZFxuICogYmVjYXVzZSBpdCB3YXMgcmVtb3ZlZCBkdXJpbmcgcGFyc2luZy4gQW4gZXhjZXB0aW9uIGlzIGdlbmVyYXRlZCB3aGVuIHRoaXNcbiAqIGJpbmRpbmcgaXMgdXBkYXRlZC5cbiAqXG4gKiBXaXRoIGBsZWdhY3lPcHRpbWl6YXRpb25zYCBub3QgaW4gdXNlLCB0aGUgdGVtcGxhdGUgaXMgY2xvbmVkIGJlZm9yZVxuICogcHJvY2Vzc2luZyBhbmQgdGhpcyBjaGFuZ2VzIHRoZSBhYm92ZSBiZWhhdmlvci4gVGhlIGNsb25lZCB0ZW1wbGF0ZSBhbHNvIGhhc1xuICogYSB2YWx1ZSBwcm9wZXJ0eSBzZXQgdG8gdGhlIHBsYWNlaG9sZGVyIGFuZCB0ZXh0Q29udGVudC4gVGhpcyBwcmV2ZW50cyB0aGVcbiAqIHJlbW92YWwgb2YgdGhlIHRleHRDb250ZW50IHdoZW4gdGhlIHBsYWNlaG9sZGVyIGF0dHJpYnV0ZSBpcyByZW1vdmVkLlxuICogVGhlcmVmb3JlIHRoZSBleGNlcHRpb24gZG9lcyBub3Qgb2NjdXIuIEhvd2V2ZXIsIHRoZXJlIGlzIGFuIGV4dHJhXG4gKiB1bm5lY2Vzc2FyeSBiaW5kaW5nLlxuICpcbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgQ2hlY2sgbm9kZSBmb3IgcGxhY2Vob2xkZXIgYnVnXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBmaXhQbGFjZWhvbGRlcihub2RlKSB7XG4gIGlmIChoYXNQbGFjZWhvbGRlckJ1ZygpICYmIG5vZGUubG9jYWxOYW1lID09PSAndGV4dGFyZWEnICYmIG5vZGUucGxhY2Vob2xkZXJcbiAgICAgICAgJiYgbm9kZS5wbGFjZWhvbGRlciA9PT0gbm9kZS50ZXh0Q29udGVudCkge1xuICAgIG5vZGUudGV4dENvbnRlbnQgPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBUZW1wbGF0ZUV4dGVuc2lvbihub2RlKSB7XG4gIGxldCBpcyA9IG5vZGUuZ2V0QXR0cmlidXRlKCdpcycpO1xuICBpZiAoaXMgJiYgdGVtcGxhdGVFeHRlbnNpb25zW2lzXSkge1xuICAgIGxldCB0ID0gbm9kZTtcbiAgICB0LnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICBub2RlID0gdC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXMpO1xuICAgIHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobm9kZSwgdCk7XG4gICAgbm9kZS5hcHBlbmRDaGlsZCh0KTtcbiAgICB3aGlsZSh0LmF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSh0LmF0dHJpYnV0ZXNbMF0ubmFtZSwgdC5hdHRyaWJ1dGVzWzBdLnZhbHVlKTtcbiAgICAgIHQucmVtb3ZlQXR0cmlidXRlKHQuYXR0cmlidXRlc1swXS5uYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbmZ1bmN0aW9uIGZpbmRUZW1wbGF0ZU5vZGUocm9vdCwgbm9kZUluZm8pIHtcbiAgLy8gcmVjdXJzaXZlbHkgYXNjZW5kIHRyZWUgdW50aWwgd2UgaGl0IHJvb3RcbiAgbGV0IHBhcmVudCA9IG5vZGVJbmZvLnBhcmVudEluZm8gJiYgZmluZFRlbXBsYXRlTm9kZShyb290LCBub2RlSW5mby5wYXJlbnRJbmZvKTtcbiAgLy8gdW53aW5kIHRoZSBzdGFjaywgcmV0dXJuaW5nIHRoZSBpbmRleGVkIG5vZGUgYXQgZWFjaCBsZXZlbFxuICBpZiAocGFyZW50KSB7XG4gICAgLy8gbm90ZTogbWFyZ2luYWxseSBmYXN0ZXIgdGhhbiBpbmRleGluZyB2aWEgY2hpbGROb2Rlc1xuICAgIC8vIChodHRwOi8vanNwZXJmLmNvbS9jaGlsZG5vZGVzLWxvb2t1cClcbiAgICBmb3IgKGxldCBuPXBhcmVudC5maXJzdENoaWxkLCBpPTA7IG47IG49bi5uZXh0U2libGluZykge1xuICAgICAgaWYgKG5vZGVJbmZvLnBhcmVudEluZGV4ID09PSBpKyspIHtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiByb290O1xuICB9XG59XG5cbi8vIGNvbnN0cnVjdCBgJGAgbWFwIChmcm9tIGlkIGFubm90YXRpb25zKVxuZnVuY3Rpb24gYXBwbHlJZFRvTWFwKGluc3QsIG1hcCwgbm9kZSwgbm9kZUluZm8pIHtcbiAgaWYgKG5vZGVJbmZvLmlkKSB7XG4gICAgbWFwW25vZGVJbmZvLmlkXSA9IG5vZGU7XG4gIH1cbn1cblxuLy8gaW5zdGFsbCBldmVudCBsaXN0ZW5lcnMgKGZyb20gZXZlbnQgYW5ub3RhdGlvbnMpXG5mdW5jdGlvbiBhcHBseUV2ZW50TGlzdGVuZXIoaW5zdCwgbm9kZSwgbm9kZUluZm8pIHtcbiAgaWYgKG5vZGVJbmZvLmV2ZW50cyAmJiBub2RlSW5mby5ldmVudHMubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgaj0wLCBlJD1ub2RlSW5mby5ldmVudHMsIGU7IChqPGUkLmxlbmd0aCkgJiYgKGU9ZSRbal0pOyBqKyspIHtcbiAgICAgIGluc3QuX2FkZE1ldGhvZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZS5uYW1lLCBlLnZhbHVlLCBpbnN0KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gcHVzaCBjb25maWd1cmF0aW9uIHJlZmVyZW5jZXMgYXQgY29uZmlndXJlIHRpbWVcbmZ1bmN0aW9uIGFwcGx5VGVtcGxhdGVDb250ZW50KGluc3QsIG5vZGUsIG5vZGVJbmZvKSB7XG4gIGlmIChub2RlSW5mby50ZW1wbGF0ZUluZm8pIHtcbiAgICBub2RlLl90ZW1wbGF0ZUluZm8gPSBub2RlSW5mby50ZW1wbGF0ZUluZm87XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUV2ZW50SGFuZGxlcihjb250ZXh0LCBldmVudE5hbWUsIG1ldGhvZE5hbWUpIHtcbiAgLy8gSW5zdGFuY2VzIGNhbiBvcHRpb25hbGx5IGhhdmUgYSBfbWV0aG9kSG9zdCB3aGljaCBhbGxvd3MgcmVkaXJlY3Rpbmcgd2hlcmVcbiAgLy8gdG8gZmluZCBtZXRob2RzLiBDdXJyZW50bHkgdXNlZCBieSBgdGVtcGxhdGl6ZWAuXG4gIGNvbnRleHQgPSBjb250ZXh0Ll9tZXRob2RIb3N0IHx8IGNvbnRleHQ7XG4gIGxldCBoYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChjb250ZXh0W21ldGhvZE5hbWVdKSB7XG4gICAgICBjb250ZXh0W21ldGhvZE5hbWVdKGUsIGUuZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdsaXN0ZW5lciBtZXRob2QgYCcgKyBtZXRob2ROYW1lICsgJ2Agbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBoYW5kbGVyO1xufVxuXG4vKipcbiAqIEVsZW1lbnQgbWl4aW4gdGhhdCBwcm92aWRlcyBiYXNpYyB0ZW1wbGF0ZSBwYXJzaW5nIGFuZCBzdGFtcGluZywgaW5jbHVkaW5nXG4gKiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlLXJlbGF0ZWQgZmVhdHVyZXMgZm9yIHN0YW1wZWQgdGVtcGxhdGVzOlxuICpcbiAqIC0gRGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzIChgb24tZXZlbnRuYW1lPVwibGlzdGVuZXJcImApXG4gKiAtIE1hcCBvZiBub2RlIGlkJ3MgdG8gc3RhbXBlZCBub2RlIGluc3RhbmNlcyAoYHRoaXMuJC5pZGApXG4gKiAtIE5lc3RlZCB0ZW1wbGF0ZSBjb250ZW50IGNhY2hpbmcvcmVtb3ZhbCBhbmQgcmUtaW5zdGFsbGF0aW9uIChwZXJmb3JtYW5jZVxuICogICBvcHRpbWl6YXRpb24pXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgYmFzaWMgdGVtcGxhdGUgcGFyc2luZyBhbmQgc3RhbXBpbmdcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBUZW1wbGF0ZVN0YW1wID0gZGVkdXBpbmdNaXhpbihcbiAgICAvKipcbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIENsYXNzIHRvIGFwcGx5IG1peGluIHRvLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gICAgICovXG4gICAgKHN1cGVyQ2xhc3MpID0+IHtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfVGVtcGxhdGVTdGFtcH1cbiAgICovXG4gIGNsYXNzIFRlbXBsYXRlU3RhbXAgZXh0ZW5kcyBzdXBlckNsYXNzIHtcblxuICAgIC8qKlxuICAgICAqIFNjYW5zIGEgdGVtcGxhdGUgdG8gcHJvZHVjZSB0ZW1wbGF0ZSBtZXRhZGF0YS5cbiAgICAgKlxuICAgICAqIFRlbXBsYXRlLXNwZWNpZmljIG1ldGFkYXRhIGFyZSBzdG9yZWQgaW4gdGhlIG9iamVjdCByZXR1cm5lZCwgYW5kIG5vZGUtXG4gICAgICogc3BlY2lmaWMgbWV0YWRhdGEgYXJlIHN0b3JlZCBpbiBvYmplY3RzIGluIGl0cyBmbGF0dGVuZWQgYG5vZGVJbmZvTGlzdGBcbiAgICAgKiBhcnJheS4gIE9ubHkgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIHRoYXQgd2VyZSBwYXJzZWQgYXMgbm9kZXMgb2ZcbiAgICAgKiBpbnRlcmVzdCBjb250YWluIGFuIG9iamVjdCBpbiBgbm9kZUluZm9MaXN0YC4gIEVhY2ggYG5vZGVJbmZvYCBvYmplY3RcbiAgICAgKiBjb250YWlucyBhbiBgaW5kZXhgIChgY2hpbGROb2Rlc2AgaW5kZXggaW4gcGFyZW50KSBhbmQgb3B0aW9uYWxseVxuICAgICAqIGBwYXJlbnRgLCB3aGljaCBwb2ludHMgdG8gbm9kZSBpbmZvIG9mIGl0cyBwYXJlbnQgKGluY2x1ZGluZyBpdHMgaW5kZXgpLlxuICAgICAqXG4gICAgICogVGhlIHRlbXBsYXRlIG1ldGFkYXRhIG9iamVjdCByZXR1cm5lZCBmcm9tIHRoaXMgbWV0aG9kIGhhcyB0aGUgZm9sbG93aW5nXG4gICAgICogc3RydWN0dXJlIChtYW55IGZpZWxkcyBvcHRpb25hbCk6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAge1xuICAgICAqICAgICAvLyBGbGF0dGVuZWQgbGlzdCBvZiBub2RlIG1ldGFkYXRhIChmb3Igbm9kZXMgdGhhdCBnZW5lcmF0ZWQgbWV0YWRhdGEpXG4gICAgICogICAgIG5vZGVJbmZvTGlzdDogW1xuICAgICAqICAgICAgIHtcbiAgICAgKiAgICAgICAgIC8vIGBpZGAgYXR0cmlidXRlIGZvciBhbnkgbm9kZXMgd2l0aCBpZCdzIGZvciBnZW5lcmF0aW5nIGAkYCBtYXBcbiAgICAgKiAgICAgICAgIGlkOiB7c3RyaW5nfSxcbiAgICAgKiAgICAgICAgIC8vIGBvbi1ldmVudD1cImhhbmRsZXJcImAgbWV0YWRhdGFcbiAgICAgKiAgICAgICAgIGV2ZW50czogW1xuICAgICAqICAgICAgICAgICB7XG4gICAgICogICAgICAgICAgICAgbmFtZToge3N0cmluZ30sICAgLy8gZXZlbnQgbmFtZVxuICAgICAqICAgICAgICAgICAgIHZhbHVlOiB7c3RyaW5nfSwgIC8vIGhhbmRsZXIgbWV0aG9kIG5hbWVcbiAgICAgKiAgICAgICAgICAgfSwgLi4uXG4gICAgICogICAgICAgICBdLFxuICAgICAqICAgICAgICAgLy8gTm90ZXMgd2hlbiB0aGUgdGVtcGxhdGUgY29udGFpbmVkIGEgYDxzbG90PmAgZm9yIHNoYWR5IERPTVxuICAgICAqICAgICAgICAgLy8gb3B0aW1pemF0aW9uIHB1cnBvc2VzXG4gICAgICogICAgICAgICBoYXNJbnNlcnRpb25Qb2ludDoge2Jvb2xlYW59LFxuICAgICAqICAgICAgICAgLy8gRm9yIG5lc3RlZCBgPHRlbXBsYXRlPmBgIG5vZGVzLCBuZXN0ZWQgdGVtcGxhdGUgbWV0YWRhdGFcbiAgICAgKiAgICAgICAgIHRlbXBsYXRlSW5mbzoge29iamVjdH0sIC8vIG5lc3RlZCB0ZW1wbGF0ZSBtZXRhZGF0YVxuICAgICAqICAgICAgICAgLy8gTWV0YWRhdGEgdG8gYWxsb3cgZWZmaWNpZW50IHJldHJpZXZhbCBvZiBpbnN0YW5jZWQgbm9kZVxuICAgICAqICAgICAgICAgLy8gY29ycmVzcG9uZGluZyB0byB0aGlzIG1ldGFkYXRhXG4gICAgICogICAgICAgICBwYXJlbnRJbmZvOiB7bnVtYmVyfSwgICAvLyByZWZlcmVuY2UgdG8gcGFyZW50IG5vZGVJbmZvPlxuICAgICAqICAgICAgICAgcGFyZW50SW5kZXg6IHtudW1iZXJ9LCAgLy8gaW5kZXggaW4gcGFyZW50J3MgYGNoaWxkTm9kZXNgIGNvbGxlY3Rpb25cbiAgICAgKiAgICAgICAgIGluZm9JbmRleDoge251bWJlcn0sICAgIC8vIGluZGV4IG9mIHRoaXMgYG5vZGVJbmZvYCBpbiBgdGVtcGxhdGVJbmZvLm5vZGVJbmZvTGlzdGBcbiAgICAgKiAgICAgICB9LFxuICAgICAqICAgICAgIC4uLlxuICAgICAqICAgICBdLFxuICAgICAqICAgICAvLyBXaGVuIHRydWUsIHRoZSB0ZW1wbGF0ZSBoYWQgdGhlIGBzdHJpcC13aGl0ZXNwYWNlYCBhdHRyaWJ1dGVcbiAgICAgKiAgICAgLy8gb3Igd2FzIG5lc3RlZCBpbiBhIHRlbXBsYXRlIHdpdGggdGhhdCBzZXR0aW5nXG4gICAgICogICAgIHN0cmlwV2hpdGVzcGFjZToge2Jvb2xlYW59LFxuICAgICAqICAgICAvLyBGb3IgbmVzdGVkIHRlbXBsYXRlcywgbmVzdGVkIHRlbXBsYXRlIGNvbnRlbnQgaXMgbW92ZWQgaW50b1xuICAgICAqICAgICAvLyBhIGRvY3VtZW50IGZyYWdtZW50IHN0b3JlZCBoZXJlOyB0aGlzIGlzIGFuIG9wdGltaXphdGlvbiB0b1xuICAgICAqICAgICAvLyBhdm9pZCB0aGUgY29zdCBvZiBuZXN0ZWQgdGVtcGxhdGUgY2xvbmluZ1xuICAgICAqICAgICBjb250ZW50OiB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICAgKiAgIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGtpY2tzIG9mZiBhIHJlY3Vyc2l2ZSB0cmVld2FsayBhcyBmb2xsb3dzOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogICAgX3BhcnNlVGVtcGxhdGUgPC0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICAgKiAgICAgIF9wYXJzZVRlbXBsYXRlQ29udGVudCAgICAgICAgICAgICAgfFxuICAgICAqICAgICAgICBfcGFyc2VUZW1wbGF0ZU5vZGUgIDwtLS0tLS0tLS0tLS18LS0rXG4gICAgICogICAgICAgICAgX3BhcnNlVGVtcGxhdGVOZXN0ZWRUZW1wbGF0ZSAtLSsgIHxcbiAgICAgKiAgICAgICAgICBfcGFyc2VUZW1wbGF0ZUNoaWxkTm9kZXMgLS0tLS0tLS0tK1xuICAgICAqICAgICAgICAgIF9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZXNcbiAgICAgKiAgICAgICAgICAgIF9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZVxuICAgICAqXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGVzZSBtZXRob2RzIG1heSBiZSBvdmVycmlkZGVuIHRvIGFkZCBjdXN0b20gbWV0YWRhdGEgYWJvdXQgdGVtcGxhdGVzXG4gICAgICogdG8gZWl0aGVyIGB0ZW1wbGF0ZUluZm9gIG9yIGBub2RlSW5mb2AuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgbWF5IGJlIGRlc3RydWN0aXZlIHRvIHRoZSB0ZW1wbGF0ZSwgaW4gdGhhdFxuICAgICAqIGUuZy4gZXZlbnQgYW5ub3RhdGlvbnMgbWF5IGJlIHJlbW92ZWQgYWZ0ZXIgYmVpbmcgbm90ZWQgaW4gdGhlXG4gICAgICogdGVtcGxhdGUgbWV0YWRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUZW1wbGF0ZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvPX0gb3V0ZXJUZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZnJvbSB0aGUgb3V0ZXJcbiAgICAgKiAgIHRlbXBsYXRlLCBmb3IgcGFyc2luZyBuZXN0ZWQgdGVtcGxhdGVzXG4gICAgICogQHJldHVybiB7IVRlbXBsYXRlSW5mb30gUGFyc2VkIHRlbXBsYXRlIG1ldGFkYXRhXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhcnNlVGVtcGxhdGUodGVtcGxhdGUsIG91dGVyVGVtcGxhdGVJbmZvKSB7XG4gICAgICAvLyBzaW5jZSBhIHRlbXBsYXRlIG1heSBiZSByZS11c2VkLCBtZW1vLWl6ZSBtZXRhZGF0YVxuICAgICAgaWYgKCF0ZW1wbGF0ZS5fdGVtcGxhdGVJbmZvKSB7XG4gICAgICAgIC8vIFRPRE8ocmljdGljKTogZml4IHR5cGluZ1xuICAgICAgICBsZXQgLyoqID8gKi8gdGVtcGxhdGVJbmZvID0gdGVtcGxhdGUuX3RlbXBsYXRlSW5mbyA9IHt9O1xuICAgICAgICB0ZW1wbGF0ZUluZm8ubm9kZUluZm9MaXN0ID0gW107XG4gICAgICAgIHRlbXBsYXRlSW5mby5zdHJpcFdoaXRlU3BhY2UgPVxuICAgICAgICAgIChvdXRlclRlbXBsYXRlSW5mbyAmJiBvdXRlclRlbXBsYXRlSW5mby5zdHJpcFdoaXRlU3BhY2UpIHx8XG4gICAgICAgICAgdGVtcGxhdGUuaGFzQXR0cmlidXRlKCdzdHJpcC13aGl0ZXNwYWNlJyk7XG4gICAgICAgICAvLyBUT0RPKHJpY3RpYyk6IGZpeCB0eXBpbmdcbiAgICAgICAgIHRoaXMuX3BhcnNlVGVtcGxhdGVDb250ZW50KFxuICAgICAgICAgICAgIHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIC8qKiBAdHlwZSB7P30gKi8gKHtwYXJlbnQ6IG51bGx9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVtcGxhdGUuX3RlbXBsYXRlSW5mbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWUgZG9jcyBmb3IgX3BhcnNlVGVtcGxhdGVOb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgLlxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIC5cbiAgICAgKiBAcGFyYW0geyFOb2RlSW5mb30gbm9kZUluZm8gLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZUNvbnRlbnQodGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJzZVRlbXBsYXRlTm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGVtcGxhdGUgbm9kZSBhbmQgYWRkcyB0ZW1wbGF0ZSBhbmQgbm9kZSBtZXRhZGF0YSBiYXNlZCBvblxuICAgICAqIHRoZSBjdXJyZW50IG5vZGUsIGFuZCBpdHMgYGNoaWxkTm9kZXNgIGFuZCBgYXR0cmlidXRlc2AuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBhZGQgY3VzdG9tIG5vZGUgb3IgdGVtcGxhdGUgc3BlY2lmaWNcbiAgICAgKiBtZXRhZGF0YSBiYXNlZCBvbiB0aGlzIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTm9kZShub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICBsZXQgbm90ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBlbGVtZW50ID0gLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKG5vZGUpO1xuICAgICAgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09ICd0ZW1wbGF0ZScgJiYgIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdwcmVzZXJ2ZS1jb250ZW50JykpIHtcbiAgICAgICAgbm90ZWQgPSB0aGlzLl9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUoZWxlbWVudCwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykgfHwgbm90ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09PSAnc2xvdCcpIHtcbiAgICAgICAgLy8gRm9yIFNoYWR5RG9tIG9wdGltaXphdGlvbiwgaW5kaWNhdGluZyB0aGVyZSBpcyBhbiBpbnNlcnRpb24gcG9pbnRcbiAgICAgICAgdGVtcGxhdGVJbmZvLmhhc0luc2VydGlvblBvaW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZpeFBsYWNlaG9sZGVyKGVsZW1lbnQpO1xuICAgICAgaWYgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICB0aGlzLl9wYXJzZVRlbXBsYXRlQ2hpbGROb2RlcyhlbGVtZW50LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZXMgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgbm90ZWQgPSB0aGlzLl9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZXMoZWxlbWVudCwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykgfHwgbm90ZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm90ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRlbXBsYXRlIGNoaWxkIG5vZGVzIGZvciB0aGUgZ2l2ZW4gcm9vdCBub2RlLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyB3cmFwcyB3aGl0ZWxpc3RlZCBsZWdhY3kgdGVtcGxhdGUgZXh0ZW5zaW9uc1xuICAgICAqIChgaXM9XCJkb20taWZcImAgYW5kIGBpcz1cImRvbS1yZXBlYXRcImApIHdpdGggdGhlaXIgZXF1aXZhbGVudCBlbGVtZW50XG4gICAgICogd3JhcHBlcnMsIGNvbGxhcHNlcyB0ZXh0IG5vZGVzLCBhbmQgc3RyaXBzIHdoaXRlc3BhY2UgZnJvbSB0aGUgdGVtcGxhdGVcbiAgICAgKiBpZiB0aGUgYHRlbXBsYXRlSW5mby5zdHJpcFdoaXRlc3BhY2VgIHNldHRpbmcgd2FzIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSByb290IFJvb3Qgbm9kZSB3aG9zZSBgY2hpbGROb2Rlc2Agd2lsbCBiZSBwYXJzZWRcbiAgICAgKiBAcGFyYW0geyFUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7IU5vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlQ2hpbGROb2Rlcyhyb290LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICBpZiAocm9vdC5sb2NhbE5hbWUgPT09ICdzY3JpcHQnIHx8IHJvb3QubG9jYWxOYW1lID09PSAnc3R5bGUnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IG5vZGU9cm9vdC5maXJzdENoaWxkLCBwYXJlbnRJbmRleD0wLCBuZXh0OyBub2RlOyBub2RlPW5leHQpIHtcbiAgICAgICAgLy8gV3JhcCB0ZW1wbGF0ZXNcbiAgICAgICAgaWYgKG5vZGUubG9jYWxOYW1lID09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgICBub2RlID0gd3JhcFRlbXBsYXRlRXh0ZW5zaW9uKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbGxhcHNlIGFkamFjZW50IHRleHROb2RlczogZml4ZXMgYW4gSUUgaXNzdWUgdGhhdCBjYW4gY2F1c2VcbiAgICAgICAgLy8gdGV4dCBub2RlcyB0byBiZSBpbmV4cGxpY2FibHkgc3BsaXQgPShcbiAgICAgICAgLy8gbm90ZSB0aGF0IHJvb3Qubm9ybWFsaXplKCkgc2hvdWxkIHdvcmsgYnV0IGRvZXMgbm90IHNvIHdlIGRvIHRoaXNcbiAgICAgICAgLy8gbWFudWFsbHkuXG4gICAgICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgICBsZXQgLyoqIE5vZGUgKi8gbiA9IG5leHQ7XG4gICAgICAgICAgd2hpbGUgKG4gJiYgKG4ubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSkge1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCArPSBuLnRleHRDb250ZW50O1xuICAgICAgICAgICAgbmV4dCA9IG4ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICByb290LnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICAgICAgbiA9IG5leHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG9wdGlvbmFsbHkgc3RyaXAgd2hpdGVzcGFjZVxuICAgICAgICAgIGlmICh0ZW1wbGF0ZUluZm8uc3RyaXBXaGl0ZVNwYWNlICYmICFub2RlLnRleHRDb250ZW50LnRyaW0oKSkge1xuICAgICAgICAgICAgcm9vdC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hpbGRJbmZvID1cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGVJbmZvfSAqLyAoe3BhcmVudEluZGV4LCBwYXJlbnRJbmZvOiBub2RlSW5mb30pO1xuICAgICAgICBpZiAodGhpcy5fcGFyc2VUZW1wbGF0ZU5vZGUobm9kZSwgdGVtcGxhdGVJbmZvLCBjaGlsZEluZm8pKSB7XG4gICAgICAgICAgY2hpbGRJbmZvLmluZm9JbmRleCA9IHRlbXBsYXRlSW5mby5ub2RlSW5mb0xpc3QucHVzaChjaGlsZEluZm8pIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbmNyZW1lbnQgaWYgbm90IHJlbW92ZWRcbiAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHBhcmVudEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGVtcGxhdGUgY29udGVudCBmb3IgdGhlIGdpdmVuIG5lc3RlZCBgPHRlbXBsYXRlPmAuXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgdGVtcGxhdGUgaW5mbyBpcyBzdG9yZWQgYXMgYHRlbXBsYXRlSW5mb2AgaW4gdGhlIGN1cnJlbnQgbm9kZSdzXG4gICAgICogYG5vZGVJbmZvYC4gYHRlbXBsYXRlLmNvbnRlbnRgIGlzIHJlbW92ZWQgYW5kIHN0b3JlZCBpbiBgdGVtcGxhdGVJbmZvYC5cbiAgICAgKiBJdCB3aWxsIHRoZW4gYmUgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBob3N0IHRvIHNldCBpdCBiYWNrIHRvIHRoZVxuICAgICAqIHRlbXBsYXRlIGFuZCBmb3IgdXNlcnMgc3RhbXBpbmcgbmVzdGVkIHRlbXBsYXRlcyB0byB1c2UgdGhlXG4gICAgICogYF9jb250ZW50Rm9yVGVtcGxhdGVgIG1ldGhvZCB0byByZXRyaWV2ZSB0aGUgY29udGVudCBmb3IgdGhpcyB0ZW1wbGF0ZVxuICAgICAqIChhbiBvcHRpbWl6YXRpb24gdG8gYXZvaWQgdGhlIGNvc3Qgb2YgY2xvbmluZyBuZXN0ZWQgdGVtcGxhdGUgY29udGVudCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IG5vZGUgTm9kZSB0byBwYXJzZSAoYSA8dGVtcGxhdGU+KVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSBvdXRlclRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqICAgdGhhdCBpbmNsdWRlcyB0aGUgdGVtcGxhdGUgYG5vZGVgXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUobm9kZSwgb3V0ZXJUZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICAvLyBUT0RPKHJpY3RpYyk6IHRoZSB0eXBlIG9mIG5vZGUgc2hvdWxkIGJlIG5vbi1udWxsXG4gICAgICBsZXQgZWxlbWVudCA9IC8qKiBAdHlwZSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9ICovIChub2RlKTtcbiAgICAgIGxldCB0ZW1wbGF0ZUluZm8gPSB0aGlzLl9wYXJzZVRlbXBsYXRlKGVsZW1lbnQsIG91dGVyVGVtcGxhdGVJbmZvKTtcbiAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGVJbmZvLmNvbnRlbnQgPVxuICAgICAgICAgIGVsZW1lbnQuY29udGVudC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudC5jb250ZW50KTtcbiAgICAgIG5vZGVJbmZvLnRlbXBsYXRlSW5mbyA9IHRlbXBsYXRlSW5mbztcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0ZW1wbGF0ZSBub2RlIGF0dHJpYnV0ZXMgYW5kIGFkZHMgbm9kZSBtZXRhZGF0YSB0byBgbm9kZUluZm9gXG4gICAgICogZm9yIG5vZGVzIG9mIGludGVyZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlIE5vZGUgdG8gcGFyc2VcbiAgICAgKiBAcGFyYW0geyFUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudFxuICAgICAqICAgICB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7IU5vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmlzaXRlZCBub2RlIGFkZGVkIG5vZGUtc3BlY2lmaWNcbiAgICAgKiAgIG1ldGFkYXRhIHRvIGBub2RlSW5mb2BcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZU5vZGVBdHRyaWJ1dGVzKG5vZGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8pIHtcbiAgICAgIC8vIE1ha2UgY29weSBvZiBvcmlnaW5hbCBhdHRyaWJ1dGUgbGlzdCwgc2luY2UgdGhlIG9yZGVyIG1heSBjaGFuZ2VcbiAgICAgIC8vIGFzIGF0dHJpYnV0ZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkXG4gICAgICBsZXQgbm90ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBhdHRycyA9IEFycmF5LmZyb20obm9kZS5hdHRyaWJ1dGVzKTtcbiAgICAgIGZvciAobGV0IGk9YXR0cnMubGVuZ3RoLTEsIGE7IChhPWF0dHJzW2ldKTsgaS0tKSB7XG4gICAgICAgIG5vdGVkID0gdGhpcy5fcGFyc2VUZW1wbGF0ZU5vZGVBdHRyaWJ1dGUobm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbywgYS5uYW1lLCBhLnZhbHVlKSB8fCBub3RlZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub3RlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBzaW5nbGUgdGVtcGxhdGUgbm9kZSBhdHRyaWJ1dGUgYW5kIGFkZHMgbm9kZSBtZXRhZGF0YSB0b1xuICAgICAqIGBub2RlSW5mb2AgZm9yIGF0dHJpYnV0ZXMgb2YgaW50ZXJlc3QuXG4gICAgICpcbiAgICAgKiBUaGlzIGltcGxlbWVudGF0aW9uIGFkZHMgbWV0YWRhdGEgZm9yIGBvbi1ldmVudD1cImhhbmRsZXJcImAgYXR0cmlidXRlc1xuICAgICAqIGFuZCBgaWRgIGF0dHJpYnV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgQXR0cmlidXRlIHZhbHVlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZShub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgLy8gZXZlbnRzIChvbi0qKVxuICAgICAgaWYgKG5hbWUuc2xpY2UoMCwgMykgPT09ICdvbi0nKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICBub2RlSW5mby5ldmVudHMgPSBub2RlSW5mby5ldmVudHMgfHwgW107XG4gICAgICAgIG5vZGVJbmZvLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBuYW1lLnNsaWNlKDMpLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIHN0YXRpYyBpZFxuICAgICAgZWxzZSBpZiAobmFtZSA9PT0gJ2lkJykge1xuICAgICAgICBub2RlSW5mby5pZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBgY29udGVudGAgZG9jdW1lbnQgZnJhZ21lbnQgZm9yIGEgZ2l2ZW4gdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBGb3IgbmVzdGVkIHRlbXBsYXRlcywgUG9seW1lciBwZXJmb3JtcyBhbiBvcHRpbWl6YXRpb24gdG8gY2FjaGUgbmVzdGVkXG4gICAgICogdGVtcGxhdGUgY29udGVudCB0byBhdm9pZCB0aGUgY29zdCBvZiBjbG9uaW5nIGRlZXBseSBuZXN0ZWQgdGVtcGxhdGVzLlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHJpZXZlcyB0aGUgY2FjaGVkIGNvbnRlbnQgZm9yIGEgZ2l2ZW4gdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHJldHJpZXZlIGBjb250ZW50YCBmb3JcbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fSBDb250ZW50IGZyYWdtZW50XG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2NvbnRlbnRGb3JUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgbGV0IHRlbXBsYXRlSW5mbyA9IC8qKiBAdHlwZSB7SFRNTFRlbXBsYXRlRWxlbWVudFdpdGhJbmZvfSAqLyAodGVtcGxhdGUpLl90ZW1wbGF0ZUluZm87XG4gICAgICByZXR1cm4gKHRlbXBsYXRlSW5mbyAmJiB0ZW1wbGF0ZUluZm8uY29udGVudCkgfHwgdGVtcGxhdGUuY29udGVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGNvbnRlbnQgYW5kIHJldHVybnMgYSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqIGNvbnRhaW5pbmcgdGhlIGNsb25lZCBkb20uXG4gICAgICpcbiAgICAgKiBUaGUgdGVtcGxhdGUgaXMgcGFyc2VkIChvbmNlIGFuZCBtZW1vaXplZCkgdXNpbmcgdGhpcyBsaWJyYXJ5J3NcbiAgICAgKiB0ZW1wbGF0ZSBwYXJzaW5nIGZlYXR1cmVzLCBhbmQgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyB2YWx1ZS1hZGRlZFxuICAgICAqIGZlYXR1cmVzOlxuICAgICAqICogQWRkcyBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMgZm9yIGBvbi1ldmVudD1cImhhbmRsZXJcImAgYXR0cmlidXRlc1xuICAgICAqICogR2VuZXJhdGVzIGFuIFwiaWQgbWFwXCIgZm9yIGFsbCBub2RlcyB3aXRoIGlkJ3MgdW5kZXIgYCRgIG9uIHJldHVybmVkXG4gICAgICogICBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqICogUGFzc2VzIHRlbXBsYXRlIGluZm8gaW5jbHVkaW5nIGBjb250ZW50YCBiYWNrIHRvIHRlbXBsYXRlcyBhc1xuICAgICAqICAgYF90ZW1wbGF0ZUluZm9gIChhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkZWVwIHRlbXBsYXRlXG4gICAgICogICBjbG9uaW5nKVxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZSBtZW1vaXplZCB0ZW1wbGF0ZSBwYXJzaW5nIHByb2Nlc3MgaXMgZGVzdHJ1Y3RpdmUgdG8gdGhlXG4gICAgICogdGVtcGxhdGU6IGF0dHJpYnV0ZXMgZm9yIGJpbmRpbmdzIGFuZCBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMgYXJlXG4gICAgICogcmVtb3ZlZCBhZnRlciBiZWluZyBub3RlZCBpbiBub3RlcywgYW5kIGFueSBuZXN0ZWQgYDx0ZW1wbGF0ZT4uY29udGVudGBcbiAgICAgKiBpcyByZW1vdmVkIGFuZCBzdG9yZWQgaW4gbm90ZXMgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHN0YW1wXG4gICAgICogQHJldHVybiB7IVN0YW1wZWRUZW1wbGF0ZX0gQ2xvbmVkIHRlbXBsYXRlIGNvbnRlbnRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfc3RhbXBUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgLy8gUG9seWZpbGwgc3VwcG9ydDogYm9vdHN0cmFwIHRoZSB0ZW1wbGF0ZSBpZiBpdCBoYXMgbm90IGFscmVhZHkgYmVlblxuICAgICAgaWYgKHRlbXBsYXRlICYmICF0ZW1wbGF0ZS5jb250ZW50ICYmXG4gICAgICAgICAgd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQgJiYgSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZSkge1xuICAgICAgICBIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKHRlbXBsYXRlKTtcbiAgICAgIH1cbiAgICAgIGxldCB0ZW1wbGF0ZUluZm8gPSB0aGlzLmNvbnN0cnVjdG9yLl9wYXJzZVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIGxldCBub2RlSW5mbyA9IHRlbXBsYXRlSW5mby5ub2RlSW5mb0xpc3Q7XG4gICAgICBsZXQgY29udGVudCA9IHRlbXBsYXRlSW5mby5jb250ZW50IHx8IHRlbXBsYXRlLmNvbnRlbnQ7XG4gICAgICBsZXQgZG9tID0gLyoqIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fSAqLyAoZG9jdW1lbnQuaW1wb3J0Tm9kZShjb250ZW50LCB0cnVlKSk7XG4gICAgICAvLyBOT1RFOiBTaGFkeURvbSBvcHRpbWl6YXRpb24gaW5kaWNhdGluZyB0aGVyZSBpcyBhbiBpbnNlcnRpb24gcG9pbnRcbiAgICAgIGRvbS5fX25vSW5zZXJ0aW9uUG9pbnQgPSAhdGVtcGxhdGVJbmZvLmhhc0luc2VydGlvblBvaW50O1xuICAgICAgbGV0IG5vZGVzID0gZG9tLm5vZGVMaXN0ID0gbmV3IEFycmF5KG5vZGVJbmZvLmxlbmd0aCk7XG4gICAgICBkb20uJCA9IHt9O1xuICAgICAgZm9yIChsZXQgaT0wLCBsPW5vZGVJbmZvLmxlbmd0aCwgaW5mbzsgKGk8bCkgJiYgKGluZm89bm9kZUluZm9baV0pOyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBub2Rlc1tpXSA9IGZpbmRUZW1wbGF0ZU5vZGUoZG9tLCBpbmZvKTtcbiAgICAgICAgYXBwbHlJZFRvTWFwKHRoaXMsIGRvbS4kLCBub2RlLCBpbmZvKTtcbiAgICAgICAgYXBwbHlUZW1wbGF0ZUNvbnRlbnQodGhpcywgbm9kZSwgaW5mbyk7XG4gICAgICAgIGFwcGx5RXZlbnRMaXN0ZW5lcih0aGlzLCBub2RlLCBpbmZvKTtcbiAgICAgIH1cbiAgICAgIGRvbSA9IC8qKiBAdHlwZSB7IVN0YW1wZWRUZW1wbGF0ZX0gKi8oZG9tKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICAgICAgcmV0dXJuIGRvbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIGJ5IG1ldGhvZCBuYW1lIGZvciB0aGUgZXZlbnQgcHJvdmlkZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBnZW5lcmF0ZXMgYSBoYW5kbGVyIGZ1bmN0aW9uIHRoYXQgbG9va3MgdXAgdGhlIG1ldGhvZFxuICAgICAqIG5hbWUgYXQgaGFuZGxpbmcgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBub2RlIE5vZGUgdG8gYWRkIGxpc3RlbmVyIG9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgTmFtZSBvZiBtZXRob2RcbiAgICAgKiBAcGFyYW0geyo9fSBjb250ZXh0IENvbnRleHQgdGhlIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBvbiAoZGVmYXVsdHNcbiAgICAgKiAgIHRvIGBub2RlYClcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gR2VuZXJhdGVkIGhhbmRsZXIgZnVuY3Rpb25cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfYWRkTWV0aG9kRXZlbnRMaXN0ZW5lclRvTm9kZShub2RlLCBldmVudE5hbWUsIG1ldGhvZE5hbWUsIGNvbnRleHQpIHtcbiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IG5vZGU7XG4gICAgICBsZXQgaGFuZGxlciA9IGNyZWF0ZU5vZGVFdmVudEhhbmRsZXIoY29udGV4dCwgZXZlbnROYW1lLCBtZXRob2ROYW1lKTtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgIHJldHVybiBoYW5kbGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHBvaW50IGZvciBhZGRpbmcgY3VzdG9tIG9yIHNpbXVsYXRlZCBldmVudCBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBub2RlIE5vZGUgdG8gYWRkIGV2ZW50IGxpc3RlbmVyIHRvXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpOnZvaWR9IGhhbmRsZXIgTGlzdGVuZXIgZnVuY3Rpb24gdG8gYWRkXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfYWRkRXZlbnRMaXN0ZW5lclRvTm9kZShub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHBvaW50IGZvciBhZGRpbmcgY3VzdG9tIG9yIHNpbXVsYXRlZCBldmVudCBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBub2RlIE5vZGUgdG8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGZyb21cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgZXZlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCk6dm9pZH0gaGFuZGxlciBMaXN0ZW5lciBmdW5jdGlvbiB0byByZW1vdmVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9yZW1vdmVFdmVudExpc3RlbmVyRnJvbU5vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBUZW1wbGF0ZVN0YW1wO1xuXG59KTtcbiIsIi8qKlxuICogQGZpbGVvdmVydmlld1xuICogQHN1cHByZXNzIHtjaGVja1Byb3RvdHlwYWxUeXBlc31cbiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kXG4gKiBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5XG4gKiBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5XG4gKiBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQXG4gKiByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuLi91dGlscy93cmFwLmpzJztcbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5pbXBvcnQgeyByb290LCBpc0FuY2VzdG9yLCBpc0Rlc2NlbmRhbnQsIGdldCwgdHJhbnNsYXRlLCBpc1BhdGgsIHNldCwgbm9ybWFsaXplIH0gZnJvbSAnLi4vdXRpbHMvcGF0aC5qcyc7XG4vKiBmb3Igbm90aWZ5LCByZWZsZWN0ICovXG5pbXBvcnQgeyBjYW1lbFRvRGFzaENhc2UsIGRhc2hUb0NhbWVsQ2FzZSB9IGZyb20gJy4uL3V0aWxzL2Nhc2UtbWFwLmpzJztcbmltcG9ydCB7IFByb3BlcnR5QWNjZXNzb3JzIH0gZnJvbSAnLi9wcm9wZXJ0eS1hY2Nlc3NvcnMuanMnO1xuLyogZm9yIGFubm90YXRlZCBlZmZlY3RzICovXG5pbXBvcnQgeyBUZW1wbGF0ZVN0YW1wIH0gZnJvbSAnLi90ZW1wbGF0ZS1zdGFtcC5qcyc7XG5pbXBvcnQgeyBzYW5pdGl6ZURPTVZhbHVlIH0gZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MuanMnO1xuXG4vLyBNb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdW5pcXVlIElEIHVzZWQgZm9yIGRlLWR1cGluZyBlZmZlY3RzIHRyaWdnZXJlZFxuLy8gZnJvbSBtdWx0aXBsZSBwcm9wZXJ0aWVzIGluIHRoZSBzYW1lIHR1cm5cbmxldCBkZWR1cGVJZCA9IDA7XG5cbi8qKlxuICogUHJvcGVydHkgZWZmZWN0IHR5cGVzOyBlZmZlY3RzIGFyZSBzdG9yZWQgb24gdGhlIHByb3RvdHlwZSB1c2luZyB0aGVzZSBrZXlzXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBUWVBFUyA9IHtcbiAgQ09NUFVURTogJ19fY29tcHV0ZUVmZmVjdHMnLFxuICBSRUZMRUNUOiAnX19yZWZsZWN0RWZmZWN0cycsXG4gIE5PVElGWTogJ19fbm90aWZ5RWZmZWN0cycsXG4gIFBST1BBR0FURTogJ19fcHJvcGFnYXRlRWZmZWN0cycsXG4gIE9CU0VSVkU6ICdfX29ic2VydmVFZmZlY3RzJyxcbiAgUkVBRF9PTkxZOiAnX19yZWFkT25seSdcbn07XG5cbi8qKiBAY29uc3QgeyFSZWdFeHB9ICovXG5jb25zdCBjYXBpdGFsQXR0cmlidXRlUmVnZXggPSAvW0EtWl0vO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiBuYW1lOiAoc3RyaW5nIHwgdW5kZWZpbmVkKSxcbiAqIHN0cnVjdHVyZWQ6IChib29sZWFuIHwgdW5kZWZpbmVkKSxcbiAqIHdpbGRjYXJkOiAoYm9vbGVhbiB8IHVuZGVmaW5lZClcbiAqIH19XG4gKi9cbmxldCBEYXRhVHJpZ2dlcjsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqIGluZm86ID8sXG4gKiB0cmlnZ2VyOiAoIURhdGFUcmlnZ2VyIHwgdW5kZWZpbmVkKSxcbiAqIGZuOiAoIUZ1bmN0aW9uIHwgdW5kZWZpbmVkKVxuICogfX1cbiAqL1xubGV0IERhdGFFZmZlY3Q7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGUgbW9kZWwgaGFzIGFuIG93bi1wcm9wZXJ0eSBtYXAgb2YgZWZmZWN0cyBmb3IgdGhlIGdpdmVuIHR5cGUuXG4gKiBUaGUgbW9kZWwgbWF5IGJlIGEgcHJvdG90eXBlIG9yIGFuIGluc3RhbmNlLlxuICpcbiAqIFByb3BlcnR5IGVmZmVjdHMgYXJlIHN0b3JlZCBhcyBhcnJheXMgb2YgZWZmZWN0cyBieSBwcm9wZXJ0eSBpbiBhIG1hcCxcbiAqIGJ5IG5hbWVkIHR5cGUgb24gdGhlIG1vZGVsLiBlLmcuXG4gKlxuICogICBfX2NvbXB1dGVFZmZlY3RzOiB7XG4gKiAgICAgZm9vOiBbIC4uLiBdLFxuICogICAgIGJhcjogWyAuLi4gXVxuICogICB9XG4gKlxuICogSWYgdGhlIG1vZGVsIGRvZXMgbm90IHlldCBoYXZlIGFuIGVmZmVjdCBtYXAgZm9yIHRoZSB0eXBlLCBvbmUgaXMgY3JlYXRlZFxuICogYW5kIHJldHVybmVkLiAgSWYgaXQgZG9lcywgYnV0IGl0IGlzIG5vdCBhbiBvd24gcHJvcGVydHkgKGkuZS4gdGhlXG4gKiBwcm90b3R5cGUgaGFkIGVmZmVjdHMpLCB0aGUgdGhlIG1hcCBpcyBkZWVwbHkgY2xvbmVkIGFuZCB0aGUgY29weSBpc1xuICogc2V0IG9uIHRoZSBtb2RlbCBhbmQgcmV0dXJuZWQsIHJlYWR5IGZvciBuZXcgZWZmZWN0cyB0byBiZSBhZGRlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbW9kZWwgUHJvdG90eXBlIG9yIGluc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBQcm9wZXJ0eSBlZmZlY3QgdHlwZVxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgb3duLXByb3BlcnR5IG1hcCBvZiBlZmZlY3RzIGZvciB0aGUgZ2l2ZW4gdHlwZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5zdXJlT3duRWZmZWN0TWFwKG1vZGVsLCB0eXBlKSB7XG4gIGxldCBlZmZlY3RzID0gbW9kZWxbdHlwZV07XG4gIGlmICghZWZmZWN0cykge1xuICAgIGVmZmVjdHMgPSBtb2RlbFt0eXBlXSA9IHt9O1xuICB9IGVsc2UgaWYgKCFtb2RlbC5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xuICAgIGVmZmVjdHMgPSBtb2RlbFt0eXBlXSA9IE9iamVjdC5jcmVhdGUobW9kZWxbdHlwZV0pO1xuICAgIGZvciAobGV0IHAgaW4gZWZmZWN0cykge1xuICAgICAgbGV0IHByb3RvRnggPSBlZmZlY3RzW3BdO1xuICAgICAgbGV0IGluc3RGeCA9IGVmZmVjdHNbcF0gPSBBcnJheShwcm90b0Z4Lmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpPTA7IGk8cHJvdG9GeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpbnN0RnhbaV0gPSBwcm90b0Z4W2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZWZmZWN0cztcbn1cblxuLy8gLS0gZWZmZWN0cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogUnVucyBhbGwgZWZmZWN0cyBvZiBhIGdpdmVuIHR5cGUgZm9yIHRoZSBnaXZlbiBzZXQgb2YgcHJvcGVydHkgY2hhbmdlc1xuICogb24gYW4gaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHdpdGggZWZmZWN0cyB0byBydW5cbiAqIEBwYXJhbSB7P09iamVjdH0gZWZmZWN0cyBPYmplY3QgbWFwIG9mIHByb3BlcnR5LXRvLUFycmF5IG9mIGVmZmVjdHNcbiAqIEBwYXJhbSB7P09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHBhcmFtIHs/T2JqZWN0PX0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBoYXNQYXRocyBUcnVlIHdpdGggYHByb3BzYCBjb250YWlucyBvbmUgb3IgbW9yZSBwYXRoc1xuICogQHBhcmFtIHsqPX0gZXh0cmFBcmdzIEFkZGl0aW9uYWwgbWV0YWRhdGEgdG8gcGFzcyB0byBlZmZlY3QgZnVuY3Rpb25cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYW4gZWZmZWN0IHJhbiBmb3IgdGhpcyBwcm9wZXJ0eVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuRWZmZWN0cyhpbnN0LCBlZmZlY3RzLCBwcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzLCBleHRyYUFyZ3MpIHtcbiAgaWYgKGVmZmVjdHMpIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgbGV0IGlkID0gZGVkdXBlSWQrKztcbiAgICBmb3IgKGxldCBwcm9wIGluIHByb3BzKSB7XG4gICAgICBpZiAocnVuRWZmZWN0c0ZvclByb3BlcnR5KFxuICAgICAgICAgICAgICBpbnN0LCAvKiogQHR5cGUgeyFPYmplY3R9ICovIChlZmZlY3RzKSwgaWQsIHByb3AsIHByb3BzLCBvbGRQcm9wcyxcbiAgICAgICAgICAgICAgaGFzUGF0aHMsIGV4dHJhQXJncykpIHtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUnVucyBhIGxpc3Qgb2YgZWZmZWN0cyBmb3IgYSBnaXZlbiBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2Ugd2l0aCBlZmZlY3RzIHRvIHJ1blxuICogQHBhcmFtIHshT2JqZWN0fSBlZmZlY3RzIE9iamVjdCBtYXAgb2YgcHJvcGVydHktdG8tQXJyYXkgb2YgZWZmZWN0c1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZHVwZUlkIENvdW50ZXIgdXNlZCBmb3IgZGUtZHVwaW5nIGVmZmVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIE5hbWUgb2YgY2hhbmdlZCBwcm9wZXJ0eVxuICogQHBhcmFtIHsqfSBwcm9wcyBDaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7Kn0gb2xkUHJvcHMgT2xkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGhhc1BhdGhzIFRydWUgd2l0aCBgcHJvcHNgIGNvbnRhaW5zIG9uZSBvciBtb3JlIHBhdGhzXG4gKiBAcGFyYW0geyo9fSBleHRyYUFyZ3MgQWRkaXRpb25hbCBtZXRhZGF0YSB0byBwYXNzIHRvIGVmZmVjdCBmdW5jdGlvblxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhbiBlZmZlY3QgcmFuIGZvciB0aGlzIHByb3BlcnR5XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5FZmZlY3RzRm9yUHJvcGVydHkoaW5zdCwgZWZmZWN0cywgZGVkdXBlSWQsIHByb3AsIHByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMsIGV4dHJhQXJncykge1xuICBsZXQgcmFuID0gZmFsc2U7XG4gIGxldCByb290UHJvcGVydHkgPSBoYXNQYXRocyA/IHJvb3QocHJvcCkgOiBwcm9wO1xuICBsZXQgZnhzID0gZWZmZWN0c1tyb290UHJvcGVydHldO1xuICBpZiAoZnhzKSB7XG4gICAgZm9yIChsZXQgaT0wLCBsPWZ4cy5sZW5ndGgsIGZ4OyAoaTxsKSAmJiAoZng9ZnhzW2ldKTsgaSsrKSB7XG4gICAgICBpZiAoKCFmeC5pbmZvIHx8IGZ4LmluZm8ubGFzdFJ1biAhPT0gZGVkdXBlSWQpICYmXG4gICAgICAgICAgKCFoYXNQYXRocyB8fCBwYXRoTWF0Y2hlc1RyaWdnZXIocHJvcCwgZngudHJpZ2dlcikpKSB7XG4gICAgICAgIGlmIChmeC5pbmZvKSB7XG4gICAgICAgICAgZnguaW5mby5sYXN0UnVuID0gZGVkdXBlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZnguZm4oaW5zdCwgcHJvcCwgcHJvcHMsIG9sZFByb3BzLCBmeC5pbmZvLCBoYXNQYXRocywgZXh0cmFBcmdzKTtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhbjtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBwcm9wZXJ0eS9wYXRoIHRoYXQgaGFzIGNoYW5nZWQgbWF0Y2hlcyB0aGUgdHJpZ2dlclxuICogY3JpdGVyaWEgZm9yIGFuIGVmZmVjdC4gIEEgdHJpZ2dlciBpcyBhIGRlc2NyaXB0b3Igd2l0aCB0aGUgZm9sbG93aW5nXG4gKiBzdHJ1Y3R1cmUsIHdoaWNoIG1hdGNoZXMgdGhlIGRlc2NyaXB0b3JzIHJldHVybmVkIGZyb20gYHBhcnNlQXJnYC5cbiAqIGUuZy4gZm9yIGBmb28uYmFyLipgOlxuICogYGBgXG4gKiB0cmlnZ2VyOiB7XG4gKiAgIG5hbWU6ICdhLmInLFxuICogICBzdHJ1Y3R1cmVkOiB0cnVlLFxuICogICB3aWxkY2FyZDogdHJ1ZVxuICogfVxuICogYGBgXG4gKiBJZiBubyB0cmlnZ2VyIGlzIGdpdmVuLCB0aGUgcGF0aCBpcyBkZWVtZWQgdG8gbWF0Y2guXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCBvciBwcm9wZXJ0eSB0aGF0IGNoYW5nZWRcbiAqIEBwYXJhbSB7P0RhdGFUcmlnZ2VyfSB0cmlnZ2VyIERlc2NyaXB0b3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHBhdGggbWF0Y2hlZCB0aGUgdHJpZ2dlclxuICovXG5mdW5jdGlvbiBwYXRoTWF0Y2hlc1RyaWdnZXIocGF0aCwgdHJpZ2dlcikge1xuICBpZiAodHJpZ2dlcikge1xuICAgIGxldCB0cmlnZ2VyUGF0aCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHJpZ2dlci5uYW1lKTtcbiAgICByZXR1cm4gKHRyaWdnZXJQYXRoID09IHBhdGgpIHx8XG4gICAgICAgICEhKHRyaWdnZXIuc3RydWN0dXJlZCAmJiBpc0FuY2VzdG9yKHRyaWdnZXJQYXRoLCBwYXRoKSkgfHxcbiAgICAgICAgISEodHJpZ2dlci53aWxkY2FyZCAmJiBpc0Rlc2NlbmRhbnQodHJpZ2dlclBhdGgsIHBhdGgpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIFwib2JzZXJ2ZXJcIiBlZmZlY3QuXG4gKlxuICogQ2FsbHMgdGhlIG1ldGhvZCB3aXRoIGBpbmZvLm1ldGhvZE5hbWVgIG9uIHRoZSBpbnN0YW5jZSwgcGFzc2luZyB0aGVcbiAqIG5ldyBhbmQgb2xkIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2UgdGhlIGVmZmVjdCB3aWxsIGJlIHJ1biBvblxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgY3VycmVudCBwcm9wZXJ0eSBjaGFuZ2VzXG4gKiBAcGFyYW0ge09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0gez99IGluZm8gRWZmZWN0IG1ldGFkYXRhXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuT2JzZXJ2ZXJFZmZlY3QoaW5zdCwgcHJvcGVydHksIHByb3BzLCBvbGRQcm9wcywgaW5mbykge1xuICBsZXQgZm4gPSB0eXBlb2YgaW5mby5tZXRob2QgPT09IFwic3RyaW5nXCIgPyBpbnN0W2luZm8ubWV0aG9kXSA6IGluZm8ubWV0aG9kO1xuICBsZXQgY2hhbmdlZFByb3AgPSBpbmZvLnByb3BlcnR5O1xuICBpZiAoZm4pIHtcbiAgICBmbi5jYWxsKGluc3QsIGluc3QuX19kYXRhW2NoYW5nZWRQcm9wXSwgb2xkUHJvcHNbY2hhbmdlZFByb3BdKTtcbiAgfSBlbHNlIGlmICghaW5mby5keW5hbWljRm4pIHtcbiAgICBjb25zb2xlLndhcm4oJ29ic2VydmVyIG1ldGhvZCBgJyArIGluZm8ubWV0aG9kICsgJ2Agbm90IGRlZmluZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1bnMgXCJub3RpZnlcIiBlZmZlY3RzIGZvciBhIHNldCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMuXG4gKlxuICogVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIHRoZSBnZW5lcmljIGBydW5FZmZlY3RzYCBtZXRob2QgaW4gdGhhdCBpdFxuICogd2lsbCBkaXNwYXRjaCBwYXRoIG5vdGlmaWNhdGlvbiBldmVudHMgaW4gdGhlIGNhc2UgdGhhdCB0aGUgcHJvcGVydHlcbiAqIGNoYW5nZWQgd2FzIGEgcGF0aCBhbmQgdGhlIHJvb3QgcHJvcGVydHkgZm9yIHRoYXQgcGF0aCBkaWRuJ3QgaGF2ZSBhXG4gKiBcIm5vdGlmeVwiIGVmZmVjdC4gIFRoaXMgaXMgdG8gbWFpbnRhaW4gMS4wIGJlaGF2aW9yIHRoYXQgZGlkIG5vdCByZXF1aXJlXG4gKiBgbm90aWZ5OiB0cnVlYCB0byBlbnN1cmUgb2JqZWN0IHN1Yi1wcm9wZXJ0eSBub3RpZmljYXRpb25zIHdlcmVcbiAqIHNlbnQuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHdpdGggZWZmZWN0cyB0byBydW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBub3RpZnlQcm9wcyBCYWcgb2YgcHJvcGVydGllcyB0byBub3RpZnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgY3VycmVudCBwcm9wZXJ0eSBjaGFuZ2VzXG4gKiBAcGFyYW0ge09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhhc1BhdGhzIFRydWUgd2l0aCBgcHJvcHNgIGNvbnRhaW5zIG9uZSBvciBtb3JlIHBhdGhzXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuTm90aWZ5RWZmZWN0cyhpbnN0LCBub3RpZnlQcm9wcywgcHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocykge1xuICAvLyBOb3RpZnlcbiAgbGV0IGZ4cyA9IGluc3RbVFlQRVMuTk9USUZZXTtcbiAgbGV0IG5vdGlmaWVkO1xuICBsZXQgaWQgPSBkZWR1cGVJZCsrO1xuICAvLyBUcnkgbm9ybWFsIG5vdGlmeSBlZmZlY3RzOyBpZiBub25lLCBmYWxsIGJhY2sgdG8gdHJ5IHBhdGggbm90aWZpY2F0aW9uXG4gIGZvciAobGV0IHByb3AgaW4gbm90aWZ5UHJvcHMpIHtcbiAgICBpZiAobm90aWZ5UHJvcHNbcHJvcF0pIHtcbiAgICAgIGlmIChmeHMgJiYgcnVuRWZmZWN0c0ZvclByb3BlcnR5KGluc3QsIGZ4cywgaWQsIHByb3AsIHByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMpKSB7XG4gICAgICAgIG5vdGlmaWVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzUGF0aHMgJiYgbm90aWZ5UGF0aChpbnN0LCBwcm9wLCBwcm9wcykpIHtcbiAgICAgICAgbm90aWZpZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBGbHVzaCBob3N0IGlmIHdlIGFjdHVhbGx5IG5vdGlmaWVkIGFuZCBob3N0IHdhcyBiYXRjaGluZ1xuICAvLyBBbmQgdGhlIGhvc3QgaGFzIGFscmVhZHkgaW5pdGlhbGl6ZWQgY2xpZW50czsgdGhpcyBwcmV2ZW50c1xuICAvLyBhbiBpc3N1ZSB3aXRoIGEgaG9zdCBvYnNlcnZpbmcgZGF0YSBjaGFuZ2VzIGJlZm9yZSBjbGllbnRzIGFyZSByZWFkeS5cbiAgbGV0IGhvc3Q7XG4gIGlmIChub3RpZmllZCAmJiAoaG9zdCA9IGluc3QuX19kYXRhSG9zdCkgJiYgaG9zdC5faW52YWxpZGF0ZVByb3BlcnRpZXMpIHtcbiAgICBob3N0Ll9pbnZhbGlkYXRlUHJvcGVydGllcygpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2hlcyB7cHJvcGVydHl9LWNoYW5nZWQgZXZlbnRzIHdpdGggcGF0aCBpbmZvcm1hdGlvbiBpbiB0aGUgZGV0YWlsXG4gKiBvYmplY3QgdG8gaW5kaWNhdGUgYSBzdWItcGF0aCBvZiB0aGUgcHJvcGVydHkgd2FzIGNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGVsZW1lbnQgZnJvbSB3aGljaCB0byBmaXJlIHRoZVxuICogICAgIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCB0aGF0IHdhcyBjaGFuZ2VkXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBwYXRoIHdhcyBub3RpZmllZFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm90aWZ5UGF0aChpbnN0LCBwYXRoLCBwcm9wcykge1xuICBsZXQgcm9vdFByb3BlcnR5ID0gcm9vdChwYXRoKTtcbiAgaWYgKHJvb3RQcm9wZXJ0eSAhPT0gcGF0aCkge1xuICAgIGxldCBldmVudE5hbWUgPSBjYW1lbFRvRGFzaENhc2Uocm9vdFByb3BlcnR5KSArICctY2hhbmdlZCc7XG4gICAgZGlzcGF0Y2hOb3RpZnlFdmVudChpbnN0LCBldmVudE5hbWUsIHByb3BzW3BhdGhdLCBwYXRoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogRGlzcGF0Y2hlcyB7cHJvcGVydHl9LWNoYW5nZWQgZXZlbnRzIHRvIGluZGljYXRlIGEgcHJvcGVydHkgKG9yIHBhdGgpXG4gKiBjaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBlbGVtZW50IGZyb20gd2hpY2ggdG8gZmlyZSB0aGVcbiAqICAgICBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc2VuZFxuICogICAgICgne3Byb3BlcnR5fS1jaGFuZ2VkJylcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBjaGFuZ2VkIHByb3BlcnR5XG4gKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IHBhdGggSWYgYSBzdWItcGF0aCBvZiB0aGlzIHByb3BlcnR5XG4gKiAgICAgY2hhbmdlZCwgdGhlIHBhdGggdGhhdCBjaGFuZ2VkIChvcHRpb25hbCkuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfVxuICovXG5mdW5jdGlvbiBkaXNwYXRjaE5vdGlmeUV2ZW50KGluc3QsIGV2ZW50TmFtZSwgdmFsdWUsIHBhdGgpIHtcbiAgbGV0IGRldGFpbCA9IHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgcXVldWVQcm9wZXJ0eTogdHJ1ZVxuICB9O1xuICBpZiAocGF0aCkge1xuICAgIGRldGFpbC5wYXRoID0gcGF0aDtcbiAgfVxuICB3cmFwKC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyhpbnN0KSkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7IGRldGFpbCB9KSk7XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgXCJub3RpZnlcIiBlZmZlY3QuXG4gKlxuICogRGlzcGF0Y2hlcyBhIG5vbi1idWJibGluZyBldmVudCBuYW1lZCBgaW5mby5ldmVudE5hbWVgIG9uIHRoZSBpbnN0YW5jZVxuICogd2l0aCBhIGRldGFpbCBvYmplY3QgY29udGFpbmluZyB0aGUgbmV3IGB2YWx1ZWAuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHBhcmFtIHtPYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/fSBpbmZvIEVmZmVjdCBtZXRhZGF0YVxuICogQHBhcmFtIHtib29sZWFufSBoYXNQYXRocyBUcnVlIHdpdGggYHByb3BzYCBjb250YWlucyBvbmUgb3IgbW9yZSBwYXRoc1xuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJ1bk5vdGlmeUVmZmVjdChpbnN0LCBwcm9wZXJ0eSwgcHJvcHMsIG9sZFByb3BzLCBpbmZvLCBoYXNQYXRocykge1xuICBsZXQgcm9vdFByb3BlcnR5ID0gaGFzUGF0aHMgPyByb290KHByb3BlcnR5KSA6IHByb3BlcnR5O1xuICBsZXQgcGF0aCA9IHJvb3RQcm9wZXJ0eSAhPSBwcm9wZXJ0eSA/IHByb3BlcnR5IDogbnVsbDtcbiAgbGV0IHZhbHVlID0gcGF0aCA/IGdldChpbnN0LCBwYXRoKSA6IGluc3QuX19kYXRhW3Byb3BlcnR5XTtcbiAgaWYgKHBhdGggJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gcHJvcHNbcHJvcGVydHldOyAgLy8gc3BlY2lmaWNhbGx5IGZvciAuc3BsaWNlc1xuICB9XG4gIGRpc3BhdGNoTm90aWZ5RXZlbnQoaW5zdCwgaW5mby5ldmVudE5hbWUsIHZhbHVlLCBwYXRoKTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZ1bmN0aW9uIGZvciAyLXdheSBub3RpZmljYXRpb24gZXZlbnRzLiBSZWNlaXZlcyBjb250ZXh0XG4gKiBpbmZvcm1hdGlvbiBjYXB0dXJlZCBpbiB0aGUgYGFkZE5vdGlmeUxpc3RlbmVyYCBjbG9zdXJlIGZyb20gdGhlXG4gKiBgX19ub3RpZnlMaXN0ZW5lcnNgIG1ldGFkYXRhLlxuICpcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBub3RpZmllZCBwcm9wZXJ0eSB0byB0aGUgaG9zdCBwcm9wZXJ0eSBvciBwYXRoLiAgSWZcbiAqIHRoZSBldmVudCBjb250YWluZWQgcGF0aCBpbmZvcm1hdGlvbiwgdHJhbnNsYXRlIHRoYXQgcGF0aCB0byB0aGUgaG9zdFxuICogc2NvcGUncyBuYW1lIGZvciB0aGF0IHBhdGggZmlyc3QuXG4gKlxuICogQHBhcmFtIHtDdXN0b21FdmVudH0gZXZlbnQgTm90aWZpY2F0aW9uIGV2ZW50IChlLmcuICc8cHJvcGVydHk+LWNoYW5nZWQnKVxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgSG9zdCBlbGVtZW50IGluc3RhbmNlIGhhbmRsaW5nIHRoZVxuICogICAgIG5vdGlmaWNhdGlvbiBldmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGZyb21Qcm9wIENoaWxkIGVsZW1lbnQgcHJvcGVydHkgdGhhdCB3YXMgYm91bmRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b1BhdGggSG9zdCBwcm9wZXJ0eS9wYXRoIHRoYXQgd2FzIGJvdW5kXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG5lZ2F0ZSBXaGV0aGVyIHRoZSBiaW5kaW5nIHdhcyBuZWdhdGVkXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaGFuZGxlTm90aWZpY2F0aW9uKGV2ZW50LCBpbnN0LCBmcm9tUHJvcCwgdG9QYXRoLCBuZWdhdGUpIHtcbiAgbGV0IHZhbHVlO1xuICBsZXQgZGV0YWlsID0gLyoqIEB0eXBlIHtPYmplY3R9ICovKGV2ZW50LmRldGFpbCk7XG4gIGxldCBmcm9tUGF0aCA9IGRldGFpbCAmJiBkZXRhaWwucGF0aDtcbiAgaWYgKGZyb21QYXRoKSB7XG4gICAgdG9QYXRoID0gdHJhbnNsYXRlKGZyb21Qcm9wLCB0b1BhdGgsIGZyb21QYXRoKTtcbiAgICB2YWx1ZSA9IGRldGFpbCAmJiBkZXRhaWwudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0W2Zyb21Qcm9wXTtcbiAgfVxuICB2YWx1ZSA9IG5lZ2F0ZSA/ICF2YWx1ZSA6IHZhbHVlO1xuICBpZiAoIWluc3RbVFlQRVMuUkVBRF9PTkxZXSB8fCAhaW5zdFtUWVBFUy5SRUFEX09OTFldW3RvUGF0aF0pIHtcbiAgICBpZiAoaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKHRvUGF0aCwgdmFsdWUsIHRydWUsIEJvb2xlYW4oZnJvbVBhdGgpKVxuICAgICAgJiYgKCFkZXRhaWwgfHwgIWRldGFpbC5xdWV1ZVByb3BlcnR5KSkge1xuICAgICAgaW5zdC5faW52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBcInJlZmxlY3RcIiBlZmZlY3QuXG4gKlxuICogU2V0cyB0aGUgYXR0cmlidXRlIG5hbWVkIGBpbmZvLmF0dHJOYW1lYCB0byB0aGUgZ2l2ZW4gcHJvcGVydHkgdmFsdWUuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHBhcmFtIHtPYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/fSBpbmZvIEVmZmVjdCBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJ1blJlZmxlY3RFZmZlY3QoaW5zdCwgcHJvcGVydHksIHByb3BzLCBvbGRQcm9wcywgaW5mbykge1xuICBsZXQgdmFsdWUgPSBpbnN0Ll9fZGF0YVtwcm9wZXJ0eV07XG4gIGlmIChzYW5pdGl6ZURPTVZhbHVlKSB7XG4gICAgdmFsdWUgPSBzYW5pdGl6ZURPTVZhbHVlKHZhbHVlLCBpbmZvLmF0dHJOYW1lLCAnYXR0cmlidXRlJywgLyoqIEB0eXBlIHtOb2RlfSAqLyhpbnN0KSk7XG4gIH1cbiAgaW5zdC5fcHJvcGVydHlUb0F0dHJpYnV0ZShwcm9wZXJ0eSwgaW5mby5hdHRyTmFtZSwgdmFsdWUpO1xufVxuXG4vKipcbiAqIFJ1bnMgXCJjb21wdXRlZFwiIGVmZmVjdHMgZm9yIGEgc2V0IG9mIGNoYW5nZWQgcHJvcGVydGllcy5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gdGhlIGdlbmVyaWMgYHJ1bkVmZmVjdHNgIG1ldGhvZCBpbiB0aGF0IGl0XG4gKiBjb250aW51ZXMgdG8gcnVuIGNvbXB1dGVkIGVmZmVjdHMgYmFzZWQgb24gdGhlIG91dHB1dCBvZiBlYWNoIHBhc3MgdW50aWxcbiAqIHRoZXJlIGFyZSBubyBtb3JlIG5ld2x5IGNvbXB1dGVkIHByb3BlcnRpZXMuICBUaGlzIGVuc3VyZXMgdGhhdCBhbGxcbiAqIHByb3BlcnRpZXMgdGhhdCB3aWxsIGJlIGNvbXB1dGVkIGJ5IHRoZSBpbml0aWFsIHNldCBvZiBjaGFuZ2VzIGFyZVxuICogY29tcHV0ZWQgYmVmb3JlIG90aGVyIGVmZmVjdHMgKGJpbmRpbmcgcHJvcGFnYXRpb24sIG9ic2VydmVycywgYW5kIG5vdGlmeSlcbiAqIHJ1bi5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2UgdGhlIGVmZmVjdCB3aWxsIGJlIHJ1biBvblxuICogQHBhcmFtIHs/T2JqZWN0fSBjaGFuZ2VkUHJvcHMgQmFnIG9mIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5Db21wdXRlZEVmZmVjdHMoaW5zdCwgY2hhbmdlZFByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMpIHtcbiAgbGV0IGNvbXB1dGVFZmZlY3RzID0gaW5zdFtUWVBFUy5DT01QVVRFXTtcbiAgaWYgKGNvbXB1dGVFZmZlY3RzKSB7XG4gICAgbGV0IGlucHV0UHJvcHMgPSBjaGFuZ2VkUHJvcHM7XG4gICAgd2hpbGUgKHJ1bkVmZmVjdHMoaW5zdCwgY29tcHV0ZUVmZmVjdHMsIGlucHV0UHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocykpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAob2xkUHJvcHMpLCBpbnN0Ll9fZGF0YU9sZCk7XG4gICAgICBPYmplY3QuYXNzaWduKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGNoYW5nZWRQcm9wcyksIGluc3QuX19kYXRhUGVuZGluZyk7XG4gICAgICBpbnB1dFByb3BzID0gaW5zdC5fX2RhdGFQZW5kaW5nO1xuICAgICAgaW5zdC5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBcImNvbXB1dGVkIHByb3BlcnR5XCIgZWZmZWN0IGJ5IHJ1bm5pbmcgdGhlIG1ldGhvZCB3aXRoIHRoZVxuICogdmFsdWVzIG9mIHRoZSBhcmd1bWVudHMgc3BlY2lmaWVkIGluIHRoZSBgaW5mb2Agb2JqZWN0IGFuZCBzZXR0aW5nIHRoZVxuICogcmV0dXJuIHZhbHVlIHRvIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0gez9PYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0gez99IGluZm8gRWZmZWN0IG1ldGFkYXRhXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuQ29tcHV0ZWRFZmZlY3QoaW5zdCwgcHJvcGVydHksIHByb3BzLCBvbGRQcm9wcywgaW5mbykge1xuICBsZXQgcmVzdWx0ID0gcnVuTWV0aG9kRWZmZWN0KGluc3QsIHByb3BlcnR5LCBwcm9wcywgb2xkUHJvcHMsIGluZm8pO1xuICBsZXQgY29tcHV0ZWRQcm9wID0gaW5mby5tZXRob2RJbmZvO1xuICBpZiAoaW5zdC5fX2RhdGFIYXNBY2Nlc3NvciAmJiBpbnN0Ll9fZGF0YUhhc0FjY2Vzc29yW2NvbXB1dGVkUHJvcF0pIHtcbiAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkoY29tcHV0ZWRQcm9wLCByZXN1bHQsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGluc3RbY29tcHV0ZWRQcm9wXSA9IHJlc3VsdDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHBhdGggY2hhbmdlcyBiYXNlZCBvbiBwYXRoIGxpbmtzIHNldCB1cCB1c2luZyB0aGUgYGxpbmtQYXRoc2BcbiAqIEFQSS5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2Ugd2hvc2UgcHJvcHMgYXJlIGNoYW5naW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRoYXQgaGFzIGNoYW5nZWRcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb2YgY2hhbmdlZCBwYXRoXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUxpbmtlZFBhdGhzKGluc3QsIHBhdGgsIHZhbHVlKSB7XG4gIGxldCBsaW5rcyA9IGluc3QuX19kYXRhTGlua2VkUGF0aHM7XG4gIGlmIChsaW5rcykge1xuICAgIGxldCBsaW5rO1xuICAgIGZvciAobGV0IGEgaW4gbGlua3MpIHtcbiAgICAgIGxldCBiID0gbGlua3NbYV07XG4gICAgICBpZiAoaXNEZXNjZW5kYW50KGEsIHBhdGgpKSB7XG4gICAgICAgIGxpbmsgPSB0cmFuc2xhdGUoYSwgYiwgcGF0aCk7XG4gICAgICAgIGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChsaW5rLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzRGVzY2VuZGFudChiLCBwYXRoKSkge1xuICAgICAgICBsaW5rID0gdHJhbnNsYXRlKGIsIGEsIHBhdGgpO1xuICAgICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgobGluaywgdmFsdWUsIHRydWUsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyAtLSBiaW5kaW5ncyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQWRkcyBiaW5kaW5nIG1ldGFkYXRhIHRvIHRoZSBjdXJyZW50IGBub2RlSW5mb2AsIGFuZCBiaW5kaW5nIGVmZmVjdHNcbiAqIGZvciBhbGwgcGFydCBkZXBlbmRlbmNpZXMgdG8gYHRlbXBsYXRlSW5mb2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQ2xhc3MgdGhhdCBgX3BhcnNlVGVtcGxhdGVgIGlzIGN1cnJlbnRseVxuICogICBydW5uaW5nIG9uXG4gKiBAcGFyYW0ge1RlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gKiBAcGFyYW0ge05vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlIG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBraW5kIEJpbmRpbmcga2luZCwgZWl0aGVyICdwcm9wZXJ0eScsICdhdHRyaWJ1dGUnLCBvciAndGV4dCdcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXQgVGFyZ2V0IHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7IUFycmF5PCFCaW5kaW5nUGFydD59IHBhcnRzIEFycmF5IG9mIGJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICogQHBhcmFtIHtzdHJpbmc9fSBsaXRlcmFsIExpdGVyYWwgdGV4dCBzdXJyb3VuZGluZyBiaW5kaW5nIHBhcnRzIChzcGVjaWZpZWRcbiAqICAgb25seSBmb3IgJ3Byb3BlcnR5JyBiaW5kaW5ncywgc2luY2UgdGhlc2UgbXVzdCBiZSBpbml0aWFsaXplZCBhcyBwYXJ0XG4gKiAgIG9mIGJvb3QtdXApXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkQmluZGluZyhjb25zdHJ1Y3RvciwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbywga2luZCwgdGFyZ2V0LCBwYXJ0cywgbGl0ZXJhbCkge1xuICAvLyBDcmVhdGUgYmluZGluZyBtZXRhZGF0YSBhbmQgYWRkIHRvIG5vZGVJbmZvXG4gIG5vZGVJbmZvLmJpbmRpbmdzID0gbm9kZUluZm8uYmluZGluZ3MgfHwgW107XG4gIGxldCAvKiogQmluZGluZyAqLyBiaW5kaW5nID0geyBraW5kLCB0YXJnZXQsIHBhcnRzLCBsaXRlcmFsLCBpc0NvbXBvdW5kOiAocGFydHMubGVuZ3RoICE9PSAxKSB9O1xuICBub2RlSW5mby5iaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAvLyBBZGQgbGlzdGVuZXIgaW5mbyB0byBiaW5kaW5nIG1ldGFkYXRhXG4gIGlmIChzaG91bGRBZGRMaXN0ZW5lcihiaW5kaW5nKSkge1xuICAgIGxldCB7ZXZlbnQsIG5lZ2F0ZX0gPSBiaW5kaW5nLnBhcnRzWzBdO1xuICAgIGJpbmRpbmcubGlzdGVuZXJFdmVudCA9IGV2ZW50IHx8IChjYW1lbFRvRGFzaENhc2UodGFyZ2V0KSArICctY2hhbmdlZCcpO1xuICAgIGJpbmRpbmcubGlzdGVuZXJOZWdhdGUgPSBuZWdhdGU7XG4gIH1cbiAgLy8gQWRkIFwicHJvcGFnYXRlXCIgcHJvcGVydHkgZWZmZWN0cyB0byB0ZW1wbGF0ZUluZm9cbiAgbGV0IGluZGV4ID0gdGVtcGxhdGVJbmZvLm5vZGVJbmZvTGlzdC5sZW5ndGg7XG4gIGZvciAobGV0IGk9MDsgaTxiaW5kaW5nLnBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHBhcnQgPSBiaW5kaW5nLnBhcnRzW2ldO1xuICAgIHBhcnQuY29tcG91bmRJbmRleCA9IGk7XG4gICAgYWRkRWZmZWN0Rm9yQmluZGluZ1BhcnQoY29uc3RydWN0b3IsIHRlbXBsYXRlSW5mbywgYmluZGluZywgcGFydCwgaW5kZXgpO1xuICB9XG59XG5cbi8qKlxuICogQWRkcyBwcm9wZXJ0eSBlZmZlY3RzIHRvIHRoZSBnaXZlbiBgdGVtcGxhdGVJbmZvYCBmb3IgdGhlIGdpdmVuIGJpbmRpbmdcbiAqIHBhcnQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQ2xhc3MgdGhhdCBgX3BhcnNlVGVtcGxhdGVgIGlzIGN1cnJlbnRseVxuICogICBydW5uaW5nIG9uXG4gKiBAcGFyYW0ge1RlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gKiBAcGFyYW0geyFCaW5kaW5nfSBiaW5kaW5nIEJpbmRpbmcgbWV0YWRhdGFcbiAqIEBwYXJhbSB7IUJpbmRpbmdQYXJ0fSBwYXJ0IEJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IGludG8gYG5vZGVJbmZvTGlzdGAgZm9yIHRoaXMgbm9kZVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gYWRkRWZmZWN0Rm9yQmluZGluZ1BhcnQoY29uc3RydWN0b3IsIHRlbXBsYXRlSW5mbywgYmluZGluZywgcGFydCwgaW5kZXgpIHtcbiAgaWYgKCFwYXJ0LmxpdGVyYWwpIHtcbiAgICBpZiAoYmluZGluZy5raW5kID09PSAnYXR0cmlidXRlJyAmJiBiaW5kaW5nLnRhcmdldFswXSA9PT0gJy0nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Nhbm5vdCBzZXQgYXR0cmlidXRlICcgKyBiaW5kaW5nLnRhcmdldCArXG4gICAgICAgICcgYmVjYXVzZSBcIi1cIiBpcyBub3QgYSB2YWxpZCBhdHRyaWJ1dGUgc3RhcnRpbmcgY2hhcmFjdGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBkZXBlbmRlbmNpZXMgPSBwYXJ0LmRlcGVuZGVuY2llcztcbiAgICAgIGxldCBpbmZvID0geyBpbmRleCwgYmluZGluZywgcGFydCwgZXZhbHVhdG9yOiBjb25zdHJ1Y3RvciB9O1xuICAgICAgZm9yIChsZXQgaj0wOyBqPGRlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xuICAgICAgICBsZXQgdHJpZ2dlciA9IGRlcGVuZGVuY2llc1tqXTtcbiAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdHJpZ2dlciA9IHBhcnNlQXJnKHRyaWdnZXIpO1xuICAgICAgICAgIHRyaWdnZXIud2lsZGNhcmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yLl9hZGRUZW1wbGF0ZVByb3BlcnR5RWZmZWN0KHRlbXBsYXRlSW5mbywgdHJpZ2dlci5yb290UHJvcGVydHksIHtcbiAgICAgICAgICBmbjogcnVuQmluZGluZ0VmZmVjdCxcbiAgICAgICAgICBpbmZvLCB0cmlnZ2VyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIFwiYmluZGluZ1wiIChwcm9wZXJ0eS9wYXRoIGJpbmRpbmcpIGVmZmVjdC5cbiAqXG4gKiBOb3RlIHRoYXQgYmluZGluZyBzeW50YXggaXMgb3ZlcnJpZGFibGUgdmlhIGBfcGFyc2VCaW5kaW5nc2AgYW5kXG4gKiBgX2V2YWx1YXRlQmluZGluZ2AuICBUaGlzIG1ldGhvZCB3aWxsIGNhbGwgYF9ldmFsdWF0ZUJpbmRpbmdgIGZvciBhbnlcbiAqIG5vbi1saXRlcmFsIHBhcnRzIHJldHVybmVkIGZyb20gYF9wYXJzZUJpbmRpbmdzYC4gIEhvd2V2ZXIsXG4gKiB0aGVyZSBpcyBubyBzdXBwb3J0IGZvciBfcGF0aF8gYmluZGluZ3MgdmlhIGN1c3RvbSBiaW5kaW5nIHBhcnRzLFxuICogYXMgdGhpcyBpcyBzcGVjaWZpYyB0byBQb2x5bWVyJ3MgcGF0aCBiaW5kaW5nIHN5bnRheC5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2UgdGhlIGVmZmVjdCB3aWxsIGJlIHJ1biBvblxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggTmFtZSBvZiBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7P30gaW5mbyBFZmZlY3QgbWV0YWRhdGFcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEBwYXJhbSB7QXJyYXl9IG5vZGVMaXN0IExpc3Qgb2Ygbm9kZXMgYXNzb2NpYXRlZCB3aXRoIGBub2RlSW5mb0xpc3RgIHRlbXBsYXRlXG4gKiAgIG1ldGFkYXRhXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuQmluZGluZ0VmZmVjdChpbnN0LCBwYXRoLCBwcm9wcywgb2xkUHJvcHMsIGluZm8sIGhhc1BhdGhzLCBub2RlTGlzdCkge1xuICBsZXQgbm9kZSA9IG5vZGVMaXN0W2luZm8uaW5kZXhdO1xuICBsZXQgYmluZGluZyA9IGluZm8uYmluZGluZztcbiAgbGV0IHBhcnQgPSBpbmZvLnBhcnQ7XG4gIC8vIFN1YnBhdGggbm90aWZpY2F0aW9uOiB0cmFuc2Zvcm0gcGF0aCBhbmQgc2V0IHRvIGNsaWVudFxuICAvLyBlLmcuOiBmb289XCJ7e29iai5zdWJ9fVwiLCBwYXRoOiAnb2JqLnN1Yi5wcm9wJywgc2V0ICdmb28ucHJvcCc9b2JqLnN1Yi5wcm9wXG4gIGlmIChoYXNQYXRocyAmJiBwYXJ0LnNvdXJjZSAmJiAocGF0aC5sZW5ndGggPiBwYXJ0LnNvdXJjZS5sZW5ndGgpICYmXG4gICAgICAoYmluZGluZy5raW5kID09ICdwcm9wZXJ0eScpICYmICFiaW5kaW5nLmlzQ29tcG91bmQgJiZcbiAgICAgIG5vZGUuX19pc1Byb3BlcnR5RWZmZWN0c0NsaWVudCAmJlxuICAgICAgbm9kZS5fX2RhdGFIYXNBY2Nlc3NvciAmJiBub2RlLl9fZGF0YUhhc0FjY2Vzc29yW2JpbmRpbmcudGFyZ2V0XSkge1xuICAgIGxldCB2YWx1ZSA9IHByb3BzW3BhdGhdO1xuICAgIHBhdGggPSB0cmFuc2xhdGUocGFydC5zb3VyY2UsIGJpbmRpbmcudGFyZ2V0LCBwYXRoKTtcbiAgICBpZiAobm9kZS5fc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKHBhdGgsIHZhbHVlLCBmYWxzZSwgdHJ1ZSkpIHtcbiAgICAgIGluc3QuX2VucXVldWVDbGllbnQobm9kZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCB2YWx1ZSA9IGluZm8uZXZhbHVhdG9yLl9ldmFsdWF0ZUJpbmRpbmcoaW5zdCwgcGFydCwgcGF0aCwgcHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgLy8gUHJvcGFnYXRlIHZhbHVlIHRvIGNoaWxkXG4gICAgYXBwbHlCaW5kaW5nVmFsdWUoaW5zdCwgbm9kZSwgYmluZGluZywgcGFydCwgdmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgZm9yIGFuIFwiYmluZGluZ1wiIChiaW5kaW5nKSBlZmZlY3QgdG8gYSBub2RlLFxuICogZWl0aGVyIGFzIGEgcHJvcGVydHkgb3IgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSBvd25pbmcgdGhlIGJpbmRpbmcgZWZmZWN0XG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGFyZ2V0IG5vZGUgZm9yIGJpbmRpbmdcbiAqIEBwYXJhbSB7IUJpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHBhcmFtIHshQmluZGluZ1BhcnR9IHBhcnQgQmluZGluZyBwYXJ0IG1ldGFkYXRhXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFwcGx5QmluZGluZ1ZhbHVlKGluc3QsIG5vZGUsIGJpbmRpbmcsIHBhcnQsIHZhbHVlKSB7XG4gIHZhbHVlID0gY29tcHV0ZUJpbmRpbmdWYWx1ZShub2RlLCB2YWx1ZSwgYmluZGluZywgcGFydCk7XG4gIGlmIChzYW5pdGl6ZURPTVZhbHVlKSB7XG4gICAgdmFsdWUgPSBzYW5pdGl6ZURPTVZhbHVlKHZhbHVlLCBiaW5kaW5nLnRhcmdldCwgYmluZGluZy5raW5kLCBub2RlKTtcbiAgfVxuICBpZiAoYmluZGluZy5raW5kID09ICdhdHRyaWJ1dGUnKSB7XG4gICAgLy8gQXR0cmlidXRlIGJpbmRpbmdcbiAgICBpbnN0Ll92YWx1ZVRvTm9kZUF0dHJpYnV0ZSgvKiogQHR5cGUge0VsZW1lbnR9ICovKG5vZGUpLCB2YWx1ZSwgYmluZGluZy50YXJnZXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIFByb3BlcnR5IGJpbmRpbmdcbiAgICBsZXQgcHJvcCA9IGJpbmRpbmcudGFyZ2V0O1xuICAgIGlmIChub2RlLl9faXNQcm9wZXJ0eUVmZmVjdHNDbGllbnQgJiZcbiAgICAgICAgbm9kZS5fX2RhdGFIYXNBY2Nlc3NvciAmJiBub2RlLl9fZGF0YUhhc0FjY2Vzc29yW3Byb3BdKSB7XG4gICAgICBpZiAoIW5vZGVbVFlQRVMuUkVBRF9PTkxZXSB8fCAhbm9kZVtUWVBFUy5SRUFEX09OTFldW3Byb3BdKSB7XG4gICAgICAgIGlmIChub2RlLl9zZXRQZW5kaW5nUHJvcGVydHkocHJvcCwgdmFsdWUpKSB7XG4gICAgICAgICAgaW5zdC5fZW5xdWV1ZUNsaWVudChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSAge1xuICAgICAgaW5zdC5fc2V0VW5tYW5hZ2VkUHJvcGVydHlUb05vZGUobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gXCJiaW5kaW5nXCIgZWZmZWN0IHZhbHVlIGJhc2VkIG9uIGNvbXBvdW5kICYgbmVnYXRpb25cbiAqIGVmZmVjdCBtZXRhZGF0YSwgYXMgd2VsbCBhcyBoYW5kbGluZyBmb3Igc3BlY2lhbC1jYXNlIHByb3BlcnRpZXNcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0aGUgdmFsdWUgd2lsbCBiZSBzZXQgdG9cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gKiBAcGFyYW0geyFCaW5kaW5nfSBiaW5kaW5nIEJpbmRpbmcgbWV0YWRhdGFcbiAqIEBwYXJhbSB7IUJpbmRpbmdQYXJ0fSBwYXJ0IEJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICogQHJldHVybiB7Kn0gVHJhbnNmb3JtZWQgdmFsdWUgdG8gc2V0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb21wdXRlQmluZGluZ1ZhbHVlKG5vZGUsIHZhbHVlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gIGlmIChiaW5kaW5nLmlzQ29tcG91bmQpIHtcbiAgICBsZXQgc3RvcmFnZSA9IG5vZGUuX19kYXRhQ29tcG91bmRTdG9yYWdlW2JpbmRpbmcudGFyZ2V0XTtcbiAgICBzdG9yYWdlW3BhcnQuY29tcG91bmRJbmRleF0gPSB2YWx1ZTtcbiAgICB2YWx1ZSA9IHN0b3JhZ2Uuam9pbignJyk7XG4gIH1cbiAgaWYgKGJpbmRpbmcua2luZCAhPT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAvLyBTb21lIGJyb3dzZXJzIHNlcmlhbGl6ZSBgdW5kZWZpbmVkYCB0byBgXCJ1bmRlZmluZWRcImBcbiAgICBpZiAoYmluZGluZy50YXJnZXQgPT09ICd0ZXh0Q29udGVudCcgfHxcbiAgICAgICAgKGJpbmRpbmcudGFyZ2V0ID09PSAndmFsdWUnICYmXG4gICAgICAgICAgKG5vZGUubG9jYWxOYW1lID09PSAnaW5wdXQnIHx8IG5vZGUubG9jYWxOYW1lID09PSAndGV4dGFyZWEnKSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgPT0gdW5kZWZpbmVkID8gJycgOiB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGJpbmRpbmcncyBtZXRhZGF0YSBtZWV0cyBhbGwgdGhlIHJlcXVpcmVtZW50cyB0byBhbGxvd1xuICogMi13YXkgYmluZGluZywgYW5kIHRoZXJlZm9yZSBhIGA8cHJvcGVydHk+LWNoYW5nZWRgIGV2ZW50IGxpc3RlbmVyIHNob3VsZCBiZVxuICogYWRkZWQ6XG4gKiAtIHVzZWQgY3VybHkgYnJhY2VzXG4gKiAtIGlzIGEgcHJvcGVydHkgKG5vdCBhdHRyaWJ1dGUpIGJpbmRpbmdcbiAqIC0gaXMgbm90IGEgdGV4dENvbnRlbnQgYmluZGluZ1xuICogLSBpcyBub3QgY29tcG91bmRcbiAqXG4gKiBAcGFyYW0geyFCaW5kaW5nfSBiaW5kaW5nIEJpbmRpbmcgbWV0YWRhdGFcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgMi13YXkgbGlzdGVuZXIgc2hvdWxkIGJlIGFkZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzaG91bGRBZGRMaXN0ZW5lcihiaW5kaW5nKSB7XG4gIHJldHVybiBCb29sZWFuKGJpbmRpbmcudGFyZ2V0KSAmJlxuICAgICAgICAgYmluZGluZy5raW5kICE9ICdhdHRyaWJ1dGUnICYmXG4gICAgICAgICBiaW5kaW5nLmtpbmQgIT0gJ3RleHQnICYmXG4gICAgICAgICAhYmluZGluZy5pc0NvbXBvdW5kICYmXG4gICAgICAgICBiaW5kaW5nLnBhcnRzWzBdLm1vZGUgPT09ICd7Jztcbn1cblxuLyoqXG4gKiBTZXR1cCBjb21wb3VuZCBiaW5kaW5nIHN0b3JhZ2Ugc3RydWN0dXJlcywgbm90aWZ5IGxpc3RlbmVycywgYW5kIGRhdGFIb3N0XG4gKiByZWZlcmVuY2VzIG9udG8gdGhlIGJvdW5kIG5vZGVMaXN0LlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEluc3RhbmNlIHRoYXQgYmFzIGJlZW4gcHJldmlvdXNseVxuICogICAgIGJvdW5kXG4gKiBAcGFyYW0ge1RlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0dXBCaW5kaW5ncyhpbnN0LCB0ZW1wbGF0ZUluZm8pIHtcbiAgLy8gU2V0dXAgY29tcG91bmQgc3RvcmFnZSwgZGF0YUhvc3QsIGFuZCBub3RpZnkgbGlzdGVuZXJzXG4gIGxldCB7bm9kZUxpc3QsIG5vZGVJbmZvTGlzdH0gPSB0ZW1wbGF0ZUluZm87XG4gIGlmIChub2RlSW5mb0xpc3QubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgaT0wOyBpIDwgbm9kZUluZm9MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW5mbyA9IG5vZGVJbmZvTGlzdFtpXTtcbiAgICAgIGxldCBub2RlID0gbm9kZUxpc3RbaV07XG4gICAgICBsZXQgYmluZGluZ3MgPSBpbmZvLmJpbmRpbmdzO1xuICAgICAgaWYgKGJpbmRpbmdzKSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxiaW5kaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBiaW5kaW5nID0gYmluZGluZ3NbaV07XG4gICAgICAgICAgc2V0dXBDb21wb3VuZFN0b3JhZ2Uobm9kZSwgYmluZGluZyk7XG4gICAgICAgICAgYWRkTm90aWZ5TGlzdGVuZXIobm9kZSwgaW5zdCwgYmluZGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vZGUuX19kYXRhSG9zdCA9IGluc3Q7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYF9fZGF0YUNvbXBvdW5kU3RvcmFnZWAgbG9jYWwgc3RvcmFnZSBvbiBhIGJvdW5kIG5vZGUgd2l0aFxuICogaW5pdGlhbCBsaXRlcmFsIGRhdGEgZm9yIGNvbXBvdW5kIGJpbmRpbmdzLCBhbmQgc2V0cyB0aGUgam9pbmVkXG4gKiBsaXRlcmFsIHBhcnRzIHRvIHRoZSBib3VuZCBwcm9wZXJ0eS5cbiAqXG4gKiBXaGVuIGNoYW5nZXMgdG8gY29tcG91bmQgcGFydHMgb2NjdXIsIHRoZXkgYXJlIGZpcnN0IHNldCBpbnRvIHRoZSBjb21wb3VuZFxuICogc3RvcmFnZSBhcnJheSBmb3IgdGhhdCBwcm9wZXJ0eSwgYW5kIHRoZW4gdGhlIGFycmF5IGlzIGpvaW5lZCB0byByZXN1bHQgaW5cbiAqIHRoZSBmaW5hbCB2YWx1ZSBzZXQgdG8gdGhlIHByb3BlcnR5L2F0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgQm91bmQgbm9kZSB0byBpbml0aWFsaXplXG4gKiBAcGFyYW0ge0JpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldHVwQ29tcG91bmRTdG9yYWdlKG5vZGUsIGJpbmRpbmcpIHtcbiAgaWYgKGJpbmRpbmcuaXNDb21wb3VuZCkge1xuICAgIC8vIENyZWF0ZSBjb21wb3VuZCBzdG9yYWdlIG1hcFxuICAgIGxldCBzdG9yYWdlID0gbm9kZS5fX2RhdGFDb21wb3VuZFN0b3JhZ2UgfHxcbiAgICAgIChub2RlLl9fZGF0YUNvbXBvdW5kU3RvcmFnZSA9IHt9KTtcbiAgICBsZXQgcGFydHMgPSBiaW5kaW5nLnBhcnRzO1xuICAgIC8vIENvcHkgbGl0ZXJhbHMgZnJvbSBwYXJ0cyBpbnRvIHN0b3JhZ2UgZm9yIHRoaXMgYmluZGluZ1xuICAgIGxldCBsaXRlcmFscyA9IG5ldyBBcnJheShwYXJ0cy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGo9MDsgajxwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgbGl0ZXJhbHNbal0gPSBwYXJ0c1tqXS5saXRlcmFsO1xuICAgIH1cbiAgICBsZXQgdGFyZ2V0ID0gYmluZGluZy50YXJnZXQ7XG4gICAgc3RvcmFnZVt0YXJnZXRdID0gbGl0ZXJhbHM7XG4gICAgLy8gQ29uZmlndXJlIHByb3BlcnRpZXMgd2l0aCB0aGVpciBsaXRlcmFsIHBhcnRzXG4gICAgaWYgKGJpbmRpbmcubGl0ZXJhbCAmJiBiaW5kaW5nLmtpbmQgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgLy8gTm90ZSwgY2xhc3NOYW1lIG5lZWRzIHN0eWxlIHNjb3Bpbmcgc28gdGhpcyBuZWVkcyB3cmFwcGluZy5cbiAgICAgIC8vIFdlIG1heSBhbHNvIHdhbnQgdG8gY29uc2lkZXIgZG9pbmcgdGhpcyBmb3IgYHRleHRDb250ZW50YCBhbmRcbiAgICAgIC8vIGBpbm5lckhUTUxgLlxuICAgICAgaWYgKHRhcmdldCA9PT0gJ2NsYXNzTmFtZScpIHtcbiAgICAgICAgbm9kZSA9IHdyYXAobm9kZSk7XG4gICAgICB9XG4gICAgICBub2RlW3RhcmdldF0gPSBiaW5kaW5nLmxpdGVyYWw7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWRkcyBhIDItd2F5IGJpbmRpbmcgbm90aWZpY2F0aW9uIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBub2RlIHNwZWNpZmllZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIENoaWxkIGVsZW1lbnQgdG8gYWRkIGxpc3RlbmVyIHRvXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBIb3N0IGVsZW1lbnQgaW5zdGFuY2UgdG8gaGFuZGxlXG4gKiAgICAgbm90aWZpY2F0aW9uIGV2ZW50XG4gKiBAcGFyYW0ge0JpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZE5vdGlmeUxpc3RlbmVyKG5vZGUsIGluc3QsIGJpbmRpbmcpIHtcbiAgaWYgKGJpbmRpbmcubGlzdGVuZXJFdmVudCkge1xuICAgIGxldCBwYXJ0ID0gYmluZGluZy5wYXJ0c1swXTtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoYmluZGluZy5saXN0ZW5lckV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICBoYW5kbGVOb3RpZmljYXRpb24oZSwgaW5zdCwgYmluZGluZy50YXJnZXQsIHBhcnQuc291cmNlLCBwYXJ0Lm5lZ2F0ZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gLS0gZm9yIG1ldGhvZC1iYXNlZCBlZmZlY3RzIChjb21wbGV4T2JzZXJ2ZXIgJiBjb21wdXRlZCkgLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBBZGRzIHByb3BlcnR5IGVmZmVjdHMgZm9yIGVhY2ggYXJndW1lbnQgaW4gdGhlIG1ldGhvZCBzaWduYXR1cmUgKGFuZFxuICogb3B0aW9uYWxseSwgZm9yIHRoZSBtZXRob2QgbmFtZSBpZiBgZHluYW1pY2AgaXMgdHJ1ZSkgdGhhdCBjYWxscyB0aGVcbiAqIHByb3ZpZGVkIGVmZmVjdCBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnQgfCBPYmplY3R9IG1vZGVsIFByb3RvdHlwZSBvciBpbnN0YW5jZVxuICogQHBhcmFtIHshTWV0aG9kU2lnbmF0dXJlfSBzaWcgTWV0aG9kIHNpZ25hdHVyZSBtZXRhZGF0YVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiBwcm9wZXJ0eSBlZmZlY3QgdG8gYWRkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlZmZlY3RGbiBGdW5jdGlvbiB0byBydW4gd2hlbiBhcmd1bWVudHMgY2hhbmdlXG4gKiBAcGFyYW0geyo9fSBtZXRob2RJbmZvIEVmZmVjdC1zcGVjaWZpYyBpbmZvcm1hdGlvbiB0byBiZSBpbmNsdWRlZCBpblxuICogICBtZXRob2QgZWZmZWN0IG1ldGFkYXRhXG4gKiBAcGFyYW0ge2Jvb2xlYW58T2JqZWN0PX0gZHluYW1pY0ZuIEJvb2xlYW4gb3Igb2JqZWN0IG1hcCBpbmRpY2F0aW5nIHdoZXRoZXJcbiAqICAgbWV0aG9kIG5hbWVzIHNob3VsZCBiZSBpbmNsdWRlZCBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC4gTm90ZSxcbiAqICAgZGVmYXVsdHMgdG8gdHJ1ZSBpZiB0aGUgc2lnbmF0dXJlIGlzIHN0YXRpYyAoc2lnLnN0YXRpYyBpcyB0cnVlKS5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVNZXRob2RFZmZlY3QobW9kZWwsIHNpZywgdHlwZSwgZWZmZWN0Rm4sIG1ldGhvZEluZm8sIGR5bmFtaWNGbikge1xuICBkeW5hbWljRm4gPSBzaWcuc3RhdGljIHx8IChkeW5hbWljRm4gJiZcbiAgICAodHlwZW9mIGR5bmFtaWNGbiAhPT0gJ29iamVjdCcgfHwgZHluYW1pY0ZuW3NpZy5tZXRob2ROYW1lXSkpO1xuICBsZXQgaW5mbyA9IHtcbiAgICBtZXRob2ROYW1lOiBzaWcubWV0aG9kTmFtZSxcbiAgICBhcmdzOiBzaWcuYXJncyxcbiAgICBtZXRob2RJbmZvLFxuICAgIGR5bmFtaWNGblxuICB9O1xuICBmb3IgKGxldCBpPTAsIGFyZzsgKGk8c2lnLmFyZ3MubGVuZ3RoKSAmJiAoYXJnPXNpZy5hcmdzW2ldKTsgaSsrKSB7XG4gICAgaWYgKCFhcmcubGl0ZXJhbCkge1xuICAgICAgbW9kZWwuX2FkZFByb3BlcnR5RWZmZWN0KGFyZy5yb290UHJvcGVydHksIHR5cGUsIHtcbiAgICAgICAgZm46IGVmZmVjdEZuLCBpbmZvOiBpbmZvLCB0cmlnZ2VyOiBhcmdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAoZHluYW1pY0ZuKSB7XG4gICAgbW9kZWwuX2FkZFByb3BlcnR5RWZmZWN0KHNpZy5tZXRob2ROYW1lLCB0eXBlLCB7XG4gICAgICBmbjogZWZmZWN0Rm4sIGluZm86IGluZm9cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENhbGxzIGEgbWV0aG9kIHdpdGggYXJndW1lbnRzIG1hcnNoYWxlZCBmcm9tIHByb3BlcnRpZXMgb24gdGhlIGluc3RhbmNlXG4gKiBiYXNlZCBvbiB0aGUgbWV0aG9kIHNpZ25hdHVyZSBjb250YWluZWQgaW4gdGhlIGVmZmVjdCBtZXRhZGF0YS5cbiAqXG4gKiBNdWx0aS1wcm9wZXJ0eSBvYnNlcnZlcnMsIGNvbXB1dGVkIHByb3BlcnRpZXMsIGFuZCBpbmxpbmUgY29tcHV0aW5nXG4gKiBmdW5jdGlvbnMgY2FsbCB0aGlzIGZ1bmN0aW9uIHRvIGludm9rZSB0aGUgbWV0aG9kLCB0aGVuIHVzZSB0aGUgcmV0dXJuXG4gKiB2YWx1ZSBhY2NvcmRpbmdseS5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2UgdGhlIGVmZmVjdCB3aWxsIGJlIHJ1biBvblxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgY3VycmVudCBwcm9wZXJ0eSBjaGFuZ2VzXG4gKiBAcGFyYW0ge09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0gez99IGluZm8gRWZmZWN0IG1ldGFkYXRhXG4gKiBAcmV0dXJuIHsqfSBSZXR1cm5zIHRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbWV0aG9kIGludm9jYXRpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJ1bk1ldGhvZEVmZmVjdChpbnN0LCBwcm9wZXJ0eSwgcHJvcHMsIG9sZFByb3BzLCBpbmZvKSB7XG4gIC8vIEluc3RhbmNlcyBjYW4gb3B0aW9uYWxseSBoYXZlIGEgX21ldGhvZEhvc3Qgd2hpY2ggYWxsb3dzIHJlZGlyZWN0aW5nIHdoZXJlXG4gIC8vIHRvIGZpbmQgbWV0aG9kcy4gQ3VycmVudGx5IHVzZWQgYnkgYHRlbXBsYXRpemVgLlxuICBsZXQgY29udGV4dCA9IGluc3QuX21ldGhvZEhvc3QgfHwgaW5zdDtcbiAgbGV0IGZuID0gY29udGV4dFtpbmZvLm1ldGhvZE5hbWVdO1xuICBpZiAoZm4pIHtcbiAgICBsZXQgYXJncyA9IGluc3QuX21hcnNoYWxBcmdzKGluZm8uYXJncywgcHJvcGVydHksIHByb3BzKTtcbiAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSBpZiAoIWluZm8uZHluYW1pY0ZuKSB7XG4gICAgY29uc29sZS53YXJuKCdtZXRob2QgYCcgKyBpbmZvLm1ldGhvZE5hbWUgKyAnYCBub3QgZGVmaW5lZCcpO1xuICB9XG59XG5cbmNvbnN0IGVtcHR5QXJyYXkgPSBbXTtcblxuLy8gUmVndWxhciBleHByZXNzaW9ucyB1c2VkIGZvciBiaW5kaW5nXG5jb25zdCBJREVOVCAgPSAnKD86JyArICdbYS16QS1aXyRdW1xcXFx3LjokXFxcXC0qXSonICsgJyknO1xuY29uc3QgTlVNQkVSID0gJyg/OicgKyAnWy0rXT9bMC05XSpcXFxcLj9bMC05XSsoPzpbZUVdWy0rXT9bMC05XSspPycgKyAnKSc7XG5jb25zdCBTUVVPVEVfU1RSSU5HID0gJyg/OicgKyAnXFwnKD86W15cXCdcXFxcXFxcXF18XFxcXFxcXFwuKSpcXCcnICsgJyknO1xuY29uc3QgRFFVT1RFX1NUUklORyA9ICcoPzonICsgJ1wiKD86W15cIlxcXFxcXFxcXXxcXFxcXFxcXC4pKlwiJyArICcpJztcbmNvbnN0IFNUUklORyA9ICcoPzonICsgU1FVT1RFX1NUUklORyArICd8JyArIERRVU9URV9TVFJJTkcgKyAnKSc7XG5jb25zdCBBUkdVTUVOVCA9ICcoPzooJyArIElERU5UICsgJ3wnICsgTlVNQkVSICsgJ3wnICsgIFNUUklORyArICcpXFxcXHMqJyArICcpJztcbmNvbnN0IEFSR1VNRU5UUyA9ICcoPzonICsgQVJHVU1FTlQgKyAnKD86LFxcXFxzKicgKyBBUkdVTUVOVCArICcpKicgKyAnKSc7XG5jb25zdCBBUkdVTUVOVF9MSVNUID0gJyg/OicgKyAnXFxcXChcXFxccyonICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoPzonICsgQVJHVU1FTlRTICsgJz8nICsgJyknICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFxcXClcXFxccyonICsgJyknO1xuY29uc3QgQklORElORyA9ICcoJyArIElERU5UICsgJ1xcXFxzKicgKyBBUkdVTUVOVF9MSVNUICsgJz8nICsgJyknOyAvLyBHcm91cCAzXG5jb25zdCBPUEVOX0JSQUNLRVQgPSAnKFxcXFxbXFxcXFt8e3spJyArICdcXFxccyonO1xuY29uc3QgQ0xPU0VfQlJBQ0tFVCA9ICcoPzpdXXx9fSknO1xuY29uc3QgTkVHQVRFID0gJyg/OighKVxcXFxzKik/JzsgLy8gR3JvdXAgMlxuY29uc3QgRVhQUkVTU0lPTiA9IE9QRU5fQlJBQ0tFVCArIE5FR0FURSArIEJJTkRJTkcgKyBDTE9TRV9CUkFDS0VUO1xuY29uc3QgYmluZGluZ1JlZ2V4ID0gbmV3IFJlZ0V4cChFWFBSRVNTSU9OLCBcImdcIik7XG5cbi8qKlxuICogQ3JlYXRlIGEgc3RyaW5nIGZyb20gYmluZGluZyBwYXJ0cyBvZiBhbGwgdGhlIGxpdGVyYWwgcGFydHNcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxCaW5kaW5nUGFydD59IHBhcnRzIEFsbCBwYXJ0cyB0byBzdHJpbmdpZnlcbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIG1hZGUgZnJvbSB0aGUgbGl0ZXJhbCBwYXJ0c1xuICovXG5mdW5jdGlvbiBsaXRlcmFsRnJvbVBhcnRzKHBhcnRzKSB7XG4gIGxldCBzID0gJyc7XG4gIGZvciAobGV0IGk9MDsgaTxwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBsaXRlcmFsID0gcGFydHNbaV0ubGl0ZXJhbDtcbiAgICBzICs9IGxpdGVyYWwgfHwgJyc7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogUGFyc2VzIGFuIGV4cHJlc3Npb24gc3RyaW5nIGZvciBhIG1ldGhvZCBzaWduYXR1cmUsIGFuZCByZXR1cm5zIGEgbWV0YWRhdGFcbiAqIGRlc2NyaWJpbmcgdGhlIG1ldGhvZCBpbiB0ZXJtcyBvZiBgbWV0aG9kTmFtZWAsIGBzdGF0aWNgICh3aGV0aGVyIGFsbCB0aGVcbiAqIGFyZ3VtZW50cyBhcmUgbGl0ZXJhbHMpLCBhbmQgYW4gYXJyYXkgb2YgYGFyZ3NgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIGV4cHJlc3Npb24gdG8gcGFyc2VcbiAqIEByZXR1cm4gez9NZXRob2RTaWduYXR1cmV9IFRoZSBtZXRob2QgbWV0YWRhdGEgb2JqZWN0IGlmIGEgbWV0aG9kIGV4cHJlc3Npb24gd2FzXG4gKiAgIGZvdW5kLCBvdGhlcndpc2UgYHVuZGVmaW5lZGBcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlTWV0aG9kKGV4cHJlc3Npb24pIHtcbiAgLy8gdHJpZXMgdG8gbWF0Y2ggdmFsaWQgamF2YXNjcmlwdCBwcm9wZXJ0eSBuYW1lc1xuICBsZXQgbSA9IGV4cHJlc3Npb24ubWF0Y2goLyhbXlxcc10rPylcXCgoW1xcc1xcU10qKVxcKS8pO1xuICBpZiAobSkge1xuICAgIGxldCBtZXRob2ROYW1lID0gbVsxXTtcbiAgICBsZXQgc2lnID0geyBtZXRob2ROYW1lLCBzdGF0aWM6IHRydWUsIGFyZ3M6IGVtcHR5QXJyYXkgfTtcbiAgICBpZiAobVsyXS50cmltKCkpIHtcbiAgICAgIC8vIHJlcGxhY2UgZXNjYXBlZCBjb21tYXMgd2l0aCBjb21tYSBlbnRpdHksIHNwbGl0IG9uIHVuLWVzY2FwZWQgY29tbWFzXG4gICAgICBsZXQgYXJncyA9IG1bMl0ucmVwbGFjZSgvXFxcXCwvZywgJyZjb21tYTsnKS5zcGxpdCgnLCcpO1xuICAgICAgcmV0dXJuIHBhcnNlQXJncyhhcmdzLCBzaWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2lnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYW4gYXJyYXkgb2YgYXJndW1lbnRzIGFuZCBzZXRzIHRoZSBgYXJnc2AgcHJvcGVydHkgb2YgdGhlIHN1cHBsaWVkXG4gKiBzaWduYXR1cmUgbWV0YWRhdGEgb2JqZWN0LiBTZXRzIHRoZSBgc3RhdGljYCBwcm9wZXJ0eSB0byBmYWxzZSBpZiBhbnlcbiAqIGFyZ3VtZW50IGlzIGEgbm9uLWxpdGVyYWwuXG4gKlxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gYXJnTGlzdCBBcnJheSBvZiBhcmd1bWVudCBuYW1lc1xuICogQHBhcmFtIHshTWV0aG9kU2lnbmF0dXJlfSBzaWcgTWV0aG9kIHNpZ25hdHVyZSBtZXRhZGF0YSBvYmplY3RcbiAqIEByZXR1cm4geyFNZXRob2RTaWduYXR1cmV9IFRoZSB1cGRhdGVkIHNpZ25hdHVyZSBtZXRhZGF0YSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXJncyhhcmdMaXN0LCBzaWcpIHtcbiAgc2lnLmFyZ3MgPSBhcmdMaXN0Lm1hcChmdW5jdGlvbihyYXdBcmcpIHtcbiAgICBsZXQgYXJnID0gcGFyc2VBcmcocmF3QXJnKTtcbiAgICBpZiAoIWFyZy5saXRlcmFsKSB7XG4gICAgICBzaWcuc3RhdGljID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBhcmc7XG4gIH0sIHRoaXMpO1xuICByZXR1cm4gc2lnO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhbiBpbmRpdmlkdWFsIGFyZ3VtZW50LCBhbmQgcmV0dXJucyBhbiBhcmd1bWVudCBtZXRhZGF0YSBvYmplY3RcbiAqIHdpdGggdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gKlxuICogICB7XG4gKiAgICAgdmFsdWU6ICdwcm9wJywgICAgICAgIC8vIHByb3BlcnR5L3BhdGggb3IgbGl0ZXJhbCB2YWx1ZVxuICogICAgIGxpdGVyYWw6IGZhbHNlLCAgICAgICAvLyB3aGV0aGVyIGFyZ3VtZW50IGlzIGEgbGl0ZXJhbFxuICogICAgIHN0cnVjdHVyZWQ6IGZhbHNlLCAgICAvLyB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBpcyBhIHBhdGhcbiAqICAgICByb290UHJvcGVydHk6ICdwcm9wJywgLy8gdGhlIHJvb3QgcHJvcGVydHkgb2YgdGhlIHBhdGhcbiAqICAgICB3aWxkY2FyZDogZmFsc2UgICAgICAgLy8gd2hldGhlciB0aGUgYXJndW1lbnQgd2FzIGEgd2lsZGNhcmQgJy4qJyBwYXRoXG4gKiAgIH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmF3QXJnIFRoZSBzdHJpbmcgdmFsdWUgb2YgdGhlIGFyZ3VtZW50XG4gKiBAcmV0dXJuIHshTWV0aG9kQXJnfSBBcmd1bWVudCBtZXRhZGF0YSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXJnKHJhd0FyZykge1xuICAvLyBjbGVhbiB1cCB3aGl0ZXNwYWNlXG4gIGxldCBhcmcgPSByYXdBcmcudHJpbSgpXG4gICAgLy8gcmVwbGFjZSBjb21tYSBlbnRpdHkgd2l0aCBjb21tYVxuICAgIC5yZXBsYWNlKC8mY29tbWE7L2csICcsJylcbiAgICAvLyByZXBhaXIgZXh0cmEgZXNjYXBlIHNlcXVlbmNlczsgbm90ZSBvbmx5IGNvbW1hcyBzdHJpY3RseSBuZWVkXG4gICAgLy8gZXNjYXBpbmcsIGJ1dCB3ZSBhbGxvdyBhbnkgb3RoZXIgY2hhciB0byBiZSBlc2NhcGVkIHNpbmNlIGl0c1xuICAgIC8vIGxpa2VseSB1c2VycyB3aWxsIGRvIHRoaXNcbiAgICAucmVwbGFjZSgvXFxcXCguKS9nLCAnXFwkMScpXG4gICAgO1xuICAvLyBiYXNpYyBhcmd1bWVudCBkZXNjcmlwdG9yXG4gIGxldCBhID0ge1xuICAgIG5hbWU6IGFyZyxcbiAgICB2YWx1ZTogJycsXG4gICAgbGl0ZXJhbDogZmFsc2VcbiAgfTtcbiAgLy8gZGV0ZWN0IGxpdGVyYWwgdmFsdWUgKG11c3QgYmUgU3RyaW5nIG9yIE51bWJlcilcbiAgbGV0IGZjID0gYXJnWzBdO1xuICBpZiAoZmMgPT09ICctJykge1xuICAgIGZjID0gYXJnWzFdO1xuICB9XG4gIGlmIChmYyA+PSAnMCcgJiYgZmMgPD0gJzknKSB7XG4gICAgZmMgPSAnIyc7XG4gIH1cbiAgc3dpdGNoKGZjKSB7XG4gICAgY2FzZSBcIidcIjpcbiAgICBjYXNlICdcIic6XG4gICAgICBhLnZhbHVlID0gYXJnLnNsaWNlKDEsIC0xKTtcbiAgICAgIGEubGl0ZXJhbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlICcjJzpcbiAgICAgIGEudmFsdWUgPSBOdW1iZXIoYXJnKTtcbiAgICAgIGEubGl0ZXJhbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgfVxuICAvLyBpZiBub3QgbGl0ZXJhbCwgbG9vayBmb3Igc3RydWN0dXJlZCBwYXRoXG4gIGlmICghYS5saXRlcmFsKSB7XG4gICAgYS5yb290UHJvcGVydHkgPSByb290KGFyZyk7XG4gICAgLy8gZGV0ZWN0IHN0cnVjdHVyZWQgcGF0aCAoaGFzIGRvdHMpXG4gICAgYS5zdHJ1Y3R1cmVkID0gaXNQYXRoKGFyZyk7XG4gICAgaWYgKGEuc3RydWN0dXJlZCkge1xuICAgICAgYS53aWxkY2FyZCA9IChhcmcuc2xpY2UoLTIpID09ICcuKicpO1xuICAgICAgaWYgKGEud2lsZGNhcmQpIHtcbiAgICAgICAgYS5uYW1lID0gYXJnLnNsaWNlKDAsIC0yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGE7XG59XG5cbmZ1bmN0aW9uIGdldEFyZ1ZhbHVlKGRhdGEsIHByb3BzLCBwYXRoKSB7XG4gIGxldCB2YWx1ZSA9IGdldChkYXRhLCBwYXRoKTtcbiAgLy8gd2hlbiBkYXRhIGlzIG5vdCBzdG9yZWQgZS5nLiBgc3BsaWNlc2AsIGdldCB0aGUgdmFsdWUgZnJvbSBjaGFuZ2VkUHJvcHNcbiAgLy8gVE9ETyhrc2NoYWFmKTogTm90ZSwgdGhpcyBjYW4gY2F1c2UgYSByYXJlIGlzc3VlIHdoZXJlIHRoZSB3aWxkY2FyZFxuICAvLyBpbmZvLnZhbHVlIGNvdWxkIHB1bGwgYSBzdGFsZSB2YWx1ZSBvdXQgb2YgY2hhbmdlZFByb3BzIGR1cmluZyBhIHJlZW50cmFudFxuICAvLyBjaGFuZ2UgdGhhdCBzZXRzIHRoZSB2YWx1ZSBiYWNrIHRvIHVuZGVmaW5lZC5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvcG9seW1lci9pc3N1ZXMvNTQ3OVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gcHJvcHNbcGF0aF07XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBkYXRhIGFwaVxuXG4vKipcbiAqIFNlbmRzIGFycmF5IHNwbGljZSBub3RpZmljYXRpb25zIChgLnNwbGljZXNgIGFuZCBgLmxlbmd0aGApXG4gKlxuICogTm90ZTogdGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgbm9ybWFsaXplZCBwYXRoc1xuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEluc3RhbmNlIHRvIHNlbmQgbm90aWZpY2F0aW9ucyB0b1xuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRoZSBtdXRhdGlvbnMgb2NjdXJyZWQgb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBhcnJheSB0aGF0IHdhcyBtdXRhdGVkXG4gKiBAcGFyYW0ge0FycmF5fSBzcGxpY2VzIEFycmF5IG9mIHNwbGljZSByZWNvcmRzXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm90aWZ5U3BsaWNlcyhpbnN0LCBhcnJheSwgcGF0aCwgc3BsaWNlcykge1xuICBpbnN0Lm5vdGlmeVBhdGgocGF0aCArICcuc3BsaWNlcycsIHsgaW5kZXhTcGxpY2VzOiBzcGxpY2VzIH0pO1xuICBpbnN0Lm5vdGlmeVBhdGgocGF0aCArICcubGVuZ3RoJywgYXJyYXkubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3BsaWNlIHJlY29yZCBhbmQgc2VuZHMgYW4gYXJyYXkgc3BsaWNlIG5vdGlmaWNhdGlvbiBmb3JcbiAqIHRoZSBkZXNjcmliZWQgbXV0YXRpb25cbiAqXG4gKiBOb3RlOiB0aGlzIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBub3JtYWxpemVkIHBhdGhzXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgSW5zdGFuY2UgdG8gc2VuZCBub3RpZmljYXRpb25zIHRvXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdGhlIG11dGF0aW9ucyBvY2N1cnJlZCBvblxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gdGhlIGFycmF5IHRoYXQgd2FzIG11dGF0ZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0aGUgYXJyYXkgbXV0YXRpb24gb2NjdXJyZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBhZGRlZENvdW50IE51bWJlciBvZiBhZGRlZCBpdGVtc1xuICogQHBhcmFtIHtBcnJheX0gcmVtb3ZlZCBBcnJheSBvZiByZW1vdmVkIGl0ZW1zXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm90aWZ5U3BsaWNlKGluc3QsIGFycmF5LCBwYXRoLCBpbmRleCwgYWRkZWRDb3VudCwgcmVtb3ZlZCkge1xuICBub3RpZnlTcGxpY2VzKGluc3QsIGFycmF5LCBwYXRoLCBbe1xuICAgIGluZGV4OiBpbmRleCxcbiAgICBhZGRlZENvdW50OiBhZGRlZENvdW50LFxuICAgIHJlbW92ZWQ6IHJlbW92ZWQsXG4gICAgb2JqZWN0OiBhcnJheSxcbiAgICB0eXBlOiAnc3BsaWNlJ1xuICB9XSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiB1cHBlci1jYXNlZCB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgU3RyaW5nIHRvIHVwcGVyY2FzZVxuICogQHJldHVybiB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZ1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXBwZXIobmFtZSkge1xuICByZXR1cm4gbmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIG1ldGEtcHJvZ3JhbW1pbmcgZm9yIFBvbHltZXIncyB0ZW1wbGF0ZVxuICogYmluZGluZyBhbmQgZGF0YSBvYnNlcnZhdGlvbiAoY29sbGVjdGl2ZWx5LCBcInByb3BlcnR5IGVmZmVjdHNcIikgc3lzdGVtLlxuICpcbiAqIFRoaXMgbWl4aW4gdXNlcyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGtleSBzdGF0aWMgbWV0aG9kcyBmb3IgYWRkaW5nXG4gKiBwcm9wZXJ0eSBlZmZlY3RzIHRvIGFuIGVsZW1lbnQgY2xhc3M6XG4gKiAtIGBhZGRQcm9wZXJ0eUVmZmVjdGBcbiAqIC0gYGNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJgXG4gKiAtIGBjcmVhdGVNZXRob2RPYnNlcnZlcmBcbiAqIC0gYGNyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5YFxuICogLSBgY3JlYXRlUmVhZE9ubHlQcm9wZXJ0eWBcbiAqIC0gYGNyZWF0ZVJlZmxlY3RlZFByb3BlcnR5YFxuICogLSBgY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0eWBcbiAqIC0gYGJpbmRUZW1wbGF0ZWBcbiAqXG4gKiBFYWNoIG1ldGhvZCBjcmVhdGVzIG9uZSBvciBtb3JlIHByb3BlcnR5IGFjY2Vzc29ycywgYWxvbmcgd2l0aCBtZXRhZGF0YVxuICogdXNlZCBieSB0aGlzIG1peGluJ3MgaW1wbGVtZW50YXRpb24gb2YgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgdG8gcGVyZm9ybVxuICogdGhlIHByb3BlcnR5IGVmZmVjdHMuXG4gKlxuICogVW5kZXJzY29yZWQgdmVyc2lvbnMgb2YgdGhlIGFib3ZlIG1ldGhvZHMgYWxzbyBleGlzdCBvbiB0aGUgZWxlbWVudFxuICogcHJvdG90eXBlIGZvciBhZGRpbmcgcHJvcGVydHkgZWZmZWN0cyBvbiBpbnN0YW5jZXMgYXQgcnVudGltZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBtaXhpbiBvdmVycmlkZXMgc2V2ZXJhbCBgUHJvcGVydHlBY2Nlc3NvcnNgIG1ldGhvZHMsIGluXG4gKiBtYW55IGNhc2VzIHRvIG1haW50YWluIGd1YXJhbnRlZXMgcHJvdmlkZWQgYnkgdGhlIFBvbHltZXIgMS54IGZlYXR1cmVzO1xuICogbm90YWJseSBpdCBjaGFuZ2VzIHByb3BlcnR5IGFjY2Vzc29ycyB0byBiZSBzeW5jaHJvbm91cyBieSBkZWZhdWx0XG4gKiB3aGVyZWFzIHRoZSBkZWZhdWx0IHdoZW4gdXNpbmcgYFByb3BlcnR5QWNjZXNzb3JzYCBzdGFuZGFsb25lIGlzIHRvIGJlXG4gKiBhc3luYyBieSBkZWZhdWx0LlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBUZW1wbGF0ZVN0YW1wXG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5QWNjZXNzb3JzXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgbWV0YS1wcm9ncmFtbWluZyBmb3IgUG9seW1lcidzXG4gKiB0ZW1wbGF0ZSBiaW5kaW5nIGFuZCBkYXRhIG9ic2VydmF0aW9uIHN5c3RlbS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0eUVmZmVjdHMgPSBkZWR1cGluZ01peGluKHN1cGVyQ2xhc3MgPT4ge1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlBY2Nlc3NvcnN9XG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1RlbXBsYXRlU3RhbXB9XG4gICAqIEB1bnJlc3RyaWN0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0IHByb3BlcnR5RWZmZWN0c0Jhc2UgPSBUZW1wbGF0ZVN0YW1wKFByb3BlcnR5QWNjZXNzb3JzKHN1cGVyQ2xhc3MpKTtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzfVxuICAgKiBAZXh0ZW5kcyB7cHJvcGVydHlFZmZlY3RzQmFzZX1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKi9cbiAgY2xhc3MgUHJvcGVydHlFZmZlY3RzIGV4dGVuZHMgcHJvcGVydHlFZmZlY3RzQmFzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgICAvLyBVc2VkIHRvIGlkZW50aWZ5IHVzZXJzIG9mIHRoaXMgbWl4aW4sIGFsYSBpbnN0YW5jZW9mXG4gICAgICB0aGlzLl9faXNQcm9wZXJ0eUVmZmVjdHNDbGllbnQgPSB0cnVlO1xuICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAvLyBOT1RFOiB1c2VkIHRvIHRyYWNrIHJlLWVudHJhbnQgY2FsbHMgdG8gYF9mbHVzaFByb3BlcnRpZXNgXG4gICAgICAvLyBwYXRoIGNoYW5nZXMgZGlydHkgY2hlY2sgYWdhaW5zdCBgX19kYXRhVGVtcGAgb25seSBkdXJpbmcgb25lIFwidHVyblwiXG4gICAgICAvLyBhbmQgYXJlIGNsZWFyZWQgd2hlbiBgX19kYXRhQ291bnRlcmAgcmV0dXJucyB0byAwLlxuICAgICAgdGhpcy5fX2RhdGFDb3VudGVyID0gMDtcbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICAgIHRoaXMuX19kYXRhQ2xpZW50c1JlYWR5O1xuICAgICAgLyoqIEB0eXBlIHtBcnJheX0gKi9cbiAgICAgIHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHM7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cbiAgICAgIHRoaXMuX19kYXRhVG9Ob3RpZnk7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHM7XG4gICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgICB0aGlzLl9fZGF0YUhhc1BhdGhzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YUNvbXBvdW5kU3RvcmFnZTtcbiAgICAgIC8qKiBAdHlwZSB7UG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9ICovXG4gICAgICB0aGlzLl9fZGF0YUhvc3Q7XG4gICAgICAvKiogQHR5cGUgeyFPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YVRlbXA7XG4gICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgICB0aGlzLl9fZGF0YUNsaWVudHNJbml0aWFsaXplZDtcbiAgICAgIC8qKiBAdHlwZSB7IU9iamVjdH0gKi9cbiAgICAgIHRoaXMuX19kYXRhO1xuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fG51bGx9ICovXG4gICAgICB0aGlzLl9fZGF0YVBlbmRpbmc7XG4gICAgICAvKiogQHR5cGUgeyFPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YU9sZDtcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX2NvbXB1dGVFZmZlY3RzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcmVmbGVjdEVmZmVjdHM7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cbiAgICAgIHRoaXMuX19ub3RpZnlFZmZlY3RzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcHJvcGFnYXRlRWZmZWN0cztcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX29ic2VydmVFZmZlY3RzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcmVhZE9ubHk7XG4gICAgICAvKiogQHR5cGUgeyFUZW1wbGF0ZUluZm99ICovXG4gICAgICB0aGlzLl9fdGVtcGxhdGVJbmZvO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBFZmZlY3QgcHJvdG90eXBlIHByb3BlcnR5IG5hbWUgbWFwLlxuICAgICAqL1xuICAgIGdldCBQUk9QRVJUWV9FRkZFQ1RfVFlQRVMoKSB7XG4gICAgICByZXR1cm4gVFlQRVM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgICBzdXBlci5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgICAgIGhvc3RTdGFjay5yZWdpc3Rlckhvc3QodGhpcyk7XG4gICAgICB0aGlzLl9fZGF0YUNsaWVudHNSZWFkeSA9IGZhbHNlO1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nQ2xpZW50cyA9IG51bGw7XG4gICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5ID0gbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHMgPSBudWxsO1xuICAgICAgdGhpcy5fX2RhdGFIYXNQYXRocyA9IGZhbHNlO1xuICAgICAgLy8gTWF5IGJlIHNldCBvbiBpbnN0YW5jZSBwcmlvciB0byB1cGdyYWRlXG4gICAgICB0aGlzLl9fZGF0YUNvbXBvdW5kU3RvcmFnZSA9IHRoaXMuX19kYXRhQ29tcG91bmRTdG9yYWdlIHx8IG51bGw7XG4gICAgICB0aGlzLl9fZGF0YUhvc3QgPSB0aGlzLl9fZGF0YUhvc3QgfHwgbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhVGVtcCA9IHt9O1xuICAgICAgdGhpcy5fX2RhdGFDbGllbnRzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYFByb3BlcnR5QWNjZXNzb3JzYCBpbXBsZW1lbnRhdGlvbiB0byBwcm92aWRlIGFcbiAgICAgKiBtb3JlIGVmZmljaWVudCBpbXBsZW1lbnRhdGlvbiBvZiBpbml0aWFsaXppbmcgcHJvcGVydGllcyBmcm9tXG4gICAgICogdGhlIHByb3RvdHlwZSBvbiB0aGUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgUHJvcGVydGllcyB0byBpbml0aWFsaXplIG9uIHRoZSBwcm90b3R5cGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9pbml0aWFsaXplUHJvdG9Qcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgICB0aGlzLl9fZGF0YSA9IE9iamVjdC5jcmVhdGUocHJvcHMpO1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0gT2JqZWN0LmNyZWF0ZShwcm9wcyk7XG4gICAgICB0aGlzLl9fZGF0YU9sZCA9IHt9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlBY2Nlc3NvcnNgIGltcGxlbWVudGF0aW9uIHRvIGF2b2lkIHNldHRpbmdcbiAgICAgKiBgX3NldFByb3BlcnR5YCdzIGBzaG91bGROb3RpZnk6IHRydWVgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIFByb3BlcnRpZXMgdG8gaW5pdGlhbGl6ZSBvbiB0aGUgaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9pbml0aWFsaXplSW5zdGFuY2VQcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgICBsZXQgcmVhZE9ubHkgPSB0aGlzW1RZUEVTLlJFQURfT05MWV07XG4gICAgICBmb3IgKGxldCBwcm9wIGluIHByb3BzKSB7XG4gICAgICAgIGlmICghcmVhZE9ubHkgfHwgIXJlYWRPbmx5W3Byb3BdKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0gdGhpcy5fX2RhdGFQZW5kaW5nIHx8IHt9O1xuICAgICAgICAgIHRoaXMuX19kYXRhT2xkID0gdGhpcy5fX2RhdGFPbGQgfHwge307XG4gICAgICAgICAgdGhpcy5fX2RhdGFbcHJvcF0gPSB0aGlzLl9fZGF0YVBlbmRpbmdbcHJvcF0gPSBwcm9wc1twcm9wXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByb3RvdHlwZSBzZXR1cCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHN0YXRpYyBgYWRkUHJvcGVydHlFZmZlY3RgIEFQSSBidXQgY2FuIGJlIGNhbGxlZCBvblxuICAgICAqIGFuIGluc3RhbmNlIHRvIGFkZCBlZmZlY3RzIGF0IHJ1bnRpbWUuICBTZWUgdGhhdCBtZXRob2QgZm9yXG4gICAgICogZnVsbCBBUEkgZG9jcy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFZmZlY3QgdHlwZSwgZnJvbSB0aGlzLlBST1BFUlRZX0VGRkVDVF9UWVBFU1xuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gZWZmZWN0IEVmZmVjdCBtZXRhZGF0YSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIHR5cGUsIGVmZmVjdCkge1xuICAgICAgdGhpcy5fY3JlYXRlUHJvcGVydHlBY2Nlc3Nvcihwcm9wZXJ0eSwgdHlwZSA9PSBUWVBFUy5SRUFEX09OTFkpO1xuICAgICAgLy8gZWZmZWN0cyBhcmUgYWNjdW11bGF0ZWQgaW50byBhcnJheXMgcGVyIHByb3BlcnR5IGJhc2VkIG9uIHR5cGVcbiAgICAgIGxldCBlZmZlY3RzID0gZW5zdXJlT3duRWZmZWN0TWFwKHRoaXMsIHR5cGUpW3Byb3BlcnR5XTtcbiAgICAgIGlmICghZWZmZWN0cykge1xuICAgICAgICBlZmZlY3RzID0gdGhpc1t0eXBlXVtwcm9wZXJ0eV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGVmZmVjdHMucHVzaChlZmZlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIHByb3BlcnR5IGVmZmVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSB0aGUgZWZmZWN0IHdhcyBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFZmZlY3QgdHlwZSwgZnJvbSB0aGlzLlBST1BFUlRZX0VGRkVDVF9UWVBFU1xuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gZWZmZWN0IEVmZmVjdCBtZXRhZGF0YSBvYmplY3QgdG8gcmVtb3ZlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBfcmVtb3ZlUHJvcGVydHlFZmZlY3QocHJvcGVydHksIHR5cGUsIGVmZmVjdCkge1xuICAgICAgbGV0IGVmZmVjdHMgPSBlbnN1cmVPd25FZmZlY3RNYXAodGhpcywgdHlwZSlbcHJvcGVydHldO1xuICAgICAgbGV0IGlkeCA9IGVmZmVjdHMuaW5kZXhPZihlZmZlY3QpO1xuICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIGVmZmVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJyZW50IHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYSBwcm9wZXJ0eSBlZmZlY3RcbiAgICAgKiBvZiBhIGNlcnRhaW4gdHlwZS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSB0eXBlIEVmZmVjdCB0eXBlLCBmcm9tIHRoaXMuUFJPUEVSVFlfRUZGRUNUX1RZUEVTXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhbiBlZmZlY3Qgb2YgdGhpc1xuICAgICAqICAgICB0eXBlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9oYXNQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgdHlwZSkge1xuICAgICAgbGV0IGVmZmVjdHMgPSB0aGlzW3R5cGVdO1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZWZmZWN0cyAmJiBlZmZlY3RzW3Byb3BlcnR5XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJyZW50IHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYSBcInJlYWQgb25seVwiXG4gICAgICogYWNjZXNzb3IgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhbiBlZmZlY3Qgb2YgdGhpc1xuICAgICAqICAgICB0eXBlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9oYXNSZWFkT25seUVmZmVjdChwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhc1Byb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5SRUFEX09OTFkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgY3VycmVudCBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGEgXCJub3RpZnlcIlxuICAgICAqIHByb3BlcnR5IGVmZmVjdCBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGFuIGVmZmVjdCBvZiB0aGlzXG4gICAgICogICAgIHR5cGVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2hhc05vdGlmeUVmZmVjdChwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhc1Byb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5OT1RJRlkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgY3VycmVudCBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGEgXCJyZWZsZWN0IHRvXG4gICAgICogYXR0cmlidXRlXCIgcHJvcGVydHkgZWZmZWN0IGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYW4gZWZmZWN0IG9mIHRoaXNcbiAgICAgKiAgICAgdHlwZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfaGFzUmVmbGVjdEVmZmVjdChwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhc1Byb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5SRUZMRUNUKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhIFwiY29tcHV0ZWRcIlxuICAgICAqIHByb3BlcnR5IGVmZmVjdCBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGFuIGVmZmVjdCBvZiB0aGlzXG4gICAgICogICAgIHR5cGVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2hhc0NvbXB1dGVkRWZmZWN0KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLkNPTVBVVEUpO1xuICAgIH1cblxuICAgIC8vIFJ1bnRpbWUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIHBlbmRpbmcgcHJvcGVydHkgb3IgcGF0aC4gIElmIHRoZSByb290IHByb3BlcnR5IG9mIHRoZSBwYXRoIGluXG4gICAgICogcXVlc3Rpb24gaGFkIG5vIGFjY2Vzc29yLCB0aGUgcGF0aCBpcyBzZXQsIG90aGVyd2lzZSBpdCBpcyBlbnF1ZXVlZFxuICAgICAqIHZpYSBgX3NldFBlbmRpbmdQcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzb2xhdGVzIHJlbGF0aXZlbHkgZXhwZW5zaXZlIGZ1bmN0aW9uYWxpdHkgbmVjZXNzYXJ5XG4gICAgICogZm9yIHRoZSBwdWJsaWMgQVBJIChgc2V0YCwgYHNldFByb3BlcnRpZXNgLCBgbm90aWZ5UGF0aGAsIGFuZCBwcm9wZXJ0eVxuICAgICAqIGNoYW5nZSBsaXN0ZW5lcnMgdmlhIHt7Li4ufX0gYmluZGluZ3MpLCBzdWNoIHRoYXQgaXQgaXMgb25seSBkb25lXG4gICAgICogd2hlbiBwYXRocyBlbnRlciB0aGUgc3lzdGVtLCBhbmQgbm90IGF0IGV2ZXJ5IHByb3BhZ2F0aW9uIHN0ZXAuICBJdFxuICAgICAqIGFsc28gc2V0cyBhIGBfX2RhdGFIYXNQYXRoc2AgZmxhZyBvbiB0aGUgaW5zdGFuY2Ugd2hpY2ggaXMgdXNlZCB0b1xuICAgICAqIGZhc3QtcGF0aCBzbG93ZXIgcGF0aC1tYXRjaGluZyBjb2RlIGluIHRoZSBwcm9wZXJ0eSBlZmZlY3RzIGhvc3QgcGF0aHMuXG4gICAgICpcbiAgICAgKiBgcGF0aGAgY2FuIGJlIGEgcGF0aCBzdHJpbmcgb3IgYXJyYXkgb2YgcGF0aCBwYXJ0cyBhcyBhY2NlcHRlZCBieSB0aGVcbiAgICAgKiBwdWJsaWMgQVBJLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8bnVtYmVyfHN0cmluZz59IHBhdGggUGF0aCB0byBzZXRcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHNob3VsZE5vdGlmeSBTZXQgdG8gdHJ1ZSBpZiB0aGlzIGNoYW5nZSBzaG91bGRcbiAgICAgKiAgY2F1c2UgYSBwcm9wZXJ0eSBub3RpZmljYXRpb24gZXZlbnQgZGlzcGF0Y2hcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpc1BhdGhOb3RpZmljYXRpb24gSWYgdGhlIHBhdGggYmVpbmcgc2V0IGlzIGEgcGF0aFxuICAgICAqICAgbm90aWZpY2F0aW9uIG9mIGFuIGFscmVhZHkgY2hhbmdlZCB2YWx1ZSwgYXMgb3Bwb3NlZCB0byBhIHJlcXVlc3RcbiAgICAgKiAgIHRvIHNldCBhbmQgbm90aWZ5IHRoZSBjaGFuZ2UuICBJbiB0aGUgbGF0dGVyIGBmYWxzZWAgY2FzZSwgYSBkaXJ0eVxuICAgICAqICAgY2hlY2sgaXMgcGVyZm9ybWVkIGFuZCB0aGVuIHRoZSB2YWx1ZSBpcyBzZXQgdG8gdGhlIHBhdGggYmVmb3JlXG4gICAgICogICBlbnF1ZXVpbmcgdGhlIHBlbmRpbmcgcHJvcGVydHkgY2hhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvcGVydHkvcGF0aCB3YXMgZW5xdWV1ZWQgaW5cbiAgICAgKiAgIHRoZSBwZW5kaW5nIGNoYW5nZXMgYmFnLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKHBhdGgsIHZhbHVlLCBzaG91bGROb3RpZnksIGlzUGF0aE5vdGlmaWNhdGlvbikge1xuICAgICAgaWYgKGlzUGF0aE5vdGlmaWNhdGlvbiB8fFxuICAgICAgICAgIHJvb3QoQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGhbMF0gOiBwYXRoKSAhPT0gcGF0aCkge1xuICAgICAgICAvLyBEaXJ0eSBjaGVjayBjaGFuZ2VzIGJlaW5nIHNldCB0byBhIHBhdGggYWdhaW5zdCB0aGUgYWN0dWFsIG9iamVjdCxcbiAgICAgICAgLy8gc2luY2UgdGhpcyBpcyB0aGUgZW50cnkgcG9pbnQgZm9yIHBhdGhzIGludG8gdGhlIHN5c3RlbTsgZnJvbSBoZXJlXG4gICAgICAgIC8vIHRoZSBvbmx5IGRpcnR5IGNoZWNrcyBhcmUgYWdhaW5zdCB0aGUgYF9fZGF0YVRlbXBgIGNhY2hlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gZHVwbGljYXRlIHdvcmsgaW4gdGhlIHNhbWUgdHVybiBvbmx5LiBOb3RlLCBpZiB0aGlzIHdhcyBhIG5vdGlmaWNhdGlvblxuICAgICAgICAvLyBvZiBhIGNoYW5nZSBhbHJlYWR5IHNldCB0byBhIHBhdGggKGlzUGF0aE5vdGlmaWNhdGlvbjogdHJ1ZSksXG4gICAgICAgIC8vIHdlIGFsd2F5cyBsZXQgdGhlIGNoYW5nZSB0aHJvdWdoIGFuZCBza2lwIHRoZSBgc2V0YCBzaW5jZSBpdCB3YXNcbiAgICAgICAgLy8gYWxyZWFkeSBkaXJ0eSBjaGVja2VkIGF0IHRoZSBwb2ludCBvZiBlbnRyeSBhbmQgdGhlIHVuZGVybHlpbmdcbiAgICAgICAgLy8gb2JqZWN0IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZFxuICAgICAgICBpZiAoIWlzUGF0aE5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIGxldCBvbGQgPSBnZXQodGhpcywgcGF0aCk7XG4gICAgICAgICAgcGF0aCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoc2V0KHRoaXMsIHBhdGgsIHZhbHVlKSk7XG4gICAgICAgICAgLy8gVXNlIHByb3BlcnR5LWFjY2Vzc29yJ3Mgc2ltcGxlciBkaXJ0eSBjaGVja1xuICAgICAgICAgIGlmICghcGF0aCB8fCAhc3VwZXIuX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHBhdGgsIHZhbHVlLCBvbGQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19kYXRhSGFzUGF0aHMgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fc2V0UGVuZGluZ1Byb3BlcnR5KC8qKkB0eXBle3N0cmluZ30qLyhwYXRoKSwgdmFsdWUsIHNob3VsZE5vdGlmeSkpIHtcbiAgICAgICAgICBjb21wdXRlTGlua2VkUGF0aHModGhpcywgLyoqQHR5cGV7c3RyaW5nfSovIChwYXRoKSwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5fX2RhdGFIYXNBY2Nlc3NvciAmJiB0aGlzLl9fZGF0YUhhc0FjY2Vzc29yW3BhdGhdKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eSgvKipAdHlwZXtzdHJpbmd9Ki8ocGF0aCksIHZhbHVlLCBzaG91bGROb3RpZnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXNbcGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSB2YWx1ZSB0byBhIG5vbi1Qb2x5bWVyIGVsZW1lbnQvbm9kZSdzIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogVGhlIGltcGxlbWVudGF0aW9uIG1ha2VzIGEgYmVzdC1lZmZvcnQgYXQgYmluZGluZyBpbnRlcm9wOlxuICAgICAqIFNvbWUgbmF0aXZlIGVsZW1lbnQgcHJvcGVydGllcyBoYXZlIHNpZGUtZWZmZWN0cyB3aGVuXG4gICAgICogcmUtc2V0dGluZyB0aGUgc2FtZSB2YWx1ZSAoZS5nLiBzZXR0aW5nIGA8aW5wdXQ+LnZhbHVlYCByZXNldHMgdGhlXG4gICAgICogY3Vyc29yIHBvc2l0aW9uKSwgc28gd2UgZG8gYSBkaXJ0eS1jaGVjayBiZWZvcmUgc2V0dGluZyB0aGUgdmFsdWUuXG4gICAgICogSG93ZXZlciwgZm9yIGJldHRlciBpbnRlcm9wIHdpdGggbm9uLVBvbHltZXIgY3VzdG9tIGVsZW1lbnRzIHRoYXRcbiAgICAgKiBhY2NlcHQgb2JqZWN0cywgd2UgZXhwbGljaXRseSByZS1zZXQgb2JqZWN0IGNoYW5nZXMgY29taW5nIGZyb20gdGhlXG4gICAgICogUG9seW1lciB3b3JsZCAod2hpY2ggbWF5IGluY2x1ZGUgZGVlcCBvYmplY3QgY2hhbmdlcyB3aXRob3V0IHRoZVxuICAgICAqIHRvcCByZWZlcmVuY2UgY2hhbmdpbmcpLCBlcnJpbmcgb24gdGhlIHNpZGUgb2YgcHJvdmlkaW5nIG1vcmVcbiAgICAgKiBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBwcm92aWRlIGFsdGVybmF0ZSBhcHByb2FjaGVzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHshTm9kZX0gbm9kZSBUaGUgbm9kZSB0byBzZXQgYSBwcm9wZXJ0eSBvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFRoZSBwcm9wZXJ0eSB0byBzZXRcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfc2V0VW5tYW5hZ2VkUHJvcGVydHlUb05vZGUobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICAgIC8vIEl0IGlzIGEganVkZ21lbnQgY2FsbCB0aGF0IHJlc2V0dGluZyBwcmltaXRpdmVzIGlzXG4gICAgICAvLyBcImJhZFwiIGFuZCByZXNldHRpbmdzIG9iamVjdHMgaXMgYWxzbyBcImdvb2RcIjsgYWx0ZXJuYXRpdmVseSB3ZSBjb3VsZFxuICAgICAgLy8gaW1wbGVtZW50IGEgd2hpdGVsaXN0IG9mIHRhZyAmIHByb3BlcnR5IHZhbHVlcyB0aGF0IHNob3VsZCBuZXZlclxuICAgICAgLy8gYmUgcmVzZXQgKGUuZy4gPGlucHV0Pi52YWx1ZSAmJiA8c2VsZWN0Pi52YWx1ZSlcbiAgICAgIGlmICh2YWx1ZSAhPT0gbm9kZVtwcm9wXSB8fCB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gTm90ZSwgY2xhc3NOYW1lIG5lZWRzIHN0eWxlIHNjb3Bpbmcgc28gdGhpcyBuZWVkcyB3cmFwcGluZy5cbiAgICAgICAgaWYgKHByb3AgPT09ICdjbGFzc05hbWUnKSB7XG4gICAgICAgICAgbm9kZSA9IC8qKiBAdHlwZSB7IU5vZGV9ICovKHdyYXAobm9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgdGhlIGBQcm9wZXJ0aWVzQ2hhbmdlZGAgaW1wbGVtZW50YXRpb24gdG8gaW50cm9kdWNlIHNwZWNpYWxcbiAgICAgKiBkaXJ0eSBjaGVjayBsb2dpYyBkZXBlbmRpbmcgb24gdGhlIHByb3BlcnR5ICYgdmFsdWUgYmVpbmcgc2V0OlxuICAgICAqXG4gICAgICogMS4gQW55IHZhbHVlIHNldCB0byBhIHBhdGggKGUuZy4gJ29iai5wcm9wJzogNDIgb3IgJ29iai5wcm9wJzogey4uLn0pXG4gICAgICogICAgU3RvcmVkIGluIGBfX2RhdGFUZW1wYCwgZGlydHkgY2hlY2tlZCBhZ2FpbnN0IGBfX2RhdGFUZW1wYFxuICAgICAqIDIuIE9iamVjdCBzZXQgdG8gc2ltcGxlIHByb3BlcnR5IChlLmcuICdwcm9wJzogey4uLn0pXG4gICAgICogICAgU3RvcmVkIGluIGBfX2RhdGFUZW1wYCBhbmQgYF9fZGF0YWAsIGRpcnR5IGNoZWNrZWQgYWdhaW5zdFxuICAgICAqICAgIGBfX2RhdGFUZW1wYCBieSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBfc2hvdWxkUHJvcGVydHlDaGFuZ2VgXG4gICAgICogMy4gUHJpbWl0aXZlIHZhbHVlIHNldCB0byBzaW1wbGUgcHJvcGVydHkgKGUuZy4gJ3Byb3AnOiA0MilcbiAgICAgKiAgICBTdG9yZWQgaW4gYF9fZGF0YWAsIGRpcnR5IGNoZWNrZWQgYWdhaW5zdCBgX19kYXRhYFxuICAgICAqXG4gICAgICogVGhlIGRpcnR5LWNoZWNrIGlzIGltcG9ydGFudCB0byBwcmV2ZW50IGN5Y2xlcyBkdWUgdG8gdHdvLXdheVxuICAgICAqIG5vdGlmaWNhdGlvbiwgYnV0IHBhdGhzIGFuZCBvYmplY3RzIGFyZSBvbmx5IGRpcnR5IGNoZWNrZWQgYWdhaW5zdCBhbnlcbiAgICAgKiBwcmV2aW91cyB2YWx1ZSBzZXQgZHVyaW5nIHRoaXMgdHVybiB2aWEgYSBcInRlbXBvcmFyeSBjYWNoZVwiIHRoYXQgaXNcbiAgICAgKiBjbGVhcmVkIHdoZW4gdGhlIGxhc3QgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgZXhpdHMuIFRoaXMgaXMgc286XG4gICAgICogYS4gYW55IGNhY2hlZCBhcnJheSBwYXRocyAoZS5nLiAnYXJyYXkuMy5wcm9wJykgbWF5IGJlIGludmFsaWRhdGVkXG4gICAgICogICAgZHVlIHRvIGFycmF5IG11dGF0aW9ucyBsaWtlIHNoaWZ0L3Vuc2hpZnQvc3BsaWNlOyB0aGlzIGlzIGZpbmVcbiAgICAgKiAgICBzaW5jZSBwYXRoIGNoYW5nZXMgYXJlIGRpcnR5LWNoZWNrZWQgYXQgdXNlciBlbnRyeSBwb2ludHMgbGlrZSBgc2V0YFxuICAgICAqIGIuIGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzIG9ubHkgbGFzdHMgb25lIHR1cm4gdG8gYWxsb3cgdGhlIHVzZXJcbiAgICAgKiAgICB0byBtdXRhdGUgdGhlIG9iamVjdCBpbi1wbGFjZSBhbmQgcmUtc2V0IGl0IHdpdGggdGhlIHNhbWUgaWRlbnRpdHlcbiAgICAgKiAgICBhbmQgaGF2ZSBhbGwgc3ViLXByb3BlcnRpZXMgcmUtcHJvcGFnYXRlZCBpbiBhIHN1YnNlcXVlbnQgdHVybi5cbiAgICAgKlxuICAgICAqIFRoZSB0ZW1wIGNhY2hlIGlzIG5vdCBuZWNlc3NhcmlseSBzdWZmaWNpZW50IHRvIHByZXZlbnQgaW52YWxpZCBhcnJheVxuICAgICAqIHBhdGhzLCBzaW5jZSBhIHNwbGljZSBjYW4gaGFwcGVuIGR1cmluZyB0aGUgc2FtZSB0dXJuICh3aXRoIHBhdGhvbG9naWNhbFxuICAgICAqIHVzZXIgY29kZSk7IHdlIGNvdWxkIGludHJvZHVjZSBhIFwiZml4dXBcIiBmb3IgdGVtcG9yYXJpbHkgY2FjaGVkIGFycmF5XG4gICAgICogcGF0aHMgaWYgbmVlZGVkOiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9wb2x5bWVyL2lzc3Vlcy80MjI3XG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHNob3VsZE5vdGlmeSBUcnVlIGlmIHByb3BlcnR5IHNob3VsZCBmaXJlIG5vdGlmaWNhdGlvblxuICAgICAqICAgZXZlbnQgKGFwcGxpZXMgb25seSBmb3IgYG5vdGlmeTogdHJ1ZWAgcHJvcGVydGllcylcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3BlcnR5IGNoYW5nZWRcbiAgICAgKi9cbiAgICBfc2V0UGVuZGluZ1Byb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSwgc2hvdWxkTm90aWZ5KSB7XG4gICAgICBsZXQgcHJvcElzUGF0aCA9IHRoaXMuX19kYXRhSGFzUGF0aHMgJiYgaXNQYXRoKHByb3BlcnR5KTtcbiAgICAgIGxldCBwcmV2UHJvcHMgPSBwcm9wSXNQYXRoID8gdGhpcy5fX2RhdGFUZW1wIDogdGhpcy5fX2RhdGE7XG4gICAgICBpZiAodGhpcy5fc2hvdWxkUHJvcGVydHlDaGFuZ2UocHJvcGVydHksIHZhbHVlLCBwcmV2UHJvcHNbcHJvcGVydHldKSkge1xuICAgICAgICBpZiAoIXRoaXMuX19kYXRhUGVuZGluZykge1xuICAgICAgICAgIHRoaXMuX19kYXRhUGVuZGluZyA9IHt9O1xuICAgICAgICAgIHRoaXMuX19kYXRhT2xkID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5zdXJlIG9sZCBpcyBjYXB0dXJlZCBmcm9tIHRoZSBsYXN0IHR1cm5cbiAgICAgICAgaWYgKCEocHJvcGVydHkgaW4gdGhpcy5fX2RhdGFPbGQpKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFPbGRbcHJvcGVydHldID0gdGhpcy5fX2RhdGFbcHJvcGVydHldO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhdGhzIGFyZSBzdG9yZWQgaW4gdGVtcG9yYXJ5IGNhY2hlIChjbGVhcmVkIGF0IGVuZCBvZiB0dXJuKSxcbiAgICAgICAgLy8gd2hpY2ggaXMgdXNlZCBmb3IgZGlydHktY2hlY2tpbmcsIGFsbCBvdGhlcnMgc3RvcmVkIGluIF9fZGF0YVxuICAgICAgICBpZiAocHJvcElzUGF0aCkge1xuICAgICAgICAgIHRoaXMuX19kYXRhVGVtcFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9fZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGwgY2hhbmdlcyBnbyBpbnRvIHBlbmRpbmcgcHJvcGVydHkgYmFnLCBwYXNzZWQgdG8gX3Byb3BlcnRpZXNDaGFuZ2VkXG4gICAgICAgIHRoaXMuX19kYXRhUGVuZGluZ1twcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgLy8gVHJhY2sgcHJvcGVydGllcyB0aGF0IHNob3VsZCBub3RpZnkgc2VwYXJhdGVseVxuICAgICAgICBpZiAocHJvcElzUGF0aCB8fCAodGhpc1tUWVBFUy5OT1RJRlldICYmIHRoaXNbVFlQRVMuTk9USUZZXVtwcm9wZXJ0eV0pKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFUb05vdGlmeSA9IHRoaXMuX19kYXRhVG9Ob3RpZnkgfHwge307XG4gICAgICAgICAgdGhpcy5fX2RhdGFUb05vdGlmeVtwcm9wZXJ0eV0gPSBzaG91bGROb3RpZnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIGJhc2UgaW1wbGVtZW50YXRpb24gdG8gZW5zdXJlIGFsbCBhY2Nlc3NvcnMgc2V0IGBzaG91bGROb3RpZnlgXG4gICAgICogdG8gdHJ1ZSwgZm9yIHBlci1wcm9wZXJ0eSBub3RpZmljYXRpb24gdHJhY2tpbmcuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX3NldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUsIHRydWUpKSB7XG4gICAgICAgIHRoaXMuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIGBQcm9wZXJ0eUFjY2Vzc29yYCdzIGRlZmF1bHQgYXN5bmMgcXVldWluZyBvZlxuICAgICAqIGBfcHJvcGVydGllc0NoYW5nZWRgOiBpZiBgX19kYXRhUmVhZHlgIGlzIGZhbHNlIChoYXMgbm90IHlldCBiZWVuXG4gICAgICogbWFudWFsbHkgZmx1c2hlZCksIHRoZSBmdW5jdGlvbiBuby1vcHM7IG90aGVyd2lzZSBmbHVzaGVzXG4gICAgICogYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgc3luY2hyb25vdXNseS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCkge1xuICAgICAgaWYgKHRoaXMuX19kYXRhUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5xdWV1ZXMgdGhlIGdpdmVuIGNsaWVudCBvbiBhIGxpc3Qgb2YgcGVuZGluZyBjbGllbnRzLCB3aG9zZVxuICAgICAqIHBlbmRpbmcgcHJvcGVydHkgY2hhbmdlcyBjYW4gbGF0ZXIgYmUgZmx1c2hlZCB2aWEgYSBjYWxsIHRvXG4gICAgICogYF9mbHVzaENsaWVudHNgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNsaWVudCBQcm9wZXJ0eUVmZmVjdHMgY2xpZW50IHRvIGVucXVldWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfZW5xdWV1ZUNsaWVudChjbGllbnQpIHtcbiAgICAgIHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHMgPSB0aGlzLl9fZGF0YVBlbmRpbmdDbGllbnRzIHx8IFtdO1xuICAgICAgaWYgKGNsaWVudCAhPT0gdGhpcykge1xuICAgICAgICB0aGlzLl9fZGF0YVBlbmRpbmdDbGllbnRzLnB1c2goY2xpZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgc3VwZXJjbGFzcyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9mbHVzaFByb3BlcnRpZXMoKSB7XG4gICAgICB0aGlzLl9fZGF0YUNvdW50ZXIrKztcbiAgICAgIHN1cGVyLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIHRoaXMuX19kYXRhQ291bnRlci0tO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsdXNoZXMgYW55IGNsaWVudHMgcHJldmlvdXNseSBlbnF1ZXVlZCB2aWEgYF9lbnF1ZXVlQ2xpZW50YCwgY2F1c2luZ1xuICAgICAqIHRoZWlyIGBfZmx1c2hQcm9wZXJ0aWVzYCBtZXRob2QgdG8gcnVuLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2ZsdXNoQ2xpZW50cygpIHtcbiAgICAgIGlmICghdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yZWFkeUNsaWVudHMoKTtcbiAgICAgICAgLy8gT3ZlcnJpZGUgcG9pbnQgd2hlcmUgYWNjZXNzb3JzIGFyZSB0dXJuZWQgb247IGltcG9ydGFudGx5LFxuICAgICAgICAvLyB0aGlzIGlzIGFmdGVyIGNsaWVudHMgaGF2ZSBmdWxseSByZWFkaWVkLCBwcm92aWRpbmcgYSBndWFyYW50ZWVcbiAgICAgICAgLy8gdGhhdCBhbnkgcHJvcGVydHkgZWZmZWN0cyBvY2N1ciBvbmx5IGFmdGVyIGFsbCBjbGllbnRzIGFyZSByZWFkeS5cbiAgICAgICAgdGhpcy5fX2RhdGFSZWFkeSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9fZW5hYmxlT3JGbHVzaENsaWVudHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOT1RFOiBXZSBlbnN1cmUgY2xpZW50cyBlaXRoZXIgZW5hYmxlIG9yIGZsdXNoIGFzIGFwcHJvcHJpYXRlLiBUaGlzXG4gICAgLy8gaGFuZGxlcyB0d28gY29ybmVyIGNhc2VzOlxuICAgIC8vICgxKSBjbGllbnRzIGZsdXNoIHByb3Blcmx5IHdoZW4gY29ubmVjdGVkL2VuYWJsZWQgYmVmb3JlIHRoZSBob3N0XG4gICAgLy8gZW5hYmxlczsgZS5nLlxuICAgIC8vICAgKGEpIFRlbXBsYXRpemUgc3RhbXBzIHdpdGggbm8gcHJvcGVydGllcyBhbmQgZG9lcyBub3QgZmx1c2ggYW5kXG4gICAgLy8gICAoYikgdGhlIGluc3RhbmNlIGlzIGluc2VydGVkIGludG8gZG9tIGFuZFxuICAgIC8vICAgKGMpIHRoZW4gdGhlIGluc3RhbmNlIGZsdXNoZXMuXG4gICAgLy8gKDIpIGNsaWVudHMgZW5hYmxlIHByb3Blcmx5IHdoZW4gbm90IGNvbm5lY3RlZC9lbmFibGVkIHdoZW4gdGhlIGhvc3RcbiAgICAvLyBmbHVzaGVzOyBlLmcuXG4gICAgLy8gICAoYSkgYSB0ZW1wbGF0ZSBpcyBydW50aW1lIHN0YW1wZWQgYW5kIG5vdCB5ZXQgY29ubmVjdGVkL2VuYWJsZWRcbiAgICAvLyAgIChiKSBhIGhvc3Qgc2V0cyBhIHByb3BlcnR5LCBjYXVzaW5nIHN0YW1wZWQgZG9tIHRvIGZsdXNoXG4gICAgLy8gICAoYykgdGhlIHN0YW1wZWQgZG9tIGVuYWJsZXMuXG4gICAgX19lbmFibGVPckZsdXNoQ2xpZW50cygpIHtcbiAgICAgIGxldCBjbGllbnRzID0gdGhpcy5fX2RhdGFQZW5kaW5nQ2xpZW50cztcbiAgICAgIGlmIChjbGllbnRzKSB7XG4gICAgICAgIHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHMgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBjbGllbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNsaWVudCA9IGNsaWVudHNbaV07XG4gICAgICAgICAgaWYgKCFjbGllbnQuX19kYXRhRW5hYmxlZCkge1xuICAgICAgICAgICAgY2xpZW50Ll9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjbGllbnQuX19kYXRhUGVuZGluZykge1xuICAgICAgICAgICAgY2xpZW50Ll9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFueSBpbml0aWFsIHNldHVwIG9uIGNsaWVudCBkb20uIENhbGxlZCBiZWZvcmUgdGhlIGZpcnN0XG4gICAgICogYF9mbHVzaFByb3BlcnRpZXNgIGNhbGwgb24gY2xpZW50IGRvbSBhbmQgYmVmb3JlIGFueSBlbGVtZW50XG4gICAgICogb2JzZXJ2ZXJzIGFyZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfcmVhZHlDbGllbnRzKCkge1xuICAgICAgdGhpcy5fX2VuYWJsZU9yRmx1c2hDbGllbnRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIGJhZyBvZiBwcm9wZXJ0eSBjaGFuZ2VzIHRvIHRoaXMgaW5zdGFuY2UsIGFuZFxuICAgICAqIHN5bmNocm9ub3VzbHkgcHJvY2Vzc2VzIGFsbCBlZmZlY3RzIG9mIHRoZSBwcm9wZXJ0aWVzIGFzIGEgYmF0Y2guXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtdXN0IGJlIHNpbXBsZSBwcm9wZXJ0aWVzLCBub3QgcGF0aHMuICBCYXRjaGVkXG4gICAgICogcGF0aCBwcm9wYWdhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBvbmUgb3IgbW9yZSBrZXktdmFsdWUgcGFpcnMgd2hvc2Uga2V5IGlzXG4gICAgICogICBhIHByb3BlcnR5IGFuZCB2YWx1ZSBpcyB0aGUgbmV3IHZhbHVlIHRvIHNldCBmb3IgdGhhdCBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBzZXRSZWFkT25seSBXaGVuIHRydWUsIGFueSBwcml2YXRlIHZhbHVlcyBzZXQgaW5cbiAgICAgKiAgIGBwcm9wc2Agd2lsbCBiZSBzZXQuIEJ5IGRlZmF1bHQsIGBzZXRQcm9wZXJ0aWVzYCB3aWxsIG5vdCBzZXRcbiAgICAgKiAgIGByZWFkT25seTogdHJ1ZWAgcm9vdCBwcm9wZXJ0aWVzLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFByb3BlcnRpZXMocHJvcHMsIHNldFJlYWRPbmx5KSB7XG4gICAgICBmb3IgKGxldCBwYXRoIGluIHByb3BzKSB7XG4gICAgICAgIGlmIChzZXRSZWFkT25seSB8fCAhdGhpc1tUWVBFUy5SRUFEX09OTFldIHx8ICF0aGlzW1RZUEVTLlJFQURfT05MWV1bcGF0aF0pIHtcbiAgICAgICAgICAvL1RPRE8oa3NjaGFhZik6IGV4cGxpY2l0bHkgZGlzYWxsb3cgcGF0aHMgaW4gc2V0UHJvcGVydHk/XG4gICAgICAgICAgLy8gd2lsZGNhcmQgb2JzZXJ2ZXJzIGN1cnJlbnRseSBvbmx5IHBhc3MgdGhlIGZpcnN0IGNoYW5nZWQgcGF0aFxuICAgICAgICAgIC8vIGluIHRoZSBgaW5mb2Agb2JqZWN0LCBhbmQgeW91IGNvdWxkIGRvIHNvbWUgb2RkIHRoaW5ncyBiYXRjaGluZ1xuICAgICAgICAgIC8vIHBhdGhzLCBlLmcuIHsnZm9vLmJhcic6IHsuLi59LCAnZm9vJzogbnVsbH1cbiAgICAgICAgICB0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgocGF0aCwgcHJvcHNbcGF0aF0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9pbnZhbGlkYXRlUHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlBY2Nlc3NvcnNgIHNvIHRoYXQgcHJvcGVydHkgYWNjZXNzb3JcbiAgICAgKiBzaWRlIGVmZmVjdHMgYXJlIG5vdCBlbmFibGVkIHVudGlsIGFmdGVyIGNsaWVudCBkb20gaXMgZnVsbHkgcmVhZHkuXG4gICAgICogQWxzbyBjYWxscyBgX2ZsdXNoQ2xpZW50c2AgY2FsbGJhY2sgdG8gZW5zdXJlIGNsaWVudCBkb20gaXMgZW5hYmxlZFxuICAgICAqIHRoYXQgd2FzIG5vdCBlbmFibGVkIGFzIGEgcmVzdWx0IG9mIGZsdXNoaW5nIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgLy8gSXQgaXMgaW1wb3J0YW50IHRoYXQgYHN1cGVyLnJlYWR5KClgIGlzIG5vdCBjYWxsZWQgaGVyZSBhcyBpdFxuICAgICAgLy8gaW1tZWRpYXRlbHkgdHVybnMgb24gYWNjZXNzb3JzLiBJbnN0ZWFkLCB3ZSB3YWl0IHVudGlsIGByZWFkeUNsaWVudHNgXG4gICAgICAvLyB0byBlbmFibGUgYWNjZXNzb3JzIHRvIHByb3ZpZGUgYSBndWFyYW50ZWUgdGhhdCBjbGllbnRzIGFyZSByZWFkeVxuICAgICAgLy8gYmVmb3JlIHByb2Nlc3NpbmcgYW55IGFjY2Vzc29ycyBzaWRlIGVmZmVjdHMuXG4gICAgICB0aGlzLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIC8vIElmIG5vIGRhdGEgd2FzIHBlbmRpbmcsIGBfZmx1c2hQcm9wZXJ0aWVzYCB3aWxsIG5vdCBgZmx1c2hDbGllbnRzYFxuICAgICAgLy8gc28gZW5zdXJlIHRoaXMgaXMgZG9uZS5cbiAgICAgIGlmICghdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fZmx1c2hDbGllbnRzKCk7XG4gICAgICB9XG4gICAgICAvLyBCZWZvcmUgcmVhZHksIGNsaWVudCBub3RpZmljYXRpb25zIGRvIG5vdCB0cmlnZ2VyIF9mbHVzaFByb3BlcnRpZXMuXG4gICAgICAvLyBUaGVyZWZvcmUgYSBmbHVzaCBpcyBuZWNlc3NhcnkgaGVyZSBpZiBkYXRhIGhhcyBiZWVuIHNldC5cbiAgICAgIGlmICh0aGlzLl9fZGF0YVBlbmRpbmcpIHtcbiAgICAgICAgdGhpcy5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBgUHJvcGVydHlBY2Nlc3NvcnNgJ3MgcHJvcGVydGllcyBjaGFuZ2VkIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogUnVucyBlYWNoIGNsYXNzIG9mIGVmZmVjdHMgZm9yIHRoZSBiYXRjaCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgaW5cbiAgICAgKiBhIHNwZWNpZmljIG9yZGVyIChjb21wdXRlLCBwcm9wYWdhdGUsIHJlZmxlY3QsIG9ic2VydmUsIG5vdGlmeSkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IGN1cnJlbnRQcm9wcyBCYWcgb2YgYWxsIGN1cnJlbnQgYWNjZXNzb3IgdmFsdWVzXG4gICAgICogQHBhcmFtIHs/T2JqZWN0fSBjaGFuZ2VkUHJvcHMgQmFnIG9mIHByb3BlcnRpZXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAqICAgY2FsbCB0byBgX3Byb3BlcnRpZXNDaGFuZ2VkYFxuICAgICAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgZWFjaCBwcm9wZXJ0eVxuICAgICAqICAgaW4gYGNoYW5nZWRQcm9wc2BcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9wcm9wZXJ0aWVzQ2hhbmdlZChjdXJyZW50UHJvcHMsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMpIHtcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIGxldCBjID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY2hhbmdlZFByb3BzIHx8IHt9KTtcbiAgICAgIC8vIHdpbmRvdy5kZWJ1ZyAmJiBjb25zb2xlLmdyb3VwKHRoaXMubG9jYWxOYW1lICsgJyMnICsgdGhpcy5pZCArICc6ICcgKyBjKTtcbiAgICAgIC8vIGlmICh3aW5kb3cuZGVidWcpIHsgZGVidWdnZXI7IH1cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIGxldCBoYXNQYXRocyA9IHRoaXMuX19kYXRhSGFzUGF0aHM7XG4gICAgICB0aGlzLl9fZGF0YUhhc1BhdGhzID0gZmFsc2U7XG4gICAgICAvLyBDb21wdXRlIHByb3BlcnRpZXNcbiAgICAgIHJ1bkNvbXB1dGVkRWZmZWN0cyh0aGlzLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICAvLyBDbGVhciBub3RpZnkgcHJvcGVydGllcyBwcmlvciB0byBwb3NzaWJsZSByZWVudHJ5IChwcm9wYWdhdGUsIG9ic2VydmUpLFxuICAgICAgLy8gYnV0IGFmdGVyIGNvbXB1dGluZyBlZmZlY3RzIGhhdmUgYSBjaGFuY2UgdG8gYWRkIHRvIHRoZW1cbiAgICAgIGxldCBub3RpZnlQcm9wcyA9IHRoaXMuX19kYXRhVG9Ob3RpZnk7XG4gICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5ID0gbnVsbDtcbiAgICAgIC8vIFByb3BhZ2F0ZSBwcm9wZXJ0aWVzIHRvIGNsaWVudHNcbiAgICAgIHRoaXMuX3Byb3BhZ2F0ZVByb3BlcnR5Q2hhbmdlcyhjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICAvLyBGbHVzaCBjbGllbnRzXG4gICAgICB0aGlzLl9mbHVzaENsaWVudHMoKTtcbiAgICAgIC8vIFJlZmxlY3QgcHJvcGVydGllc1xuICAgICAgcnVuRWZmZWN0cyh0aGlzLCB0aGlzW1RZUEVTLlJFRkxFQ1RdLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICAvLyBPYnNlcnZlIHByb3BlcnRpZXNcbiAgICAgIHJ1bkVmZmVjdHModGhpcywgdGhpc1tUWVBFUy5PQlNFUlZFXSwgY2hhbmdlZFByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMpO1xuICAgICAgLy8gTm90aWZ5IHByb3BlcnRpZXMgdG8gaG9zdFxuICAgICAgaWYgKG5vdGlmeVByb3BzKSB7XG4gICAgICAgIHJ1bk5vdGlmeUVmZmVjdHModGhpcywgbm90aWZ5UHJvcHMsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgIH1cbiAgICAgIC8vIENsZWFyIHRlbXBvcmFyeSBjYWNoZSBhdCBlbmQgb2YgdHVyblxuICAgICAgaWYgKHRoaXMuX19kYXRhQ291bnRlciA9PSAxKSB7XG4gICAgICAgIHRoaXMuX19kYXRhVGVtcCA9IHt9O1xuICAgICAgfVxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gd2luZG93LmRlYnVnICYmIGNvbnNvbGUuZ3JvdXBFbmQodGhpcy5sb2NhbE5hbWUgKyAnIycgKyB0aGlzLmlkICsgJzogJyArIGMpO1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB0byBwcm9wYWdhdGUgYW55IHByb3BlcnR5IGNoYW5nZXMgdG8gc3RhbXBlZCB0ZW1wbGF0ZSBub2Rlc1xuICAgICAqIG1hbmFnZWQgYnkgdGhpcyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNoYW5nZWRQcm9wcyBCYWcgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfcHJvcGFnYXRlUHJvcGVydHlDaGFuZ2VzKGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gICAgICBpZiAodGhpc1tUWVBFUy5QUk9QQUdBVEVdKSB7XG4gICAgICAgIHJ1bkVmZmVjdHModGhpcywgdGhpc1tUWVBFUy5QUk9QQUdBVEVdLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICB9XG4gICAgICBsZXQgdGVtcGxhdGVJbmZvID0gdGhpcy5fX3RlbXBsYXRlSW5mbztcbiAgICAgIHdoaWxlICh0ZW1wbGF0ZUluZm8pIHtcbiAgICAgICAgcnVuRWZmZWN0cyh0aGlzLCB0ZW1wbGF0ZUluZm8ucHJvcGVydHlFZmZlY3RzLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLFxuICAgICAgICAgIGhhc1BhdGhzLCB0ZW1wbGF0ZUluZm8ubm9kZUxpc3QpO1xuICAgICAgICB0ZW1wbGF0ZUluZm8gPSB0ZW1wbGF0ZUluZm8ubmV4dFRlbXBsYXRlSW5mbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlhc2VzIG9uZSBkYXRhIHBhdGggYXMgYW5vdGhlciwgc3VjaCB0aGF0IHBhdGggbm90aWZpY2F0aW9ucyBmcm9tIG9uZVxuICAgICAqIGFyZSByb3V0ZWQgdG8gdGhlIG90aGVyLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHRvIFRhcmdldCBwYXRoIHRvIGxpbmsuXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IGZyb20gU291cmNlIHBhdGggdG8gbGluay5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBsaW5rUGF0aHModG8sIGZyb20pIHtcbiAgICAgIHRvID0gbm9ybWFsaXplKHRvKTtcbiAgICAgIGZyb20gPSBub3JtYWxpemUoZnJvbSk7XG4gICAgICB0aGlzLl9fZGF0YUxpbmtlZFBhdGhzID0gdGhpcy5fX2RhdGFMaW5rZWRQYXRocyB8fCB7fTtcbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHNbdG9dID0gZnJvbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZGF0YSBwYXRoIGFsaWFzIHByZXZpb3VzbHkgZXN0YWJsaXNoZWQgd2l0aCBgX2xpbmtQYXRoc2AuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGUgcGF0aCB0byB1bmxpbmsgc2hvdWxkIGJlIHRoZSB0YXJnZXQgKGB0b2ApIHVzZWQgd2hlblxuICAgICAqIGxpbmtpbmcgdGhlIHBhdGhzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggVGFyZ2V0IHBhdGggdG8gdW5saW5rLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVubGlua1BhdGhzKHBhdGgpIHtcbiAgICAgIHBhdGggPSBub3JtYWxpemUocGF0aCk7XG4gICAgICBpZiAodGhpcy5fX2RhdGFMaW5rZWRQYXRocykge1xuICAgICAgICBkZWxldGUgdGhpcy5fX2RhdGFMaW5rZWRQYXRoc1twYXRoXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhhdCBhbiBhcnJheSBoYXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgdGhpcy5pdGVtcyA9IFsge25hbWU6ICdKaW0nfSwge25hbWU6ICdUb2RkJ30sIHtuYW1lOiAnQmlsbCd9IF07XG4gICAgICogICAgIC4uLlxuICAgICAqICAgICB0aGlzLml0ZW1zLnNwbGljZSgxLCAxLCB7bmFtZTogJ1NhbSd9KTtcbiAgICAgKiAgICAgdGhpcy5pdGVtcy5wdXNoKHtuYW1lOiAnQm9iJ30pO1xuICAgICAqICAgICB0aGlzLm5vdGlmeVNwbGljZXMoJ2l0ZW1zJywgW1xuICAgICAqICAgICAgIHsgaW5kZXg6IDEsIHJlbW92ZWQ6IFt7bmFtZTogJ1RvZGQnfV0sIGFkZGVkQ291bnQ6IDEsXG4gICAgICogICAgICAgICBvYmplY3Q6IHRoaXMuaXRlbXMsIHR5cGU6ICdzcGxpY2UnIH0sXG4gICAgICogICAgICAgeyBpbmRleDogMywgcmVtb3ZlZDogW10sIGFkZGVkQ291bnQ6IDEsXG4gICAgICogICAgICAgICBvYmplY3Q6IHRoaXMuaXRlbXMsIHR5cGU6ICdzcGxpY2UnfVxuICAgICAqICAgICBdKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdGhhdCBzaG91bGQgYmUgbm90aWZpZWQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gc3BsaWNlcyBBcnJheSBvZiBzcGxpY2UgcmVjb3JkcyBpbmRpY2F0aW5nIG9yZGVyZWRcbiAgICAgKiAgIGNoYW5nZXMgdGhhdCBvY2N1cnJlZCB0byB0aGUgYXJyYXkuIEVhY2ggcmVjb3JkIHNob3VsZCBoYXZlIHRoZVxuICAgICAqICAgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgKiAgICAqIGluZGV4OiBpbmRleCBhdCB3aGljaCB0aGUgY2hhbmdlIG9jY3VycmVkXG4gICAgICogICAgKiByZW1vdmVkOiBhcnJheSBvZiBpdGVtcyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgaW5kZXhcbiAgICAgKiAgICAqIGFkZGVkQ291bnQ6IG51bWJlciBvZiBuZXcgaXRlbXMgYWRkZWQgYXQgdGhpcyBpbmRleFxuICAgICAqICAgICogb2JqZWN0OiBhIHJlZmVyZW5jZSB0byB0aGUgYXJyYXkgaW4gcXVlc3Rpb25cbiAgICAgKiAgICAqIHR5cGU6IHRoZSBzdHJpbmcgbGl0ZXJhbCAnc3BsaWNlJ1xuICAgICAqXG4gICAgICogICBOb3RlIHRoYXQgc3BsaWNlIHJlY29yZHMgX211c3RfIGJlIG5vcm1hbGl6ZWQgc3VjaCB0aGF0IHRoZXkgYXJlXG4gICAgICogICByZXBvcnRlZCBpbiBpbmRleCBvcmRlciAocmF3IHJlc3VsdHMgZnJvbSBgT2JqZWN0Lm9ic2VydmVgIGFyZSBub3RcbiAgICAgKiAgIG9yZGVyZWQgYW5kIG11c3QgYmUgbm9ybWFsaXplZC9tZXJnZWQgYmVmb3JlIG5vdGlmeWluZykuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBub3RpZnlTcGxpY2VzKHBhdGgsIHNwbGljZXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBub3RpZnlTcGxpY2VzKHRoaXMsIGFycmF5LCBpbmZvLnBhdGgsIHNwbGljZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgcmVhZGluZyBhIHZhbHVlIGZyb20gYSBwYXRoLlxuICAgICAqXG4gICAgICogTm90ZSwgaWYgYW55IHBhcnQgaW4gdGhlIHBhdGggaXMgdW5kZWZpbmVkLCB0aGlzIG1ldGhvZCByZXR1cm5zXG4gICAgICogYHVuZGVmaW5lZGAgKHRoaXMgbWV0aG9kIGRvZXMgbm90IHRocm93IHdoZW4gZGVyZWZlcmVuY2luZyB1bmRlZmluZWRcbiAgICAgKiBwYXRocykuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8IUFycmF5PChzdHJpbmd8bnVtYmVyKT4pfSBwYXRoIFBhdGggdG8gdGhlIHZhbHVlXG4gICAgICogICB0byByZWFkLiAgVGhlIHBhdGggbWF5IGJlIHNwZWNpZmllZCBhcyBhIHN0cmluZyAoZS5nLiBgZm9vLmJhci5iYXpgKVxuICAgICAqICAgb3IgYW4gYXJyYXkgb2YgcGF0aCBwYXJ0cyAoZS5nLiBgWydmb28uYmFyJywgJ2JheiddYCkuICBOb3RlIHRoYXRcbiAgICAgKiAgIGJyYWNrZXRlZCBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZDsgc3RyaW5nLWJhc2VkIHBhdGggcGFydHNcbiAgICAgKiAgICptdXN0KiBiZSBzZXBhcmF0ZWQgYnkgZG90cy4gIE5vdGUgdGhhdCB3aGVuIGRlcmVmZXJlbmNpbmcgYXJyYXlcbiAgICAgKiAgIGluZGljZXMsIHRoZSBpbmRleCBtYXkgYmUgdXNlZCBhcyBhIGRvdHRlZCBwYXJ0IGRpcmVjdGx5XG4gICAgICogICAoZS5nLiBgdXNlcnMuMTIubmFtZWAgb3IgYFsndXNlcnMnLCAxMiwgJ25hbWUnXWApLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcm9vdCBSb290IG9iamVjdCBmcm9tIHdoaWNoIHRoZSBwYXRoIGlzIGV2YWx1YXRlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZSBhdCB0aGUgcGF0aCwgb3IgYHVuZGVmaW5lZGAgaWYgYW55IHBhcnQgb2YgdGhlIHBhdGhcbiAgICAgKiAgIGlzIHVuZGVmaW5lZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0KHBhdGgsIHJvb3QpIHtcbiAgICAgIHJldHVybiBnZXQocm9vdCB8fCB0aGlzLCBwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHNldHRpbmcgYSB2YWx1ZSB0byBhIHBhdGggYW5kIG5vdGlmeWluZyBhbnlcbiAgICAgKiBlbGVtZW50cyBib3VuZCB0byB0aGUgc2FtZSBwYXRoLlxuICAgICAqXG4gICAgICogTm90ZSwgaWYgYW55IHBhcnQgaW4gdGhlIHBhdGggZXhjZXB0IGZvciB0aGUgbGFzdCBpcyB1bmRlZmluZWQsXG4gICAgICogdGhpcyBtZXRob2QgZG9lcyBub3RoaW5nICh0aGlzIG1ldGhvZCBkb2VzIG5vdCB0aHJvdyB3aGVuXG4gICAgICogZGVyZWZlcmVuY2luZyB1bmRlZmluZWQgcGF0aHMpLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfCFBcnJheTwoc3RyaW5nfG51bWJlcik+KX0gcGF0aCBQYXRoIHRvIHRoZSB2YWx1ZVxuICAgICAqICAgdG8gd3JpdGUuICBUaGUgcGF0aCBtYXkgYmUgc3BlY2lmaWVkIGFzIGEgc3RyaW5nIChlLmcuIGAnZm9vLmJhci5iYXonYClcbiAgICAgKiAgIG9yIGFuIGFycmF5IG9mIHBhdGggcGFydHMgKGUuZy4gYFsnZm9vLmJhcicsICdiYXonXWApLiAgTm90ZSB0aGF0XG4gICAgICogICBicmFja2V0ZWQgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQ7IHN0cmluZy1iYXNlZCBwYXRoIHBhcnRzXG4gICAgICogICAqbXVzdCogYmUgc2VwYXJhdGVkIGJ5IGRvdHMuICBOb3RlIHRoYXQgd2hlbiBkZXJlZmVyZW5jaW5nIGFycmF5XG4gICAgICogICBpbmRpY2VzLCB0aGUgaW5kZXggbWF5IGJlIHVzZWQgYXMgYSBkb3R0ZWQgcGFydCBkaXJlY3RseVxuICAgICAqICAgKGUuZy4gYCd1c2Vycy4xMi5uYW1lJ2Agb3IgYFsndXNlcnMnLCAxMiwgJ25hbWUnXWApLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0IGF0IHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHJvb3QgUm9vdCBvYmplY3QgZnJvbSB3aGljaCB0aGUgcGF0aCBpcyBldmFsdWF0ZWQuXG4gICAgICogICBXaGVuIHNwZWNpZmllZCwgbm8gbm90aWZpY2F0aW9uIHdpbGwgb2NjdXIuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0KHBhdGgsIHZhbHVlLCByb290KSB7XG4gICAgICBpZiAocm9vdCkge1xuICAgICAgICBzZXQocm9vdCwgcGF0aCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzW1RZUEVTLlJFQURfT05MWV0gfHwgIXRoaXNbVFlQRVMuUkVBRF9PTkxZXVsvKiogQHR5cGUge3N0cmluZ30gKi8ocGF0aCldKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChwYXRoLCB2YWx1ZSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBpdGVtcyBvbnRvIHRoZSBlbmQgb2YgdGhlIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucHVzaGAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBub3RpZmllcyBvdGhlciBwYXRocyB0byB0aGUgc2FtZSBhcnJheSB0aGF0IGFcbiAgICAgKiBzcGxpY2Ugb2NjdXJyZWQgdG8gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggUGF0aCB0byBhcnJheS5cbiAgICAgKiBAcGFyYW0gey4uLip9IGl0ZW1zIEl0ZW1zIHRvIHB1c2ggb250byBhcnJheVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHB1c2gocGF0aCwgLi4uaXRlbXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9Ki8oZ2V0KHRoaXMsIHBhdGgsIGluZm8pKTtcbiAgICAgIGxldCBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgICBsZXQgcmV0ID0gYXJyYXkucHVzaCguLi5pdGVtcyk7XG4gICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIG5vdGlmeVNwbGljZSh0aGlzLCBhcnJheSwgaW5mby5wYXRoLCBsZW4sIGl0ZW1zLmxlbmd0aCwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSB0aGUgZW5kIG9mIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucG9wYC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG5vdGlmaWVzIG90aGVyIHBhdGhzIHRvIHRoZSBzYW1lIGFycmF5IHRoYXQgYVxuICAgICAqIHNwbGljZSBvY2N1cnJlZCB0byB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBQYXRoIHRvIGFycmF5LlxuICAgICAqIEByZXR1cm4geyp9IEl0ZW0gdGhhdCB3YXMgcmVtb3ZlZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcG9wKHBhdGgpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBsZXQgaGFkTGVuZ3RoID0gQm9vbGVhbihhcnJheS5sZW5ndGgpO1xuICAgICAgbGV0IHJldCA9IGFycmF5LnBvcCgpO1xuICAgICAgaWYgKGhhZExlbmd0aCkge1xuICAgICAgICBub3RpZnlTcGxpY2UodGhpcywgYXJyYXksIGluZm8ucGF0aCwgYXJyYXkubGVuZ3RoLCAwLCBbcmV0XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0aW5nIGZyb20gdGhlIHN0YXJ0IGluZGV4IHNwZWNpZmllZCwgcmVtb3ZlcyAwIG9yIG1vcmUgaXRlbXNcbiAgICAgKiBmcm9tIHRoZSBhcnJheSBhbmQgaW5zZXJ0cyAwIG9yIG1vcmUgbmV3IGl0ZW1zIGluIHRoZWlyIHBsYWNlLlxuICAgICAqXG4gICAgICogVGhlIGFyZ3VtZW50cyBhZnRlciBgcGF0aGAgYW5kIHJldHVybiB2YWx1ZSBtYXRjaCB0aGF0IG9mXG4gICAgICogYEFycmF5LnByb3RvdHlwZS5zcGxpY2VgLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgbm90aWZpZXMgb3RoZXIgcGF0aHMgdG8gdGhlIHNhbWUgYXJyYXkgdGhhdCBhXG4gICAgICogc3BsaWNlIG9jY3VycmVkIHRvIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIFBhdGggdG8gYXJyYXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IEluZGV4IGZyb20gd2hpY2ggdG8gc3RhcnQgcmVtb3ZpbmcvaW5zZXJ0aW5nLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsZXRlQ291bnQgTnVtYmVyIG9mIGl0ZW1zIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gey4uLip9IGl0ZW1zIEl0ZW1zIHRvIGluc2VydCBpbnRvIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBcnJheSBvZiByZW1vdmVkIGl0ZW1zLlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzcGxpY2UocGF0aCwgc3RhcnQsIGRlbGV0ZUNvdW50LCAuLi5pdGVtcykge1xuICAgICAgbGV0IGluZm8gPSB7cGF0aCA6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICAvLyBOb3JtYWxpemUgZmFuY3kgbmF0aXZlIHNwbGljZSBoYW5kbGluZyBvZiBjcmF6eSBzdGFydCB2YWx1ZXNcbiAgICAgIGlmIChzdGFydCA8IDApIHtcbiAgICAgICAgc3RhcnQgPSBhcnJheS5sZW5ndGggLSBNYXRoLmZsb29yKC1zdGFydCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0ID0gTWF0aC5mbG9vcihzdGFydCk7XG4gICAgICB9XG4gICAgICAvLyBhcnJheS5zcGxpY2UgZG9lcyBkaWZmZXJlbnQgdGhpbmdzIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzXG4gICAgICAvLyB5b3UgcGFzcyBpbi4gVGhlcmVmb3JlLCBhcnJheS5zcGxpY2UoMCkgYW5kIGFycmF5LnNwbGljZSgwLCB1bmRlZmluZWQpXG4gICAgICAvLyBkbyBkaWZmZXJlbnQgdGhpbmdzLiBJbiB0aGUgZm9ybWVyLCB0aGUgd2hvbGUgYXJyYXkgaXMgY2xlYXJlZC4gSW4gdGhlXG4gICAgICAvLyBsYXR0ZXIsIG5vIGl0ZW1zIGFyZSByZW1vdmVkLlxuICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHdlIG5lZWQgdG8gZGV0ZWN0IHdoZXRoZXIgMS4gb25lIG9mIHRoZSBhcmd1bWVudHNcbiAgICAgIC8vIGlzIGFjdHVhbGx5IHBhc3NlZCBpbiBhbmQgdGhlbiAyLiBkZXRlcm1pbmUgaG93IG1hbnkgYXJndW1lbnRzXG4gICAgICAvLyB3ZSBzaG91bGQgcGFzcyBvbiB0byB0aGUgbmF0aXZlIGFycmF5LnNwbGljZVxuICAgICAgLy9cbiAgICAgIGxldCByZXQ7XG4gICAgICAvLyBPbWl0IGFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyBpZiB0aGV5IHdlcmUgbm90IHBhc3NlZCBpblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmV0ID0gYXJyYXkuc3BsaWNlKHN0YXJ0KTtcbiAgICAgIC8vIEVpdGhlciBzdGFydCB3YXMgdW5kZWZpbmVkIGFuZCB0aGUgb3RoZXJzIHdlcmUgZGVmaW5lZCwgYnV0IGluIHRoaXNcbiAgICAgIC8vIGNhc2Ugd2UgY2FuIHNhZmVseSBwYXNzIG9uIGFsbCBhcmd1bWVudHNcbiAgICAgIC8vXG4gICAgICAvLyBOb3RlOiB0aGlzIGluY2x1ZGVzIHRoZSBjYXNlIHdoZXJlIG5vbmUgb2YgdGhlIGFyZ3VtZW50cyB3ZXJlIHBhc3NlZCBpbixcbiAgICAgIC8vIGUuZy4gdGhpcy5zcGxpY2UoJ2FycmF5JykuIEhvd2V2ZXIsIGlmIGJvdGggc3RhcnQgYW5kIGRlbGV0ZUNvdW50XG4gICAgICAvLyBhcmUgdW5kZWZpbmVkLCBhcnJheS5zcGxpY2Ugd2lsbCBub3QgbW9kaWZ5IHRoZSBhcnJheSAoYXMgZXhwZWN0ZWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBhcnJheS5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50LCAuLi5pdGVtcyk7XG4gICAgICB9XG4gICAgICAvLyBBdCB0aGUgZW5kLCBjaGVjayB3aGV0aGVyIGFueSBpdGVtcyB3ZXJlIHBhc3NlZCBpbiAoZS5nLiBpbnNlcnRpb25zKVxuICAgICAgLy8gb3IgaWYgdGhlIHJldHVybiBhcnJheSBjb250YWlucyBpdGVtcyAoZS5nLiBkZWxldGlvbnMpLlxuICAgICAgLy8gT25seSBub3RpZnkgaWYgaXRlbXMgd2VyZSBhZGRlZCBvciBkZWxldGVkLlxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCB8fCByZXQubGVuZ3RoKSB7XG4gICAgICAgIG5vdGlmeVNwbGljZSh0aGlzLCBhcnJheSwgaW5mby5wYXRoLCBzdGFydCwgaXRlbXMubGVuZ3RoLCByZXQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSB0aGUgYmVnaW5uaW5nIG9mIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucG9wYC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG5vdGlmaWVzIG90aGVyIHBhdGhzIHRvIHRoZSBzYW1lIGFycmF5IHRoYXQgYVxuICAgICAqIHNwbGljZSBvY2N1cnJlZCB0byB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBQYXRoIHRvIGFycmF5LlxuICAgICAqIEByZXR1cm4geyp9IEl0ZW0gdGhhdCB3YXMgcmVtb3ZlZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2hpZnQocGF0aCkge1xuICAgICAgbGV0IGluZm8gPSB7cGF0aDogJyd9O1xuICAgICAgbGV0IGFycmF5ID0gLyoqIEB0eXBlIHtBcnJheX0gKi8oZ2V0KHRoaXMsIHBhdGgsIGluZm8pKTtcbiAgICAgIGxldCBoYWRMZW5ndGggPSBCb29sZWFuKGFycmF5Lmxlbmd0aCk7XG4gICAgICBsZXQgcmV0ID0gYXJyYXkuc2hpZnQoKTtcbiAgICAgIGlmIChoYWRMZW5ndGgpIHtcbiAgICAgICAgbm90aWZ5U3BsaWNlKHRoaXMsIGFycmF5LCBpbmZvLnBhdGgsIDAsIDAsIFtyZXRdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBpdGVtcyBvbnRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucHVzaGAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBub3RpZmllcyBvdGhlciBwYXRocyB0byB0aGUgc2FtZSBhcnJheSB0aGF0IGFcbiAgICAgKiBzcGxpY2Ugb2NjdXJyZWQgdG8gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggUGF0aCB0byBhcnJheS5cbiAgICAgKiBAcGFyYW0gey4uLip9IGl0ZW1zIEl0ZW1zIHRvIGluc2VydCBpbmZvIGFycmF5XG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdW5zaGlmdChwYXRoLCAuLi5pdGVtcykge1xuICAgICAgbGV0IGluZm8gPSB7cGF0aDogJyd9O1xuICAgICAgbGV0IGFycmF5ID0gLyoqIEB0eXBlIHtBcnJheX0gKi8oZ2V0KHRoaXMsIHBhdGgsIGluZm8pKTtcbiAgICAgIGxldCByZXQgPSBhcnJheS51bnNoaWZ0KC4uLml0ZW1zKTtcbiAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgbm90aWZ5U3BsaWNlKHRoaXMsIGFycmF5LCBpbmZvLnBhdGgsIDAsIGl0ZW1zLmxlbmd0aCwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhhdCBhIHBhdGggaGFzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIHRoaXMuaXRlbS51c2VyLm5hbWUgPSAnQm9iJztcbiAgICAgKiAgICAgdGhpcy5ub3RpZnlQYXRoKCdpdGVtLnVzZXIubmFtZScpO1xuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0aGF0IHNob3VsZCBiZSBub3RpZmllZC5cbiAgICAgKiBAcGFyYW0geyo9fSB2YWx1ZSBWYWx1ZSBhdCB0aGUgcGF0aCAob3B0aW9uYWwpLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG5vdGlmeVBhdGgocGF0aCwgdmFsdWUpIHtcbiAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgICAgbGV0IHByb3BQYXRoO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAvLyBHZXQgdmFsdWUgaWYgbm90IHN1cHBsaWVkXG4gICAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgICAgdmFsdWUgPSBnZXQodGhpcywgcGF0aCwgaW5mbyk7XG4gICAgICAgIHByb3BQYXRoID0gaW5mby5wYXRoO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHBhdGgpKSB7XG4gICAgICAgIC8vIE5vcm1hbGl6ZSBwYXRoIGlmIG5lZWRlZFxuICAgICAgICBwcm9wUGF0aCA9IG5vcm1hbGl6ZShwYXRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3BQYXRoID0gLyoqIEB0eXBle3N0cmluZ30gKi8ocGF0aCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKHByb3BQYXRoLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSkpIHtcbiAgICAgICAgdGhpcy5faW52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHN0YXRpYyBgY3JlYXRlUmVhZE9ubHlQcm9wZXJ0eWAgQVBJIGJ1dCBjYW4gYmUgY2FsbGVkIG9uXG4gICAgICogYW4gaW5zdGFuY2UgdG8gYWRkIGVmZmVjdHMgYXQgcnVudGltZS4gIFNlZSB0aGF0IG1ldGhvZCBmb3JcbiAgICAgKiBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBwcm90ZWN0ZWRTZXR0ZXIgQ3JlYXRlcyBhIGN1c3RvbSBwcm90ZWN0ZWQgc2V0dGVyXG4gICAgICogICB3aGVuIGB0cnVlYC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfY3JlYXRlUmVhZE9ubHlQcm9wZXJ0eShwcm9wZXJ0eSwgcHJvdGVjdGVkU2V0dGVyKSB7XG4gICAgICB0aGlzLl9hZGRQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgVFlQRVMuUkVBRF9PTkxZKTtcbiAgICAgIGlmIChwcm90ZWN0ZWRTZXR0ZXIpIHtcbiAgICAgICAgdGhpc1snX3NldCcgKyB1cHBlcihwcm9wZXJ0eSldID0gLyoqIEB0aGlzIHtQcm9wZXJ0eUVmZmVjdHN9ICovZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBjcmVhdGVQcm9wZXJ0eU9ic2VydmVyYCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb25cbiAgICAgKiBhbiBpbnN0YW5jZSB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvclxuICAgICAqIGZ1bGwgQVBJIGRvY3MuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9uKCosKil9IG1ldGhvZCBGdW5jdGlvbiBvciBuYW1lIG9mIG9ic2VydmVyIG1ldGhvZFxuICAgICAqICAgICB0byBjYWxsXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gZHluYW1pY0ZuIFdoZXRoZXIgdGhlIG1ldGhvZCBuYW1lIHNob3VsZCBiZSBpbmNsdWRlZCBhc1xuICAgICAqICAgYSBkZXBlbmRlbmN5IHRvIHRoZSBlZmZlY3QuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIocHJvcGVydHksIG1ldGhvZCwgZHluYW1pY0ZuKSB7XG4gICAgICBsZXQgaW5mbyA9IHsgcHJvcGVydHksIG1ldGhvZCwgZHluYW1pY0ZuOiBCb29sZWFuKGR5bmFtaWNGbikgfTtcbiAgICAgIHRoaXMuX2FkZFByb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5PQlNFUlZFLCB7XG4gICAgICAgIGZuOiBydW5PYnNlcnZlckVmZmVjdCwgaW5mbywgdHJpZ2dlcjoge25hbWU6IHByb3BlcnR5fVxuICAgICAgfSk7XG4gICAgICBpZiAoZHluYW1pY0ZuKSB7XG4gICAgICAgIHRoaXMuX2FkZFByb3BlcnR5RWZmZWN0KC8qKiBAdHlwZSB7c3RyaW5nfSAqLyhtZXRob2QpLCBUWVBFUy5PQlNFUlZFLCB7XG4gICAgICAgICAgZm46IHJ1bk9ic2VydmVyRWZmZWN0LCBpbmZvLCB0cmlnZ2VyOiB7bmFtZTogbWV0aG9kfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHN0YXRpYyBgY3JlYXRlTWV0aG9kT2JzZXJ2ZXJgIEFQSSBidXQgY2FuIGJlIGNhbGxlZCBvblxuICAgICAqIGFuIGluc3RhbmNlIHRvIGFkZCBlZmZlY3RzIGF0IHJ1bnRpbWUuICBTZWUgdGhhdCBtZXRob2QgZm9yXG4gICAgICogZnVsbCBBUEkgZG9jcy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZ1xuICAgICAqICAgd2hldGhlciBtZXRob2QgbmFtZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgZWZmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9jcmVhdGVNZXRob2RPYnNlcnZlcihleHByZXNzaW9uLCBkeW5hbWljRm4pIHtcbiAgICAgIGxldCBzaWcgPSBwYXJzZU1ldGhvZChleHByZXNzaW9uKTtcbiAgICAgIGlmICghc2lnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBvYnNlcnZlciBleHByZXNzaW9uICdcIiArIGV4cHJlc3Npb24gKyBcIidcIik7XG4gICAgICB9XG4gICAgICBjcmVhdGVNZXRob2RFZmZlY3QodGhpcywgc2lnLCBUWVBFUy5PQlNFUlZFLCBydW5NZXRob2RFZmZlY3QsIG51bGwsIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBzdGF0aWMgYGNyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5YCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb25cbiAgICAgKiBhbiBpbnN0YW5jZSB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvclxuICAgICAqIGZ1bGwgQVBJIGRvY3MuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9jcmVhdGVOb3RpZnlpbmdQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgdGhpcy5fYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLk5PVElGWSwge1xuICAgICAgICBmbjogcnVuTm90aWZ5RWZmZWN0LFxuICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgZXZlbnROYW1lOiBjYW1lbFRvRGFzaENhc2UocHJvcGVydHkpICsgJy1jaGFuZ2VkJyxcbiAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBzdGF0aWMgYGNyZWF0ZVJlZmxlY3RlZFByb3BlcnR5YCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb25cbiAgICAgKiBhbiBpbnN0YW5jZSB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvclxuICAgICAqIGZ1bGwgQVBJIGRvY3MuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IGdvL21pc3NpbmdmbnByb3BzXG4gICAgICovXG4gICAgX2NyZWF0ZVJlZmxlY3RlZFByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgICBsZXQgYXR0ciA9IHRoaXMuY29uc3RydWN0b3IuYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHByb3BlcnR5KTtcbiAgICAgIGlmIChhdHRyWzBdID09PSAnLScpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdQcm9wZXJ0eSAnICsgcHJvcGVydHkgKyAnIGNhbm5vdCBiZSByZWZsZWN0ZWQgdG8gYXR0cmlidXRlICcgK1xuICAgICAgICAgIGF0dHIgKyAnIGJlY2F1c2UgXCItXCIgaXMgbm90IGEgdmFsaWQgc3RhcnRpbmcgYXR0cmlidXRlIG5hbWUuIFVzZSBhIGxvd2VyY2FzZSBmaXJzdCBsZXR0ZXIgZm9yIHRoZSBwcm9wZXJ0eSBpbnN0ZWFkLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLlJFRkxFQ1QsIHtcbiAgICAgICAgICBmbjogcnVuUmVmbGVjdEVmZmVjdCxcbiAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICBhdHRyTmFtZTogYXR0clxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBzdGF0aWMgYGNyZWF0ZUNvbXB1dGVkUHJvcGVydHlgIEFQSSBidXQgY2FuIGJlIGNhbGxlZCBvblxuICAgICAqIGFuIGluc3RhbmNlIHRvIGFkZCBlZmZlY3RzIGF0IHJ1bnRpbWUuICBTZWUgdGhhdCBtZXRob2QgZm9yXG4gICAgICogZnVsbCBBUEkgZG9jcy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIGNvbXB1dGVkIHByb3BlcnR5IHRvIHNldFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZ1xuICAgICAqICAgd2hldGhlciBtZXRob2QgbmFtZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgZWZmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9jcmVhdGVDb21wdXRlZFByb3BlcnR5KHByb3BlcnR5LCBleHByZXNzaW9uLCBkeW5hbWljRm4pIHtcbiAgICAgIGxldCBzaWcgPSBwYXJzZU1ldGhvZChleHByZXNzaW9uKTtcbiAgICAgIGlmICghc2lnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBjb21wdXRlZCBleHByZXNzaW9uICdcIiArIGV4cHJlc3Npb24gKyBcIidcIik7XG4gICAgICB9XG4gICAgICBjcmVhdGVNZXRob2RFZmZlY3QodGhpcywgc2lnLCBUWVBFUy5DT01QVVRFLCBydW5Db21wdXRlZEVmZmVjdCwgcHJvcGVydHksIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2F0aGVyIHRoZSBhcmd1bWVudCB2YWx1ZXMgZm9yIGEgbWV0aG9kIHNwZWNpZmllZCBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICAgKiBvZiBhcmd1bWVudCBtZXRhZGF0YS5cbiAgICAgKlxuICAgICAqIFRoZSBgcGF0aGAgYW5kIGB2YWx1ZWAgYXJndW1lbnRzIGFyZSB1c2VkIHRvIGZpbGwgaW4gd2lsZGNhcmQgZGVzY3JpcHRvclxuICAgICAqIHdoZW4gdGhlIG1ldGhvZCBpcyBiZWluZyBjYWxsZWQgYXMgYSByZXN1bHQgb2YgYSBwYXRoIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PCFNZXRob2RBcmc+fSBhcmdzIEFycmF5IG9mIGFyZ3VtZW50IG1ldGFkYXRhXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUHJvcGVydHkvcGF0aCBuYW1lIHRoYXQgdHJpZ2dlcmVkIHRoZSBtZXRob2QgZWZmZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheTwqPn0gQXJyYXkgb2YgYXJndW1lbnQgdmFsdWVzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFyc2hhbEFyZ3MoYXJncywgcGF0aCwgcHJvcHMpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9fZGF0YTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaT0wLCBsPWFyZ3MubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgICBsZXQge25hbWUsIHN0cnVjdHVyZWQsIHdpbGRjYXJkLCB2YWx1ZSwgbGl0ZXJhbH0gPSBhcmdzW2ldO1xuICAgICAgICBpZiAoIWxpdGVyYWwpIHtcbiAgICAgICAgICBpZiAod2lsZGNhcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBpc0Rlc2NlbmRhbnQobmFtZSwgcGF0aCk7XG4gICAgICAgICAgICBjb25zdCBwYXRoVmFsdWUgPSBnZXRBcmdWYWx1ZShkYXRhLCBwcm9wcywgbWF0Y2hlcyA/IHBhdGggOiBuYW1lKTtcbiAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICBwYXRoOiBtYXRjaGVzID8gcGF0aCA6IG5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBwYXRoVmFsdWUsXG4gICAgICAgICAgICAgIGJhc2U6IG1hdGNoZXMgPyBnZXQoZGF0YSwgbmFtZSkgOiBwYXRoVmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gc3RydWN0dXJlZCA/IGdldEFyZ1ZhbHVlKGRhdGEsIHByb3BzLCBuYW1lKSA6IGRhdGFbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG5cbiAgICAvLyAtLSBzdGF0aWMgY2xhc3MgbWV0aG9kcyAtLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgYW4gYWNjZXNzb3IgZXhpc3RzIGZvciB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LCBhbmQgYWRkc1xuICAgICAqIHRvIGEgbGlzdCBvZiBcInByb3BlcnR5IGVmZmVjdHNcIiB0aGF0IHdpbGwgcnVuIHdoZW4gdGhlIGFjY2Vzc29yIGZvclxuICAgICAqIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaXMgc2V0LiAgRWZmZWN0cyBhcmUgZ3JvdXBlZCBieSBcInR5cGVcIiwgd2hpY2hcbiAgICAgKiByb3VnaGx5IGNvcnJlc3BvbmRzIHRvIGEgcGhhc2UgaW4gZWZmZWN0IHByb2Nlc3NpbmcuICBUaGUgZWZmZWN0XG4gICAgICogbWV0YWRhdGEgc2hvdWxkIGJlIGluIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAgICAgKlxuICAgICAqICAgICB7XG4gICAgICogICAgICAgZm46IGVmZmVjdEZ1bmN0aW9uLCAvLyBSZWZlcmVuY2UgdG8gZnVuY3Rpb24gdG8gY2FsbCB0byBwZXJmb3JtIGVmZmVjdFxuICAgICAqICAgICAgIGluZm86IHsgLi4uIH0gICAgICAgLy8gRWZmZWN0IG1ldGFkYXRhIHBhc3NlZCB0byBmdW5jdGlvblxuICAgICAqICAgICAgIHRyaWdnZXI6IHsgICAgICAgICAgLy8gT3B0aW9uYWwgdHJpZ2dlcmluZyBtZXRhZGF0YTsgaWYgbm90IHByb3ZpZGVkXG4gICAgICogICAgICAgICBuYW1lOiBzdHJpbmcgICAgICAvLyB0aGUgcHJvcGVydHkgaXMgdHJlYXRlZCBhcyBhIHdpbGRjYXJkXG4gICAgICogICAgICAgICBzdHJ1Y3R1cmVkOiBib29sZWFuXG4gICAgICogICAgICAgICB3aWxkY2FyZDogYm9vbGVhblxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogRWZmZWN0cyBhcmUgY2FsbGVkIGZyb20gYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgaW4gdGhlIGZvbGxvd2luZyBvcmRlciBieVxuICAgICAqIHR5cGU6XG4gICAgICpcbiAgICAgKiAxLiBDT01QVVRFXG4gICAgICogMi4gUFJPUEFHQVRFXG4gICAgICogMy4gUkVGTEVDVFxuICAgICAqIDQuIE9CU0VSVkVcbiAgICAgKiA1LiBOT1RJRllcbiAgICAgKlxuICAgICAqIEVmZmVjdCBmdW5jdGlvbnMgYXJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOlxuICAgICAqXG4gICAgICogICAgIGVmZmVjdEZ1bmN0aW9uKGluc3QsIHBhdGgsIHByb3BzLCBvbGRQcm9wcywgaW5mbywgaGFzUGF0aHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgdGhhdCBzaG91bGQgdHJpZ2dlciB0aGUgZWZmZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRWZmZWN0IHR5cGUsIGZyb20gdGhpcy5QUk9QRVJUWV9FRkZFQ1RfVFlQRVNcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGVmZmVjdCBFZmZlY3QgbWV0YWRhdGEgb2JqZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIHR5cGUsIGVmZmVjdCkge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2FkZFByb3BlcnR5RWZmZWN0KHByb3BlcnR5LCB0eXBlLCBlZmZlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUtcHJvcGVydHkgb2JzZXJ2ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb24oKiwqKX0gbWV0aG9kIEZ1bmN0aW9uIG9yIG5hbWUgb2Ygb2JzZXJ2ZXIgbWV0aG9kIHRvIGNhbGxcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBkeW5hbWljRm4gV2hldGhlciB0aGUgbWV0aG9kIG5hbWUgc2hvdWxkIGJlIGluY2x1ZGVkIGFzXG4gICAgICogICBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eU9ic2VydmVyKHByb3BlcnR5LCBtZXRob2QsIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIocHJvcGVydHksIG1ldGhvZCwgZHluYW1pY0ZuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbXVsdGktcHJvcGVydHkgXCJtZXRob2Qgb2JzZXJ2ZXJcIiBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcbiAgICAgKiBleHByZXNzaW9uLCB3aGljaCBzaG91bGQgYmUgYSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgYSBub3JtYWwgSmF2YVNjcmlwdFxuICAgICAqIGZ1bmN0aW9uIHNpZ25hdHVyZTogYCdtZXRob2ROYW1lKGFyZzEsIFsuLi4sIGFyZ25dKSdgLiAgRWFjaCBhcmd1bWVudFxuICAgICAqIHNob3VsZCBjb3JyZXNwb25kIHRvIGEgcHJvcGVydHkgb3IgcGF0aCBpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogcHJvdG90eXBlIChvciBpbnN0YW5jZSksIG9yIG1heSBiZSBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogICB3aGV0aGVyIG1ldGhvZCBuYW1lcyBzaG91bGQgYmUgaW5jbHVkZWQgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSBlZmZlY3QuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU1ldGhvZE9ic2VydmVyKGV4cHJlc3Npb24sIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZU1ldGhvZE9ic2VydmVyKGV4cHJlc3Npb24sIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2F1c2VzIHRoZSBzZXR0ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB0byBkaXNwYXRjaCBgPHByb3BlcnR5Pi1jaGFuZ2VkYFxuICAgICAqIGV2ZW50cyB0byBub3RpZnkgb2YgY2hhbmdlcyB0byB0aGUgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgICB0aGlzLnByb3RvdHlwZS5fY3JlYXRlTm90aWZ5aW5nUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZWFkLW9ubHkgYWNjZXNzb3IgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRvIHNldCB0aGUgcHJvcGVydHksIHVzZSB0aGUgcHJvdGVjdGVkIGBfc2V0UHJvcGVydHlgIEFQSS5cbiAgICAgKiBUbyBjcmVhdGUgYSBjdXN0b20gcHJvdGVjdGVkIHNldHRlciAoZS5nLiBgX3NldE15UHJvcCgpYCBmb3JcbiAgICAgKiBwcm9wZXJ0eSBgbXlQcm9wYCksIHBhc3MgYHRydWVgIGZvciBgcHJvdGVjdGVkU2V0dGVyYC5cbiAgICAgKlxuICAgICAqIE5vdGUsIGlmIHRoZSBwcm9wZXJ0eSB3aWxsIGhhdmUgb3RoZXIgcHJvcGVydHkgZWZmZWN0cywgdGhpcyBtZXRob2RcbiAgICAgKiBzaG91bGQgYmUgY2FsbGVkIGZpcnN0LCBiZWZvcmUgYWRkaW5nIG90aGVyIGVmZmVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHByb3RlY3RlZFNldHRlciBDcmVhdGVzIGEgY3VzdG9tIHByb3RlY3RlZCBzZXR0ZXJcbiAgICAgKiAgIHdoZW4gYHRydWVgLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVJlYWRPbmx5UHJvcGVydHkocHJvcGVydHksIHByb3RlY3RlZFNldHRlcikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVJlYWRPbmx5UHJvcGVydHkocHJvcGVydHksIHByb3RlY3RlZFNldHRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2F1c2VzIHRoZSBzZXR0ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB0byByZWZsZWN0IHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIHRvIGEgKGRhc2gtY2FzZWQpIGF0dHJpYnV0ZSBvZiB0aGUgc2FtZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVSZWZsZWN0ZWRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVJlZmxlY3RlZFByb3BlcnR5KHByb3BlcnR5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY29tcHV0ZWQgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgc2V0IHRvIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbWV0aG9kIGRlc2NyaWJlZCBieSB0aGUgZ2l2ZW4gYGV4cHJlc3Npb25gIGVhY2ggdGltZSBvbmUgb3IgbW9yZVxuICAgICAqIGFyZ3VtZW50cyB0byB0aGUgbWV0aG9kIGNoYW5nZXMuICBUaGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgYSBzdHJpbmdcbiAgICAgKiBpbiB0aGUgZm9ybSBvZiBhIG5vcm1hbCBKYXZhU2NyaXB0IGZ1bmN0aW9uIHNpZ25hdHVyZTpcbiAgICAgKiBgJ21ldGhvZE5hbWUoYXJnMSwgWy4uLiwgYXJnbl0pJ2BcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIGNvbXB1dGVkIHByb3BlcnR5IHRvIHNldFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZyB3aGV0aGVyXG4gICAgICogICBtZXRob2QgbmFtZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgZWZmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUNvbXB1dGVkUHJvcGVydHkocHJvcGVydHksIGV4cHJlc3Npb24sIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZUNvbXB1dGVkUHJvcGVydHkocHJvcGVydHksIGV4cHJlc3Npb24sIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSB0byBlbnN1cmUgYmluZGluZyBlZmZlY3RzIGFyZSBjcmVhdGVkXG4gICAgICogZm9yIHRoZW0sIGFuZCB0aGVuIGVuc3VyZXMgcHJvcGVydHkgYWNjZXNzb3JzIGFyZSBjcmVhdGVkIGZvciBhbnlcbiAgICAgKiBkZXBlbmRlbnQgcHJvcGVydGllcyBpbiB0aGUgdGVtcGxhdGUuICBCaW5kaW5nIGVmZmVjdHMgZm9yIGJvdW5kXG4gICAgICogdGVtcGxhdGVzIGFyZSBzdG9yZWQgaW4gYSBsaW5rZWQgbGlzdCBvbiB0aGUgaW5zdGFuY2Ugc28gdGhhdFxuICAgICAqIHRlbXBsYXRlcyBjYW4gYmUgZWZmaWNpZW50bHkgc3RhbXBlZCBhbmQgdW5zdGFtcGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgY29udGFpbmluZyBiaW5kaW5nXG4gICAgICogICBiaW5kaW5nc1xuICAgICAqIEByZXR1cm4geyFUZW1wbGF0ZUluZm99IFRlbXBsYXRlIG1ldGFkYXRhIG9iamVjdFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBiaW5kVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3RvdHlwZS5fYmluZFRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICAvLyAtLSBiaW5kaW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBiaW5kVGVtcGxhdGVgIEFQSSBidXQgY2FuIGJlIGNhbGxlZCBvblxuICAgICAqIGFuIGluc3RhbmNlIHRvIGFkZCBlZmZlY3RzIGF0IHJ1bnRpbWUuICBTZWUgdGhhdCBtZXRob2QgZm9yXG4gICAgICogZnVsbCBBUEkgZG9jcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBiZSBjYWxsZWQgb24gdGhlIHByb3RvdHlwZSAoZm9yIHByb3RvdHlwaWNhbCB0ZW1wbGF0ZVxuICAgICAqIGJpbmRpbmcsIHRvIGF2b2lkIGNyZWF0aW5nIGFjY2Vzc29ycyBldmVyeSBpbnN0YW5jZSkgb25jZSBwZXIgcHJvdG90eXBlLFxuICAgICAqIGFuZCB3aWxsIGJlIGNhbGxlZCB3aXRoIGBydW50aW1lQmluZGluZzogdHJ1ZWAgYnkgYF9zdGFtcFRlbXBsYXRlYCB0b1xuICAgICAqIGNyZWF0ZSBhbmQgbGluayBhbiBpbnN0YW5jZSBvZiB0aGUgdGVtcGxhdGUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGFcbiAgICAgKiBwYXJ0aWN1bGFyIHN0YW1waW5nLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgY29udGFpbmluZyBiaW5kaW5nXG4gICAgICogICBiaW5kaW5nc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluc3RhbmNlQmluZGluZyBXaGVuIGZhbHNlIChkZWZhdWx0KSwgcGVyZm9ybXNcbiAgICAgKiAgIFwicHJvdG90eXBpY2FsXCIgYmluZGluZyBvZiB0aGUgdGVtcGxhdGUgYW5kIG92ZXJ3cml0ZXMgYW55IHByZXZpb3VzbHlcbiAgICAgKiAgIGJvdW5kIHRlbXBsYXRlIGZvciB0aGUgY2xhc3MuIFdoZW4gdHJ1ZSAoYXMgcGFzc2VkIGZyb21cbiAgICAgKiAgIGBfc3RhbXBUZW1wbGF0ZWApLCB0aGUgdGVtcGxhdGUgaW5mbyBpcyBpbnN0YW5jZWQgYW5kIGxpbmtlZCBpbnRvXG4gICAgICogICB0aGUgbGlzdCBvZiBib3VuZCB0ZW1wbGF0ZXMuXG4gICAgICogQHJldHVybiB7IVRlbXBsYXRlSW5mb30gVGVtcGxhdGUgbWV0YWRhdGEgb2JqZWN0OyBmb3IgYHJ1bnRpbWVCaW5kaW5nYCxcbiAgICAgKiAgIHRoaXMgaXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHByb3RvdHlwaWNhbCB0ZW1wbGF0ZSBpbmZvXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IGdvL21pc3NpbmdmbnByb3BzXG4gICAgICovXG4gICAgX2JpbmRUZW1wbGF0ZSh0ZW1wbGF0ZSwgaW5zdGFuY2VCaW5kaW5nKSB7XG4gICAgICBsZXQgdGVtcGxhdGVJbmZvID0gdGhpcy5jb25zdHJ1Y3Rvci5fcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgICBsZXQgd2FzUHJlQm91bmQgPSB0aGlzLl9fdGVtcGxhdGVJbmZvID09IHRlbXBsYXRlSW5mbztcbiAgICAgIC8vIE9wdGltaXphdGlvbjogc2luY2UgdGhpcyBpcyBjYWxsZWQgdHdpY2UgZm9yIHByb3RvLWJvdW5kIHRlbXBsYXRlcyxcbiAgICAgIC8vIGRvbid0IGF0dGVtcHQgdG8gcmVjcmVhdGUgYWNjZXNzb3JzIGlmIHRoaXMgdGVtcGxhdGUgd2FzIHByZS1ib3VuZFxuICAgICAgaWYgKCF3YXNQcmVCb3VuZCkge1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHRlbXBsYXRlSW5mby5wcm9wZXJ0eUVmZmVjdHMpIHtcbiAgICAgICAgICB0aGlzLl9jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKHByb3ApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5zdGFuY2VCaW5kaW5nKSB7XG4gICAgICAgIC8vIEZvciBpbnN0YW5jZS10aW1lIGJpbmRpbmcsIGNyZWF0ZSBpbnN0YW5jZSBvZiB0ZW1wbGF0ZSBtZXRhZGF0YVxuICAgICAgICAvLyBhbmQgbGluayBpbnRvIGxpc3Qgb2YgdGVtcGxhdGVzIGlmIG5lY2Vzc2FyeVxuICAgICAgICB0ZW1wbGF0ZUluZm8gPSAvKiogQHR5cGUgeyFUZW1wbGF0ZUluZm99ICovKE9iamVjdC5jcmVhdGUodGVtcGxhdGVJbmZvKSk7XG4gICAgICAgIHRlbXBsYXRlSW5mby53YXNQcmVCb3VuZCA9IHdhc1ByZUJvdW5kO1xuICAgICAgICBpZiAoIXdhc1ByZUJvdW5kICYmIHRoaXMuX190ZW1wbGF0ZUluZm8pIHtcbiAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMuX190ZW1wbGF0ZUluZm9MYXN0IHx8IHRoaXMuX190ZW1wbGF0ZUluZm87XG4gICAgICAgICAgdGhpcy5fX3RlbXBsYXRlSW5mb0xhc3QgPSBsYXN0Lm5leHRUZW1wbGF0ZUluZm8gPSB0ZW1wbGF0ZUluZm87XG4gICAgICAgICAgdGVtcGxhdGVJbmZvLnByZXZpb3VzVGVtcGxhdGVJbmZvID0gbGFzdDtcbiAgICAgICAgICByZXR1cm4gdGVtcGxhdGVJbmZvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fX3RlbXBsYXRlSW5mbyA9IHRlbXBsYXRlSW5mbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcHJvcGVydHkgZWZmZWN0IHRvIHRoZSBnaXZlbiB0ZW1wbGF0ZSBtZXRhZGF0YSwgd2hpY2ggaXMgcnVuXG4gICAgICogYXQgdGhlIFwicHJvcGFnYXRlXCIgc3RhZ2Ugb2YgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgd2hlbiB0aGUgdGVtcGxhdGVcbiAgICAgKiBoYXMgYmVlbiBib3VuZCB0byB0aGUgZWxlbWVudCB2aWEgYF9iaW5kVGVtcGxhdGVgLlxuICAgICAqXG4gICAgICogVGhlIGBlZmZlY3RgIG9iamVjdCBzaG91bGQgbWF0Y2ggdGhlIGZvcm1hdCBpbiBgX2FkZFByb3BlcnR5RWZmZWN0YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgdG8gYWRkIGVmZmVjdCB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IHRoYXQgc2hvdWxkIHRyaWdnZXIgdGhlIGVmZmVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gZWZmZWN0IEVmZmVjdCBtZXRhZGF0YSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfYWRkVGVtcGxhdGVQcm9wZXJ0eUVmZmVjdCh0ZW1wbGF0ZUluZm8sIHByb3AsIGVmZmVjdCkge1xuICAgICAgbGV0IGhvc3RQcm9wcyA9IHRlbXBsYXRlSW5mby5ob3N0UHJvcHMgPSB0ZW1wbGF0ZUluZm8uaG9zdFByb3BzIHx8IHt9O1xuICAgICAgaG9zdFByb3BzW3Byb3BdID0gdHJ1ZTtcbiAgICAgIGxldCBlZmZlY3RzID0gdGVtcGxhdGVJbmZvLnByb3BlcnR5RWZmZWN0cyA9IHRlbXBsYXRlSW5mby5wcm9wZXJ0eUVmZmVjdHMgfHwge307XG4gICAgICBsZXQgcHJvcEVmZmVjdHMgPSBlZmZlY3RzW3Byb3BdID0gZWZmZWN0c1twcm9wXSB8fCBbXTtcbiAgICAgIHByb3BFZmZlY3RzLnB1c2goZWZmZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFtcHMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGFuZCBwZXJmb3JtcyBpbnN0YW5jZS10aW1lIHNldHVwIGZvclxuICAgICAqIFBvbHltZXIgdGVtcGxhdGUgZmVhdHVyZXMsIGluY2x1ZGluZyBkYXRhIGJpbmRpbmdzLCBkZWNsYXJhdGl2ZSBldmVudFxuICAgICAqIGxpc3RlbmVycywgYW5kIHRoZSBgdGhpcy4kYCBtYXAgb2YgYGlkYCdzIHRvIG5vZGVzLiAgQSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqIGlzIHJldHVybmVkIGNvbnRhaW5pbmcgdGhlIHN0YW1wZWQgRE9NLCByZWFkeSBmb3IgaW5zZXJ0aW9uIGludG8gdGhlXG4gICAgICogRE9NLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZTsgaG93ZXZlciBub3RlIHRoYXQgZHVlIHRvXG4gICAgICogYHNoYWR5Y3NzYCBwb2x5ZmlsbCBsaW1pdGF0aW9ucywgb25seSBzdHlsZXMgZnJvbSB0ZW1wbGF0ZXMgcHJlcGFyZWRcbiAgICAgKiB1c2luZyBgU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlYCB3aWxsIGJlIGNvcnJlY3RseSBwb2x5ZmlsbGVkIChzY29wZWRcbiAgICAgKiB0byB0aGUgc2hhZG93IHJvb3QgYW5kIHN1cHBvcnQgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzKSwgYW5kIG5vdGUgdGhhdFxuICAgICAqIGBTaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVgIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIHBlciBlbGVtZW50LiBBcyBzdWNoLFxuICAgICAqIGFueSBzdHlsZXMgcmVxdWlyZWQgYnkgaW4gcnVudGltZS1zdGFtcGVkIHRlbXBsYXRlcyBtdXN0IGJlIGluY2x1ZGVkXG4gICAgICogaW4gdGhlIG1haW4gZWxlbWVudCB0ZW1wbGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHN0YW1wXG4gICAgICogQHJldHVybiB7IVN0YW1wZWRUZW1wbGF0ZX0gQ2xvbmVkIHRlbXBsYXRlIGNvbnRlbnRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3N0YW1wVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgIC8vIEVuc3VyZXMgdGhhdCBjcmVhdGVkIGRvbSBpcyBgX2VucXVldWVDbGllbnRgJ2QgdG8gdGhpcyBlbGVtZW50IHNvXG4gICAgICAvLyB0aGF0IGl0IGNhbiBiZSBmbHVzaGVkIG9uIG5leHQgY2FsbCB0byBgX2ZsdXNoUHJvcGVydGllc2BcbiAgICAgIGhvc3RTdGFjay5iZWdpbkhvc3RpbmcodGhpcyk7XG4gICAgICBsZXQgZG9tID0gc3VwZXIuX3N0YW1wVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgaG9zdFN0YWNrLmVuZEhvc3RpbmcodGhpcyk7XG4gICAgICBsZXQgdGVtcGxhdGVJbmZvID0gLyoqIEB0eXBlIHshVGVtcGxhdGVJbmZvfSAqLyh0aGlzLl9iaW5kVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpKTtcbiAgICAgIC8vIEFkZCB0ZW1wbGF0ZS1pbnN0YW5jZS1zcGVjaWZpYyBkYXRhIHRvIGluc3RhbmNlZCB0ZW1wbGF0ZUluZm9cbiAgICAgIHRlbXBsYXRlSW5mby5ub2RlTGlzdCA9IGRvbS5ub2RlTGlzdDtcbiAgICAgIC8vIENhcHR1cmUgY2hpbGQgbm9kZXMgdG8gYWxsb3cgdW5zdGFtcGluZyBvZiBub24tcHJvdG90eXBpY2FsIHRlbXBsYXRlc1xuICAgICAgaWYgKCF0ZW1wbGF0ZUluZm8ud2FzUHJlQm91bmQpIHtcbiAgICAgICAgbGV0IG5vZGVzID0gdGVtcGxhdGVJbmZvLmNoaWxkTm9kZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgbj1kb20uZmlyc3RDaGlsZDsgbjsgbj1uLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgbm9kZXMucHVzaChuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZG9tLnRlbXBsYXRlSW5mbyA9IHRlbXBsYXRlSW5mbztcbiAgICAgIC8vIFNldHVwIGNvbXBvdW5kIHN0b3JhZ2UsIDItd2F5IGxpc3RlbmVycywgYW5kIGRhdGFIb3N0IGZvciBiaW5kaW5nc1xuICAgICAgc2V0dXBCaW5kaW5ncyh0aGlzLCB0ZW1wbGF0ZUluZm8pO1xuICAgICAgLy8gRmx1c2ggcHJvcGVydGllcyBpbnRvIHRlbXBsYXRlIG5vZGVzIGlmIGFscmVhZHkgYm9vdGVkXG4gICAgICBpZiAodGhpcy5fX2RhdGFSZWFkeSkge1xuICAgICAgICBydW5FZmZlY3RzKHRoaXMsIHRlbXBsYXRlSW5mby5wcm9wZXJ0eUVmZmVjdHMsIHRoaXMuX19kYXRhLCBudWxsLFxuICAgICAgICAgIGZhbHNlLCB0ZW1wbGF0ZUluZm8ubm9kZUxpc3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuZCB1bmJpbmRzIHRoZSBub2RlcyBwcmV2aW91c2x5IGNvbnRhaW5lZCBpbiB0aGUgcHJvdmlkZWRcbiAgICAgKiBEb2N1bWVudEZyYWdtZW50IHJldHVybmVkIGZyb20gYF9zdGFtcFRlbXBsYXRlYC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7IVN0YW1wZWRUZW1wbGF0ZX0gZG9tIERvY3VtZW50RnJhZ21lbnQgcHJldmlvdXNseSByZXR1cm5lZFxuICAgICAqICAgZnJvbSBgX3N0YW1wVGVtcGxhdGVgIGFzc29jaWF0ZWQgd2l0aCB0aGUgbm9kZXMgdG8gYmUgcmVtb3ZlZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9yZW1vdmVCb3VuZERvbShkb20pIHtcbiAgICAgIC8vIFVubGluayB0ZW1wbGF0ZSBpbmZvXG4gICAgICBsZXQgdGVtcGxhdGVJbmZvID0gZG9tLnRlbXBsYXRlSW5mbztcbiAgICAgIGlmICh0ZW1wbGF0ZUluZm8ucHJldmlvdXNUZW1wbGF0ZUluZm8pIHtcbiAgICAgICAgdGVtcGxhdGVJbmZvLnByZXZpb3VzVGVtcGxhdGVJbmZvLm5leHRUZW1wbGF0ZUluZm8gPVxuICAgICAgICAgIHRlbXBsYXRlSW5mby5uZXh0VGVtcGxhdGVJbmZvO1xuICAgICAgfVxuICAgICAgaWYgKHRlbXBsYXRlSW5mby5uZXh0VGVtcGxhdGVJbmZvKSB7XG4gICAgICAgIHRlbXBsYXRlSW5mby5uZXh0VGVtcGxhdGVJbmZvLnByZXZpb3VzVGVtcGxhdGVJbmZvID1cbiAgICAgICAgICB0ZW1wbGF0ZUluZm8ucHJldmlvdXNUZW1wbGF0ZUluZm87XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fX3RlbXBsYXRlSW5mb0xhc3QgPT0gdGVtcGxhdGVJbmZvKSB7XG4gICAgICAgIHRoaXMuX190ZW1wbGF0ZUluZm9MYXN0ID0gdGVtcGxhdGVJbmZvLnByZXZpb3VzVGVtcGxhdGVJbmZvO1xuICAgICAgfVxuICAgICAgdGVtcGxhdGVJbmZvLnByZXZpb3VzVGVtcGxhdGVJbmZvID0gdGVtcGxhdGVJbmZvLm5leHRUZW1wbGF0ZUluZm8gPSBudWxsO1xuICAgICAgLy8gUmVtb3ZlIHN0YW1wZWQgbm9kZXNcbiAgICAgIGxldCBub2RlcyA9IHRlbXBsYXRlSW5mby5jaGlsZE5vZGVzO1xuICAgICAgZm9yIChsZXQgaT0wOyBpPG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgZGVmYXVsdCBgVGVtcGxhdGVTdGFtcGAgaW1wbGVtZW50YXRpb24gdG8gYWRkIHN1cHBvcnQgZm9yXG4gICAgICogcGFyc2luZyBiaW5kaW5ncyBmcm9tIGBUZXh0Tm9kZWAncycgYHRleHRDb250ZW50YC4gIEEgYGJpbmRpbmdzYFxuICAgICAqIGFycmF5IGlzIGFkZGVkIHRvIGBub2RlSW5mb2AgYW5kIHBvcHVsYXRlZCB3aXRoIGJpbmRpbmcgbWV0YWRhdGFcbiAgICAgKiB3aXRoIGluZm9ybWF0aW9uIGNhcHR1cmluZyB0aGUgYmluZGluZyB0YXJnZXQsIGFuZCBhIGBwYXJ0c2AgYXJyYXlcbiAgICAgKiB3aXRoIG9uZSBvciBtb3JlIG1ldGFkYXRhIG9iamVjdHMgY2FwdHVyaW5nIHRoZSBzb3VyY2Uocykgb2YgdGhlXG4gICAgICogYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBOb2RlIHRvIHBhcnNlXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7Tm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUgbm9kZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmlzaXRlZCBub2RlIGFkZGVkIG5vZGUtc3BlY2lmaWNcbiAgICAgKiAgIG1ldGFkYXRhIHRvIGBub2RlSW5mb2BcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhcnNlVGVtcGxhdGVOb2RlKG5vZGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8pIHtcbiAgICAgIC8vIFRPRE8oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMjQwKTpcbiAgICAgIC8vICAgICBDaGFuZ2UgYmFjayB0byBqdXN0IHN1cGVyLm1ldGhvZENhbGwoKVxuICAgICAgbGV0IG5vdGVkID0gcHJvcGVydHlFZmZlY3RzQmFzZS5fcGFyc2VUZW1wbGF0ZU5vZGUuY2FsbChcbiAgICAgICAgdGhpcywgbm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbyk7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgbGV0IHBhcnRzID0gdGhpcy5fcGFyc2VCaW5kaW5ncyhub2RlLnRleHRDb250ZW50LCB0ZW1wbGF0ZUluZm8pO1xuICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSB0ZXh0Q29udGVudCB3aXRoIGFueSBsaXRlcmFsIHBhcnRzXG4gICAgICAgICAgLy8gTk9URTogZGVmYXVsdCB0byBhIHNwYWNlIGhlcmUgc28gdGhlIHRleHROb2RlIHJlbWFpbnM7IHNvbWUgYnJvd3NlcnNcbiAgICAgICAgICAvLyAoSUUpIG9taXQgYW4gZW1wdHkgdGV4dE5vZGUgZm9sbG93aW5nIGNsb25lTm9kZS9pbXBvcnROb2RlLlxuICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBsaXRlcmFsRnJvbVBhcnRzKHBhcnRzKSB8fCAnICc7XG4gICAgICAgICAgYWRkQmluZGluZyh0aGlzLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCAndGV4dCcsICd0ZXh0Q29udGVudCcsIHBhcnRzKTtcbiAgICAgICAgICBub3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBub3RlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgZGVmYXVsdCBgVGVtcGxhdGVTdGFtcGAgaW1wbGVtZW50YXRpb24gdG8gYWRkIHN1cHBvcnQgZm9yXG4gICAgICogcGFyc2luZyBiaW5kaW5ncyBmcm9tIGF0dHJpYnV0ZXMuICBBIGBiaW5kaW5nc2BcbiAgICAgKiBhcnJheSBpcyBhZGRlZCB0byBgbm9kZUluZm9gIGFuZCBwb3B1bGF0ZWQgd2l0aCBiaW5kaW5nIG1ldGFkYXRhXG4gICAgICogd2l0aCBpbmZvcm1hdGlvbiBjYXB0dXJpbmcgdGhlIGJpbmRpbmcgdGFyZ2V0LCBhbmQgYSBgcGFydHNgIGFycmF5XG4gICAgICogd2l0aCBvbmUgb3IgbW9yZSBtZXRhZGF0YSBvYmplY3RzIGNhcHR1cmluZyB0aGUgc291cmNlKHMpIG9mIHRoZVxuICAgICAqIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge05vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlIG5vZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZpc2l0ZWQgbm9kZSBhZGRlZCBub2RlLXNwZWNpZmljXG4gICAgICogICBtZXRhZGF0YSB0byBgbm9kZUluZm9gXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZShub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgbGV0IHBhcnRzID0gdGhpcy5fcGFyc2VCaW5kaW5ncyh2YWx1ZSwgdGVtcGxhdGVJbmZvKTtcbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAvLyBBdHRyaWJ1dGUgb3IgcHJvcGVydHlcbiAgICAgICAgbGV0IG9yaWdOYW1lID0gbmFtZTtcbiAgICAgICAgbGV0IGtpbmQgPSAncHJvcGVydHknO1xuICAgICAgICAvLyBUaGUgb25seSB3YXkgd2Ugc2VlIGEgY2FwaXRhbCBsZXR0ZXIgaGVyZSBpcyBpZiB0aGUgYXR0ciBoYXNcbiAgICAgICAgLy8gYSBjYXBpdGFsIGxldHRlciBpbiBpdCBwZXIgc3BlYy4gSW4gdGhpcyBjYXNlLCB0byBtYWtlIHN1cmVcbiAgICAgICAgLy8gdGhpcyBiaW5kaW5nIHdvcmtzLCB3ZSBnbyBhaGVhZCBhbmQgbWFrZSB0aGUgYmluZGluZyB0byB0aGUgYXR0cmlidXRlLlxuICAgICAgICBpZiAoY2FwaXRhbEF0dHJpYnV0ZVJlZ2V4LnRlc3QobmFtZSkpIHtcbiAgICAgICAgICBraW5kID0gJ2F0dHJpYnV0ZSc7XG4gICAgICAgIH0gZWxzZSBpZiAobmFtZVtuYW1lLmxlbmd0aC0xXSA9PSAnJCcpIHtcbiAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAga2luZCA9ICdhdHRyaWJ1dGUnO1xuICAgICAgICB9XG4gICAgICAgIC8vIEluaXRpYWxpemUgYXR0cmlidXRlIGJpbmRpbmdzIHdpdGggYW55IGxpdGVyYWwgcGFydHNcbiAgICAgICAgbGV0IGxpdGVyYWwgPSBsaXRlcmFsRnJvbVBhcnRzKHBhcnRzKTtcbiAgICAgICAgaWYgKGxpdGVyYWwgJiYga2luZCA9PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgIC8vIEVuc3VyZSBhIFNoYWR5Q1NTIHRlbXBsYXRlIHNjb3BlZCBzdHlsZSBpcyBub3QgcmVtb3ZlZFxuICAgICAgICAgIC8vIHdoZW4gYSBjbGFzcyQgYmluZGluZydzIGluaXRpYWwgbGl0ZXJhbCB2YWx1ZSBpcyBzZXQuXG4gICAgICAgICAgaWYgKG5hbWUgPT0gJ2NsYXNzJyAmJiBub2RlLmhhc0F0dHJpYnV0ZSgnY2xhc3MnKSkge1xuICAgICAgICAgICAgbGl0ZXJhbCArPSAnICcgKyBub2RlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgbGl0ZXJhbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgYXR0cmlidXRlIGJlZm9yZSByZW1vdmluZywgc2luY2UgSUUgd29uJ3QgYWxsb3cgcmVtb3ZpbmdcbiAgICAgICAgLy8gYHZhbHVlYCBhdHRyaWJ1dGUgaWYgaXQgcHJldmlvdXNseSBoYWQgYSB2YWx1ZSAoY2FuJ3RcbiAgICAgICAgLy8gdW5jb25kaXRpb25hbGx5IHNldCAnJyBiZWZvcmUgcmVtb3Zpbmcgc2luY2UgYXR0cmlidXRlcyB3aXRoIGAkYFxuICAgICAgICAvLyBjYW4ndCBiZSBzZXQgdXNpbmcgc2V0QXR0cmlidXRlKVxuICAgICAgICBpZiAobm9kZS5sb2NhbE5hbWUgPT09ICdpbnB1dCcgJiYgb3JpZ05hbWUgPT09ICd2YWx1ZScpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShvcmlnTmFtZSwgJycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBhbm5vdGF0aW9uXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG9yaWdOYW1lKTtcbiAgICAgICAgLy8gQ2FzZSBoYWNrZXJ5OiBhdHRyaWJ1dGVzIGFyZSBsb3dlci1jYXNlLCBidXQgYmluZCB0YXJnZXRzXG4gICAgICAgIC8vIChwcm9wZXJ0aWVzKSBhcmUgY2FzZSBzZW5zaXRpdmUuIEdhbWJpdCBpcyB0byBtYXAgZGFzaC1jYXNlIHRvXG4gICAgICAgIC8vIGNhbWVsLWNhc2U6IGBmb28tYmFyYCBiZWNvbWVzIGBmb29CYXJgLlxuICAgICAgICAvLyBBdHRyaWJ1dGUgYmluZGluZ3MgYXJlIGV4Y2VwdGVkLlxuICAgICAgICBpZiAoa2luZCA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgIG5hbWUgPSBkYXNoVG9DYW1lbENhc2UobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkQmluZGluZyh0aGlzLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBraW5kLCBuYW1lLCBwYXJ0cywgbGl0ZXJhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5RWZmZWN0c0Jhc2UuX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlLmNhbGwoXG4gICAgICAgICAgdGhpcywgbm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbywgbmFtZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBUZW1wbGF0ZVN0YW1wYCBpbXBsZW1lbnRhdGlvbiB0byBhZGQgc3VwcG9ydCBmb3JcbiAgICAgKiBiaW5kaW5nIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYSBuZXN0ZWQgdGVtcGxhdGUgZGVwZW5kcyBvbiB0byB0aGUgdGVtcGxhdGVcbiAgICAgKiBhcyBgX2hvc3RfPHByb3BlcnR5PmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge05vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlIG5vZGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZpc2l0ZWQgbm9kZSBhZGRlZCBub2RlLXNwZWNpZmljXG4gICAgICogICBtZXRhZGF0YSB0byBgbm9kZUluZm9gXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUobm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykge1xuICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgLy8gICAgIENoYW5nZSBiYWNrIHRvIGp1c3Qgc3VwZXIubWV0aG9kQ2FsbCgpXG4gICAgICBsZXQgbm90ZWQgPSBwcm9wZXJ0eUVmZmVjdHNCYXNlLl9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUuY2FsbChcbiAgICAgICAgdGhpcywgbm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbyk7XG4gICAgICAvLyBNZXJnZSBob3N0IHByb3BzIGludG8gb3V0ZXIgdGVtcGxhdGUgYW5kIGFkZCBiaW5kaW5nc1xuICAgICAgbGV0IGhvc3RQcm9wcyA9IG5vZGVJbmZvLnRlbXBsYXRlSW5mby5ob3N0UHJvcHM7XG4gICAgICBsZXQgbW9kZSA9ICd7JztcbiAgICAgIGZvciAobGV0IHNvdXJjZSBpbiBob3N0UHJvcHMpIHtcbiAgICAgICAgbGV0IHBhcnRzID0gW3sgbW9kZSwgc291cmNlLCBkZXBlbmRlbmNpZXM6IFtzb3VyY2VdIH1dO1xuICAgICAgICBhZGRCaW5kaW5nKHRoaXMsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8sICdwcm9wZXJ0eScsICdfaG9zdF8nICsgc291cmNlLCBwYXJ0cyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm90ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHRvIHBhcnNlIHRleHQgaW4gYSB0ZW1wbGF0ZSAoZWl0aGVyIGF0dHJpYnV0ZSB2YWx1ZXMgb3JcbiAgICAgKiB0ZXh0Q29udGVudCkgaW50byBiaW5kaW5nIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogQW55IG92ZXJyaWRlcyBvZiB0aGlzIG1ldGhvZCBzaG91bGQgcmV0dXJuIGFuIGFycmF5IG9mIGJpbmRpbmcgcGFydFxuICAgICAqIG1ldGFkYXRhICByZXByZXNlbnRpbmcgb25lIG9yIG1vcmUgYmluZGluZ3MgZm91bmQgaW4gdGhlIHByb3ZpZGVkIHRleHRcbiAgICAgKiBhbmQgYW55IFwibGl0ZXJhbFwiIHRleHQgaW4gYmV0d2Vlbi4gIEFueSBub24tbGl0ZXJhbCBwYXJ0cyB3aWxsIGJlIHBhc3NlZFxuICAgICAqIHRvIGBfZXZhbHVhdGVCaW5kaW5nYCB3aGVuIGFueSBkZXBlbmRlbmNpZXMgY2hhbmdlLiAgVGhlIG9ubHkgcmVxdWlyZWRcbiAgICAgKiBmaWVsZHMgb2YgZWFjaCBcInBhcnRcIiBpbiB0aGUgcmV0dXJuZWQgYXJyYXkgYXJlIGFzIGZvbGxvd3M6XG4gICAgICpcbiAgICAgKiAtIGBkZXBlbmRlbmNpZXNgIC0gQXJyYXkgY29udGFpbmluZyB0cmlnZ2VyIG1ldGFkYXRhIGZvciBlYWNoIHByb3BlcnR5XG4gICAgICogICB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBiaW5kaW5nIHRvIHVwZGF0ZVxuICAgICAqIC0gYGxpdGVyYWxgIC0gU3RyaW5nIGNvbnRhaW5pbmcgdGV4dCBpZiB0aGUgcGFydCByZXByZXNlbnRzIGEgbGl0ZXJhbDtcbiAgICAgKiAgIGluIHRoaXMgY2FzZSBubyBgZGVwZW5kZW5jaWVzYCBhcmUgbmVlZGVkXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsIG1ldGFkYXRhIGZvciB1c2UgYnkgYF9ldmFsdWF0ZUJpbmRpbmdgIG1heSBiZSBwcm92aWRlZCBpblxuICAgICAqIGVhY2ggcGFydCBvYmplY3QgYXMgbmVlZGVkLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaGFuZGxlcyB0aGUgZm9sbG93aW5nIHR5cGVzIG9mIGJpbmRpbmdzXG4gICAgICogKG9uZSBvciBtb3JlIG1heSBiZSBpbnRlcm1peGVkIHdpdGggbGl0ZXJhbCBzdHJpbmdzKTpcbiAgICAgKiAtIFByb3BlcnR5IGJpbmRpbmc6IGBbW3Byb3BdXWBcbiAgICAgKiAtIFBhdGggYmluZGluZzogYFtbb2JqZWN0LnByb3BdXWBcbiAgICAgKiAtIE5lZ2F0ZWQgcHJvcGVydHkgb3IgcGF0aCBiaW5kaW5nczogYFtbIXByb3BdXWAgb3IgYFtbIW9iamVjdC5wcm9wXV1gXG4gICAgICogLSBUd28td2F5IHByb3BlcnR5IG9yIHBhdGggYmluZGluZ3MgKHN1cHBvcnRzIG5lZ2F0aW9uKTpcbiAgICAgKiAgIGB7e3Byb3B9fWAsIGB7e29iamVjdC5wcm9wfX1gLCBge3shcHJvcH19YCBvciBge3shb2JqZWN0LnByb3B9fWBcbiAgICAgKiAtIElubGluZSBjb21wdXRlZCBtZXRob2QgKHN1cHBvcnRzIG5lZ2F0aW9uKTpcbiAgICAgKiAgIGBbW2NvbXB1dGUoYSwgJ2xpdGVyYWwnLCBiKV1dYCwgYFtbIWNvbXB1dGUoYSwgJ2xpdGVyYWwnLCBiKV1dYFxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdXNlcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgYmVzdFxuICAgICAqIHBlcmZvcm1hbmNlLiBIb3dldmVyLCB0aGUgcmVndWxhciBleHByZXNzaW9uIHVzZXMgYSB3aGl0ZS1saXN0IG9mXG4gICAgICogYWxsb3dlZCBjaGFyYWN0ZXJzIGluIGEgZGF0YS1iaW5kaW5nLCB3aGljaCBjYXVzZXMgcHJvYmxlbXMgZm9yXG4gICAgICogZGF0YS1iaW5kaW5ncyB0aGF0IGRvIHVzZSBjaGFyYWN0ZXJzIG5vdCBpbiB0aGlzIHdoaXRlLWxpc3QuXG4gICAgICpcbiAgICAgKiBJbnN0ZWFkIG9mIHVwZGF0aW5nIHRoZSB3aGl0ZS1saXN0IHdpdGggYWxsIGFsbG93ZWQgY2hhcmFjdGVycyxcbiAgICAgKiB0aGVyZSBpcyBhIFN0cmljdEJpbmRpbmdQYXJzZXIgKHNlZSBsaWIvbWl4aW5zL3N0cmljdC1iaW5kaW5nLXBhcnNlcilcbiAgICAgKiB0aGF0IHVzZXMgYSBzdGF0ZSBtYWNoaW5lIGluc3RlYWQuIFRoaXMgc3RhdGUgbWFjaGluZSBpcyBhYmxlIHRvIGhhbmRsZVxuICAgICAqIGFsbCBjaGFyYWN0ZXJzLiBIb3dldmVyLCBpdCBpcyBzbGlnaHRseSBsZXNzIHBlcmZvcm1hbnQsIHRoZXJlZm9yZSB3ZVxuICAgICAqIGV4dHJhY3RlZCBpdCBpbnRvIGEgc2VwYXJhdGUgb3B0aW9uYWwgbWl4aW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0IHRvIHBhcnNlIGZyb20gYXR0cmlidXRlIG9yIHRleHRDb250ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlSW5mbyBDdXJyZW50IHRlbXBsYXRlIG1ldGFkYXRhXG4gICAgICogQHJldHVybiB7QXJyYXk8IUJpbmRpbmdQYXJ0Pn0gQXJyYXkgb2YgYmluZGluZyBwYXJ0IG1ldGFkYXRhXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZUJpbmRpbmdzKHRleHQsIHRlbXBsYXRlSW5mbykge1xuICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICAgIGxldCBtO1xuICAgICAgLy8gRXhhbXBsZTogXCJsaXRlcmFsMXt7cHJvcH19bGl0ZXJhbDJbWyFjb21wdXRlKGZvbyxiYXIpXV1maW5hbFwiXG4gICAgICAvLyBSZWdleCBtYXRjaGVzOlxuICAgICAgLy8gICAgICAgIEl0ZXJhdGlvbiAxOiAgSXRlcmF0aW9uIDI6XG4gICAgICAvLyBtWzFdOiAne3snICAgICAgICAgICdbWydcbiAgICAgIC8vIG1bMl06ICcnICAgICAgICAgICAgJyEnXG4gICAgICAvLyBtWzNdOiAncHJvcCcgICAgICAgICdjb21wdXRlKGZvbyxiYXIpJ1xuICAgICAgd2hpbGUgKChtID0gYmluZGluZ1JlZ2V4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICAgIC8vIEFkZCBsaXRlcmFsIHBhcnRcbiAgICAgICAgaWYgKG0uaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHtsaXRlcmFsOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgbS5pbmRleCl9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYmluZGluZyBwYXJ0XG4gICAgICAgIGxldCBtb2RlID0gbVsxXVswXTtcbiAgICAgICAgbGV0IG5lZ2F0ZSA9IEJvb2xlYW4obVsyXSk7XG4gICAgICAgIGxldCBzb3VyY2UgPSBtWzNdLnRyaW0oKTtcbiAgICAgICAgbGV0IGN1c3RvbUV2ZW50ID0gZmFsc2UsIG5vdGlmeUV2ZW50ID0gJycsIGNvbG9uID0gLTE7XG4gICAgICAgIGlmIChtb2RlID09ICd7JyAmJiAoY29sb24gPSBzb3VyY2UuaW5kZXhPZignOjonKSkgPiAwKSB7XG4gICAgICAgICAgbm90aWZ5RXZlbnQgPSBzb3VyY2Uuc3Vic3RyaW5nKGNvbG9uICsgMik7XG4gICAgICAgICAgc291cmNlID0gc291cmNlLnN1YnN0cmluZygwLCBjb2xvbik7XG4gICAgICAgICAgY3VzdG9tRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaWduYXR1cmUgPSBwYXJzZU1ldGhvZChzb3VyY2UpO1xuICAgICAgICBsZXQgZGVwZW5kZW5jaWVzID0gW107XG4gICAgICAgIGlmIChzaWduYXR1cmUpIHtcbiAgICAgICAgICAvLyBJbmxpbmUgY29tcHV0ZWQgZnVuY3Rpb25cbiAgICAgICAgICBsZXQge2FyZ3MsIG1ldGhvZE5hbWV9ID0gc2lnbmF0dXJlO1xuICAgICAgICAgIGZvciAobGV0IGk9MDsgaTxhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgYXJnID0gYXJnc1tpXTtcbiAgICAgICAgICAgIGlmICghYXJnLmxpdGVyYWwpIHtcbiAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGR5bmFtaWNGbnMgPSB0ZW1wbGF0ZUluZm8uZHluYW1pY0ZucztcbiAgICAgICAgICBpZiAoZHluYW1pY0ZucyAmJiBkeW5hbWljRm5zW21ldGhvZE5hbWVdIHx8IHNpZ25hdHVyZS5zdGF0aWMpIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKG1ldGhvZE5hbWUpO1xuICAgICAgICAgICAgc2lnbmF0dXJlLmR5bmFtaWNGbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFByb3BlcnR5IG9yIHBhdGhcbiAgICAgICAgICBkZXBlbmRlbmNpZXMucHVzaChzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goe1xuICAgICAgICAgIHNvdXJjZSwgbW9kZSwgbmVnYXRlLCBjdXN0b21FdmVudCwgc2lnbmF0dXJlLCBkZXBlbmRlbmNpZXMsXG4gICAgICAgICAgZXZlbnQ6IG5vdGlmeUV2ZW50XG4gICAgICAgIH0pO1xuICAgICAgICBsYXN0SW5kZXggPSBiaW5kaW5nUmVnZXgubGFzdEluZGV4O1xuICAgICAgfVxuICAgICAgLy8gQWRkIGEgZmluYWwgbGl0ZXJhbCBwYXJ0XG4gICAgICBpZiAobGFzdEluZGV4ICYmIGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICAgIGxldCBsaXRlcmFsID0gdGV4dC5zdWJzdHJpbmcobGFzdEluZGV4KTtcbiAgICAgICAgaWYgKGxpdGVyYWwpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgIGxpdGVyYWw6IGxpdGVyYWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdG8gZXZhbHVhdGUgYSBwcmV2aW91c2x5IHBhcnNlZCBiaW5kaW5nIHBhcnQgYmFzZWQgb24gYSBzZXQgb2ZcbiAgICAgKiBvbmUgb3IgbW9yZSBjaGFuZ2VkIGRlcGVuZGVuY2llcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEVsZW1lbnQgdGhhdCBzaG91bGQgYmUgdXNlZCBhc1xuICAgICAqICAgICBzY29wZSBmb3IgYmluZGluZyBkZXBlbmRlbmNpZXNcbiAgICAgKiBAcGFyYW0ge0JpbmRpbmdQYXJ0fSBwYXJ0IEJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFByb3BlcnR5L3BhdGggdGhhdCB0cmlnZ2VyZWQgdGhpcyBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhc1BhdGhzIFRydWUgd2l0aCBgcHJvcHNgIGNvbnRhaW5zIG9uZSBvciBtb3JlIHBhdGhzXG4gICAgICogQHJldHVybiB7Kn0gVmFsdWUgdGhlIGJpbmRpbmcgcGFydCBldmFsdWF0ZWQgdG9cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2V2YWx1YXRlQmluZGluZyhpbnN0LCBwYXJ0LCBwYXRoLCBwcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gICAgICBsZXQgdmFsdWU7XG4gICAgICBpZiAocGFydC5zaWduYXR1cmUpIHtcbiAgICAgICAgdmFsdWUgPSBydW5NZXRob2RFZmZlY3QoaW5zdCwgcGF0aCwgcHJvcHMsIG9sZFByb3BzLCBwYXJ0LnNpZ25hdHVyZSk7XG4gICAgICB9IGVsc2UgaWYgKHBhdGggIT0gcGFydC5zb3VyY2UpIHtcbiAgICAgICAgdmFsdWUgPSBnZXQoaW5zdCwgcGFydC5zb3VyY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhhc1BhdGhzICYmIGlzUGF0aChwYXRoKSkge1xuICAgICAgICAgIHZhbHVlID0gZ2V0KGluc3QsIHBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gaW5zdC5fX2RhdGFbcGF0aF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0Lm5lZ2F0ZSkge1xuICAgICAgICB2YWx1ZSA9ICF2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBQcm9wZXJ0eUVmZmVjdHM7XG59KTtcblxuLyoqXG4gKiBIZWxwZXIgYXBpIGZvciBlbnF1ZXVpbmcgY2xpZW50IGRvbSBjcmVhdGVkIGJ5IGEgaG9zdCBlbGVtZW50LlxuICpcbiAqIEJ5IGRlZmF1bHQgZWxlbWVudHMgYXJlIGZsdXNoZWQgdmlhIGBfZmx1c2hQcm9wZXJ0aWVzYCB3aGVuXG4gKiBgY29ubmVjdGVkQ2FsbGJhY2tgIGlzIGNhbGxlZC4gRWxlbWVudHMgYXR0YWNoIHRoZWlyIGNsaWVudCBkb20gdG9cbiAqIHRoZW1zZWx2ZXMgYXQgYHJlYWR5YCB0aW1lIHdoaWNoIHJlc3VsdHMgZnJvbSB0aGlzIGZpcnN0IGZsdXNoLlxuICogVGhpcyBwcm92aWRlcyBhbiBvcmRlcmluZyBndWFyYW50ZWUgdGhhdCB0aGUgY2xpZW50IGRvbSBhbiBlbGVtZW50XG4gKiBjcmVhdGVzIGlzIGZsdXNoZWQgYmVmb3JlIHRoZSBlbGVtZW50IGl0c2VsZiAoaS5lLiBjbGllbnQgYHJlYWR5YFxuICogZmlyZXMgYmVmb3JlIGhvc3QgYHJlYWR5YCkuXG4gKlxuICogSG93ZXZlciwgaWYgYF9mbHVzaFByb3BlcnRpZXNgIGlzIGNhbGxlZCAqYmVmb3JlKiBhbiBlbGVtZW50IGlzIGNvbm5lY3RlZCxcbiAqIGFzIGZvciBleGFtcGxlIGBUZW1wbGF0aXplYCBkb2VzLCB0aGlzIG9yZGVyaW5nIGd1YXJhbnRlZSBjYW5ub3QgYmVcbiAqIHNhdGlzZmllZCBiZWNhdXNlIG5vIGVsZW1lbnRzIGFyZSBjb25uZWN0ZWQuIChOb3RlOiBCb3VuZCBlbGVtZW50cyB0aGF0XG4gKiByZWNlaXZlIGRhdGEgZG8gYmVjb21lIGVucXVldWVkIGNsaWVudHMgYW5kIGFyZSBwcm9wZXJseSBvcmRlcmVkIGJ1dFxuICogdW5ib3VuZCBlbGVtZW50cyBhcmUgbm90LilcbiAqXG4gKiBUbyBtYWludGFpbiB0aGUgZGVzaXJlZCBcImNsaWVudCBiZWZvcmUgaG9zdFwiIG9yZGVyaW5nIGd1YXJhbnRlZSBmb3IgdGhpc1xuICogY2FzZSB3ZSByZWx5IG9uIHRoZSBcImhvc3Qgc3RhY2suIENsaWVudCBub2RlcyByZWdpc3RlcnMgdGhlbXNlbHZlcyB3aXRoXG4gKiB0aGUgY3JlYXRpbmcgaG9zdCBlbGVtZW50IHdoZW4gY3JlYXRlZC4gVGhpcyBlbnN1cmVzIHRoYXQgYWxsIGNsaWVudCBkb21cbiAqIGlzIHJlYWRpZWQgaW4gdGhlIHByb3BlciBvcmRlciwgbWFpbnRhaW5pbmcgdGhlIGRlc2lyZWQgZ3VhcmFudGVlLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEhvc3RTdGFjayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IGluc3QgSW5zdGFuY2UgdG8gYWRkIHRvIGhvc3RTdGFja1xuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVnaXN0ZXJIb3N0KGluc3QpIHtcbiAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgIGxldCBob3N0ID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aC0xXTtcbiAgICAgIGhvc3QuX2VucXVldWVDbGllbnQoaW5zdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gaW5zdCBJbnN0YW5jZSB0byBiZWdpbiBob3N0aW5nXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBiZWdpbkhvc3RpbmcoaW5zdCkge1xuICAgIHRoaXMuc3RhY2sucHVzaChpbnN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IGluc3QgSW5zdGFuY2UgdG8gZW5kIGhvc3RpbmdcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGVuZEhvc3RpbmcoaW5zdCkge1xuICAgIGxldCBzdGFja0xlbiA9IHRoaXMuc3RhY2subGVuZ3RoO1xuICAgIGlmIChzdGFja0xlbiAmJiB0aGlzLnN0YWNrW3N0YWNrTGVuLTFdID09IGluc3QpIHtcbiAgICAgIHRoaXMuc3RhY2sucG9wKCk7XG4gICAgfVxuICB9XG59XG5jb25zdCBob3N0U3RhY2sgPSBuZXcgSG9zdFN0YWNrKCk7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKipcbiAqIFRvdGFsIG51bWJlciBvZiBQb2x5bWVyIGVsZW1lbnQgaW5zdGFuY2VzIGNyZWF0ZWQuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgbGV0IGluc3RhbmNlQ291bnQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5jcmVtZW50SW5zdGFuY2VDb3VudCgpIHtcbiAgaW5zdGFuY2VDb3VudCsrO1xufVxuXG4vKipcbiAqIEFycmF5IG9mIFBvbHltZXIgZWxlbWVudCBjbGFzc2VzIHRoYXQgaGF2ZSBiZWVuIGZpbmFsaXplZC5cbiAqIEB0eXBlIHshQXJyYXk8IVBvbHltZXJFbGVtZW50Q29uc3RydWN0b3I+fVxuICovXG5leHBvcnQgY29uc3QgcmVnaXN0cmF0aW9ucyA9IFtdO1xuXG4vKipcbiAqIEBwYXJhbSB7IVBvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9IHByb3RvdHlwZSBFbGVtZW50IHByb3RvdHlwZSB0byBsb2dcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9yZWdMb2cocHJvdG90eXBlKSB7XG4gIGNvbnNvbGUubG9nKCdbJyArIC8qKiBAdHlwZSB7P30gKi8ocHJvdG90eXBlKS5pcyArICddOiByZWdpc3RlcmVkJyk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY2xhc3MgcHJvdG90eXBlIGZvciB0ZWxlbWV0cnkgcHVycG9zZXMuXG4gKiBAcGFyYW0geyFQb2x5bWVyRWxlbWVudENvbnN0cnVjdG9yfSBwcm90b3R5cGUgRWxlbWVudCBwcm90b3R5cGUgdG8gcmVnaXN0ZXJcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKHByb3RvdHlwZSkge1xuICByZWdpc3RyYXRpb25zLnB1c2gocHJvdG90eXBlKTtcbn1cblxuLyoqXG4gKiBMb2dzIGFsbCBlbGVtZW50cyByZWdpc3RlcmVkIHdpdGggYW4gYGlzYCB0byB0aGUgY29uc29sZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGR1bXBSZWdpc3RyYXRpb25zKCkge1xuICByZWdpc3RyYXRpb25zLmZvckVhY2goX3JlZ0xvZyk7XG59IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5pbXBvcnQgeyByZWdpc3RlciwgaW5jcmVtZW50SW5zdGFuY2VDb3VudCB9IGZyb20gJy4uL3V0aWxzL3RlbGVtZXRyeS5qcyc7XG5pbXBvcnQgeyBQcm9wZXJ0aWVzQ2hhbmdlZCB9IGZyb20gJy4vcHJvcGVydGllcy1jaGFuZ2VkLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgY29weSBvZiBgcHJvcHNgIHdpdGggZWFjaCBwcm9wZXJ0eSBub3JtYWxpemVkIHN1Y2ggdGhhdFxuICogdXBncmFkZWQgaXQgaXMgYW4gb2JqZWN0IHdpdGggYXQgbGVhc3QgYSB0eXBlIHByb3BlcnR5IHsgdHlwZTogVHlwZX0uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIFByb3BlcnRpZXMgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJuIHtPYmplY3R9IENvcHkgb2YgaW5wdXQgYHByb3BzYCB3aXRoIG5vcm1hbGl6ZWQgcHJvcGVydGllcyB0aGF0XG4gKiBhcmUgaW4gdGhlIGZvcm0ge3R5cGU6IFR5cGV9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVQcm9wZXJ0aWVzKHByb3BzKSB7XG4gIGNvbnN0IG91dHB1dCA9IHt9O1xuICBmb3IgKGxldCBwIGluIHByb3BzKSB7XG4gICAgY29uc3QgbyA9IHByb3BzW3BdO1xuICAgIG91dHB1dFtwXSA9ICh0eXBlb2YgbyA9PT0gJ2Z1bmN0aW9uJykgPyB7dHlwZTogb30gOiBvO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbi8qKlxuICogTWl4aW4gdGhhdCBwcm92aWRlcyBhIG1pbmltYWwgc3RhcnRpbmcgcG9pbnQgdG8gdXNpbmcgdGhlIFByb3BlcnRpZXNDaGFuZ2VkXG4gKiBtaXhpbiBieSBwcm92aWRpbmcgYSBtZWNoYW5pc20gdG8gZGVjbGFyZSBwcm9wZXJ0aWVzIGluIGEgc3RhdGljXG4gKiBnZXR0ZXIgKGUuZy4gc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkgeyByZXR1cm4geyBmb286IFN0cmluZyB9IH0pLiBDaGFuZ2VzXG4gKiBhcmUgcmVwb3J0ZWQgdmlhIHRoZSBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBtZXRob2QuXG4gKlxuICogVGhpcyBtaXhpbiBwcm92aWRlcyBubyBzcGVjaWZpYyBzdXBwb3J0IGZvciByZW5kZXJpbmcuIFVzZXJzIGFyZSBleHBlY3RlZFxuICogdG8gY3JlYXRlIGEgU2hhZG93Um9vdCBhbmQgcHV0IGNvbnRlbnQgaW50byBpdCBhbmQgdXBkYXRlIGl0IGluIHdoYXRldmVyXG4gKiB3YXkgbWFrZXMgc2Vuc2UuIFRoaXMgY2FuIGJlIGRvbmUgaW4gcmVhY3Rpb24gdG8gcHJvcGVydGllcyBjaGFuZ2luZyBieVxuICogaW1wbGVtZW50aW5nIGBfcHJvcGVydGllc0NoYW5nZWRgLlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0aWVzQ2hhbmdlZFxuICogQHN1bW1hcnkgTWl4aW4gdGhhdCBwcm92aWRlcyBhIG1pbmltYWwgc3RhcnRpbmcgcG9pbnQgZm9yIHVzaW5nXG4gKiB0aGUgUHJvcGVydGllc0NoYW5nZWQgbWl4aW4gYnkgcHJvdmlkaW5nIGEgZGVjbGFyYXRpdmUgYHByb3BlcnRpZXNgIG9iamVjdC5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0aWVzTWl4aW4gPSBkZWR1cGluZ01peGluKHN1cGVyQ2xhc3MgPT4ge1xuXG4gLyoqXG4gICogQGNvbnN0cnVjdG9yXG4gICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydGllc0NoYW5nZWR9XG4gICogQHByaXZhdGVcbiAgKi9cbiBjb25zdCBiYXNlID0gUHJvcGVydGllc0NoYW5nZWQoc3VwZXJDbGFzcyk7XG5cbiAvKipcbiAgKiBSZXR1cm5zIHRoZSBzdXBlciBjbGFzcyBjb25zdHJ1Y3RvciBmb3IgdGhlIGdpdmVuIGNsYXNzLCBpZiBpdCBpcyBhblxuICAqIGluc3RhbmNlIG9mIHRoZSBQcm9wZXJ0aWVzTWl4aW4uXG4gICpcbiAgKiBAcGFyYW0geyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gY29uc3RydWN0b3IgUHJvcGVydGllc01peGluIGNvbnN0cnVjdG9yXG4gICogQHJldHVybiB7P1Byb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSBTdXBlciBjbGFzcyBjb25zdHJ1Y3RvclxuICAqL1xuIGZ1bmN0aW9uIHN1cGVyUHJvcGVydGllc0NsYXNzKGNvbnN0cnVjdG9yKSB7XG4gICBjb25zdCBzdXBlckN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY29uc3RydWN0b3IpO1xuXG4gICAvLyBOb3RlLCB0aGUgYFByb3BlcnRpZXNNaXhpbmAgY2xhc3MgYmVsb3cgb25seSByZWZlcnMgdG8gdGhlIGNsYXNzXG4gICAvLyBnZW5lcmF0ZWQgYnkgdGhpcyBjYWxsIHRvIHRoZSBtaXhpbjsgdGhlIGluc3RhbmNlb2YgdGVzdCBvbmx5IHdvcmtzXG4gICAvLyBiZWNhdXNlIHRoZSBtaXhpbiBpcyBkZWR1cGVkIGFuZCBndWFyYW50ZWVkIG9ubHkgdG8gYXBwbHkgb25jZSwgaGVuY2VcbiAgIC8vIGFsbCBjb25zdHJ1Y3RvcnMgaW4gYSBwcm90byBjaGFpbiB3aWxsIHNlZSB0aGUgc2FtZSBgUHJvcGVydGllc01peGluYFxuICAgcmV0dXJuIChzdXBlckN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgUHJvcGVydGllc01peGluKSA/XG4gICAgIC8qKiBAdHlwZSB7IVByb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSAqLyAoc3VwZXJDdG9yKSA6IG51bGw7XG4gfVxuXG4gLyoqXG4gICogUmV0dXJucyBhIG1lbW9pemVkIHZlcnNpb24gb2YgdGhlIGBwcm9wZXJ0aWVzYCBvYmplY3QgZm9yIHRoZVxuICAqIGdpdmVuIGNsYXNzLiBQcm9wZXJ0aWVzIG5vdCBpbiBvYmplY3QgZm9ybWF0IGFyZSBjb252ZXJ0ZWQgdG8gYXRcbiAgKiBsZWFzdCB7dHlwZX0uXG4gICpcbiAgKiBAcGFyYW0ge1Byb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvciBQcm9wZXJ0aWVzTWl4aW4gY29uc3RydWN0b3JcbiAgKiBAcmV0dXJuIHtPYmplY3R9IE1lbW9pemVkIHByb3BlcnRpZXMgb2JqZWN0XG4gICovXG4gZnVuY3Rpb24gb3duUHJvcGVydGllcyhjb25zdHJ1Y3Rvcikge1xuICAgaWYgKCFjb25zdHJ1Y3Rvci5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX293blByb3BlcnRpZXMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgIGxldCBwcm9wcyA9IG51bGw7XG5cbiAgICAgaWYgKGNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3Byb3BlcnRpZXMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgY29uc3QgcHJvcGVydGllcyA9IGNvbnN0cnVjdG9yLnByb3BlcnRpZXM7XG5cbiAgICAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBwcm9wcyA9IG5vcm1hbGl6ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgfVxuICAgICB9XG5cbiAgICAgY29uc3RydWN0b3IuX19vd25Qcm9wZXJ0aWVzID0gcHJvcHM7XG4gICB9XG4gICByZXR1cm4gY29uc3RydWN0b3IuX19vd25Qcm9wZXJ0aWVzO1xuIH1cblxuIC8qKlxuICAqIEBwb2x5bWVyXG4gICogQG1peGluQ2xhc3NcbiAgKiBAZXh0ZW5kcyB7YmFzZX1cbiAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzTWl4aW59XG4gICogQHVucmVzdHJpY3RlZFxuICAqL1xuIGNsYXNzIFByb3BlcnRpZXNNaXhpbiBleHRlbmRzIGJhc2Uge1xuXG4gICAvKipcbiAgICAqIEltcGxlbWVudHMgc3RhbmRhcmQgY3VzdG9tIGVsZW1lbnRzIGdldHRlciB0byBvYnNlcnZlcyB0aGUgYXR0cmlidXRlc1xuICAgICogbGlzdGVkIGluIGBwcm9wZXJ0aWVzYC5cbiAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX29ic2VydmVkQXR0cmlidXRlcycsIHRoaXMpKSkge1xuICAgICAgIHJlZ2lzdGVyKHRoaXMucHJvdG90eXBlKTtcbiAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMuX3Byb3BlcnRpZXM7XG4gICAgICAgdGhpcy5fX29ic2VydmVkQXR0cmlidXRlcyA9IHByb3BzID8gT2JqZWN0LmtleXMocHJvcHMpLm1hcChwID0+IHRoaXMuYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHApKSA6IFtdO1xuICAgICB9XG4gICAgIHJldHVybiB0aGlzLl9fb2JzZXJ2ZWRBdHRyaWJ1dGVzO1xuICAgfVxuXG4gICAvKipcbiAgICAqIEZpbmFsaXplcyBhbiBlbGVtZW50IGRlZmluaXRpb24sIGluY2x1ZGluZyBlbnN1cmluZyBhbnkgc3VwZXIgY2xhc3Nlc1xuICAgICogYXJlIGFsc28gZmluYWxpemVkLiBUaGlzIGluY2x1ZGVzIGVuc3VyaW5nIHByb3BlcnR5XG4gICAgKiBhY2Nlc3NvcnMgZXhpc3Qgb24gdGhlIGVsZW1lbnQgcHJvdG90eXBlLiBUaGlzIG1ldGhvZCBjYWxsc1xuICAgICogYF9maW5hbGl6ZUNsYXNzYCB0byBmaW5hbGl6ZSBlYWNoIGNvbnN0cnVjdG9yIGluIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIGZpbmFsaXplKCkge1xuICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19maW5hbGl6ZWQnLCB0aGlzKSkpIHtcbiAgICAgICBjb25zdCBzdXBlckN0b3IgPSBzdXBlclByb3BlcnRpZXNDbGFzcygvKiogQHR5cGUgeyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gKi8odGhpcykpO1xuICAgICAgIGlmIChzdXBlckN0b3IpIHtcbiAgICAgICAgIHN1cGVyQ3Rvci5maW5hbGl6ZSgpO1xuICAgICAgIH1cbiAgICAgICB0aGlzLl9fZmluYWxpemVkID0gdHJ1ZTtcbiAgICAgICB0aGlzLl9maW5hbGl6ZUNsYXNzKCk7XG4gICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgKiBGaW5hbGl6ZSBhbiBlbGVtZW50IGNsYXNzLiBUaGlzIGluY2x1ZGVzIGVuc3VyaW5nIHByb3BlcnR5XG4gICAgKiBhY2Nlc3NvcnMgZXhpc3Qgb24gdGhlIGVsZW1lbnQgcHJvdG90eXBlLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnlcbiAgICAqIGBmaW5hbGl6ZWAgYW5kIGZpbmFsaXplcyB0aGUgY2xhc3MgY29uc3RydWN0b3IuXG4gICAgKlxuICAgICogQHByb3RlY3RlZFxuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIF9maW5hbGl6ZUNsYXNzKCkge1xuICAgICBjb25zdCBwcm9wcyA9IG93blByb3BlcnRpZXMoLyoqIEB0eXBlIHshUHJvcGVydGllc01peGluQ29uc3RydWN0b3J9ICovKHRoaXMpKTtcbiAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgLyoqIEB0eXBlIHs/fSAqLyAodGhpcykuY3JlYXRlUHJvcGVydGllcyhwcm9wcyk7XG4gICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgKiBSZXR1cm5zIGEgbWVtb2l6ZWQgdmVyc2lvbiBvZiBhbGwgcHJvcGVydGllcywgaW5jbHVkaW5nIHRob3NlIGluaGVyaXRlZFxuICAgICogZnJvbSBzdXBlciBjbGFzc2VzLiBQcm9wZXJ0aWVzIG5vdCBpbiBvYmplY3QgZm9ybWF0IGFyZSBjb252ZXJ0ZWQgdG9cbiAgICAqIGF0IGxlYXN0IHt0eXBlfS5cbiAgICAqXG4gICAgKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgZm9yIHRoaXMgY2xhc3NcbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEBub2NvbGxhcHNlXG4gICAgKi9cbiAgIHN0YXRpYyBnZXQgX3Byb3BlcnRpZXMoKSB7XG4gICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcbiAgICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX3Byb3BlcnRpZXMnLCB0aGlzKSkpIHtcbiAgICAgICBjb25zdCBzdXBlckN0b3IgPSBzdXBlclByb3BlcnRpZXNDbGFzcygvKiogQHR5cGUgeyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gKi8odGhpcykpO1xuICAgICAgIHRoaXMuX19wcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSxcbiAgICAgICAgIHN1cGVyQ3RvciAmJiBzdXBlckN0b3IuX3Byb3BlcnRpZXMsXG4gICAgICAgICBvd25Qcm9wZXJ0aWVzKC8qKiBAdHlwZSB7UHJvcGVydGllc01peGluQ29uc3RydWN0b3J9ICovKHRoaXMpKSk7XG4gICAgIH1cbiAgICAgcmV0dXJuIHRoaXMuX19wcm9wZXJ0aWVzO1xuICAgfVxuXG4gICAvKipcbiAgICAqIE92ZXJyaWRlcyBgUHJvcGVydGllc0NoYW5nZWRgIG1ldGhvZCB0byByZXR1cm4gdHlwZSBzcGVjaWZpZWQgaW4gdGhlXG4gICAgKiBzdGF0aWMgYHByb3BlcnRpZXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBwcm9wZXJ0eVxuICAgICogQHJldHVybiB7Kn0gVHlwZSB0byB3aGljaCB0byBkZXNlcmlhbGl6ZSBhdHRyaWJ1dGVcbiAgICAqXG4gICAgKiBAcHJvdGVjdGVkXG4gICAgKiBAbm9jb2xsYXBzZVxuICAgICovXG4gICBzdGF0aWMgdHlwZUZvclByb3BlcnR5KG5hbWUpIHtcbiAgICAgY29uc3QgaW5mbyA9IHRoaXMuX3Byb3BlcnRpZXNbbmFtZV07XG4gICAgIHJldHVybiBpbmZvICYmIGluZm8udHlwZTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiBPdmVycmlkZXMgYFByb3BlcnRpZXNDaGFuZ2VkYCBtZXRob2QgYW5kIGFkZHMgYSBjYWxsIHRvXG4gICAgKiBgZmluYWxpemVgIHdoaWNoIGxhemlseSBjb25maWd1cmVzIHRoZSBlbGVtZW50J3MgcHJvcGVydHkgYWNjZXNzb3JzLlxuICAgICogQG92ZXJyaWRlXG4gICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICovXG4gICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgIGluY3JlbWVudEluc3RhbmNlQ291bnQoKTtcbiAgICAgdGhpcy5jb25zdHJ1Y3Rvci5maW5hbGl6ZSgpO1xuICAgICBzdXBlci5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiBDYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBpcyBhZGRlZCB0byBhIGRvY3VtZW50LlxuICAgICogQ2FsbHMgYF9lbmFibGVQcm9wZXJ0aWVzYCB0byB0dXJuIG9uIHByb3BlcnR5IHN5c3RlbSBmcm9tXG4gICAgKiBgUHJvcGVydGllc0NoYW5nZWRgLlxuICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gU3VwZXIgbWF5IG9yIG1heSBub3QgaW1wbGVtZW50IHRoZSBjYWxsYmFja1xuICAgICogQHJldHVybiB7dm9pZH1cbiAgICAqIEBvdmVycmlkZVxuICAgICovXG4gICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgaWYgKHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgfVxuICAgICB0aGlzLl9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICB9XG5cbiAgIC8qKlxuICAgICogQ2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGEgZG9jdW1lbnRcbiAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IFN1cGVyIG1heSBvciBtYXkgbm90IGltcGxlbWVudCB0aGUgY2FsbGJhY2tcbiAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgKiBAb3ZlcnJpZGVcbiAgICAqL1xuICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgIGlmIChzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgIH1cbiAgIH1cblxuIH1cblxuIHJldHVybiBQcm9wZXJ0aWVzTWl4aW47XG5cbn0pO1xuIiwiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBAc3VwcHJlc3Mge2NoZWNrUHJvdG90eXBhbFR5cGVzfVxuICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmRcbiAqIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXlcbiAqIGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnlcbiAqIEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVBcbiAqIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcblxuaW1wb3J0IHsgcm9vdFBhdGgsIHN0cmljdFRlbXBsYXRlUG9saWN5LCBhbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSwgbGVnYWN5T3B0aW1pemF0aW9ucywgc3luY0luaXRpYWxSZW5kZXIgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy5qcyc7XG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgc3R5bGVzRnJvbVRlbXBsYXRlLCBzdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLWdhdGhlci5qcyc7XG5pbXBvcnQgeyBwYXRoRnJvbVVybCwgcmVzb2x2ZUNzcywgcmVzb2x2ZVVybCB9IGZyb20gJy4uL3V0aWxzL3Jlc29sdmUtdXJsLmpzJztcbmltcG9ydCB7IERvbU1vZHVsZSB9IGZyb20gJy4uL2VsZW1lbnRzL2RvbS1tb2R1bGUuanMnO1xuaW1wb3J0IHsgUHJvcGVydHlFZmZlY3RzIH0gZnJvbSAnLi9wcm9wZXJ0eS1lZmZlY3RzLmpzJztcbmltcG9ydCB7IFByb3BlcnRpZXNNaXhpbiB9IGZyb20gJy4vcHJvcGVydGllcy1taXhpbi5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi4vdXRpbHMvd3JhcC5qcyc7XG5cbi8qKlxuICogQ3VycmVudCBQb2x5bWVyIHZlcnNpb24gaW4gU2VtdmVyIG5vdGF0aW9uLlxuICogQHR5cGUge3N0cmluZ30gU2VtdmVyIG5vdGF0aW9uIG9mIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgUG9seW1lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAnMy4zLjEnO1xuXG5jb25zdCBidWlsdENTUyA9IHdpbmRvdy5TaGFkeUNTUyAmJiB3aW5kb3cuU2hhZHlDU1NbJ2Nzc0J1aWxkJ107XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIHRoZSBjb3JlIEFQSSBmb3IgUG9seW1lcidzIG1ldGEtcHJvZ3JhbW1pbmdcbiAqIGZlYXR1cmVzIGluY2x1ZGluZyB0ZW1wbGF0ZSBzdGFtcGluZywgZGF0YS1iaW5kaW5nLCBhdHRyaWJ1dGUgZGVzZXJpYWxpemF0aW9uLFxuICogYW5kIHByb3BlcnR5IGNoYW5nZSBvYnNlcnZhdGlvbi5cbiAqXG4gKiBTdWJjbGFzc2VycyBtYXkgcHJvdmlkZSB0aGUgZm9sbG93aW5nIHN0YXRpYyBnZXR0ZXJzIHRvIHJldHVybiBtZXRhZGF0YVxuICogdXNlZCB0byBjb25maWd1cmUgUG9seW1lcidzIGZlYXR1cmVzIGZvciB0aGUgY2xhc3M6XG4gKlxuICogLSBgc3RhdGljIGdldCBpcygpYDogV2hlbiB0aGUgdGVtcGxhdGUgaXMgcHJvdmlkZWQgdmlhIGEgYGRvbS1tb2R1bGVgLFxuICogICB1c2VycyBzaG91bGQgcmV0dXJuIHRoZSBgZG9tLW1vZHVsZWAgaWQgZnJvbSBhIHN0YXRpYyBgaXNgIGdldHRlci4gIElmXG4gKiAgIG5vIHRlbXBsYXRlIGlzIG5lZWRlZCBvciB0aGUgdGVtcGxhdGUgaXMgcHJvdmlkZWQgZGlyZWN0bHkgdmlhIHRoZVxuICogICBgdGVtcGxhdGVgIGdldHRlciwgdGhlcmUgaXMgbm8gbmVlZCB0byBkZWZpbmUgYGlzYCBmb3IgdGhlIGVsZW1lbnQuXG4gKlxuICogLSBgc3RhdGljIGdldCB0ZW1wbGF0ZSgpYDogVXNlcnMgbWF5IHByb3ZpZGUgdGhlIHRlbXBsYXRlIGRpcmVjdGx5IChhc1xuICogICBvcHBvc2VkIHRvIHZpYSBgZG9tLW1vZHVsZWApIGJ5IGltcGxlbWVudGluZyBhIHN0YXRpYyBgdGVtcGxhdGVgIGdldHRlci5cbiAqICAgVGhlIGdldHRlciBtdXN0IHJldHVybiBhbiBgSFRNTFRlbXBsYXRlRWxlbWVudGAuXG4gKlxuICogLSBgc3RhdGljIGdldCBwcm9wZXJ0aWVzKClgOiBTaG91bGQgcmV0dXJuIGFuIG9iamVjdCBkZXNjcmliaW5nXG4gKiAgIHByb3BlcnR5LXJlbGF0ZWQgbWV0YWRhdGEgdXNlZCBieSBQb2x5bWVyIGZlYXR1cmVzIChrZXk6IHByb3BlcnR5IG5hbWVcbiAqICAgdmFsdWU6IG9iamVjdCBjb250YWluaW5nIHByb3BlcnR5IG1ldGFkYXRhKS4gVmFsaWQga2V5cyBpbiBwZXItcHJvcGVydHlcbiAqICAgbWV0YWRhdGEgaW5jbHVkZTpcbiAqICAgLSBgdHlwZWAgKFN0cmluZ3xOdW1iZXJ8T2JqZWN0fEFycmF5fC4uLik6IFVzZWQgYnlcbiAqICAgICBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCB0byBkZXRlcm1pbmUgaG93IHN0cmluZy1iYXNlZCBhdHRyaWJ1dGVzXG4gKiAgICAgYXJlIGRlc2VyaWFsaXplZCB0byBKYXZhU2NyaXB0IHByb3BlcnR5IHZhbHVlcy5cbiAqICAgLSBgbm90aWZ5YCAoYm9vbGVhbik6IENhdXNlcyBhIGNoYW5nZSBpbiB0aGUgcHJvcGVydHkgdG8gZmlyZSBhXG4gKiAgICAgbm9uLWJ1YmJsaW5nIGV2ZW50IGNhbGxlZCBgPHByb3BlcnR5Pi1jaGFuZ2VkYC4gRWxlbWVudHMgdGhhdCBoYXZlXG4gKiAgICAgZW5hYmxlZCB0d28td2F5IGJpbmRpbmcgdG8gdGhlIHByb3BlcnR5IHVzZSB0aGlzIGV2ZW50IHRvIG9ic2VydmUgY2hhbmdlcy5cbiAqICAgLSBgcmVhZE9ubHlgIChib29sZWFuKTogQ3JlYXRlcyBhIGdldHRlciBmb3IgdGhlIHByb3BlcnR5LCBidXQgbm8gc2V0dGVyLlxuICogICAgIFRvIHNldCBhIHJlYWQtb25seSBwcm9wZXJ0eSwgdXNlIHRoZSBwcml2YXRlIHNldHRlciBtZXRob2RcbiAqICAgICBgX3NldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSlgLlxuICogICAtIGBvYnNlcnZlcmAgKHN0cmluZyk6IE9ic2VydmVyIG1ldGhvZCBuYW1lIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlblxuICogICAgIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLiBUaGUgYXJndW1lbnRzIG9mIHRoZSBtZXRob2QgYXJlXG4gKiAgICAgYCh2YWx1ZSwgcHJldmlvdXNWYWx1ZSlgLlxuICogICAtIGBjb21wdXRlZGAgKHN0cmluZyk6IFN0cmluZyBkZXNjcmliaW5nIG1ldGhvZCBhbmQgZGVwZW5kZW50IHByb3BlcnRpZXNcbiAqICAgICBmb3IgY29tcHV0aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IChlLmcuIGAnY29tcHV0ZUZvbyhiYXIsIHpvdCknYCkuXG4gKiAgICAgQ29tcHV0ZWQgcHJvcGVydGllcyBhcmUgcmVhZC1vbmx5IGJ5IGRlZmF1bHQgYW5kIGNhbiBvbmx5IGJlIGNoYW5nZWRcbiAqICAgICB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgY29tcHV0aW5nIG1ldGhvZC5cbiAqXG4gKiAtIGBzdGF0aWMgZ2V0IG9ic2VydmVycygpYDogQXJyYXkgb2Ygc3RyaW5ncyBkZXNjcmliaW5nIG11bHRpLXByb3BlcnR5XG4gKiAgIG9ic2VydmVyIG1ldGhvZHMgYW5kIHRoZWlyIGRlcGVuZGVudCBwcm9wZXJ0aWVzIChlLmcuXG4gKiAgIGAnb2JzZXJ2ZUFCQyhhLCBiLCBjKSdgKS5cbiAqXG4gKiBUaGUgYmFzZSBjbGFzcyBwcm92aWRlcyBkZWZhdWx0IGltcGxlbWVudGF0aW9ucyBmb3IgdGhlIGZvbGxvd2luZyBzdGFuZGFyZFxuICogY3VzdG9tIGVsZW1lbnQgbGlmZWN5Y2xlIGNhbGxiYWNrczsgdXNlcnMgbWF5IG92ZXJyaWRlIHRoZXNlLCBidXQgc2hvdWxkXG4gKiBjYWxsIHRoZSBzdXBlciBtZXRob2QgdG8gZW5zdXJlXG4gKiAtIGBjb25zdHJ1Y3RvcmA6IFJ1biB3aGVuIHRoZSBlbGVtZW50IGlzIGNyZWF0ZWQgb3IgdXBncmFkZWRcbiAqIC0gYGNvbm5lY3RlZENhbGxiYWNrYDogUnVuIGVhY2ggdGltZSB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gdGhlXG4gKiAgIGRvY3VtZW50XG4gKiAtIGBkaXNjb25uZWN0ZWRDYWxsYmFja2A6IFJ1biBlYWNoIHRpbWUgdGhlIGVsZW1lbnQgaXMgZGlzY29ubmVjdGVkIGZyb21cbiAqICAgdGhlIGRvY3VtZW50XG4gKiAtIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgOiBSdW4gZWFjaCB0aW1lIGFuIGF0dHJpYnV0ZSBpblxuICogICBgb2JzZXJ2ZWRBdHRyaWJ1dGVzYCBpcyBzZXQgb3IgcmVtb3ZlZCAobm90ZTogdGhpcyBlbGVtZW50J3MgZGVmYXVsdFxuICogICBgb2JzZXJ2ZWRBdHRyaWJ1dGVzYCBpbXBsZW1lbnRhdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmV0dXJuIGFuIGFycmF5XG4gKiAgIG9mIGRhc2gtY2FzZWQgYXR0cmlidXRlcyBiYXNlZCBvbiBgcHJvcGVydGllc2ApXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5RWZmZWN0c1xuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0aWVzTWl4aW5cbiAqIEBwcm9wZXJ0eSByb290UGF0aCB7c3RyaW5nfSBTZXQgdG8gdGhlIHZhbHVlIG9mIGByb290UGF0aGAsXG4gKiAgIHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBtYWluIGRvY3VtZW50IHBhdGhcbiAqIEBwcm9wZXJ0eSBpbXBvcnRQYXRoIHtzdHJpbmd9IFNldCB0byB0aGUgdmFsdWUgb2YgdGhlIGNsYXNzJ3Mgc3RhdGljXG4gKiAgIGBpbXBvcnRQYXRoYCBwcm9wZXJ0eSwgd2hpY2ggZGVmYXVsdHMgdG8gdGhlIHBhdGggb2YgdGhpcyBlbGVtZW50J3NcbiAqICAgYGRvbS1tb2R1bGVgICh3aGVuIGBpc2AgaXMgdXNlZCksIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlbiBmb3Igb3RoZXJcbiAqICAgaW1wb3J0IHN0cmF0ZWdpZXMuXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgdGhlIGNvcmUgQVBJIGZvciBQb2x5bWVyJ3NcbiAqIG1ldGEtcHJvZ3JhbW1pbmcgZmVhdHVyZXMuXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3Mgd2l0aCBtaXhpbiBhcHBsaWVkLlxuICovXG5leHBvcnQgY29uc3QgRWxlbWVudE1peGluID0gZGVkdXBpbmdNaXhpbihiYXNlID0+IHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9XG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1Byb3BlcnRpZXNNaXhpbn1cbiAgICogQGV4dGVuZHMge0hUTUxFbGVtZW50fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3QgcG9seW1lckVsZW1lbnRCYXNlID0gUHJvcGVydGllc01peGluKFByb3BlcnR5RWZmZWN0cyhiYXNlKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIHByb3BlcnRpZXMgd2l0aCBkZWZhdWx0IHZhbHVlcy5cbiAgICogVGhpcyBsaXN0IGlzIGNyZWF0ZWQgYXMgYW4gb3B0aW1pemF0aW9uIHNpbmNlIGl0IGlzIGEgc3Vic2V0IG9mXG4gICAqIHRoZSBsaXN0IHJldHVybmVkIGZyb20gYF9wcm9wZXJ0aWVzYC5cbiAgICogVGhpcyBsaXN0IGlzIHVzZWQgaW4gYF9pbml0aWFsaXplUHJvcGVydGllc2AgdG8gc2V0IHByb3BlcnR5IGRlZmF1bHRzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9IGNvbnN0cnVjdG9yIEVsZW1lbnQgY2xhc3NcbiAgICogQHJldHVybiB7UG9seW1lckVsZW1lbnRQcm9wZXJ0aWVzfSBGbGF0dGVuZWQgcHJvcGVydGllcyBmb3IgdGhpcyBjbGFzc1xuICAgKiAgIHRoYXQgaGF2ZSBkZWZhdWx0IHZhbHVlc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gcHJvcGVydHlEZWZhdWx0cyhjb25zdHJ1Y3Rvcikge1xuICAgIGlmICghY29uc3RydWN0b3IuaGFzT3duUHJvcGVydHkoXG4gICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX3Byb3BlcnR5RGVmYXVsdHMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgICBjb25zdHJ1Y3Rvci5fX3Byb3BlcnR5RGVmYXVsdHMgPSBudWxsO1xuICAgICAgbGV0IHByb3BzID0gY29uc3RydWN0b3IuX3Byb3BlcnRpZXM7XG4gICAgICBmb3IgKGxldCBwIGluIHByb3BzKSB7XG4gICAgICAgIGxldCBpbmZvID0gcHJvcHNbcF07XG4gICAgICAgIGlmICgndmFsdWUnIGluIGluZm8pIHtcbiAgICAgICAgICBjb25zdHJ1Y3Rvci5fX3Byb3BlcnR5RGVmYXVsdHMgPSBjb25zdHJ1Y3Rvci5fX3Byb3BlcnR5RGVmYXVsdHMgfHwge307XG4gICAgICAgICAgY29uc3RydWN0b3IuX19wcm9wZXJ0eURlZmF1bHRzW3BdID0gaW5mbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uc3RydWN0b3IuX19wcm9wZXJ0eURlZmF1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtZW1vaXplZCB2ZXJzaW9uIG9mIHRoZSBgb2JzZXJ2ZXJzYCBhcnJheS5cbiAgICogQHBhcmFtIHtQb2x5bWVyRWxlbWVudENvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvciBFbGVtZW50IGNsYXNzXG4gICAqIEByZXR1cm4ge0FycmF5fSBBcnJheSBjb250YWluaW5nIG93biBvYnNlcnZlcnMgZm9yIHRoZSBnaXZlbiBjbGFzc1xuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBmdW5jdGlvbiBvd25PYnNlcnZlcnMoY29uc3RydWN0b3IpIHtcbiAgICBpZiAoIWNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KFxuICAgICAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19vd25PYnNlcnZlcnMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgICBjb25zdHJ1Y3Rvci5fX293bk9ic2VydmVycyA9XG4gICAgICAgICAgY29uc3RydWN0b3IuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgICAgIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ29ic2VydmVycycsIGNvbnN0cnVjdG9yKSkgP1xuICAgICAgICAgIC8qKiBAdHlwZSB7UG9seW1lckVsZW1lbnRDb25zdHJ1Y3Rvcn0gKi8gKGNvbnN0cnVjdG9yKS5vYnNlcnZlcnMgOlxuICAgICAgICAgIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjb25zdHJ1Y3Rvci5fX293bk9ic2VydmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGVmZmVjdHMgZm9yIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIE5vdGUsIG9uY2UgYSBwcm9wZXJ0eSBoYXMgYmVlbiBzZXQgdG9cbiAgICogYHJlYWRPbmx5YCwgYGNvbXB1dGVkYCwgYHJlZmxlY3RUb0F0dHJpYnV0ZWAsIG9yIGBub3RpZnlgXG4gICAqIHRoZXNlIHZhbHVlcyBtYXkgbm90IGJlIGNoYW5nZWQuIEZvciBleGFtcGxlLCBhIHN1YmNsYXNzIGNhbm5vdFxuICAgKiBhbHRlciB0aGVzZSBzZXR0aW5ncy4gSG93ZXZlciwgYWRkaXRpb25hbCBgb2JzZXJ2ZXJzYCBtYXkgYmUgYWRkZWRcbiAgICogYnkgc3ViY2xhc3Nlcy5cbiAgICpcbiAgICogVGhlIGluZm8gb2JqZWN0IHNob3VsZCBjb250YWluIHByb3BlcnR5IG1ldGFkYXRhIGFzIGZvbGxvd3M6XG4gICAqXG4gICAqICogYHR5cGVgOiB7ZnVuY3Rpb259IHR5cGUgdG8gd2hpY2ggYW4gYXR0cmlidXRlIG1hdGNoaW5nIHRoZSBwcm9wZXJ0eVxuICAgKiBpcyBkZXNlcmlhbGl6ZWQuIE5vdGUgdGhlIHByb3BlcnR5IGlzIGNhbWVsLWNhc2VkIGZyb20gYSBkYXNoLWNhc2VkXG4gICAqIGF0dHJpYnV0ZS4gRm9yIGV4YW1wbGUsICdmb28tYmFyJyBhdHRyaWJ1dGUgaXMgZGVzZXJpYWxpemVkIHRvIGFcbiAgICogcHJvcGVydHkgbmFtZWQgJ2Zvb0JhcicuXG4gICAqXG4gICAqICogYHJlYWRPbmx5YDoge2Jvb2xlYW59IGNyZWF0ZXMgYSByZWFkT25seSBwcm9wZXJ0eSBhbmRcbiAgICogbWFrZXMgYSBwcml2YXRlIHNldHRlciBmb3IgdGhlIHByaXZhdGUgb2YgdGhlIGZvcm0gJ19zZXRGb28nIGZvciBhXG4gICAqIHByb3BlcnR5ICdmb28nLFxuICAgKlxuICAgKiAqIGBjb21wdXRlZGA6IHtzdHJpbmd9IGNyZWF0ZXMgYSBjb21wdXRlZCBwcm9wZXJ0eS4gQSBjb21wdXRlZCBwcm9wZXJ0eVxuICAgKiBpcyBhbHNvIGF1dG9tYXRpY2FsbHkgc2V0IHRvIGByZWFkT25seTogdHJ1ZWAuIFRoZSB2YWx1ZSBpcyBjYWxjdWxhdGVkXG4gICAqIGJ5IHJ1bm5pbmcgYSBtZXRob2QgYW5kIGFyZ3VtZW50cyBwYXJzZWQgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLiBGb3JcbiAgICogZXhhbXBsZSAnY29tcHV0ZShmb28pJyB3aWxsIGNvbXB1dGUgYSBnaXZlbiBwcm9wZXJ0eSB3aGVuIHRoZVxuICAgKiAnZm9vJyBwcm9wZXJ0eSBjaGFuZ2VzIGJ5IGV4ZWN1dGluZyB0aGUgJ2NvbXB1dGUnIG1ldGhvZC4gVGhpcyBtZXRob2RcbiAgICogbXVzdCByZXR1cm4gdGhlIGNvbXB1dGVkIHZhbHVlLlxuICAgKlxuICAgKiAqIGByZWZsZWN0VG9BdHRyaWJ1dGVgOiB7Ym9vbGVhbn0gSWYgdHJ1ZSwgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHJlZmxlY3RlZFxuICAgKiB0byBhbiBhdHRyaWJ1dGUgb2YgdGhlIHNhbWUgbmFtZS4gTm90ZSwgdGhlIGF0dHJpYnV0ZSBpcyBkYXNoLWNhc2VkXG4gICAqIHNvIGEgcHJvcGVydHkgbmFtZWQgJ2Zvb0JhcicgaXMgcmVmbGVjdGVkIGFzICdmb28tYmFyJy5cbiAgICpcbiAgICogKiBgbm90aWZ5YDoge2Jvb2xlYW59IHNlbmRzIGEgbm9uLWJ1YmJsaW5nIG5vdGlmaWNhdGlvbiBldmVudCB3aGVuXG4gICAqIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSBwcm9wZXJ0eSBuYW1lZCAnZm9vJyBzZW5kcyBhblxuICAgKiBldmVudCBuYW1lZCAnZm9vLWNoYW5nZWQnIHdpdGggYGV2ZW50LmRldGFpbGAgc2V0IHRvIHRoZSB2YWx1ZSBvZlxuICAgKiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqICogb2JzZXJ2ZXI6IHtzdHJpbmd9IG5hbWUgb2YgYSBtZXRob2QgdGhhdCBydW5zIHdoZW4gdGhlIHByb3BlcnR5XG4gICAqIGNoYW5nZXMuIFRoZSBhcmd1bWVudHMgb2YgdGhlIG1ldGhvZCBhcmUgKHZhbHVlLCBwcmV2aW91c1ZhbHVlKS5cbiAgICpcbiAgICogTm90ZTogVXNlcnMgbWF5IHdhbnQgY29udHJvbCBvdmVyIG1vZGlmeWluZyBwcm9wZXJ0eVxuICAgKiBlZmZlY3RzIHZpYSBzdWJjbGFzc2luZy4gRm9yIGV4YW1wbGUsIGEgdXNlciBtaWdodCB3YW50IHRvIG1ha2UgYVxuICAgKiByZWZsZWN0VG9BdHRyaWJ1dGUgcHJvcGVydHkgbm90IGRvIHNvIGluIGEgc3ViY2xhc3MuIFdlJ3ZlIGNob3NlbiB0b1xuICAgKiBkaXNhYmxlIHRoaXMgYmVjYXVzZSBpdCBsZWFkcyB0byBhZGRpdGlvbmFsIGNvbXBsaWNhdGlvbi5cbiAgICogRm9yIGV4YW1wbGUsIGEgcmVhZE9ubHkgZWZmZWN0IGdlbmVyYXRlcyBhIHNwZWNpYWwgc2V0dGVyLiBJZiBhIHN1YmNsYXNzXG4gICAqIGRpc2FibGVzIHRoZSBlZmZlY3QsIHRoZSBzZXR0ZXIgd291bGQgZmFpbCB1bmV4cGVjdGVkbHkuXG4gICAqIEJhc2VkIG9uIGZlZWRiYWNrLCB3ZSBtYXkgd2FudCB0byB0cnkgdG8gbWFrZSBlZmZlY3RzIG1vcmUgbWFsbGVhYmxlXG4gICAqIGFuZC9vciBwcm92aWRlIGFuIGFkdmFuY2VkIGFwaSBmb3IgbWFuaXB1bGF0aW5nIHRoZW0uXG4gICAqXG4gICAqIEBwYXJhbSB7IVBvbHltZXJFbGVtZW50fSBwcm90byBFbGVtZW50IGNsYXNzIHByb3RvdHlwZSB0byBhZGQgYWNjZXNzb3JzXG4gICAqICAgYW5kIGVmZmVjdHMgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbmZvIEluZm8gb2JqZWN0IGZyb20gd2hpY2ggdG8gY3JlYXRlIHByb3BlcnR5IGVmZmVjdHMuXG4gICAqIFN1cHBvcnRlZCBrZXlzOlxuICAgKiBAcGFyYW0ge09iamVjdH0gYWxsUHJvcHMgRmxhdHRlbmVkIG1hcCBvZiBhbGwgcHJvcGVydGllcyBkZWZpbmVkIGluIHRoaXNcbiAgICogICBlbGVtZW50IChpbmNsdWRpbmcgaW5oZXJpdGVkIHByb3BlcnRpZXMpXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVQcm9wZXJ0eUZyb21Db25maWcocHJvdG8sIG5hbWUsIGluZm8sIGFsbFByb3BzKSB7XG4gICAgLy8gY29tcHV0ZWQgZm9yY2VzIHJlYWRPbmx5Li4uXG4gICAgaWYgKGluZm8uY29tcHV0ZWQpIHtcbiAgICAgIGluZm8ucmVhZE9ubHkgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBOb3RlLCBzaW5jZSBhbGwgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgcmVhZE9ubHksIHRoaXMgcHJldmVudHNcbiAgICAvLyBhZGRpbmcgYWRkaXRpb25hbCBjb21wdXRlZCBwcm9wZXJ0eSBlZmZlY3RzICh3aGljaCBsZWFkcyB0byBhIGNvbmZ1c2luZ1xuICAgIC8vIHNldHVwIHdoZXJlIG11bHRpcGxlIHRyaWdnZXJzIGZvciBzZXR0aW5nIGEgcHJvcGVydHkpXG4gICAgLy8gV2hpbGUgd2UgZG8gaGF2ZSBgaGFzQ29tcHV0ZWRFZmZlY3RgIHRoaXMgaXMgc2V0IG9uIHRoZSBwcm9wZXJ0eSdzXG4gICAgLy8gZGVwZW5kZW5jaWVzIHJhdGhlciB0aGFuIGl0c2VsZi5cbiAgICBpZiAoaW5mby5jb21wdXRlZCkge1xuICAgICAgaWYgKHByb3RvLl9oYXNSZWFkT25seUVmZmVjdChuYW1lKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYENhbm5vdCByZWRlZmluZSBjb21wdXRlZCBwcm9wZXJ0eSAnJHtuYW1lfScuYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm90by5fY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0eShuYW1lLCBpbmZvLmNvbXB1dGVkLCBhbGxQcm9wcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbmZvLnJlYWRPbmx5ICYmICFwcm90by5faGFzUmVhZE9ubHlFZmZlY3QobmFtZSkpIHtcbiAgICAgIHByb3RvLl9jcmVhdGVSZWFkT25seVByb3BlcnR5KG5hbWUsICFpbmZvLmNvbXB1dGVkKTtcbiAgICB9IGVsc2UgaWYgKGluZm8ucmVhZE9ubHkgPT09IGZhbHNlICYmIHByb3RvLl9oYXNSZWFkT25seUVmZmVjdChuYW1lKSkge1xuICAgICAgY29uc29sZS53YXJuKGBDYW5ub3QgbWFrZSByZWFkT25seSBwcm9wZXJ0eSAnJHtuYW1lfScgbm9uLXJlYWRPbmx5LmApO1xuICAgIH1cbiAgICBpZiAoaW5mby5yZWZsZWN0VG9BdHRyaWJ1dGUgJiYgIXByb3RvLl9oYXNSZWZsZWN0RWZmZWN0KG5hbWUpKSB7XG4gICAgICBwcm90by5fY3JlYXRlUmVmbGVjdGVkUHJvcGVydHkobmFtZSk7XG4gICAgfSBlbHNlIGlmIChpbmZvLnJlZmxlY3RUb0F0dHJpYnV0ZSA9PT0gZmFsc2UgJiYgcHJvdG8uX2hhc1JlZmxlY3RFZmZlY3QobmFtZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ2Fubm90IG1ha2UgcmVmbGVjdGVkIHByb3BlcnR5ICcke25hbWV9JyBub24tcmVmbGVjdGVkLmApO1xuICAgIH1cbiAgICBpZiAoaW5mby5ub3RpZnkgJiYgIXByb3RvLl9oYXNOb3RpZnlFZmZlY3QobmFtZSkpIHtcbiAgICAgIHByb3RvLl9jcmVhdGVOb3RpZnlpbmdQcm9wZXJ0eShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGluZm8ubm90aWZ5ID09PSBmYWxzZSAmJiBwcm90by5faGFzTm90aWZ5RWZmZWN0KG5hbWUpKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENhbm5vdCBtYWtlIG5vdGlmeSBwcm9wZXJ0eSAnJHtuYW1lfScgbm9uLW5vdGlmeS5gKTtcbiAgICB9XG4gICAgLy8gYWx3YXlzIGFkZCBvYnNlcnZlclxuICAgIGlmIChpbmZvLm9ic2VydmVyKSB7XG4gICAgICBwcm90by5fY3JlYXRlUHJvcGVydHlPYnNlcnZlcihuYW1lLCBpbmZvLm9ic2VydmVyLCBhbGxQcm9wc1tpbmZvLm9ic2VydmVyXSk7XG4gICAgfVxuICAgIC8vIGFsd2F5cyBjcmVhdGUgdGhlIG1hcHBpbmcgZnJvbSBhdHRyaWJ1dGUgYmFjayB0byBwcm9wZXJ0eSBmb3IgZGVzZXJpYWxpemF0aW9uLlxuICAgIHByb3RvLl9hZGRQcm9wZXJ0eVRvQXR0cmlidXRlTWFwKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYWxsIHN0eWxlIGVsZW1lbnRzIGluIHRoZSBlbGVtZW50IHRlbXBsYXRlLiBTdHlsZXMgd2l0aCB0aGVcbiAgICogYGluY2x1ZGVgIGF0dHJpYnV0ZSBhcmUgcHJvY2Vzc2VkIHN1Y2ggdGhhdCBhbnkgc3R5bGVzIGluXG4gICAqIHRoZSBhc3NvY2lhdGVkIFwic3R5bGUgbW9kdWxlc1wiIGFyZSBpbmNsdWRlZCBpbiB0aGUgZWxlbWVudCB0ZW1wbGF0ZS5cbiAgICogQHBhcmFtIHtQb2x5bWVyRWxlbWVudENvbnN0cnVjdG9yfSBrbGFzcyBFbGVtZW50IGNsYXNzXG4gICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHByb2Nlc3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlzIE5hbWUgb2YgZWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSSSBCYXNlIFVSSSBmb3IgZWxlbWVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnRTdHlsZXMoa2xhc3MsIHRlbXBsYXRlLCBpcywgYmFzZVVSSSkge1xuICAgIGlmICghYnVpbHRDU1MpIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlU3R5bGVzID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpO1xuICAgICAgY29uc3Qgc3R5bGVzV2l0aEltcG9ydHMgPSBzdHlsZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgLy8gaW5zZXJ0IHN0eWxlcyBmcm9tIDxsaW5rIHJlbD1cImltcG9ydFwiIHR5cGU9XCJjc3NcIj4gYXQgdGhlIHRvcCBvZiB0aGUgdGVtcGxhdGVcbiAgICAgIGNvbnN0IGxpbmtlZFN0eWxlcyA9IHN0eWxlc0Zyb21Nb2R1bGVJbXBvcnRzKGlzKTtcbiAgICAgIGNvbnN0IGZpcnN0VGVtcGxhdGVDaGlsZCA9IHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsaW5rZWRTdHlsZXMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICBsZXQgcyA9IGxpbmtlZFN0eWxlc1tpZHhdO1xuICAgICAgICBzLnRleHRDb250ZW50ID0ga2xhc3MuX3Byb2Nlc3NTdHlsZVRleHQocy50ZXh0Q29udGVudCwgYmFzZVVSSSk7XG4gICAgICAgIHRlbXBsYXRlLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHMsIGZpcnN0VGVtcGxhdGVDaGlsZCk7XG4gICAgICB9XG4gICAgICAvLyBrZWVwIHRyYWNrIG9mIHRoZSBsYXN0IFwiY29uY3JldGVcIiBzdHlsZSBpbiB0aGUgdGVtcGxhdGUgd2UgaGF2ZSBlbmNvdW50ZXJlZFxuICAgICAgbGV0IHRlbXBsYXRlU3R5bGVJbmRleCA9IDA7XG4gICAgICAvLyBlbnN1cmUgYWxsIGdhdGhlcmVkIHN0eWxlcyBhcmUgYWN0dWFsbHkgaW4gdGhpcyB0ZW1wbGF0ZS5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVzV2l0aEltcG9ydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHMgPSBzdHlsZXNXaXRoSW1wb3J0c1tpXTtcbiAgICAgICAgbGV0IHRlbXBsYXRlU3R5bGUgPSB0ZW1wbGF0ZVN0eWxlc1t0ZW1wbGF0ZVN0eWxlSW5kZXhdO1xuICAgICAgICAvLyBpZiB0aGUgc3R5bGUgaXMgbm90IGluIHRoaXMgdGVtcGxhdGUsIGl0J3MgYmVlbiBcImluY2x1ZGVkXCIgYW5kXG4gICAgICAgIC8vIHdlIHB1dCBhIGNsb25lIG9mIGl0IGluIHRoZSB0ZW1wbGF0ZSBiZWZvcmUgdGhlIHN0eWxlIHRoYXQgaW5jbHVkZWQgaXRcbiAgICAgICAgaWYgKHRlbXBsYXRlU3R5bGUgIT09IHMpIHtcbiAgICAgICAgICBzID0gcy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgdGVtcGxhdGVTdHlsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLCB0ZW1wbGF0ZVN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZW1wbGF0ZVN0eWxlSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBzLnRleHRDb250ZW50ID0ga2xhc3MuX3Byb2Nlc3NTdHlsZVRleHQocy50ZXh0Q29udGVudCwgYmFzZVVSSSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh3aW5kb3cuU2hhZHlDU1MpIHtcbiAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGlzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9vayB1cCB0ZW1wbGF0ZSBmcm9tIGRvbS1tb2R1bGUgZm9yIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlzIEVsZW1lbnQgbmFtZSB0byBsb29rIHVwXG4gICAqIEByZXR1cm4gez9IVE1MVGVtcGxhdGVFbGVtZW50fHVuZGVmaW5lZH0gVGVtcGxhdGUgZm91bmQgaW4gZG9tIG1vZHVsZSwgb3JcbiAgICogICB1bmRlZmluZWQgaWYgbm90IGZvdW5kXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGZ1bmN0aW9uIGdldFRlbXBsYXRlRnJvbURvbU1vZHVsZShpcykge1xuICAgIGxldCB0ZW1wbGF0ZSA9IG51bGw7XG4gICAgLy8gVW5kZXIgc3RyaWN0VGVtcGxhdGVQb2xpY3kgaW4gMy54KywgZG9tLW1vZHVsZSBsb29rdXAgaXMgb25seSBhbGxvd2VkXG4gICAgLy8gd2hlbiBvcHRlZC1pbiB2aWEgYWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGVcbiAgICBpZiAoaXMgJiYgKCFzdHJpY3RUZW1wbGF0ZVBvbGljeSB8fCBhbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSkpIHtcbiAgICAgIHRlbXBsYXRlID0gLyoqIEB0eXBlIHs/SFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKFxuICAgICAgICAgIERvbU1vZHVsZS5pbXBvcnQoaXMsICd0ZW1wbGF0ZScpKTtcbiAgICAgIC8vIFVuZGVyIHN0cmljdFRlbXBsYXRlUG9saWN5LCByZXF1aXJlIGFueSBlbGVtZW50IHdpdGggYW4gYGlzYFxuICAgICAgLy8gc3BlY2lmaWVkIHRvIGhhdmUgYSBkb20tbW9kdWxlXG4gICAgICBpZiAoc3RyaWN0VGVtcGxhdGVQb2xpY3kgJiYgIXRlbXBsYXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3RyaWN0VGVtcGxhdGVQb2xpY3k6IGV4cGVjdGluZyBkb20tbW9kdWxlIG9yIG51bGwgdGVtcGxhdGUgZm9yICR7aXN9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0VsZW1lbnRNaXhpbn1cbiAgICogQGV4dGVuZHMge3BvbHltZXJFbGVtZW50QmFzZX1cbiAgICovXG4gIGNsYXNzIFBvbHltZXJFbGVtZW50IGV4dGVuZHMgcG9seW1lckVsZW1lbnRCYXNlIHtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgUG9seW1lciB2ZXJzaW9uIGluIFNlbXZlciBub3RhdGlvbi5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfSBTZW12ZXIgbm90YXRpb24gb2YgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBQb2x5bWVyLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCBwb2x5bWVyRWxlbWVudFZlcnNpb24oKSB7XG4gICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBvZiBQcm9wZXJ0aWVzTWl4aW4gX2ZpbmFsaXplQ2xhc3MgdG8gY3JlYXRlIG9ic2VydmVycyBhbmRcbiAgICAgKiBmaW5kIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBJbnRlcmZhY2VzIGluIGNsb3N1cmUgZG8gbm90IGluaGVyaXQgc3RhdGljcywgYnV0IGNsYXNzZXMgZG9cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfZmluYWxpemVDbGFzcygpIHtcbiAgICAgIC8vIFRPRE8oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMjQwKTpcbiAgICAgIC8vICAgICBDaGFuZ2UgYmFjayB0byBqdXN0IHN1cGVyLm1ldGhvZENhbGwoKVxuICAgICAgcG9seW1lckVsZW1lbnRCYXNlLl9maW5hbGl6ZUNsYXNzLmNhbGwodGhpcyk7XG4gICAgICBjb25zdCBvYnNlcnZlcnMgPSBvd25PYnNlcnZlcnModGhpcyk7XG4gICAgICBpZiAob2JzZXJ2ZXJzKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlT2JzZXJ2ZXJzKG9ic2VydmVycywgdGhpcy5fcHJvcGVydGllcyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9wcmVwYXJlVGVtcGxhdGUoKTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgX3ByZXBhcmVUZW1wbGF0ZSgpIHtcbiAgICAgIC8vIG5vdGU6IGNyZWF0ZSBcIndvcmtpbmdcIiB0ZW1wbGF0ZSB0aGF0IGlzIGZpbmFsaXplZCBhdCBpbnN0YW5jZSB0aW1lXG4gICAgICBsZXQgdGVtcGxhdGUgPSAvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9ICovICh0aGlzKS50ZW1wbGF0ZTtcbiAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3RlbXBsYXRlIGdldHRlciBtdXN0IHJldHVybiBIVE1MVGVtcGxhdGVFbGVtZW50Jyk7XG4gICAgICAgICAgdGVtcGxhdGUgPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKCFsZWdhY3lPcHRpbWl6YXRpb25zKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqIEBvdmVycmlkZSAqL1xuICAgICAgdGhpcy5wcm90b3R5cGUuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgb2YgUHJvcGVydGllc0NoYW5nZWQgY3JlYXRlUHJvcGVydGllcyB0byBjcmVhdGUgYWNjZXNzb3JzXG4gICAgICogYW5kIHByb3BlcnR5IGVmZmVjdHMgZm9yIGFsbCBvZiB0aGUgcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHByb3BzIC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgICBmb3IgKGxldCBwIGluIHByb3BzKSB7XG4gICAgICAgIGNyZWF0ZVByb3BlcnR5RnJvbUNvbmZpZyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMucHJvdG90eXBlKSwgcCwgcHJvcHNbcF0sIHByb3BzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9ic2VydmVycyBmb3IgdGhlIGdpdmVuIGBvYnNlcnZlcnNgIGFycmF5LlxuICAgICAqIExldmVyYWdlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBjcmVhdGUgb2JzZXJ2ZXJzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlcnMgQXJyYXkgb2Ygb2JzZXJ2ZXIgZGVzY3JpcHRvcnMgZm9yXG4gICAgICogICB0aGlzIGNsYXNzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGR5bmFtaWNGbnMgT2JqZWN0IGNvbnRhaW5pbmcga2V5cyBmb3IgYW55IHByb3BlcnRpZXNcbiAgICAgKiAgIHRoYXQgYXJlIGZ1bmN0aW9ucyBhbmQgc2hvdWxkIHRyaWdnZXIgdGhlIGVmZmVjdCB3aGVuIHRoZSBmdW5jdGlvblxuICAgICAqICAgcmVmZXJlbmNlIGlzIGNoYW5nZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVPYnNlcnZlcnMob2JzZXJ2ZXJzLCBkeW5hbWljRm5zKSB7XG4gICAgICBjb25zdCBwcm90byA9IHRoaXMucHJvdG90eXBlO1xuICAgICAgZm9yIChsZXQgaT0wOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByb3RvLl9jcmVhdGVNZXRob2RPYnNlcnZlcihvYnNlcnZlcnNbaV0sIGR5bmFtaWNGbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHRlbXBsYXRlIHRoYXQgd2lsbCBiZSBzdGFtcGVkIGludG8gdGhpcyBlbGVtZW50J3Mgc2hhZG93IHJvb3QuXG4gICAgICpcbiAgICAgKiBJZiBhIGBzdGF0aWMgZ2V0IGlzKClgIGdldHRlciBpcyBkZWZpbmVkLCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAqIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBgPHRlbXBsYXRlPmAgaW4gYSBgZG9tLW1vZHVsZWAgd2hvc2UgYGlkYFxuICAgICAqIG1hdGNoZXMgdGhpcyBlbGVtZW50J3MgYGlzYC5cbiAgICAgKlxuICAgICAqIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIGdldHRlciB0byByZXR1cm4gYW4gYXJiaXRyYXJ5IHRlbXBsYXRlXG4gICAgICogKGluIHdoaWNoIGNhc2UgdGhlIGBpc2AgZ2V0dGVyIGlzIHVubmVjZXNzYXJ5KS4gVGhlIHRlbXBsYXRlIHJldHVybmVkXG4gICAgICogbXVzdCBiZSBhbiBgSFRNTFRlbXBsYXRlRWxlbWVudGAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2hlbiBzdWJjbGFzc2luZywgaWYgdGhlIHN1cGVyIGNsYXNzIG92ZXJyb2RlIHRoZSBkZWZhdWx0XG4gICAgICogaW1wbGVtZW50YXRpb24gYW5kIHRoZSBzdWJjbGFzcyB3b3VsZCBsaWtlIHRvIHByb3ZpZGUgYW4gYWx0ZXJuYXRlXG4gICAgICogdGVtcGxhdGUgdmlhIGEgYGRvbS1tb2R1bGVgLCBpdCBzaG91bGQgb3ZlcnJpZGUgdGhpcyBnZXR0ZXIgYW5kXG4gICAgICogcmV0dXJuIGBEb21Nb2R1bGUuaW1wb3J0KHRoaXMuaXMsICd0ZW1wbGF0ZScpYC5cbiAgICAgKlxuICAgICAqIElmIGEgc3ViY2xhc3Mgd291bGQgbGlrZSB0byBtb2RpZnkgdGhlIHN1cGVyIGNsYXNzIHRlbXBsYXRlLCBpdCBzaG91bGRcbiAgICAgKiBjbG9uZSBpdCByYXRoZXIgdGhhbiBtb2RpZnkgaXQgaW4gcGxhY2UuICBJZiB0aGUgZ2V0dGVyIGRvZXMgZXhwZW5zaXZlXG4gICAgICogd29yayBzdWNoIGFzIGNsb25pbmcvbW9kaWZ5aW5nIGEgdGVtcGxhdGUsIGl0IHNob3VsZCBtZW1vaXplIHRoZVxuICAgICAqIHRlbXBsYXRlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlOlxuICAgICAqXG4gICAgICogICBsZXQgbWVtb2l6ZWRUZW1wbGF0ZTtcbiAgICAgKiAgIGNsYXNzIE15U3ViQ2xhc3MgZXh0ZW5kcyBNeVN1cGVyQ2xhc3Mge1xuICAgICAqICAgICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkge1xuICAgICAqICAgICAgIGlmICghbWVtb2l6ZWRUZW1wbGF0ZSkge1xuICAgICAqICAgICAgICAgbWVtb2l6ZWRUZW1wbGF0ZSA9IHN1cGVyLnRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgKiAgICAgICAgIGxldCBzdWJDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICogICAgICAgICBzdWJDb250ZW50LnRleHRDb250ZW50ID0gJ1RoaXMgY2FtZSBmcm9tIE15U3ViQ2xhc3MnO1xuICAgICAqICAgICAgICAgbWVtb2l6ZWRUZW1wbGF0ZS5jb250ZW50LmFwcGVuZENoaWxkKHN1YkNvbnRlbnQpO1xuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgICByZXR1cm4gbWVtb2l6ZWRUZW1wbGF0ZTtcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqXG4gICAgICogQHJldHVybiB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR8c3RyaW5nfSBUZW1wbGF0ZSB0byBiZSBzdGFtcGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkge1xuICAgICAgLy8gRXhwbGFuYXRpb24gb2YgdGVtcGxhdGUtcmVsYXRlZCBwcm9wZXJ0aWVzOlxuICAgICAgLy8gLSBjb25zdHJ1Y3Rvci50ZW1wbGF0ZSAodGhpcyBnZXR0ZXIpOiB0aGUgdGVtcGxhdGUgZm9yIHRoZSBjbGFzcy5cbiAgICAgIC8vICAgICBUaGlzIGNhbiBjb21lIGZyb20gdGhlIHByb3RvdHlwZSAoZm9yIGxlZ2FjeSBlbGVtZW50cyksIGZyb20gYVxuICAgICAgLy8gICAgIGRvbS1tb2R1bGUsIG9yIGZyb20gdGhlIHN1cGVyIGNsYXNzJ3MgdGVtcGxhdGUgKG9yIGNhbiBiZSBvdmVycmlkZGVuXG4gICAgICAvLyAgICAgYWx0b2dldGhlciBieSB0aGUgdXNlcilcbiAgICAgIC8vIC0gY29uc3RydWN0b3IuX3RlbXBsYXRlOiBtZW1vaXplZCB2ZXJzaW9uIG9mIGNvbnN0cnVjdG9yLnRlbXBsYXRlXG4gICAgICAvLyAtIHByb3RvdHlwZS5fdGVtcGxhdGU6IHdvcmtpbmcgdGVtcGxhdGUgZm9yIHRoZSBlbGVtZW50LCB3aGljaCB3aWxsIGJlXG4gICAgICAvLyAgICAgcGFyc2VkIGFuZCBtb2RpZmllZCBpbiBwbGFjZS4gSXQgaXMgYSBjbG9uZWQgdmVyc2lvbiBvZlxuICAgICAgLy8gICAgIGNvbnN0cnVjdG9yLnRlbXBsYXRlLCBzYXZlZCBpbiBfZmluYWxpemVDbGFzcygpLiBOb3RlIHRoYXQgYmVmb3JlXG4gICAgICAvLyAgICAgdGhpcyBnZXR0ZXIgaXMgY2FsbGVkLCBmb3IgbGVnYWN5IGVsZW1lbnRzIHRoaXMgY291bGQgYmUgZnJvbSBhXG4gICAgICAvLyAgICAgX3RlbXBsYXRlIGZpZWxkIG9uIHRoZSBpbmZvIG9iamVjdCBwYXNzZWQgdG8gUG9seW1lcigpLCBhIGJlaGF2aW9yLFxuICAgICAgLy8gICAgIG9yIHNldCBpbiByZWdpc3RlcmVkKCk7IG9uY2UgdGhlIHN0YXRpYyBnZXR0ZXIgcnVucywgYSBjbG9uZSBvZiBpdFxuICAgICAgLy8gICAgIHdpbGwgb3ZlcndyaXRlIGl0IG9uIHRoZSBwcm90b3R5cGUgYXMgdGhlIHdvcmtpbmcgdGVtcGxhdGUuXG4gICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX3RlbXBsYXRlJywgdGhpcykpKSB7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID1cbiAgICAgICAgICAvLyBJZiB1c2VyIGhhcyBwdXQgdGVtcGxhdGUgb24gcHJvdG90eXBlIChlLmcuIGluIGxlZ2FjeSB2aWEgcmVnaXN0ZXJlZFxuICAgICAgICAgIC8vIGNhbGxiYWNrIG9yIGluZm8gb2JqZWN0KSwgcHJlZmVyIHRoYXQgZmlyc3RcbiAgICAgICAgICB0aGlzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfdGVtcGxhdGUnLCB0aGlzLnByb3RvdHlwZSkpID9cbiAgICAgICAgICB0aGlzLnByb3RvdHlwZS5fdGVtcGxhdGUgOlxuICAgICAgICAgIC8vIExvb2sgaW4gZG9tLW1vZHVsZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlbGVtZW50J3MgaXNcbiAgICAgICAgICAoZ2V0VGVtcGxhdGVGcm9tRG9tTW9kdWxlKC8qKiBAdHlwZSB7UG9seW1lckVsZW1lbnRDb25zdHJ1Y3Rvcn0qLyAodGhpcykuaXMpIHx8XG4gICAgICAgICAgLy8gTmV4dCBsb29rIGZvciBzdXBlcmNsYXNzIHRlbXBsYXRlIChjYWxsIHRoZSBzdXBlciBpbXBsIHRoaXNcbiAgICAgICAgICAvLyB3YXkgc28gdGhhdCBgdGhpc2AgcG9pbnRzIHRvIHRoZSBzdXBlcmNsYXNzKVxuICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZigvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9Ki8gKHRoaXMpLnByb3RvdHlwZSkuY29uc3RydWN0b3IudGVtcGxhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fHN0cmluZ30gdmFsdWUgVGVtcGxhdGUgdG8gc2V0LlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIHNldCB0ZW1wbGF0ZSh2YWx1ZSkge1xuICAgICAgdGhpcy5fdGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXRoIG1hdGNoaW5nIHRoZSB1cmwgZnJvbSB3aGljaCB0aGUgZWxlbWVudCB3YXMgaW1wb3J0ZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhdGggaXMgdXNlZCB0byByZXNvbHZlIHVybCdzIGluIHRlbXBsYXRlIHN0eWxlIGNzc1RleHQuXG4gICAgICogVGhlIGBpbXBvcnRQYXRoYCBwcm9wZXJ0eSBpcyBhbHNvIHNldCBvbiBlbGVtZW50IGluc3RhbmNlcyBhbmQgY2FuIGJlXG4gICAgICogdXNlZCB0byBjcmVhdGUgYmluZGluZ3MgcmVsYXRpdmUgdG8gdGhlIGltcG9ydCBwYXRoLlxuICAgICAqXG4gICAgICogRm9yIGVsZW1lbnRzIGRlZmluZWQgaW4gRVMgbW9kdWxlcywgdXNlcnMgc2hvdWxkIGltcGxlbWVudFxuICAgICAqIGBzdGF0aWMgZ2V0IGltcG9ydE1ldGEoKSB7IHJldHVybiBpbXBvcnQubWV0YTsgfWAsIGFuZCB0aGUgZGVmYXVsdFxuICAgICAqIGltcGxlbWVudGF0aW9uIG9mIGBpbXBvcnRQYXRoYCB3aWxsICByZXR1cm4gYGltcG9ydC5tZXRhLnVybGAncyBwYXRoLlxuICAgICAqIEZvciBlbGVtZW50cyBkZWZpbmVkIGluIEhUTUwgaW1wb3J0cywgdGhpcyBnZXR0ZXIgd2lsbCByZXR1cm4gdGhlIHBhdGhcbiAgICAgKiB0byB0aGUgZG9jdW1lbnQgY29udGFpbmluZyBhIGBkb20tbW9kdWxlYCBlbGVtZW50IG1hdGNoaW5nIHRoaXNcbiAgICAgKiBlbGVtZW50J3Mgc3RhdGljIGBpc2AgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGlzIHBhdGggc2hvdWxkIGNvbnRhaW4gYSB0cmFpbGluZyBgL2AuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBpbXBvcnQgcGF0aCBmb3IgdGhpcyBlbGVtZW50IGNsYXNzXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc31cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgaW1wb3J0UGF0aCgpIHtcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfaW1wb3J0UGF0aCcsIHRoaXMpKSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5pbXBvcnRNZXRhO1xuICAgICAgICBpZiAobWV0YSkge1xuICAgICAgICAgIHRoaXMuX2ltcG9ydFBhdGggPSBwYXRoRnJvbVVybChtZXRhLnVybCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbW9kdWxlID0gRG9tTW9kdWxlLmltcG9ydCgvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9ICovICh0aGlzKS5pcyk7XG4gICAgICAgICAgdGhpcy5faW1wb3J0UGF0aCA9IChtb2R1bGUgJiYgbW9kdWxlLmFzc2V0cGF0aCkgfHxcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZigvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9Ki8gKHRoaXMpLnByb3RvdHlwZSkuY29uc3RydWN0b3IuaW1wb3J0UGF0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2ltcG9ydFBhdGg7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtIVE1MVGVtcGxhdGVFbGVtZW50fSAqL1xuICAgICAgdGhpcy5fdGVtcGxhdGU7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMuX2ltcG9ydFBhdGg7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMucm9vdFBhdGg7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMuaW1wb3J0UGF0aDtcbiAgICAgIC8qKiBAdHlwZSB7U3RhbXBlZFRlbXBsYXRlIHwgSFRNTEVsZW1lbnQgfCBTaGFkb3dSb290fSAqL1xuICAgICAgdGhpcy5yb290O1xuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIUVsZW1lbnQ+fSAqL1xuICAgICAgdGhpcy4kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyB0aGUgZGVmYXVsdCBgUHJvcGVydHlBY2Nlc3NvcnNgIHRvIGVuc3VyZSBjbGFzc1xuICAgICAqIG1ldGFwcm9ncmFtbWluZyByZWxhdGVkIHRvIHByb3BlcnR5IGFjY2Vzc29ycyBhbmQgZWZmZWN0cyBoYXNcbiAgICAgKiBjb21wbGV0ZWQgKGNhbGxzIGBmaW5hbGl6ZWApLlxuICAgICAqXG4gICAgICogSXQgYWxzbyBpbml0aWFsaXplcyBhbnkgcHJvcGVydHkgZGVmYXVsdHMgcHJvdmlkZWQgdmlhIGB2YWx1ZWAgaW5cbiAgICAgKiBgcHJvcGVydGllc2AgbWV0YWRhdGEuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzLG1pc3NpbmdQcm9wZXJ0aWVzfSBnby9taXNzaW5nZm5wcm9wc1xuICAgICAqL1xuICAgIF9pbml0aWFsaXplUHJvcGVydGllcygpIHtcbiAgICAgIHRoaXMuY29uc3RydWN0b3IuZmluYWxpemUoKTtcbiAgICAgIC8vIG5vdGU6IGZpbmFsaXplIHRlbXBsYXRlIHdoZW4gd2UgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsTmFtZWAgdG9cbiAgICAgIC8vIGF2b2lkIGRlcGVuZGVuY2Ugb24gYGlzYCBmb3IgcG9seWZpbGxpbmcgc3R5bGluZy5cbiAgICAgIHRoaXMuY29uc3RydWN0b3IuX2ZpbmFsaXplVGVtcGxhdGUoLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMpLmxvY2FsTmFtZSk7XG4gICAgICBzdXBlci5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgICAgIC8vIHNldCBwYXRoIGRlZmF1bHRzXG4gICAgICB0aGlzLnJvb3RQYXRoID0gcm9vdFBhdGg7XG4gICAgICB0aGlzLmltcG9ydFBhdGggPSB0aGlzLmNvbnN0cnVjdG9yLmltcG9ydFBhdGg7XG4gICAgICAvLyBhcHBseSBwcm9wZXJ0eSBkZWZhdWx0cy4uLlxuICAgICAgbGV0IHAkID0gcHJvcGVydHlEZWZhdWx0cyh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgIGlmICghcCQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgcCBpbiBwJCkge1xuICAgICAgICBsZXQgaW5mbyA9IHAkW3BdO1xuICAgICAgICAvLyBEb24ndCBzZXQgZGVmYXVsdCB2YWx1ZSBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIG93biBwcm9wZXJ0eSwgd2hpY2hcbiAgICAgICAgLy8gaGFwcGVucyB3aGVuIGEgYHByb3BlcnRpZXNgIHByb3BlcnR5IHdpdGggZGVmYXVsdCBidXQgbm8gZWZmZWN0cyBoYWRcbiAgICAgICAgLy8gYSBwcm9wZXJ0eSBzZXQgKGUuZy4gYm91bmQpIGJ5IGl0cyBob3N0IGJlZm9yZSB1cGdyYWRlXG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgIGxldCB2YWx1ZSA9IHR5cGVvZiBpbmZvLnZhbHVlID09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgaW5mby52YWx1ZS5jYWxsKHRoaXMpIDpcbiAgICAgICAgICAgIGluZm8udmFsdWU7XG4gICAgICAgICAgLy8gU2V0IHZpYSBgX3NldFByb3BlcnR5YCBpZiB0aGVyZSBpcyBhbiBhY2Nlc3NvciwgdG8gZW5hYmxlXG4gICAgICAgICAgLy8gaW5pdGlhbGl6aW5nIHJlYWRPbmx5IHByb3BlcnR5IGRlZmF1bHRzXG4gICAgICAgICAgaWYgKHRoaXMuX2hhc0FjY2Vzc29yKHApKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkocCwgdmFsdWUsIHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzW3BdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2F0aGVyIHN0eWxlIHRleHQgZm9yIGEgc3R5bGUgZWxlbWVudCBpbiB0aGUgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dCBUZXh0IGNvbnRhaW5pbmcgc3R5bGluZyB0byBwcm9jZXNzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkkgQmFzZSBVUkkgdG8gcmViYXNlIENTUyBwYXRocyBhZ2FpbnN0XG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgcHJvY2Vzc2VkIENTUyB0ZXh0XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9jZXNzU3R5bGVUZXh0KGNzc1RleHQsIGJhc2VVUkkpIHtcbiAgICAgIHJldHVybiByZXNvbHZlQ3NzKGNzc1RleHQsIGJhc2VVUkkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogQ29uZmlndXJlcyBhbiBlbGVtZW50IGBwcm90b2AgdG8gZnVuY3Rpb24gd2l0aCBhIGdpdmVuIGB0ZW1wbGF0ZWAuXG4gICAgKiBUaGUgZWxlbWVudCBuYW1lIGBpc2AgYW5kIGV4dGVuZHMgYGV4dGAgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIFNoYWR5Q1NTXG4gICAgKiBzdHlsZSBzY29waW5nLlxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBpcyBUYWcgbmFtZSAob3IgdHlwZSBleHRlbnNpb24gbmFtZSkgZm9yIHRoaXMgZWxlbWVudFxuICAgICogQHJldHVybiB7dm9pZH1cbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEBub2NvbGxhcHNlXG4gICAgKi9cbiAgICBzdGF0aWMgX2ZpbmFsaXplVGVtcGxhdGUoaXMpIHtcbiAgICAgIC8qKiBAY29uc3Qge0hUTUxUZW1wbGF0ZUVsZW1lbnR9ICovXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMucHJvdG90eXBlLl90ZW1wbGF0ZTtcbiAgICAgIGlmICh0ZW1wbGF0ZSAmJiAhdGVtcGxhdGUuX19wb2x5bWVyRmluYWxpemVkKSB7XG4gICAgICAgIHRlbXBsYXRlLl9fcG9seW1lckZpbmFsaXplZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGltcG9ydFBhdGggPSB0aGlzLmltcG9ydFBhdGg7XG4gICAgICAgIGNvbnN0IGJhc2VVUkkgPSBpbXBvcnRQYXRoID8gcmVzb2x2ZVVybChpbXBvcnRQYXRoKSA6ICcnO1xuICAgICAgICAvLyBlLmcuIHN1cHBvcnQgYGluY2x1ZGU9XCJtb2R1bGUtbmFtZVwiYCwgYW5kIFNoYWR5Q1NTXG4gICAgICAgIHByb2Nlc3NFbGVtZW50U3R5bGVzKHRoaXMsIHRlbXBsYXRlLCBpcywgYmFzZVVSSSk7XG4gICAgICAgIHRoaXMucHJvdG90eXBlLl9iaW5kVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGEgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgc3RhbmRhcmQgQ3VzdG9tIEVsZW1lbnRzXG4gICAgICogYGNvbm5lY3RlZENhbGxiYWNrYC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGVuYWJsZXMgdGhlIHByb3BlcnR5IGVmZmVjdHMgc3lzdGVtIGFuZFxuICAgICAqIGZsdXNoZXMgYW55IHBlbmRpbmcgcHJvcGVydGllcywgYW5kIHVwZGF0ZXMgc2hpbW1lZCBDU1MgcHJvcGVydGllc1xuICAgICAqIHdoZW4gdXNpbmcgdGhlIFNoYWR5Q1NTIHNjb3BpbmcvY3VzdG9tIHByb3BlcnRpZXMgcG9seWZpbGwuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzLCBpbnZhbGlkQ2FzdHN9IFN1cGVyIG1heSBvciBtYXkgbm90XG4gICAgICogICAgIGltcGxlbWVudCB0aGUgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeUNTUyAmJiB0aGlzLl90ZW1wbGF0ZSkge1xuICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVFbGVtZW50KC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKSk7XG4gICAgICB9XG4gICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YW1wcyB0aGUgZWxlbWVudCB0ZW1wbGF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgcmVhZHkoKSB7XG4gICAgICBpZiAodGhpcy5fdGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy5fc3RhbXBUZW1wbGF0ZSh0aGlzLl90ZW1wbGF0ZSk7XG4gICAgICAgIHRoaXMuJCA9IHRoaXMucm9vdC4kO1xuICAgICAgfVxuICAgICAgc3VwZXIucmVhZHkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIGBQcm9wZXJ0eUVmZmVjdHNgJ3MgYF9yZWFkeUNsaWVudHNgIGNhbGwuIEF0dGFjaGVzXG4gICAgICogZWxlbWVudCBkb20gYnkgY2FsbGluZyBgX2F0dGFjaERvbWAgd2l0aCB0aGUgZG9tIHN0YW1wZWQgZnJvbSB0aGVcbiAgICAgKiBlbGVtZW50J3MgdGVtcGxhdGUgdmlhIGBfc3RhbXBUZW1wbGF0ZWAuIE5vdGUgdGhhdCB0aGlzIGFsbG93c1xuICAgICAqIGNsaWVudCBkb20gdG8gYmUgYXR0YWNoZWQgdG8gdGhlIGVsZW1lbnQgcHJpb3IgdG8gYW55IG9ic2VydmVyc1xuICAgICAqIHJ1bm5pbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9yZWFkeUNsaWVudHMoKSB7XG4gICAgICBpZiAodGhpcy5fdGVtcGxhdGUpIHtcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy5fYXR0YWNoRG9tKC8qKiBAdHlwZSB7U3RhbXBlZFRlbXBsYXRlfSAqLyh0aGlzLnJvb3QpKTtcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBzdXBlci5fcmVhZHlDbGllbnRzIGhlcmUgc2V0cyB0aGUgY2xpZW50cyBpbml0aWFsaXplZCBmbGFnLlxuICAgICAgLy8gV2UgbXVzdCB3YWl0IHRvIGRvIHRoaXMgdW50aWwgYWZ0ZXIgY2xpZW50IGRvbSBpcyBjcmVhdGVkL2F0dGFjaGVkXG4gICAgICAvLyBzbyB0aGF0IHRoaXMgZmxhZyBjYW4gYmUgY2hlY2tlZCB0byBwcmV2ZW50IG5vdGlmaWNhdGlvbnMgZmlyZWRcbiAgICAgIC8vIGR1cmluZyB0aGlzIHByb2Nlc3MgZnJvbSBiZWluZyBoYW5kbGVkIGJlZm9yZSBjbGllbnRzIGFyZSByZWFkeS5cbiAgICAgIHN1cGVyLl9yZWFkeUNsaWVudHMoKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGFuIGVsZW1lbnQncyBzdGFtcGVkIGRvbSB0byBpdHNlbGYuIEJ5IGRlZmF1bHQsXG4gICAgICogdGhpcyBtZXRob2QgY3JlYXRlcyBhIGBzaGFkb3dSb290YCBhbmQgYWRkcyB0aGUgZG9tIHRvIGl0LlxuICAgICAqIEhvd2V2ZXIsIHRoaXMgbWV0aG9kIG1heSBiZSBvdmVycmlkZGVuIHRvIGFsbG93IGFuIGVsZW1lbnRcbiAgICAgKiB0byBwdXQgaXRzIGRvbSBpbiBhbm90aGVyIGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHRocm93cyB7RXJyb3J9XG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUmV0dXJufVxuICAgICAqIEBwYXJhbSB7U3RhbXBlZFRlbXBsYXRlfSBkb20gdG8gYXR0YWNoIHRvIHRoZSBlbGVtZW50LlxuICAgICAqIEByZXR1cm4ge1NoYWRvd1Jvb3R9IG5vZGUgdG8gd2hpY2ggdGhlIGRvbSBoYXMgYmVlbiBhdHRhY2hlZC5cbiAgICAgKi9cbiAgICBfYXR0YWNoRG9tKGRvbSkge1xuICAgICAgY29uc3QgbiA9IHdyYXAodGhpcyk7XG4gICAgICBpZiAobi5hdHRhY2hTaGFkb3cpIHtcbiAgICAgICAgaWYgKGRvbSkge1xuICAgICAgICAgIGlmICghbi5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICBuLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nLCBzaGFkeVVwZ3JhZGVGcmFnbWVudDogZG9tfSk7XG4gICAgICAgICAgICBuLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN5bmNJbml0aWFsUmVuZGVyICYmIHdpbmRvdy5TaGFkeURPTSkge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5RE9NLmZsdXNoSW5pdGlhbChuLnNoYWRvd1Jvb3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbi5zaGFkb3dSb290O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaGFkb3dET00gbm90IGF2YWlsYWJsZS4gJyArXG4gICAgICAgICAgLy8gVE9ETyhzb3J2ZWxsKTogbW92ZSB0byBjb21waWxlLXRpbWUgY29uZGl0aW9uYWwgd2hlbiBzdXBwb3J0ZWRcbiAgICAgICAgJ1BvbHltZXJFbGVtZW50IGNhbiBjcmVhdGUgZG9tIGFzIGNoaWxkcmVuIGluc3RlYWQgb2YgaW4gJyArXG4gICAgICAgICdTaGFkb3dET00gYnkgc2V0dGluZyBgdGhpcy5yb290ID0gdGhpcztcXGAgYmVmb3JlIFxcYHJlYWR5XFxgLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdXNpbmcgdGhlIFNoYWR5Q1NTIHNjb3BpbmcgYW5kIGN1c3RvbSBwcm9wZXJ0eSBzaGltLCBjYXVzZXMgYWxsXG4gICAgICogc2hpbW1lZCBzdHlsZXMgaW4gdGhpcyBlbGVtZW50IChhbmQgaXRzIHN1YnRyZWUpIHRvIGJlIHVwZGF0ZWRcbiAgICAgKiBiYXNlZCBvbiBjdXJyZW50IGN1c3RvbSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBUaGUgb3B0aW9uYWwgcGFyYW1ldGVyIG92ZXJyaWRlcyBpbmxpbmUgY3VzdG9tIHByb3BlcnR5IHN0eWxlcyB3aXRoIGFuXG4gICAgICogb2JqZWN0IG9mIHByb3BlcnRpZXMgd2hlcmUgdGhlIGtleXMgYXJlIENTUyBwcm9wZXJ0aWVzLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIGFyZSBzdHJpbmdzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTogYHRoaXMudXBkYXRlU3R5bGVzKHsnLS1jb2xvcic6ICdibHVlJ30pYFxuICAgICAqXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmV0YWluZWQgdW5sZXNzIGEgdmFsdWUgb2YgYG51bGxgIGlzIHNldC5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gZG9lcyBub3Qgc3VwcG9ydCB1cGRhdGluZyBDU1MgbWl4aW5zLlxuICAgICAqIFlvdSBjYW4gbm90IGR5bmFtaWNhbGx5IGNoYW5nZSB0aGUgdmFsdWUgb2YgYW4gYEBhcHBseWAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXMgQmFnIG9mIGN1c3RvbSBwcm9wZXJ0eSBrZXkvdmFsdWVzIHRvXG4gICAgICogICBhcHBseSB0byB0aGlzIGVsZW1lbnQuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c31cbiAgICAgKi9cbiAgICB1cGRhdGVTdHlsZXMocHJvcGVydGllcykge1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeUNTUykge1xuICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVTdWJ0cmVlKC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKSwgcHJvcGVydGllcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV3cml0ZXMgYSBnaXZlbiBVUkwgcmVsYXRpdmUgdG8gYSBiYXNlIFVSTC4gVGhlIGJhc2UgVVJMIGRlZmF1bHRzIHRvXG4gICAgICogdGhlIG9yaWdpbmFsIGxvY2F0aW9uIG9mIHRoZSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBgZG9tLW1vZHVsZWAgZm9yXG4gICAgICogdGhpcyBlbGVtZW50LiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZSBVUkwgYmVmb3JlIGFuZCBhZnRlclxuICAgICAqIGJ1bmRsaW5nLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgbm8gcmVzb2x1dGlvbiBmb3IgVVJMcyB0aGF0IHN0YXJ0XG4gICAgICogd2l0aCBgL2AgKGFic29sdXRlIFVSTHMpIG9yIGAjYCAoaGFzaCBpZGVudGlmaWVycykuICBGb3IgZ2VuZXJhbCBwdXJwb3NlXG4gICAgICogVVJMIHJlc29sdXRpb24sIHVzZSBgd2luZG93LlVSTGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTCB0byByZXNvbHZlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYmFzZSBPcHRpb25hbCBiYXNlIFVSTCB0byByZXNvbHZlIGFnYWluc3QsIGRlZmF1bHRzXG4gICAgICogdG8gdGhlIGVsZW1lbnQncyBgaW1wb3J0UGF0aGBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJld3JpdHRlbiBVUkwgcmVsYXRpdmUgdG8gYmFzZVxuICAgICAqL1xuICAgIHJlc29sdmVVcmwodXJsLCBiYXNlKSB7XG4gICAgICBpZiAoIWJhc2UgJiYgdGhpcy5pbXBvcnRQYXRoKSB7XG4gICAgICAgIGJhc2UgPSByZXNvbHZlVXJsKHRoaXMuaW1wb3J0UGF0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZVVybCh1cmwsIGJhc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBhZGQgbWFwIG9mIGR5bmFtaWMgZnVuY3Rpb25zIG9uXG4gICAgICogdGVtcGxhdGUgaW5mbywgZm9yIGNvbnN1bXB0aW9uIGJ5IGBQcm9wZXJ0eUVmZmVjdHNgIHRlbXBsYXRlIGJpbmRpbmdcbiAgICAgKiBjb2RlLiBUaGlzIG1hcCBkZXRlcm1pbmVzIHdoaWNoIG1ldGhvZCB0ZW1wbGF0ZXMgc2hvdWxkIGhhdmUgYWNjZXNzb3JzXG4gICAgICogY3JlYXRlZCBmb3IgdGhlbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshVGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0geyFOb2RlSW5mb30gbm9kZUluZm8gTm9kZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSAuXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhcnNlVGVtcGxhdGVDb250ZW50KHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICB0ZW1wbGF0ZUluZm8uZHluYW1pY0ZucyA9IHRlbXBsYXRlSW5mby5keW5hbWljRm5zIHx8IHRoaXMuX3Byb3BlcnRpZXM7XG4gICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgIHJldHVybiBwb2x5bWVyRWxlbWVudEJhc2UuX3BhcnNlVGVtcGxhdGVDb250ZW50LmNhbGwoXG4gICAgICAgIHRoaXMsIHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYFByb3BlcnR5RWZmZWN0c2AgdG8gd2FybiBvbiB1c2Ugb2YgdW5kZWNsYXJlZCBwcm9wZXJ0aWVzIGluXG4gICAgICogdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIHRvIGFkZCBlZmZlY3QgdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGVmZmVjdCBFZmZlY3QgbWV0YWRhdGEgb2JqZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QodGVtcGxhdGVJbmZvLCBwcm9wLCBlZmZlY3QpIHtcbiAgICAgIC8vIFdhcm4gaWYgcHJvcGVydGllcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZSB3aXRob3V0IGJlaW5nIGRlY2xhcmVkLlxuICAgICAgLy8gUHJvcGVydGllcyBtdXN0IGJlIGxpc3RlZCBpbiBgcHJvcGVydGllc2AgdG8gYmUgaW5jbHVkZWQgaW5cbiAgICAgIC8vIGBvYnNlcnZlZEF0dHJpYnV0ZXNgIHNpbmNlIENFIFYxIHJlYWRzIHRoYXQgYXQgcmVnaXN0cmF0aW9uIHRpbWUsIGFuZFxuICAgICAgLy8gc2luY2Ugd2Ugd2FudCB0byBrZWVwIHRlbXBsYXRlIHBhcnNpbmcgbGF6eSwgd2UgY2FuJ3QgYXV0b21hdGljYWxseVxuICAgICAgLy8gYWRkIHVuZGVjbGFyZWQgcHJvcGVydGllcyB1c2VkIGluIHRlbXBsYXRlcyB0byBgb2JzZXJ2ZWRBdHRyaWJ1dGVzYC5cbiAgICAgIC8vIFRoZSB3YXJuaW5nIGlzIG9ubHkgZW5hYmxlZCBpbiBgbGVnYWN5T3B0aW1pemF0aW9uc2AgbW9kZSwgc2luY2VcbiAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gc3BhbSBleGlzdGluZyB1c2VycyB3aG8gbWlnaHQgaGF2ZSBhZG9wdGVkIHRoZVxuICAgICAgLy8gc2hvcnRoYW5kIHdoZW4gYXR0cmlidXRlIGRlc2VyaWFsaXphdGlvbiBpcyBub3QgaW1wb3J0YW50LlxuICAgICAgaWYgKGxlZ2FjeU9wdGltaXphdGlvbnMgJiYgIShwcm9wIGluIHRoaXMuX3Byb3BlcnRpZXMpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgUHJvcGVydHkgJyR7cHJvcH0nIHVzZWQgaW4gdGVtcGxhdGUgYnV0IG5vdCBkZWNsYXJlZCBpbiAncHJvcGVydGllcyc7IGAgK1xuICAgICAgICAgIGBhdHRyaWJ1dGUgd2lsbCBub3QgYmUgb2JzZXJ2ZWQuYCk7XG4gICAgICB9XG4gICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgIHJldHVybiBwb2x5bWVyRWxlbWVudEJhc2UuX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QuY2FsbChcbiAgICAgICAgdGhpcywgdGVtcGxhdGVJbmZvLCBwcm9wLCBlZmZlY3QpO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFBvbHltZXJFbGVtZW50O1xufSk7XG5cbi8qKlxuICogV2hlbiB1c2luZyB0aGUgU2hhZHlDU1Mgc2NvcGluZyBhbmQgY3VzdG9tIHByb3BlcnR5IHNoaW0sIGNhdXNlcyBhbGxcbiAqIHNoaW1tZWQgYHN0eWxlc2AgKHZpYSBgY3VzdG9tLXN0eWxlYCkgaW4gdGhlIGRvY3VtZW50IChhbmQgaXRzIHN1YnRyZWUpXG4gKiB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIGN1cnJlbnQgY3VzdG9tIHByb3BlcnR5IHZhbHVlcy5cbiAqXG4gKiBUaGUgb3B0aW9uYWwgcGFyYW1ldGVyIG92ZXJyaWRlcyBpbmxpbmUgY3VzdG9tIHByb3BlcnR5IHN0eWxlcyB3aXRoIGFuXG4gKiBvYmplY3Qgb2YgcHJvcGVydGllcyB3aGVyZSB0aGUga2V5cyBhcmUgQ1NTIHByb3BlcnRpZXMsIGFuZCB0aGUgdmFsdWVzXG4gKiBhcmUgc3RyaW5ncy5cbiAqXG4gKiBFeGFtcGxlOiBgdXBkYXRlU3R5bGVzKHsnLS1jb2xvcic6ICdibHVlJ30pYFxuICpcbiAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJldGFpbmVkIHVubGVzcyBhIHZhbHVlIG9mIGBudWxsYCBpcyBzZXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wcyBCYWcgb2YgY3VzdG9tIHByb3BlcnR5IGtleS92YWx1ZXMgdG9cbiAqICAgYXBwbHkgdG8gdGhlIGRvY3VtZW50LlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVN0eWxlcyA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIGlmICh3aW5kb3cuU2hhZHlDU1MpIHtcbiAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVEb2N1bWVudChwcm9wcyk7XG4gIH1cbn07XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG5pbXBvcnQgeyBFbGVtZW50TWl4aW4sIHZlcnNpb24gfSBmcm9tICcuL2xpYi9taXhpbnMvZWxlbWVudC1taXhpbi5qcyc7XG5leHBvcnQgeyBodG1sIH0gZnJvbSAnLi9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG5leHBvcnQgeyB2ZXJzaW9uIH07XG5cbi8qKlxuICogQmFzZSBjbGFzcyB0aGF0IHByb3ZpZGVzIHRoZSBjb3JlIEFQSSBmb3IgUG9seW1lcidzIG1ldGEtcHJvZ3JhbW1pbmdcbiAqIGZlYXR1cmVzIGluY2x1ZGluZyB0ZW1wbGF0ZSBzdGFtcGluZywgZGF0YS1iaW5kaW5nLCBhdHRyaWJ1dGUgZGVzZXJpYWxpemF0aW9uLFxuICogYW5kIHByb3BlcnR5IGNoYW5nZSBvYnNlcnZhdGlvbi5cbiAqXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQHBvbHltZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge1BvbHltZXJfRWxlbWVudE1peGlufVxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBhcHBsaWVzTWl4aW4gRWxlbWVudE1peGluXG4gKiBAc3VtbWFyeSBDdXN0b20gZWxlbWVudCBiYXNlIGNsYXNzIHRoYXQgcHJvdmlkZXMgdGhlIGNvcmUgQVBJIGZvciBQb2x5bWVyJ3NcbiAqICAga2V5IG1ldGEtcHJvZ3JhbW1pbmcgZmVhdHVyZXMgaW5jbHVkaW5nIHRlbXBsYXRlIHN0YW1waW5nLCBkYXRhLWJpbmRpbmcsXG4gKiAgIGF0dHJpYnV0ZSBkZXNlcmlhbGl6YXRpb24sIGFuZCBwcm9wZXJ0eSBjaGFuZ2Ugb2JzZXJ2YXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFBvbHltZXJFbGVtZW50ID0gRWxlbWVudE1peGluKEhUTUxFbGVtZW50KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmltcG9ydCAnLi9taXhpbi5qcyc7XG5pbXBvcnQgJy4vYXN5bmMuanMnO1xuXG4vKipcbiAqIEBzdW1tYXJ5IENvbGxhcHNlIG11bHRpcGxlIGNhbGxiYWNrcyBpbnRvIG9uZSBpbnZvY2F0aW9uIGFmdGVyIGEgdGltZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWJvdW5jZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9hc3luY01vZHVsZSA9IG51bGw7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBudWxsO1xuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgc2NoZWR1bGVyOyB0aGF0IGlzLCBhIG1vZHVsZSB3aXRoIHRoZSBBc3luYyBpbnRlcmZhY2UsXG4gICAqIGEgY2FsbGJhY2sgYW5kIG9wdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIHJ1biBmdW5jdGlvblxuICAgKiBmcm9tIHRoZSBhc3luYyBtb2R1bGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IUFzeW5jSW50ZXJmYWNlfSBhc3luY01vZHVsZSBPYmplY3Qgd2l0aCBBc3luYyBpbnRlcmZhY2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgQ2FsbGJhY2sgdG8gcnVuLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc2V0Q29uZmlnKGFzeW5jTW9kdWxlLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX2FzeW5jTW9kdWxlID0gYXN5bmNNb2R1bGU7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLl90aW1lciA9IHRoaXMuX2FzeW5jTW9kdWxlLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLl90aW1lciA9IG51bGw7XG4gICAgICBkZWJvdW5jZXJRdWV1ZS5kZWxldGUodGhpcyk7XG4gICAgICB0aGlzLl9jYWxsYmFjaygpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDYW5jZWxzIGFuIGFjdGl2ZSBkZWJvdW5jZXIgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gaXRzZWxmLlxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuX2NhbmNlbEFzeW5jKCk7XG4gICAgICAvLyBDYW5jZWxpbmcgYSBkZWJvdW5jZXIgcmVtb3ZlcyBpdHMgc3BvdCBmcm9tIHRoZSBmbHVzaCBxdWV1ZSxcbiAgICAgIC8vIHNvIGlmIGEgZGVib3VuY2VyIGlzIG1hbnVhbGx5IGNhbmNlbGVkIGFuZCByZS1kZWJvdW5jZWQsIGl0XG4gICAgICAvLyB3aWxsIHJlc2V0IGl0cyBmbHVzaCBvcmRlciAodGhpcyBpcyBhIHZlcnkgbWlub3IgZGlmZmVyZW5jZSBmcm9tIDEueClcbiAgICAgIC8vIFJlLWRlYm91bmNpbmcgdmlhIHRoZSBgZGVib3VuY2VgIEFQSSByZXRhaW5zIHRoZSAxLnggRklGTyBmbHVzaCBvcmRlclxuICAgICAgZGVib3VuY2VyUXVldWUuZGVsZXRlKHRoaXMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FuY2VscyBhIGRlYm91bmNlcidzIGFzeW5jIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgX2NhbmNlbEFzeW5jKCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuX2FzeW5jTW9kdWxlLmNhbmNlbCgvKiogQHR5cGUge251bWJlcn0gKi8odGhpcy5fdGltZXIpKTtcbiAgICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZsdXNoZXMgYW4gYWN0aXZlIGRlYm91bmNlciBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBpdHNlbGYuXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBmbHVzaCgpIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZGVib3VuY2VyIGlzIGFjdGl2ZS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhY3RpdmUuXG4gICAqL1xuICBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGltZXIgIT0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIGRlYm91bmNlciBpZiBubyBkZWJvdW5jZXIgaXMgcGFzc2VkIGFzIGEgcGFyYW1ldGVyXG4gICAqIG9yIGl0IGNhbmNlbHMgYW4gYWN0aXZlIGRlYm91bmNlciBvdGhlcndpc2UuIFRoZSBmb2xsb3dpbmdcbiAgICogZXhhbXBsZSBzaG93cyBob3cgYSBkZWJvdW5jZXIgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB3aXRoaW4gYVxuICAgKiBtaWNyb3Rhc2sgYW5kIFwiZGVib3VuY2VkXCIgc3VjaCB0aGF0IHRoZSBwcm92aWRlZCBjYWxsYmFjayBmdW5jdGlvbiBpc1xuICAgKiBjYWxsZWQgb25jZS4gQWRkIHRoaXMgbWV0aG9kIHRvIGEgY3VzdG9tIGVsZW1lbnQ6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGltcG9ydCB7bWljcm9UYXNrfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9hc3luYy5qcyc7XG4gICAqIGltcG9ydCB7RGVib3VuY2VyfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9kZWJvdW5jZS5qcyc7XG4gICAqIC8vIC4uLlxuICAgKlxuICAgKiBfZGVib3VuY2VXb3JrKCkge1xuICAgKiAgIHRoaXMuX2RlYm91bmNlSm9iID0gRGVib3VuY2VyLmRlYm91bmNlKHRoaXMuX2RlYm91bmNlSm9iLFxuICAgKiAgICAgICBtaWNyb1Rhc2ssICgpID0+IHRoaXMuX2RvV29yaygpKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIGBfZGVib3VuY2VXb3JrYCBtZXRob2QgaXMgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHdpdGhpbiB0aGUgc2FtZVxuICAgKiBtaWNyb3Rhc2ssIHRoZSBgX2RvV29ya2AgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgb25seSBvbmNlIGF0IHRoZSBuZXh0XG4gICAqIG1pY3JvdGFzayBjaGVja3BvaW50LlxuICAgKlxuICAgKiBOb3RlOiBJbiB0ZXN0aW5nIGl0IGlzIG9mdGVuIGNvbnZlbmllbnQgdG8gYXZvaWQgYXN5bmNocm9ueS4gVG8gYWNjb21wbGlzaFxuICAgKiB0aGlzIHdpdGggYSBkZWJvdW5jZXIsIHlvdSBjYW4gdXNlIGBlbnF1ZXVlRGVib3VuY2VyYCBhbmRcbiAgICogYGZsdXNoYC4gRm9yIGV4YW1wbGUsIGV4dGVuZCB0aGUgYWJvdmUgZXhhbXBsZSBieSBhZGRpbmdcbiAgICogYGVucXVldWVEZWJvdW5jZXIodGhpcy5fZGVib3VuY2VKb2IpYCBhdCB0aGUgZW5kIG9mIHRoZVxuICAgKiBgX2RlYm91bmNlV29ya2AgbWV0aG9kLiBUaGVuIGluIGEgdGVzdCwgY2FsbCBgZmx1c2hgIHRvIGVuc3VyZVxuICAgKiB0aGUgZGVib3VuY2VyIGhhcyBjb21wbGV0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7RGVib3VuY2VyP30gZGVib3VuY2VyIERlYm91bmNlciBvYmplY3QuXG4gICAqIEBwYXJhbSB7IUFzeW5jSW50ZXJmYWNlfSBhc3luY01vZHVsZSBPYmplY3Qgd2l0aCBBc3luYyBpbnRlcmZhY2VcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFjayBDYWxsYmFjayB0byBydW4uXG4gICAqIEByZXR1cm4geyFEZWJvdW5jZXJ9IFJldHVybnMgYSBkZWJvdW5jZXIgb2JqZWN0LlxuICAgKi9cbiAgc3RhdGljIGRlYm91bmNlKGRlYm91bmNlciwgYXN5bmNNb2R1bGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGRlYm91bmNlciBpbnN0YW5jZW9mIERlYm91bmNlcikge1xuICAgICAgLy8gQ2FuY2VsIHRoZSBhc3luYyBjYWxsYmFjaywgYnV0IGxlYXZlIGluIGRlYm91bmNlclF1ZXVlIGlmIGl0IHdhc1xuICAgICAgLy8gZW5xdWV1ZWQsIHRvIG1haW50YWluIDEueCBmbHVzaCBvcmRlclxuICAgICAgZGVib3VuY2VyLl9jYW5jZWxBc3luYygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJvdW5jZXIgPSBuZXcgRGVib3VuY2VyKCk7XG4gICAgfVxuICAgIGRlYm91bmNlci5zZXRDb25maWcoYXN5bmNNb2R1bGUsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gZGVib3VuY2VyO1xuICB9XG59XG5cbmxldCBkZWJvdW5jZXJRdWV1ZSA9IG5ldyBTZXQoKTtcblxuLyoqXG4gKiBBZGRzIGEgYERlYm91bmNlcmAgdG8gYSBsaXN0IG9mIGdsb2JhbGx5IGZsdXNoYWJsZSB0YXNrcy5cbiAqXG4gKiBAcGFyYW0geyFEZWJvdW5jZXJ9IGRlYm91bmNlciBEZWJvdW5jZXIgdG8gZW5xdWV1ZVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IGVucXVldWVEZWJvdW5jZXIgPSBmdW5jdGlvbihkZWJvdW5jZXIpIHtcbiAgZGVib3VuY2VyUXVldWUuYWRkKGRlYm91bmNlcik7XG59O1xuXG4vKipcbiAqIEZsdXNoZXMgYW55IGVucXVldWVkIGRlYm91bmNlcnNcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHdoZXRoZXIgYW55IGRlYm91bmNlcnMgd2VyZSBmbHVzaGVkXG4gKi9cbmV4cG9ydCBjb25zdCBmbHVzaERlYm91bmNlcnMgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgZGlkRmx1c2ggPSBCb29sZWFuKGRlYm91bmNlclF1ZXVlLnNpemUpO1xuICAvLyBJZiBuZXcgZGVib3VuY2VycyBhcmUgYWRkZWQgd2hpbGUgZmx1c2hpbmcsIFNldC5mb3JFYWNoIHdpbGwgZW5zdXJlXG4gIC8vIG5ld2x5IGFkZGVkIG9uZXMgYXJlIGFsc28gZmx1c2hlZFxuICBkZWJvdW5jZXJRdWV1ZS5mb3JFYWNoKGRlYm91bmNlciA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGRlYm91bmNlci5mbHVzaCgpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZGlkRmx1c2g7XG59OyIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIE1vZHVsZSBmb3IgYWRkaW5nIGxpc3RlbmVycyB0byBhIG5vZGUgZm9yIHRoZSBmb2xsb3dpbmcgbm9ybWFsaXplZFxuICogY3Jvc3MtcGxhdGZvcm0gXCJnZXN0dXJlXCIgZXZlbnRzOlxuICogLSBgZG93bmAgLSBtb3VzZSBvciB0b3VjaCB3ZW50IGRvd25cbiAqIC0gYHVwYCAtIG1vdXNlIG9yIHRvdWNoIHdlbnQgdXBcbiAqIC0gYHRhcGAgLSBtb3VzZSBjbGljayBvciBmaW5nZXIgdGFwXG4gKiAtIGB0cmFja2AgLSBtb3VzZSBkcmFnIG9yIHRvdWNoIG1vdmVcbiAqXG4gKiBAc3VtbWFyeSBNb2R1bGUgZm9yIGFkZGluZyBjcm9zcy1wbGF0Zm9ybSBnZXN0dXJlIGV2ZW50IGxpc3RlbmVycy5cbiAqL1xuXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmltcG9ydCB7IHRpbWVPdXQsIG1pY3JvVGFzayB9IGZyb20gJy4vYXN5bmMuanMnO1xuaW1wb3J0IHsgRGVib3VuY2VyIH0gZnJvbSAnLi9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyBwYXNzaXZlVG91Y2hHZXN0dXJlcywgY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMgfSBmcm9tICcuL3NldHRpbmdzLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuL3dyYXAuanMnO1xuXG4vLyBkZXRlY3QgbmF0aXZlIHRvdWNoIGFjdGlvbiBzdXBwb3J0XG5sZXQgSEFTX05BVElWRV9UQSA9IHR5cGVvZiBkb2N1bWVudC5oZWFkLnN0eWxlLnRvdWNoQWN0aW9uID09PSAnc3RyaW5nJztcbmxldCBHRVNUVVJFX0tFWSA9ICdfX3BvbHltZXJHZXN0dXJlcyc7XG5sZXQgSEFORExFRF9PQkogPSAnX19wb2x5bWVyR2VzdHVyZXNIYW5kbGVkJztcbmxldCBUT1VDSF9BQ1RJT04gPSAnX19wb2x5bWVyR2VzdHVyZXNUb3VjaEFjdGlvbic7XG4vLyByYWRpdXMgZm9yIHRhcCBhbmQgdHJhY2tcbmxldCBUQVBfRElTVEFOQ0UgPSAyNTtcbmxldCBUUkFDS19ESVNUQU5DRSA9IDU7XG4vLyBudW1iZXIgb2YgbGFzdCBOIHRyYWNrIHBvc2l0aW9ucyB0byBrZWVwXG5sZXQgVFJBQ0tfTEVOR1RIID0gMjtcblxuLy8gRGlzYWJsaW5nIFwibW91c2VcIiBoYW5kbGVycyBmb3IgMjUwMG1zIGlzIGVub3VnaFxubGV0IE1PVVNFX1RJTUVPVVQgPSAyNTAwO1xubGV0IE1PVVNFX0VWRU5UUyA9IFsnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdtb3VzZXVwJywgJ2NsaWNrJ107XG4vLyBhbiBhcnJheSBvZiBiaXRtYXNrIHZhbHVlcyBmb3IgbWFwcGluZyBNb3VzZUV2ZW50LndoaWNoIHRvIE1vdXNlRXZlbnQuYnV0dG9uc1xubGV0IE1PVVNFX1dISUNIX1RPX0JVVFRPTlMgPSBbMCwgMSwgNCwgMl07XG5sZXQgTU9VU0VfSEFTX0JVVFRPTlMgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBNb3VzZUV2ZW50KCd0ZXN0Jywge2J1dHRvbnM6IDF9KS5idXR0b25zID09PSAxO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFBvc3NpYmxlIG1vdXNlIGV2ZW50IG5hbWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgbW91c2UgZXZlbnQsIGZhbHNlIGlmIG5vdFxuICovXG5mdW5jdGlvbiBpc01vdXNlRXZlbnQobmFtZSkge1xuICByZXR1cm4gTU9VU0VfRVZFTlRTLmluZGV4T2YobmFtZSkgPiAtMTtcbn1cblxuLyogZXNsaW50IG5vLWVtcHR5OiBbXCJlcnJvclwiLCB7IFwiYWxsb3dFbXB0eUNhdGNoXCI6IHRydWUgfV0gKi9cbi8vIGNoZWNrIGZvciBwYXNzaXZlIGV2ZW50IGxpc3RlbmVyc1xubGV0IHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIGxldCBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtnZXQoKSB7c3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTt9fSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xuICB9IGNhdGNoKGUpIHt9XG59KSgpO1xuXG4vKipcbiAqIEdlbmVyYXRlIHNldHRpbmdzIGZvciBldmVudCBsaXN0ZW5lcnMsIGRlcGVuZGFudCBvbiBgcGFzc2l2ZVRvdWNoR2VzdHVyZXNgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBFdmVudCBuYW1lIHRvIGRldGVybWluZSBpZiBge3Bhc3NpdmV9YCBvcHRpb24gaXNcbiAqICAgbmVlZGVkXG4gKiBAcmV0dXJuIHt7cGFzc2l2ZTogYm9vbGVhbn0gfCB1bmRlZmluZWR9IE9wdGlvbnMgdG8gdXNlIGZvciBhZGRFdmVudExpc3RlbmVyXG4gKiAgIGFuZCByZW1vdmVFdmVudExpc3RlbmVyXG4gKi9cbmZ1bmN0aW9uIFBBU1NJVkVfVE9VQ0goZXZlbnROYW1lKSB7XG4gIGlmIChpc01vdXNlRXZlbnQoZXZlbnROYW1lKSB8fCBldmVudE5hbWUgPT09ICd0b3VjaGVuZCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEhBU19OQVRJVkVfVEEgJiYgc3VwcG9ydHNQYXNzaXZlICYmIHBhc3NpdmVUb3VjaEdlc3R1cmVzKSB7XG4gICAgcmV0dXJuIHtwYXNzaXZlOiB0cnVlfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuLy8gQ2hlY2sgZm9yIHRvdWNoLW9ubHkgZGV2aWNlc1xubGV0IElTX1RPVUNIX09OTFkgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUCg/OltvYV1kfGhvbmUpfEFuZHJvaWQvKTtcblxuLy8ga2VlcCB0cmFjayBvZiBhbnkgbGFiZWxzIGhpdCBieSB0aGUgbW91c2VDYW5jZWxsZXJcbi8qKiBAdHlwZSB7IUFycmF5PCFIVE1MTGFiZWxFbGVtZW50Pn0gKi9cbmNvbnN0IGNsaWNrZWRMYWJlbHMgPSBbXTtcblxuLyoqIEB0eXBlIHshT2JqZWN0PGJvb2xlYW4+fSAqL1xuY29uc3QgbGFiZWxsYWJsZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdpbnB1dCc6IHRydWUsXG4gICdrZXlnZW4nOiB0cnVlLFxuICAnbWV0ZXInOiB0cnVlLFxuICAnb3V0cHV0JzogdHJ1ZSxcbiAgJ3RleHRhcmVhJzogdHJ1ZSxcbiAgJ3Byb2dyZXNzJzogdHJ1ZSxcbiAgJ3NlbGVjdCc6IHRydWVcbn07XG5cbi8vIERlZmluZWQgYXQgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybS1jb250cm9sLWluZnJhc3RydWN0dXJlLmh0bWwjZW5hYmxpbmctYW5kLWRpc2FibGluZy1mb3JtLWNvbnRyb2xzOi10aGUtZGlzYWJsZWQtYXR0cmlidXRlXG4vKiogQHR5cGUgeyFPYmplY3Q8Ym9vbGVhbj59ICovXG5jb25zdCBjYW5CZURpc2FibGVkID0ge1xuICAnYnV0dG9uJzogdHJ1ZSxcbiAgJ2NvbW1hbmQnOiB0cnVlLFxuICAnZmllbGRzZXQnOiB0cnVlLFxuICAnaW5wdXQnOiB0cnVlLFxuICAna2V5Z2VuJzogdHJ1ZSxcbiAgJ29wdGdyb3VwJzogdHJ1ZSxcbiAgJ29wdGlvbic6IHRydWUsXG4gICdzZWxlY3QnOiB0cnVlLFxuICAndGV4dGFyZWEnOiB0cnVlXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgdG8gY2hlY2sgbGFiZWxsaW5nIHN0YXR1c1xuICogQHJldHVybiB7Ym9vbGVhbn0gZWxlbWVudCBjYW4gaGF2ZSBsYWJlbHNcbiAqL1xuZnVuY3Rpb24gY2FuQmVMYWJlbGxlZChlbCkge1xuICByZXR1cm4gbGFiZWxsYWJsZVtlbC5sb2NhbE5hbWVdIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgdGhhdCBtYXkgYmUgbGFiZWxsZWQuXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxMYWJlbEVsZW1lbnQ+fSBSZWxldmFudCBsYWJlbCBmb3IgYGVsYFxuICovXG5mdW5jdGlvbiBtYXRjaGluZ0xhYmVscyhlbCkge1xuICBsZXQgbGFiZWxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoLyoqIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqLyhlbCkubGFiZWxzIHx8IFtdKTtcbiAgLy8gSUUgZG9lc24ndCBoYXZlIGBsYWJlbHNgIGFuZCBTYWZhcmkgZG9lc24ndCBwb3B1bGF0ZSBgbGFiZWxzYFxuICAvLyBpZiBlbGVtZW50IGlzIGluIGEgc2hhZG93cm9vdC5cbiAgLy8gSW4gdGhpcyBpbnN0YW5jZSwgZmluZGluZyB0aGUgbm9uLWFuY2VzdG9yIGxhYmVscyBpcyBlbm91Z2gsXG4gIC8vIGFzIHRoZSBtb3VzZUNhbmNlbGxvciBjb2RlIHdpbGwgaGFuZGxlIGFuY3N0b3IgbGFiZWxzXG4gIGlmICghbGFiZWxzLmxlbmd0aCkge1xuICAgIGxhYmVscyA9IFtdO1xuICAgIGxldCByb290ID0gZWwuZ2V0Um9vdE5vZGUoKTtcbiAgICAvLyBpZiB0aGVyZSBpcyBhbiBpZCBvbiBgZWxgLCBjaGVjayBmb3IgYWxsIGxhYmVscyB3aXRoIGEgbWF0Y2hpbmcgYGZvcmAgYXR0cmlidXRlXG4gICAgaWYgKGVsLmlkKSB7XG4gICAgICBsZXQgbWF0Y2hpbmcgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoYGxhYmVsW2ZvciA9ICR7ZWwuaWR9XWApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsYWJlbHMucHVzaCgvKiogQHR5cGUgeyFIVE1MTGFiZWxFbGVtZW50fSAqLyhtYXRjaGluZ1tpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbGFiZWxzO1xufVxuXG4vLyB0b3VjaCB3aWxsIG1ha2Ugc3ludGhldGljIG1vdXNlIGV2ZW50c1xuLy8gYHByZXZlbnREZWZhdWx0YCBvbiB0b3VjaGVuZCB3aWxsIGNhbmNlbCB0aGVtLFxuLy8gYnV0IHRoaXMgYnJlYWtzIGA8aW5wdXQ+YCBmb2N1cyBhbmQgbGluayBjbGlja3Ncbi8vIGRpc2FibGUgbW91c2UgaGFuZGxlcnMgZm9yIE1PVVNFX1RJTUVPVVQgbXMgYWZ0ZXJcbi8vIGEgdG91Y2hlbmQgdG8gaWdub3JlIHN5bnRoZXRpYyBtb3VzZSBldmVudHNcbmxldCBtb3VzZUNhbmNlbGxlciA9IGZ1bmN0aW9uKG1vdXNlRXZlbnQpIHtcbiAgLy8gQ2hlY2sgZm9yIHNvdXJjZUNhcGFiaWxpdGllcywgdXNlZCB0byBkaXN0aW5ndWlzaCBzeW50aGV0aWMgZXZlbnRzXG4gIC8vIGlmIG1vdXNlRXZlbnQgZGlkIG5vdCBjb21lIGZyb20gYSBkZXZpY2UgdGhhdCBmaXJlcyB0b3VjaCBldmVudHMsXG4gIC8vIGl0IHdhcyBtYWRlIGJ5IGEgcmVhbCBtb3VzZSBhbmQgc2hvdWxkIGJlIGNvdW50ZWRcbiAgLy8gaHR0cDovL3dpY2cuZ2l0aHViLmlvL0lucHV0RGV2aWNlQ2FwYWJpbGl0aWVzLyNkb20taW5wdXRkZXZpY2VjYXBhYmlsaXRpZXMtZmlyZXN0b3VjaGV2ZW50c1xuICBsZXQgc2MgPSBtb3VzZUV2ZW50LnNvdXJjZUNhcGFiaWxpdGllcztcbiAgaWYgKHNjICYmICFzYy5maXJlc1RvdWNoRXZlbnRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNraXAgc3ludGhldGljIG1vdXNlIGV2ZW50c1xuICBtb3VzZUV2ZW50W0hBTkRMRURfT0JKXSA9IHtza2lwOiB0cnVlfTtcbiAgLy8gZGlzYWJsZSBcImdob3N0IGNsaWNrc1wiXG4gIGlmIChtb3VzZUV2ZW50LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICBsZXQgY2xpY2tGcm9tTGFiZWwgPSBmYWxzZTtcbiAgICBsZXQgcGF0aCA9IGdldENvbXBvc2VkUGF0aChtb3VzZUV2ZW50KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwYXRoW2ldLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBpZiAocGF0aFtpXS5sb2NhbE5hbWUgPT09ICdsYWJlbCcpIHtcbiAgICAgICAgICBjbGlja2VkTGFiZWxzLnB1c2goLyoqIEB0eXBlIHshSFRNTExhYmVsRWxlbWVudH0gKi8gKHBhdGhbaV0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5CZUxhYmVsbGVkKC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyAocGF0aFtpXSkpKSB7XG4gICAgICAgICAgbGV0IG93bmVyTGFiZWxzID1cbiAgICAgICAgICAgICAgbWF0Y2hpbmdMYWJlbHMoLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovIChwYXRoW2ldKSk7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgb25lIG9mIHRoZSBjbGlja2VkIGxhYmVscyBpcyBsYWJlbGxpbmcgdGhpcyBlbGVtZW50XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvd25lckxhYmVscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY2xpY2tGcm9tTGFiZWwgPSBjbGlja0Zyb21MYWJlbCB8fCBjbGlja2VkTGFiZWxzLmluZGV4T2Yob3duZXJMYWJlbHNbal0pID4gLTE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGF0aFtpXSA9PT0gUE9JTlRFUlNUQVRFLm1vdXNlLnRhcmdldCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIG9uZSBvZiB0aGUgY2xpY2tlZCBsYWJlbHMgd2FzIGxhYmVsbGluZyB0aGUgdGFyZ2V0IGVsZW1lbnQsXG4gICAgLy8gdGhpcyBpcyBub3QgYSBnaG9zdCBjbGlja1xuICAgIGlmIChjbGlja0Zyb21MYWJlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbW91c2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBzZXR1cCBUcnVlIHRvIGFkZCwgZmFsc2UgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gc2V0dXBUZWFyZG93bk1vdXNlQ2FuY2VsbGVyKHNldHVwKSB7XG4gIGxldCBldmVudHMgPSBJU19UT1VDSF9PTkxZID8gWydjbGljayddIDogTU9VU0VfRVZFTlRTO1xuICBmb3IgKGxldCBpID0gMCwgZW47IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBlbiA9IGV2ZW50c1tpXTtcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIC8vIHJlc2V0IGNsaWNrTGFiZWxzIGFycmF5XG4gICAgICBjbGlja2VkTGFiZWxzLmxlbmd0aCA9IDA7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGVuLCBtb3VzZUNhbmNlbGxlciwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZW4sIG1vdXNlQ2FuY2VsbGVyLCB0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaWdub3JlTW91c2UoZSkge1xuICBpZiAoIWNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghUE9JTlRFUlNUQVRFLm1vdXNlLm1vdXNlSWdub3JlSm9iKSB7XG4gICAgc2V0dXBUZWFyZG93bk1vdXNlQ2FuY2VsbGVyKHRydWUpO1xuICB9XG4gIGxldCB1bnNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHNldHVwVGVhcmRvd25Nb3VzZUNhbmNlbGxlcigpO1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS50YXJnZXQgPSBudWxsO1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYiA9IG51bGw7XG4gIH07XG4gIFBPSU5URVJTVEFURS5tb3VzZS50YXJnZXQgPSBnZXRDb21wb3NlZFBhdGgoZSlbMF07XG4gIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYiA9IERlYm91bmNlci5kZWJvdW5jZShcbiAgICAgICAgUE9JTlRFUlNUQVRFLm1vdXNlLm1vdXNlSWdub3JlSm9iXG4gICAgICAsIHRpbWVPdXQuYWZ0ZXIoTU9VU0VfVElNRU9VVClcbiAgICAgICwgdW5zZXQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXYgZXZlbnQgdG8gdGVzdCBmb3IgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICogQHJldHVybiB7Ym9vbGVhbn0gaGFzIGxlZnQgbW91c2UgYnV0dG9uIGRvd25cbiAqL1xuZnVuY3Rpb24gaGFzTGVmdE1vdXNlQnV0dG9uKGV2KSB7XG4gIGxldCB0eXBlID0gZXYudHlwZTtcbiAgLy8gZXhpdCBlYXJseSBpZiB0aGUgZXZlbnQgaXMgbm90IGEgbW91c2UgZXZlbnRcbiAgaWYgKCFpc01vdXNlRXZlbnQodHlwZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gZXYuYnV0dG9uIGlzIG5vdCByZWxpYWJsZSBmb3IgbW91c2Vtb3ZlICgwIGlzIG92ZXJsb2FkZWQgYXMgYm90aCBsZWZ0IGJ1dHRvbiBhbmQgbm8gYnV0dG9ucylcbiAgLy8gaW5zdGVhZCB3ZSB1c2UgZXYuYnV0dG9ucyAoYml0bWFzayBvZiBidXR0b25zKSBvciBmYWxsIGJhY2sgdG8gZXYud2hpY2ggKGRlcHJlY2F0ZWQsIDAgZm9yIG5vIGJ1dHRvbnMsIDEgZm9yIGxlZnQgYnV0dG9uKVxuICBpZiAodHlwZSA9PT0gJ21vdXNlbW92ZScpIHtcbiAgICAvLyBhbGxvdyB1bmRlZmluZWQgZm9yIHRlc3RpbmcgZXZlbnRzXG4gICAgbGV0IGJ1dHRvbnMgPSBldi5idXR0b25zID09PSB1bmRlZmluZWQgPyAxIDogZXYuYnV0dG9ucztcbiAgICBpZiAoKGV2IGluc3RhbmNlb2Ygd2luZG93Lk1vdXNlRXZlbnQpICYmICFNT1VTRV9IQVNfQlVUVE9OUykge1xuICAgICAgYnV0dG9ucyA9IE1PVVNFX1dISUNIX1RPX0JVVFRPTlNbZXYud2hpY2hdIHx8IDA7XG4gICAgfVxuICAgIC8vIGJ1dHRvbnMgaXMgYSBiaXRtYXNrLCBjaGVjayB0aGF0IHRoZSBsZWZ0IGJ1dHRvbiBiaXQgaXMgc2V0ICgxKVxuICAgIHJldHVybiBCb29sZWFuKGJ1dHRvbnMgJiAxKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBhbGxvdyB1bmRlZmluZWQgZm9yIHRlc3RpbmcgZXZlbnRzXG4gICAgbGV0IGJ1dHRvbiA9IGV2LmJ1dHRvbiA9PT0gdW5kZWZpbmVkID8gMCA6IGV2LmJ1dHRvbjtcbiAgICAvLyBldi5idXR0b24gaXMgMCBpbiBtb3VzZWRvd24vbW91c2V1cC9jbGljayBmb3IgbGVmdCBidXR0b24gYWN0aXZhdGlvblxuICAgIHJldHVybiBidXR0b24gPT09IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNDbGljayhldikge1xuICBpZiAoZXYudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgIC8vIGV2LmRldGFpbCBpcyAwIGZvciBIVE1MRWxlbWVudC5jbGljayBpbiBtb3N0IGJyb3dzZXJzXG4gICAgaWYgKGV2LmRldGFpbCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGluIHRoZSB3b3JzdCBjYXNlLCBjaGVjayB0aGF0IHRoZSB4L3kgcG9zaXRpb24gb2YgdGhlIGNsaWNrIGlzIHdpdGhpblxuICAgIC8vIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnRcbiAgICAvLyBUaGFua3MgSUUgMTAgPjooXG4gICAgbGV0IHQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0KGV2KTtcbiAgICAvLyBtYWtlIHN1cmUgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgaXMgYW4gZWxlbWVudCBzbyB3ZSBjYW4gdXNlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgICAvLyBpZiBub3QsIGp1c3QgYXNzdW1lIGl0IGlzIGEgc3ludGhldGljIGNsaWNrXG4gICAgaWYgKCF0Lm5vZGVUeXBlIHx8IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8odCkubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGJjciA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8odCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gdXNlIHBhZ2UgeC95IHRvIGFjY291bnQgZm9yIHNjcm9sbGluZ1xuICAgIGxldCB4ID0gZXYucGFnZVgsIHkgPSBldi5wYWdlWTtcbiAgICAvLyBldiBpcyBhIHN5bnRoZXRpYyBjbGljayBpZiB0aGUgcG9zaXRpb24gaXMgb3V0c2lkZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSB0YXJnZXRcbiAgICByZXR1cm4gISgoeCA+PSBiY3IubGVmdCAmJiB4IDw9IGJjci5yaWdodCkgJiYgKHkgPj0gYmNyLnRvcCAmJiB5IDw9IGJjci5ib3R0b20pKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmxldCBQT0lOVEVSU1RBVEUgPSB7XG4gIG1vdXNlOiB7XG4gICAgdGFyZ2V0OiBudWxsLFxuICAgIG1vdXNlSWdub3JlSm9iOiBudWxsXG4gIH0sXG4gIHRvdWNoOiB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIGlkOiAtMSxcbiAgICBzY3JvbGxEZWNpZGVkOiBmYWxzZVxuICB9XG59O1xuXG5mdW5jdGlvbiBmaXJzdFRvdWNoQWN0aW9uKGV2KSB7XG4gIGxldCB0YSA9ICdhdXRvJztcbiAgbGV0IHBhdGggPSBnZXRDb21wb3NlZFBhdGgoZXYpO1xuICBmb3IgKGxldCBpID0gMCwgbjsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICBuID0gcGF0aFtpXTtcbiAgICBpZiAobltUT1VDSF9BQ1RJT05dKSB7XG4gICAgICB0YSA9IG5bVE9VQ0hfQUNUSU9OXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGE7XG59XG5cbmZ1bmN0aW9uIHRyYWNrRG9jdW1lbnQoc3RhdGVPYmosIG1vdmVmbiwgdXBmbikge1xuICBzdGF0ZU9iai5tb3ZlZm4gPSBtb3ZlZm47XG4gIHN0YXRlT2JqLnVwZm4gPSB1cGZuO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlZm4pO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBmbik7XG59XG5cbmZ1bmN0aW9uIHVudHJhY2tEb2N1bWVudChzdGF0ZU9iaikge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzdGF0ZU9iai5tb3ZlZm4pO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc3RhdGVPYmoudXBmbik7XG4gIHN0YXRlT2JqLm1vdmVmbiA9IG51bGw7XG4gIHN0YXRlT2JqLnVwZm4gPSBudWxsO1xufVxuXG5pZiAoY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMpIHtcbiAgLy8gdXNlIGEgZG9jdW1lbnQtd2lkZSB0b3VjaGVuZCBsaXN0ZW5lciB0byBzdGFydCB0aGUgZ2hvc3QtY2xpY2sgcHJldmVudGlvbiBtZWNoYW5pc21cbiAgLy8gVXNlIHBhc3NpdmUgZXZlbnQgbGlzdGVuZXJzLCBpZiBzdXBwb3J0ZWQsIHRvIG5vdCBhZmZlY3Qgc2Nyb2xsaW5nIHBlcmZvcm1hbmNlXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaWdub3JlTW91c2UsIHN1cHBvcnRzUGFzc2l2ZSA/IHtwYXNzaXZlOiB0cnVlfSA6IGZhbHNlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb21wb3NlZFBhdGggZm9yIHRoZSBnaXZlbiBldmVudC5cbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IHRvIHByb2Nlc3NcbiAqIEByZXR1cm4geyFBcnJheTwhRXZlbnRUYXJnZXQ+fSBQYXRoIG9mIHRoZSBldmVudFxuICovXG5jb25zdCBnZXRDb21wb3NlZFBhdGggPSB3aW5kb3cuU2hhZHlET00gJiYgd2luZG93LlNoYWR5RE9NLm5vUGF0Y2ggP1xuICB3aW5kb3cuU2hhZHlET00uY29tcG9zZWRQYXRoIDpcbiAgKGV2ZW50KSA9PiBldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKCkgfHwgW107XG5cbi8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFHZXN0dXJlUmVjb2duaXplcj59ICovXG5leHBvcnQgY29uc3QgZ2VzdHVyZXMgPSB7fTtcblxuLyoqIEB0eXBlIHshQXJyYXk8IUdlc3R1cmVSZWNvZ25pemVyPn0gKi9cbmV4cG9ydCBjb25zdCByZWNvZ25pemVycyA9IFtdO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBlbGVtZW50IHJlbmRlcmVkIG9uIHRoZSBzY3JlZW4gYXQgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGVzLlxuICpcbiAqIFNpbWlsYXIgdG8gYGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnRgLCBidXQgcGllcmNlcyB0aHJvdWdoXG4gKiBzaGFkb3cgcm9vdHMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggSG9yaXpvbnRhbCBwaXhlbCBjb29yZGluYXRlXG4gKiBAcGFyYW0ge251bWJlcn0geSBWZXJ0aWNhbCBwaXhlbCBjb29yZGluYXRlXG4gKiBAcmV0dXJuIHtFbGVtZW50fSBSZXR1cm5zIHRoZSBkZWVwZXN0IHNoYWRvd1Jvb3QgaW5jbHVzaXZlIGVsZW1lbnRcbiAqIGZvdW5kIGF0IHRoZSBzY3JlZW4gcG9zaXRpb24gZ2l2ZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwVGFyZ2V0RmluZCh4LCB5KSB7XG4gIGxldCBub2RlID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgbGV0IG5leHQgPSBub2RlO1xuICAvLyB0aGlzIGNvZGUgcGF0aCBpcyBvbmx5IHRha2VuIHdoZW4gbmF0aXZlIFNoYWRvd0RPTSBpcyB1c2VkXG4gIC8vIGlmIHRoZXJlIGlzIGEgc2hhZG93cm9vdCwgaXQgbWF5IGhhdmUgYSBub2RlIGF0IHgveVxuICAvLyBpZiB0aGVyZSBpcyBub3QgYSBzaGFkb3dyb290LCBleGl0IHRoZSBsb29wXG4gIHdoaWxlIChuZXh0ICYmIG5leHQuc2hhZG93Um9vdCAmJiAhd2luZG93LlNoYWR5RE9NKSB7XG4gICAgLy8gaWYgdGhlcmUgaXMgYSBub2RlIGF0IHgveSBpbiB0aGUgc2hhZG93cm9vdCwgbG9vayBkZWVwZXJcbiAgICBsZXQgb2xkTmV4dCA9IG5leHQ7XG4gICAgbmV4dCA9IG5leHQuc2hhZG93Um9vdC5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICAgIC8vIG9uIFNhZmFyaSwgZWxlbWVudEZyb21Qb2ludCBtYXkgcmV0dXJuIHRoZSBzaGFkb3dSb290IGhvc3RcbiAgICBpZiAob2xkTmV4dCA9PT0gbmV4dCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChuZXh0KSB7XG4gICAgICBub2RlID0gbmV4dDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogYSBjaGVhcGVyIGNoZWNrIHRoYW4gZXYuY29tcG9zZWRQYXRoKClbMF07XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RXZlbnR8VG91Y2h9IGV2IEV2ZW50LlxuICogQHJldHVybiB7RXZlbnRUYXJnZXR9IFJldHVybnMgdGhlIGV2ZW50IHRhcmdldC5cbiAqL1xuZnVuY3Rpb24gX2ZpbmRPcmlnaW5hbFRhcmdldChldikge1xuICBjb25zdCBwYXRoID0gZ2V0Q29tcG9zZWRQYXRoKC8qKiBAdHlwZSB7P0V2ZW50fSAqLyAoZXYpKTtcbiAgLy8gSXQgc2hvdWxkbid0IGJlLCBidXQgc29tZXRpbWVzIHBhdGggaXMgZW1wdHkgKHdpbmRvdyBvbiBTYWZhcmkpLlxuICByZXR1cm4gcGF0aC5sZW5ndGggPiAwID8gcGF0aFswXSA6IGV2LnRhcmdldDtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtFdmVudH0gZXYgRXZlbnQuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBfaGFuZGxlTmF0aXZlKGV2KSB7XG4gIGxldCBoYW5kbGVkO1xuICBsZXQgdHlwZSA9IGV2LnR5cGU7XG4gIGxldCBub2RlID0gZXYuY3VycmVudFRhcmdldDtcbiAgbGV0IGdvYmogPSBub2RlW0dFU1RVUkVfS0VZXTtcbiAgaWYgKCFnb2JqKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBncyA9IGdvYmpbdHlwZV07XG4gIGlmICghZ3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFldltIQU5ETEVEX09CSl0pIHtcbiAgICBldltIQU5ETEVEX09CSl0gPSB7fTtcbiAgICBpZiAodHlwZS5zbGljZSgwLCA1KSA9PT0gJ3RvdWNoJykge1xuICAgICAgZXYgPSAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovKGV2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICAgICAgbGV0IHQgPSBldi5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIGlmICh0eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgLy8gb25seSBoYW5kbGUgdGhlIGZpcnN0IGZpbmdlclxuICAgICAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBQT0lOVEVSU1RBVEUudG91Y2guaWQgPSB0LmlkZW50aWZpZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChQT0lOVEVSU1RBVEUudG91Y2guaWQgIT09IHQuaWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIUhBU19OQVRJVkVfVEEpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICd0b3VjaHN0YXJ0JyB8fCB0eXBlID09PSAndG91Y2htb3ZlJykge1xuICAgICAgICAgIF9oYW5kbGVUb3VjaEFjdGlvbihldik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaGFuZGxlZCA9IGV2W0hBTkRMRURfT0JKXTtcbiAgLy8gdXNlZCB0byBpZ25vcmUgc3ludGhldGljIG1vdXNlIGV2ZW50c1xuICBpZiAoaGFuZGxlZC5za2lwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHJlc2V0IHJlY29nbml6ZXIgc3RhdGVcbiAgZm9yIChsZXQgaSA9IDAsIHI7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuICAgIHIgPSByZWNvZ25pemVyc1tpXTtcbiAgICBpZiAoZ3Nbci5uYW1lXSAmJiAhaGFuZGxlZFtyLm5hbWVdKSB7XG4gICAgICBpZiAoci5mbG93ICYmIHIuZmxvdy5zdGFydC5pbmRleE9mKGV2LnR5cGUpID4gLTEgJiYgci5yZXNldCkge1xuICAgICAgICByLnJlc2V0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGVuZm9yY2UgZ2VzdHVyZSByZWNvZ25pemVyIG9yZGVyXG4gIGZvciAobGV0IGkgPSAwLCByOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICByID0gcmVjb2duaXplcnNbaV07XG4gICAgaWYgKGdzW3IubmFtZV0gJiYgIWhhbmRsZWRbci5uYW1lXSkge1xuICAgICAgaGFuZGxlZFtyLm5hbWVdID0gdHJ1ZTtcbiAgICAgIHJbdHlwZV0oZXYpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2IEV2ZW50LlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gX2hhbmRsZVRvdWNoQWN0aW9uKGV2KSB7XG4gIGxldCB0ID0gZXYuY2hhbmdlZFRvdWNoZXNbMF07XG4gIGxldCB0eXBlID0gZXYudHlwZTtcbiAgaWYgKHR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xuICAgIFBPSU5URVJTVEFURS50b3VjaC54ID0gdC5jbGllbnRYO1xuICAgIFBPSU5URVJTVEFURS50b3VjaC55ID0gdC5jbGllbnRZO1xuICAgIFBPSU5URVJTVEFURS50b3VjaC5zY3JvbGxEZWNpZGVkID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcbiAgICBpZiAoUE9JTlRFUlNUQVRFLnRvdWNoLnNjcm9sbERlY2lkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUE9JTlRFUlNUQVRFLnRvdWNoLnNjcm9sbERlY2lkZWQgPSB0cnVlO1xuICAgIGxldCB0YSA9IGZpcnN0VG91Y2hBY3Rpb24oZXYpO1xuICAgIGxldCBzaG91bGRQcmV2ZW50ID0gZmFsc2U7XG4gICAgbGV0IGR4ID0gTWF0aC5hYnMoUE9JTlRFUlNUQVRFLnRvdWNoLnggLSB0LmNsaWVudFgpO1xuICAgIGxldCBkeSA9IE1hdGguYWJzKFBPSU5URVJTVEFURS50b3VjaC55IC0gdC5jbGllbnRZKTtcbiAgICBpZiAoIWV2LmNhbmNlbGFibGUpIHtcbiAgICAgIC8vIHNjcm9sbGluZyBpcyBoYXBwZW5pbmdcbiAgICB9IGVsc2UgaWYgKHRhID09PSAnbm9uZScpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGEgPT09ICdwYW4teCcpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSBkeSA+IGR4O1xuICAgIH0gZWxzZSBpZiAodGEgPT09ICdwYW4teScpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSBkeCA+IGR5O1xuICAgIH1cbiAgICBpZiAoc2hvdWxkUHJldmVudCkge1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmVudCgndHJhY2snKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgbm9kZSBmb3IgdGhlIGdpdmVuIGdlc3R1cmUgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIGFkZCBsaXN0ZW5lciBvblxuICogQHBhcmFtIHtzdHJpbmd9IGV2VHlwZSBHZXN0dXJlIHR5cGU6IGBkb3duYCwgYHVwYCwgYHRyYWNrYCwgb3IgYHRhcGBcbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCFFdmVudCk6dm9pZH0gaGFuZGxlciBFdmVudCBsaXN0ZW5lciBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYSBnZXN0dXJlIGV2ZW50IGxpc3RlbmVyIHdhcyBhZGRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExpc3RlbmVyKG5vZGUsIGV2VHlwZSwgaGFuZGxlcikge1xuICBpZiAoZ2VzdHVyZXNbZXZUeXBlXSkge1xuICAgIF9hZGQobm9kZSwgZXZUeXBlLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBmcm9tIGEgbm9kZSBmb3IgdGhlIGdpdmVuIGdlc3R1cmUgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIHJlbW92ZSBsaXN0ZW5lciBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZUeXBlIEdlc3R1cmUgdHlwZTogYGRvd25gLCBgdXBgLCBgdHJhY2tgLCBvciBgdGFwYFxuICogQHBhcmFtIHshZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIEV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByZXZpb3VzbHkgcGFzc2VkIHRvXG4gKiAgYGFkZExpc3RlbmVyYC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhIGdlc3R1cmUgZXZlbnQgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihub2RlLCBldlR5cGUsIGhhbmRsZXIpIHtcbiAgaWYgKGdlc3R1cmVzW2V2VHlwZV0pIHtcbiAgICBfcmVtb3ZlKG5vZGUsIGV2VHlwZSwgaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIGF1dG9tYXRlIHRoZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBuYXRpdmUgZXZlbnRzXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBub2RlIE5vZGUgb24gd2hpY2ggdG8gYWRkIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBldlR5cGUgRXZlbnQgdHlwZSB0byBhZGQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGhhbmRsZXIgRXZlbnQgaGFuZGxlciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIF9hZGQobm9kZSwgZXZUeXBlLCBoYW5kbGVyKSB7XG4gIGxldCByZWNvZ25pemVyID0gZ2VzdHVyZXNbZXZUeXBlXTtcbiAgbGV0IGRlcHMgPSByZWNvZ25pemVyLmRlcHM7XG4gIGxldCBuYW1lID0gcmVjb2duaXplci5uYW1lO1xuICBsZXQgZ29iaiA9IG5vZGVbR0VTVFVSRV9LRVldO1xuICBpZiAoIWdvYmopIHtcbiAgICBub2RlW0dFU1RVUkVfS0VZXSA9IGdvYmogPSB7fTtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgZGVwLCBnZDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcbiAgICBkZXAgPSBkZXBzW2ldO1xuICAgIC8vIGRvbid0IGFkZCBtb3VzZSBoYW5kbGVycyBvbiBpT1MgYmVjYXVzZSB0aGV5IGNhdXNlIGdyYXkgc2VsZWN0aW9uIG92ZXJsYXlzXG4gICAgaWYgKElTX1RPVUNIX09OTFkgJiYgaXNNb3VzZUV2ZW50KGRlcCkgJiYgZGVwICE9PSAnY2xpY2snKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZ2QgPSBnb2JqW2RlcF07XG4gICAgaWYgKCFnZCkge1xuICAgICAgZ29ialtkZXBdID0gZ2QgPSB7X2NvdW50OiAwfTtcbiAgICB9XG4gICAgaWYgKGdkLl9jb3VudCA9PT0gMCkge1xuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGRlcCwgX2hhbmRsZU5hdGl2ZSwgUEFTU0lWRV9UT1VDSChkZXApKTtcbiAgICB9XG4gICAgZ2RbbmFtZV0gPSAoZ2RbbmFtZV0gfHwgMCkgKyAxO1xuICAgIGdkLl9jb3VudCA9IChnZC5fY291bnQgfHwgMCkgKyAxO1xuICB9XG4gIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGhhbmRsZXIpO1xuICBpZiAocmVjb2duaXplci50b3VjaEFjdGlvbikge1xuICAgIHNldFRvdWNoQWN0aW9uKG5vZGUsIHJlY29nbml6ZXIudG91Y2hBY3Rpb24pO1xuICB9XG59XG5cbi8qKlxuICogYXV0b21hdGUgZXZlbnQgbGlzdGVuZXIgcmVtb3ZhbCBmb3IgbmF0aXZlIGV2ZW50c1xuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIG9uIHdoaWNoIHRvIHJlbW92ZSB0aGUgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZUeXBlIEV2ZW50IHR5cGUgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpOiB2b2lkfSBoYW5kbGVyIEV2ZW50IGhhbmRsZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBfcmVtb3ZlKG5vZGUsIGV2VHlwZSwgaGFuZGxlcikge1xuICBsZXQgcmVjb2duaXplciA9IGdlc3R1cmVzW2V2VHlwZV07XG4gIGxldCBkZXBzID0gcmVjb2duaXplci5kZXBzO1xuICBsZXQgbmFtZSA9IHJlY29nbml6ZXIubmFtZTtcbiAgbGV0IGdvYmogPSBub2RlW0dFU1RVUkVfS0VZXTtcbiAgaWYgKGdvYmopIHtcbiAgICBmb3IgKGxldCBpID0gMCwgZGVwLCBnZDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlcCA9IGRlcHNbaV07XG4gICAgICBnZCA9IGdvYmpbZGVwXTtcbiAgICAgIGlmIChnZCAmJiBnZFtuYW1lXSkge1xuICAgICAgICBnZFtuYW1lXSA9IChnZFtuYW1lXSB8fCAxKSAtIDE7XG4gICAgICAgIGdkLl9jb3VudCA9IChnZC5fY291bnQgfHwgMSkgLSAxO1xuICAgICAgICBpZiAoZ2QuX2NvdW50ID09PSAwKSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGRlcCwgX2hhbmRsZU5hdGl2ZSwgUEFTU0lWRV9UT1VDSChkZXApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZUeXBlLCBoYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBuZXcgZ2VzdHVyZSBldmVudCByZWNvZ25pemVyIGZvciBhZGRpbmcgbmV3IGN1c3RvbVxuICogZ2VzdHVyZSBldmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0geyFHZXN0dXJlUmVjb2duaXplcn0gcmVjb2cgR2VzdHVyZSByZWNvZ25pemVyIGRlc2NyaXB0b3JcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlcihyZWNvZykge1xuICByZWNvZ25pemVycy5wdXNoKHJlY29nKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvZy5lbWl0cy5sZW5ndGg7IGkrKykge1xuICAgIGdlc3R1cmVzW3JlY29nLmVtaXRzW2ldXSA9IHJlY29nO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBldk5hbWUgRXZlbnQgbmFtZS5cbiAqIEByZXR1cm4ge09iamVjdH0gUmV0dXJucyB0aGUgZ2VzdHVyZSBmb3IgdGhlIGdpdmVuIGV2ZW50IG5hbWUuXG4gKi9cbmZ1bmN0aW9uIF9maW5kUmVjb2duaXplckJ5RXZlbnQoZXZOYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwLCByOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICByID0gcmVjb2duaXplcnNbaV07XG4gICAgZm9yIChsZXQgaiA9IDAsIG47IGogPCByLmVtaXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICBuID0gci5lbWl0c1tqXTtcbiAgICAgIGlmIChuID09PSBldk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFNldHMgc2Nyb2xsaW5nIGRpcmVjdGlvbiBvbiBub2RlLlxuICpcbiAqIFRoaXMgdmFsdWUgaXMgY2hlY2tlZCBvbiBmaXJzdCBtb3ZlLCB0aHVzIGl0IHNob3VsZCBiZSBjYWxsZWQgcHJpb3IgdG9cbiAqIGFkZGluZyBldmVudCBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IG5vZGUgTm9kZSB0byBzZXQgdG91Y2ggYWN0aW9uIHNldHRpbmcgb25cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUb3VjaCBhY3Rpb24gdmFsdWVcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUb3VjaEFjdGlvbihub2RlLCB2YWx1ZSkge1xuICBpZiAoSEFTX05BVElWRV9UQSAmJiBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBOT1RFOiBhZGQgdG91Y2hBY3Rpb24gYXN5bmMgc28gdGhhdCBldmVudHMgY2FuIGJlIGFkZGVkIGluXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3JzLiBPdGhlcndpc2Ugd2UgcnVuIGFmb3VsIG9mIGN1c3RvbVxuICAgIC8vIGVsZW1lbnRzIHJlc3RyaWN0aW9uIGFnYWluc3Qgc2V0dGluZ3MgYXR0cmlidXRlcyAoc3R5bGUpIGluIHRoZVxuICAgIC8vIGNvbnN0cnVjdG9yLlxuICAgIG1pY3JvVGFzay5ydW4oKCkgPT4ge1xuICAgICAgbm9kZS5zdHlsZS50b3VjaEFjdGlvbiA9IHZhbHVlO1xuICAgIH0pO1xuICB9XG4gIG5vZGVbVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xufVxuXG4vKipcbiAqIERpc3BhdGNoZXMgYW4gZXZlbnQgb24gdGhlIGB0YXJnZXRgIGVsZW1lbnQgb2YgYHR5cGVgIHdpdGggdGhlIGdpdmVuXG4gKiBgZGV0YWlsYC5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gdGFyZ2V0IFRoZSBlbGVtZW50IG9uIHdoaWNoIHRvIGZpcmUgYW4gZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBldmVudCB0byBmaXJlLlxuICogQHBhcmFtIHshT2JqZWN0PX0gZGV0YWlsIFRoZSBkZXRhaWwgb2JqZWN0IHRvIHBvcHVsYXRlIG9uIHRoZSBldmVudC5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIF9maXJlKHRhcmdldCwgdHlwZSwgZGV0YWlsKSB7XG4gIGxldCBldiA9IG5ldyBFdmVudCh0eXBlLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUsIGNvbXBvc2VkOiB0cnVlIH0pO1xuICBldi5kZXRhaWwgPSBkZXRhaWw7XG4gIHdyYXAoLyoqIEB0eXBlIHshTm9kZX0gKi8odGFyZ2V0KSkuZGlzcGF0Y2hFdmVudChldik7XG4gIC8vIGZvcndhcmQgYHByZXZlbnREZWZhdWx0YCBpbiBhIGNsZWFuIHdheVxuICBpZiAoZXYuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgIGxldCBwcmV2ZW50ZXIgPSBkZXRhaWwucHJldmVudGVyIHx8IGRldGFpbC5zb3VyY2VFdmVudDtcbiAgICBpZiAocHJldmVudGVyICYmIHByZXZlbnRlci5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgcHJldmVudGVyLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHJldmVudHMgdGhlIGRpc3BhdGNoIGFuZCBkZWZhdWx0IGFjdGlvbiBvZiB0aGUgZ2l2ZW4gZXZlbnQgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZOYW1lIEV2ZW50IG5hbWUuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudChldk5hbWUpIHtcbiAgbGV0IHJlY29nbml6ZXIgPSBfZmluZFJlY29nbml6ZXJCeUV2ZW50KGV2TmFtZSk7XG4gIGlmIChyZWNvZ25pemVyLmluZm8pIHtcbiAgICByZWNvZ25pemVyLmluZm8ucHJldmVudCA9IHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXNldCB0aGUgMjUwMG1zIHRpbWVvdXQgb24gcHJvY2Vzc2luZyBtb3VzZSBpbnB1dCBhZnRlciBkZXRlY3RpbmcgdG91Y2ggaW5wdXQuXG4gKlxuICogVG91Y2ggaW5wdXRzIGNyZWF0ZSBzeW50aGVzaXplZCBtb3VzZSBpbnB1dHMgYW55d2hlcmUgZnJvbSAwIHRvIDIwMDBtcyBhZnRlciB0aGUgdG91Y2guXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZHVyaW5nIHRlc3Rpbmcgd2l0aCBzaW11bGF0ZWQgdG91Y2ggaW5wdXRzLlxuICogQ2FsbGluZyB0aGlzIG1ldGhvZCBpbiBwcm9kdWN0aW9uIG1heSBjYXVzZSBkdXBsaWNhdGUgdGFwcyBvciBvdGhlciBHZXN0dXJlcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRNb3VzZUNhbmNlbGxlcigpIHtcbiAgaWYgKFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYikge1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYi5mbHVzaCgpO1xuICB9XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG5cbnJlZ2lzdGVyKHtcbiAgbmFtZTogJ2Rvd251cCcsXG4gIGRlcHM6IFsnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnXSxcbiAgZmxvdzoge1xuICAgIHN0YXJ0OiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sXG4gICAgZW5kOiBbJ21vdXNldXAnLCAndG91Y2hlbmQnXVxuICB9LFxuICBlbWl0czogWydkb3duJywgJ3VwJ10sXG5cbiAgaW5mbzoge1xuICAgIG1vdmVmbjogbnVsbCxcbiAgICB1cGZuOiBudWxsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB1bnRyYWNrRG9jdW1lbnQodGhpcy5pbmZvKTtcbiAgfSxcblxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIG1vdXNlZG93bjogZnVuY3Rpb24oZSkge1xuICAgIGlmICghaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0ID0gX2ZpbmRPcmlnaW5hbFRhcmdldChlKTtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IG1vdmVmbiA9IGZ1bmN0aW9uIG1vdmVmbihlKSB7XG4gICAgICBpZiAoIWhhc0xlZnRNb3VzZUJ1dHRvbihlKSkge1xuICAgICAgICBkb3dudXBGaXJlKCd1cCcsIHQsIGUpO1xuICAgICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCB1cGZuID0gZnVuY3Rpb24gdXBmbihlKSB7XG4gICAgICBpZiAoaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICAgIGRvd251cEZpcmUoJ3VwJywgdCwgZSk7XG4gICAgICB9XG4gICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICB9O1xuICAgIHRyYWNrRG9jdW1lbnQodGhpcy5pbmZvLCBtb3ZlZm4sIHVwZm4pO1xuICAgIGRvd251cEZpcmUoJ2Rvd24nLCB0LCBlKTtcbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB0b3VjaHN0YXJ0OiBmdW5jdGlvbihlKSB7XG4gICAgZG93bnVwRmlyZSgnZG93bicsIF9maW5kT3JpZ2luYWxUYXJnZXQoZSksIGUuY2hhbmdlZFRvdWNoZXNbMF0sIGUpO1xuICB9LFxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHRvdWNoZW5kOiBmdW5jdGlvbihlKSB7XG4gICAgZG93bnVwRmlyZSgndXAnLCBfZmluZE9yaWdpbmFsVGFyZ2V0KGUpLCBlLmNoYW5nZWRUb3VjaGVzWzBdLCBlKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtFdmVudHxUb3VjaH0gZXZlbnRcbiAqIEBwYXJhbSB7RXZlbnQ9fSBwcmV2ZW50ZXJcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGRvd251cEZpcmUodHlwZSwgdGFyZ2V0LCBldmVudCwgcHJldmVudGVyKSB7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIF9maXJlKHRhcmdldCwgdHlwZSwge1xuICAgIHg6IGV2ZW50LmNsaWVudFgsXG4gICAgeTogZXZlbnQuY2xpZW50WSxcbiAgICBzb3VyY2VFdmVudDogZXZlbnQsXG4gICAgcHJldmVudGVyOiBwcmV2ZW50ZXIsXG4gICAgcHJldmVudDogZnVuY3Rpb24oZSkge1xuICAgICAgcmV0dXJuIHByZXZlbnQoZSk7XG4gICAgfVxuICB9KTtcbn1cblxucmVnaXN0ZXIoe1xuICBuYW1lOiAndHJhY2snLFxuICB0b3VjaEFjdGlvbjogJ25vbmUnLFxuICBkZXBzOiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0JywgJ3RvdWNobW92ZScsICd0b3VjaGVuZCddLFxuICBmbG93OiB7XG4gICAgc3RhcnQ6IFsnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnXSxcbiAgICBlbmQ6IFsnbW91c2V1cCcsICd0b3VjaGVuZCddXG4gIH0sXG4gIGVtaXRzOiBbJ3RyYWNrJ10sXG5cbiAgaW5mbzoge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICBzdGF0ZTogJ3N0YXJ0JyxcbiAgICBzdGFydGVkOiBmYWxzZSxcbiAgICBtb3ZlczogW10sXG4gICAgLyoqIEB0aGlzIHtHZXN0dXJlSW5mb30gKi9cbiAgICBhZGRNb3ZlOiBmdW5jdGlvbihtb3ZlKSB7XG4gICAgICBpZiAodGhpcy5tb3Zlcy5sZW5ndGggPiBUUkFDS19MRU5HVEgpIHtcbiAgICAgICAgdGhpcy5tb3Zlcy5zaGlmdCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5tb3Zlcy5wdXNoKG1vdmUpO1xuICAgIH0sXG4gICAgbW92ZWZuOiBudWxsLFxuICAgIHVwZm46IG51bGwsXG4gICAgcHJldmVudDogZmFsc2VcbiAgfSxcblxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5mby5zdGF0ZSA9ICdzdGFydCc7XG4gICAgdGhpcy5pbmZvLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmluZm8ubW92ZXMgPSBbXTtcbiAgICB0aGlzLmluZm8ueCA9IDA7XG4gICAgdGhpcy5pbmZvLnkgPSAwO1xuICAgIHRoaXMuaW5mby5wcmV2ZW50ID0gZmFsc2U7XG4gICAgdW50cmFja0RvY3VtZW50KHRoaXMuaW5mbyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoIWhhc0xlZnRNb3VzZUJ1dHRvbihlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoZSk7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBtb3ZlZm4gPSBmdW5jdGlvbiBtb3ZlZm4oZSkge1xuICAgICAgbGV0IHggPSBlLmNsaWVudFgsIHkgPSBlLmNsaWVudFk7XG4gICAgICBpZiAodHJhY2tIYXNNb3ZlZEVub3VnaChzZWxmLmluZm8sIHgsIHkpKSB7XG4gICAgICAgIC8vIGZpcnN0IG1vdmUgaXMgJ3N0YXJ0Jywgc3Vic2VxdWVudCBtb3ZlcyBhcmUgJ21vdmUnLCBtb3VzZXVwIGlzICdlbmQnXG4gICAgICAgIHNlbGYuaW5mby5zdGF0ZSA9IHNlbGYuaW5mby5zdGFydGVkID8gKGUudHlwZSA9PT0gJ21vdXNldXAnID8gJ2VuZCcgOiAndHJhY2snKSA6ICdzdGFydCc7XG4gICAgICAgIGlmIChzZWxmLmluZm8uc3RhdGUgPT09ICdzdGFydCcpIHtcbiAgICAgICAgICAvLyBpZiBhbmQgb25seSBpZiB0cmFja2luZywgYWx3YXlzIHByZXZlbnQgdGFwXG4gICAgICAgICAgcHJldmVudCgndGFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5pbmZvLmFkZE1vdmUoe3g6IHgsIHk6IHl9KTtcbiAgICAgICAgaWYgKCFoYXNMZWZ0TW91c2VCdXR0b24oZSkpIHtcbiAgICAgICAgICAvLyBhbHdheXMgZmlyZSBcImVuZFwiXG4gICAgICAgICAgc2VsZi5pbmZvLnN0YXRlID0gJ2VuZCc7XG4gICAgICAgICAgdW50cmFja0RvY3VtZW50KHNlbGYuaW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICB0cmFja0ZpcmUoc2VsZi5pbmZvLCB0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmluZm8uc3RhcnRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgdXBmbiA9IGZ1bmN0aW9uIHVwZm4oZSkge1xuICAgICAgaWYgKHNlbGYuaW5mby5zdGFydGVkKSB7XG4gICAgICAgIG1vdmVmbihlKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIHRoZSB0ZW1wb3JhcnkgbGlzdGVuZXJzXG4gICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICB9O1xuICAgIC8vIGFkZCB0ZW1wb3JhcnkgZG9jdW1lbnQgbGlzdGVuZXJzIGFzIG1vdXNlIHJldGFyZ2V0c1xuICAgIHRyYWNrRG9jdW1lbnQodGhpcy5pbmZvLCBtb3ZlZm4sIHVwZm4pO1xuICAgIHRoaXMuaW5mby54ID0gZS5jbGllbnRYO1xuICAgIHRoaXMuaW5mby55ID0gZS5jbGllbnRZO1xuICB9LFxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHRvdWNoc3RhcnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICBsZXQgY3QgPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIHRoaXMuaW5mby54ID0gY3QuY2xpZW50WDtcbiAgICB0aGlzLmluZm8ueSA9IGN0LmNsaWVudFk7XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2htb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgbGV0IHQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0KGUpO1xuICAgIGxldCBjdCA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgbGV0IHggPSBjdC5jbGllbnRYLCB5ID0gY3QuY2xpZW50WTtcbiAgICBpZiAodHJhY2tIYXNNb3ZlZEVub3VnaCh0aGlzLmluZm8sIHgsIHkpKSB7XG4gICAgICBpZiAodGhpcy5pbmZvLnN0YXRlID09PSAnc3RhcnQnKSB7XG4gICAgICAgIC8vIGlmIGFuZCBvbmx5IGlmIHRyYWNraW5nLCBhbHdheXMgcHJldmVudCB0YXBcbiAgICAgICAgcHJldmVudCgndGFwJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmluZm8uYWRkTW92ZSh7eDogeCwgeTogeX0pO1xuICAgICAgdHJhY2tGaXJlKHRoaXMuaW5mbywgdCwgY3QpO1xuICAgICAgdGhpcy5pbmZvLnN0YXRlID0gJ3RyYWNrJztcbiAgICAgIHRoaXMuaW5mby5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2hlbmQ6IGZ1bmN0aW9uKGUpIHtcbiAgICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoZSk7XG4gICAgbGV0IGN0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAvLyBvbmx5IHRyYWNrZW5kIGlmIHRyYWNrIHdhcyBzdGFydGVkIGFuZCBub3QgYWJvcnRlZFxuICAgIGlmICh0aGlzLmluZm8uc3RhcnRlZCkge1xuICAgICAgLy8gcmVzZXQgc3RhcnRlZCBzdGF0ZSBvbiB1cFxuICAgICAgdGhpcy5pbmZvLnN0YXRlID0gJ2VuZCc7XG4gICAgICB0aGlzLmluZm8uYWRkTW92ZSh7eDogY3QuY2xpZW50WCwgeTogY3QuY2xpZW50WX0pO1xuICAgICAgdHJhY2tGaXJlKHRoaXMuaW5mbywgdCwgY3QpO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gdHJhY2tIYXNNb3ZlZEVub3VnaChpbmZvLCB4LCB5KSB7XG4gIGlmIChpbmZvLnByZXZlbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGluZm8uc3RhcnRlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGxldCBkeCA9IE1hdGguYWJzKGluZm8ueCAtIHgpO1xuICBsZXQgZHkgPSBNYXRoLmFicyhpbmZvLnkgLSB5KTtcbiAgcmV0dXJuIChkeCA+PSBUUkFDS19ESVNUQU5DRSB8fCBkeSA+PSBUUkFDS19ESVNUQU5DRSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7P0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7VG91Y2h9IHRvdWNoXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiB0cmFja0ZpcmUoaW5mbywgdGFyZ2V0LCB0b3VjaCkge1xuICBpZiAoIXRhcmdldCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgc2Vjb25kbGFzdCA9IGluZm8ubW92ZXNbaW5mby5tb3Zlcy5sZW5ndGggLSAyXTtcbiAgbGV0IGxhc3Rtb3ZlID0gaW5mby5tb3Zlc1tpbmZvLm1vdmVzLmxlbmd0aCAtIDFdO1xuICBsZXQgZHggPSBsYXN0bW92ZS54IC0gaW5mby54O1xuICBsZXQgZHkgPSBsYXN0bW92ZS55IC0gaW5mby55O1xuICBsZXQgZGR4LCBkZHkgPSAwO1xuICBpZiAoc2Vjb25kbGFzdCkge1xuICAgIGRkeCA9IGxhc3Rtb3ZlLnggLSBzZWNvbmRsYXN0Lng7XG4gICAgZGR5ID0gbGFzdG1vdmUueSAtIHNlY29uZGxhc3QueTtcbiAgfVxuICBfZmlyZSh0YXJnZXQsICd0cmFjaycsIHtcbiAgICBzdGF0ZTogaW5mby5zdGF0ZSxcbiAgICB4OiB0b3VjaC5jbGllbnRYLFxuICAgIHk6IHRvdWNoLmNsaWVudFksXG4gICAgZHg6IGR4LFxuICAgIGR5OiBkeSxcbiAgICBkZHg6IGRkeCxcbiAgICBkZHk6IGRkeSxcbiAgICBzb3VyY2VFdmVudDogdG91Y2gsXG4gICAgaG92ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlZXBUYXJnZXRGaW5kKHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpO1xuICAgIH1cbiAgfSk7XG59XG5cbnJlZ2lzdGVyKHtcbiAgbmFtZTogJ3RhcCcsXG4gIGRlcHM6IFsnbW91c2Vkb3duJywgJ2NsaWNrJywgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnXSxcbiAgZmxvdzoge1xuICAgIHN0YXJ0OiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sXG4gICAgZW5kOiBbJ2NsaWNrJywgJ3RvdWNoZW5kJ11cbiAgfSxcbiAgZW1pdHM6IFsndGFwJ10sXG4gIGluZm86IHtcbiAgICB4OiBOYU4sXG4gICAgeTogTmFOLFxuICAgIHByZXZlbnQ6IGZhbHNlXG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbmZvLnggPSBOYU47XG4gICAgdGhpcy5pbmZvLnkgPSBOYU47XG4gICAgdGhpcy5pbmZvLnByZXZlbnQgPSBmYWxzZTtcbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICB0aGlzLmluZm8ueCA9IGUuY2xpZW50WDtcbiAgICAgIHRoaXMuaW5mby55ID0gZS5jbGllbnRZO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjbGljazogZnVuY3Rpb24oZSkge1xuICAgIGlmIChoYXNMZWZ0TW91c2VCdXR0b24oZSkpIHtcbiAgICAgIHRyYWNrRm9yd2FyZCh0aGlzLmluZm8sIGUpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB0b3VjaHN0YXJ0OiBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgdG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIHRoaXMuaW5mby54ID0gdG91Y2guY2xpZW50WDtcbiAgICB0aGlzLmluZm8ueSA9IHRvdWNoLmNsaWVudFk7XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2hlbmQ6IGZ1bmN0aW9uKGUpIHtcbiAgICB0cmFja0ZvcndhcmQodGhpcy5pbmZvLCBlLmNoYW5nZWRUb3VjaGVzWzBdLCBlKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7RXZlbnQgfCBUb3VjaH0gZVxuICogQHBhcmFtIHtFdmVudD19IHByZXZlbnRlclxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdHJhY2tGb3J3YXJkKGluZm8sIGUsIHByZXZlbnRlcikge1xuICBsZXQgZHggPSBNYXRoLmFicyhlLmNsaWVudFggLSBpbmZvLngpO1xuICBsZXQgZHkgPSBNYXRoLmFicyhlLmNsaWVudFkgLSBpbmZvLnkpO1xuICAvLyBmaW5kIG9yaWdpbmFsIHRhcmdldCBmcm9tIGBwcmV2ZW50ZXJgIGZvciBUb3VjaEV2ZW50cywgb3IgYGVgIGZvciBNb3VzZUV2ZW50c1xuICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoKHByZXZlbnRlciB8fCBlKSk7XG4gIGlmICghdCB8fCAoY2FuQmVEaXNhYmxlZFsvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odCkubG9jYWxOYW1lXSAmJiB0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZHgsZHkgY2FuIGJlIE5hTiBpZiBgY2xpY2tgIGhhcyBiZWVuIHNpbXVsYXRlZCBhbmQgdGhlcmUgd2FzIG5vIGBkb3duYCBmb3IgYHN0YXJ0YFxuICBpZiAoaXNOYU4oZHgpIHx8IGlzTmFOKGR5KSB8fCAoZHggPD0gVEFQX0RJU1RBTkNFICYmIGR5IDw9IFRBUF9ESVNUQU5DRSkgfHwgaXNTeW50aGV0aWNDbGljayhlKSkge1xuICAgIC8vIHByZXZlbnQgdGFwcyBmcm9tIGJlaW5nIGdlbmVyYXRlZCBpZiBhbiBldmVudCBoYXMgY2FuY2VsZWQgdGhlbVxuICAgIGlmICghaW5mby5wcmV2ZW50KSB7XG4gICAgICBfZmlyZSh0LCAndGFwJywge1xuICAgICAgICB4OiBlLmNsaWVudFgsXG4gICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgc291cmNlRXZlbnQ6IGUsXG4gICAgICAgIHByZXZlbnRlcjogcHJldmVudGVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyogZXNsaW50LWVuYWJsZSB2YWxpZC1qc2RvYyAqL1xuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBjb25zdCBmaW5kT3JpZ2luYWxUYXJnZXQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0O1xuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBjb25zdCBhZGQgPSBhZGRMaXN0ZW5lcjtcblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgY29uc3QgcmVtb3ZlID0gcmVtb3ZlTGlzdGVuZXI7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcblxuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCB7IGFkZExpc3RlbmVyLCByZW1vdmVMaXN0ZW5lciB9IGZyb20gJy4uL3V0aWxzL2dlc3R1cmVzLmpzJztcblxuLyoqXG4gKiBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgQVBJIGZvciBhZGRpbmcgUG9seW1lcidzIGNyb3NzLXBsYXRmb3JtXG4gKiBnZXN0dXJlIGV2ZW50cyB0byBub2Rlcy5cbiAqXG4gKiBUaGUgQVBJIGlzIGRlc2lnbmVkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBvdmVycmlkZSBwb2ludHMgaW1wbGVtZW50ZWRcbiAqIGluIGBUZW1wbGF0ZVN0YW1wYCBzdWNoIHRoYXQgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzIGluXG4gKiB0ZW1wbGF0ZXMgd2lsbCBzdXBwb3J0IGdlc3R1cmUgZXZlbnRzIHdoZW4gdGhpcyBtaXhpbiBpcyBhcHBsaWVkIGFsb25nIHdpdGhcbiAqIGBUZW1wbGF0ZVN0YW1wYC5cbiAqXG4gKiBAbWl4aW5GdW5jdGlvblxuICogQHBvbHltZXJcbiAqIEBzdW1tYXJ5IEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyBBUEkgZm9yIGFkZGluZyBQb2x5bWVyJ3NcbiAqICAgY3Jvc3MtcGxhdGZvcm0gZ2VzdHVyZSBldmVudHMgdG8gbm9kZXNcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMgPSBkZWR1cGluZ01peGluKChzdXBlckNsYXNzKSA9PiB7XG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9HZXN0dXJlRXZlbnRMaXN0ZW5lcnN9XG4gICAqL1xuICBjbGFzcyBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMgZXh0ZW5kcyBzdXBlckNsYXNzIHtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBub2RlIGlmIGl0IGlzIGEgZ2VzdHVyZXMgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIGFkZCBldmVudCBsaXN0ZW5lciB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGFkZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgICBpZiAoIWFkZExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcikpIHtcbiAgICAgICAgc3VwZXIuX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBub2RlIGlmIGl0IGlzIGEgZ2VzdHVyZXMgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIHJlbW92ZSBldmVudCBsaXN0ZW5lciBmcm9tXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpOnZvaWR9IGhhbmRsZXIgTGlzdGVuZXIgZnVuY3Rpb24gdG8gcmVtb3ZlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfcmVtb3ZlRXZlbnRMaXN0ZW5lckZyb21Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKCFyZW1vdmVMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpKSB7XG4gICAgICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVyRnJvbU5vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gR2VzdHVyZUV2ZW50TGlzdGVuZXJzO1xufSk7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuL2Jvb3QuanMnO1xuXG5mdW5jdGlvbiBuZXdTcGxpY2UoaW5kZXgsIHJlbW92ZWQsIGFkZGVkQ291bnQpIHtcbiAgcmV0dXJuIHtcbiAgICBpbmRleDogaW5kZXgsXG4gICAgcmVtb3ZlZDogcmVtb3ZlZCxcbiAgICBhZGRlZENvdW50OiBhZGRlZENvdW50XG4gIH07XG59XG5cbmNvbnN0IEVESVRfTEVBVkUgPSAwO1xuY29uc3QgRURJVF9VUERBVEUgPSAxO1xuY29uc3QgRURJVF9BREQgPSAyO1xuY29uc3QgRURJVF9ERUxFVEUgPSAzO1xuXG4vLyBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzICpiYXNlZCogb24gdGhlIGNvbXB1dGF0aW9uIG9mIHRoZSBMZXZlbnNodGVpblxuLy8gXCJlZGl0XCIgZGlzdGFuY2UuIFRoZSBvbmUgY2hhbmdlIGlzIHRoYXQgXCJ1cGRhdGVzXCIgYXJlIHRyZWF0ZWQgYXMgdHdvXG4vLyBlZGl0cyAtIG5vdCBvbmUuIFdpdGggQXJyYXkgc3BsaWNlcywgYW4gdXBkYXRlIGlzIHJlYWxseSBhIGRlbGV0ZVxuLy8gZm9sbG93ZWQgYnkgYW4gYWRkLiBCeSByZXRhaW5pbmcgdGhpcywgd2Ugb3B0aW1pemUgZm9yIFwia2VlcGluZ1wiIHRoZVxuLy8gbWF4aW11bSBhcnJheSBpdGVtcyBpbiB0aGUgb3JpZ2luYWwgYXJyYXkuIEZvciBleGFtcGxlOlxuLy9cbi8vICAgJ3h4eHgxMjMnIC0+ICcxMjN5eXl5J1xuLy9cbi8vIFdpdGggMS1lZGl0IHVwZGF0ZXMsIHRoZSBzaG9ydGVzdCBwYXRoIHdvdWxkIGJlIGp1c3QgdG8gdXBkYXRlIGFsbCBzZXZlblxuLy8gY2hhcmFjdGVycy4gV2l0aCAyLWVkaXQgdXBkYXRlcywgd2UgZGVsZXRlIDQsIGxlYXZlIDMsIGFuZCBhZGQgNC4gVGhpc1xuLy8gbGVhdmVzIHRoZSBzdWJzdHJpbmcgJzEyMycgaW50YWN0LlxuZnVuY3Rpb24gY2FsY0VkaXREaXN0YW5jZXMoY3VycmVudCwgY3VycmVudFN0YXJ0LCBjdXJyZW50RW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZCwgb2xkU3RhcnQsIG9sZEVuZCkge1xuICAvLyBcIkRlbGV0aW9uXCIgY29sdW1uc1xuICBsZXQgcm93Q291bnQgPSBvbGRFbmQgLSBvbGRTdGFydCArIDE7XG4gIGxldCBjb2x1bW5Db3VudCA9IGN1cnJlbnRFbmQgLSBjdXJyZW50U3RhcnQgKyAxO1xuICBsZXQgZGlzdGFuY2VzID0gbmV3IEFycmF5KHJvd0NvdW50KTtcblxuICAvLyBcIkFkZGl0aW9uXCIgcm93cy4gSW5pdGlhbGl6ZSBudWxsIGNvbHVtbi5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dDb3VudDsgaSsrKSB7XG4gICAgZGlzdGFuY2VzW2ldID0gbmV3IEFycmF5KGNvbHVtbkNvdW50KTtcbiAgICBkaXN0YW5jZXNbaV1bMF0gPSBpO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSBudWxsIHJvd1xuICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbHVtbkNvdW50OyBqKyspXG4gICAgZGlzdGFuY2VzWzBdW2pdID0gajtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8IHJvd0NvdW50OyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8IGNvbHVtbkNvdW50OyBqKyspIHtcbiAgICAgIGlmIChlcXVhbHMoY3VycmVudFtjdXJyZW50U3RhcnQgKyBqIC0gMV0sIG9sZFtvbGRTdGFydCArIGkgLSAxXSkpXG4gICAgICAgIGRpc3RhbmNlc1tpXVtqXSA9IGRpc3RhbmNlc1tpIC0gMV1baiAtIDFdO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGxldCBub3J0aCA9IGRpc3RhbmNlc1tpIC0gMV1bal0gKyAxO1xuICAgICAgICBsZXQgd2VzdCA9IGRpc3RhbmNlc1tpXVtqIC0gMV0gKyAxO1xuICAgICAgICBkaXN0YW5jZXNbaV1bal0gPSBub3J0aCA8IHdlc3QgPyBub3J0aCA6IHdlc3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRpc3RhbmNlcztcbn1cblxuLy8gVGhpcyBzdGFydHMgYXQgdGhlIGZpbmFsIHdlaWdodCwgYW5kIHdhbGtzIFwiYmFja3dhcmRcIiBieSBmaW5kaW5nXG4vLyB0aGUgbWluaW11bSBwcmV2aW91cyB3ZWlnaHQgcmVjdXJzaXZlbHkgdW50aWwgdGhlIG9yaWdpbiBvZiB0aGUgd2VpZ2h0XG4vLyBtYXRyaXguXG5mdW5jdGlvbiBzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXMoZGlzdGFuY2VzKSB7XG4gIGxldCBpID0gZGlzdGFuY2VzLmxlbmd0aCAtIDE7XG4gIGxldCBqID0gZGlzdGFuY2VzWzBdLmxlbmd0aCAtIDE7XG4gIGxldCBjdXJyZW50ID0gZGlzdGFuY2VzW2ldW2pdO1xuICBsZXQgZWRpdHMgPSBbXTtcbiAgd2hpbGUgKGkgPiAwIHx8IGogPiAwKSB7XG4gICAgaWYgKGkgPT0gMCkge1xuICAgICAgZWRpdHMucHVzaChFRElUX0FERCk7XG4gICAgICBqLS07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGogPT0gMCkge1xuICAgICAgZWRpdHMucHVzaChFRElUX0RFTEVURSk7XG4gICAgICBpLS07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5vcnRoV2VzdCA9IGRpc3RhbmNlc1tpIC0gMV1baiAtIDFdO1xuICAgIGxldCB3ZXN0ID0gZGlzdGFuY2VzW2kgLSAxXVtqXTtcbiAgICBsZXQgbm9ydGggPSBkaXN0YW5jZXNbaV1baiAtIDFdO1xuXG4gICAgbGV0IG1pbjtcbiAgICBpZiAod2VzdCA8IG5vcnRoKVxuICAgICAgbWluID0gd2VzdCA8IG5vcnRoV2VzdCA/IHdlc3QgOiBub3J0aFdlc3Q7XG4gICAgZWxzZVxuICAgICAgbWluID0gbm9ydGggPCBub3J0aFdlc3QgPyBub3J0aCA6IG5vcnRoV2VzdDtcblxuICAgIGlmIChtaW4gPT0gbm9ydGhXZXN0KSB7XG4gICAgICBpZiAobm9ydGhXZXN0ID09IGN1cnJlbnQpIHtcbiAgICAgICAgZWRpdHMucHVzaChFRElUX0xFQVZFKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVkaXRzLnB1c2goRURJVF9VUERBVEUpO1xuICAgICAgICBjdXJyZW50ID0gbm9ydGhXZXN0O1xuICAgICAgfVxuICAgICAgaS0tO1xuICAgICAgai0tO1xuICAgIH0gZWxzZSBpZiAobWluID09IHdlc3QpIHtcbiAgICAgIGVkaXRzLnB1c2goRURJVF9ERUxFVEUpO1xuICAgICAgaS0tO1xuICAgICAgY3VycmVudCA9IHdlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVkaXRzLnB1c2goRURJVF9BREQpO1xuICAgICAgai0tO1xuICAgICAgY3VycmVudCA9IG5vcnRoO1xuICAgIH1cbiAgfVxuXG4gIGVkaXRzLnJldmVyc2UoKTtcbiAgcmV0dXJuIGVkaXRzO1xufVxuXG4vKipcbiAqIFNwbGljZSBQcm9qZWN0aW9uIGZ1bmN0aW9uczpcbiAqXG4gKiBBIHNwbGljZSBtYXAgaXMgYSByZXByZXNlbnRhdGlvbiBvZiBob3cgYSBwcmV2aW91cyBhcnJheSBvZiBpdGVtc1xuICogd2FzIHRyYW5zZm9ybWVkIGludG8gYSBuZXcgYXJyYXkgb2YgaXRlbXMuIENvbmNlcHR1YWxseSBpdCBpcyBhIGxpc3Qgb2ZcbiAqIHR1cGxlcyBvZlxuICpcbiAqICAgPGluZGV4LCByZW1vdmVkLCBhZGRlZENvdW50PlxuICpcbiAqIHdoaWNoIGFyZSBrZXB0IGluIGFzY2VuZGluZyBpbmRleCBvcmRlciBvZi4gVGhlIHR1cGxlIHJlcHJlc2VudHMgdGhhdCBhdFxuICogdGhlIHxpbmRleHwsIHxyZW1vdmVkfCBzZXF1ZW5jZSBvZiBpdGVtcyB3ZXJlIHJlbW92ZWQsIGFuZCBjb3VudGluZyBmb3J3YXJkXG4gKiBmcm9tIHxpbmRleHwsIHxhZGRlZENvdW50fCBpdGVtcyB3ZXJlIGFkZGVkLlxuICovXG5cbi8qKlxuICogTGFja2luZyBpbmRpdmlkdWFsIHNwbGljZSBtdXRhdGlvbiBpbmZvcm1hdGlvbiwgdGhlIG1pbmltYWwgc2V0IG9mXG4gKiBzcGxpY2VzIGNhbiBiZSBzeW50aGVzaXplZCBnaXZlbiB0aGUgcHJldmlvdXMgc3RhdGUgYW5kIGZpbmFsIHN0YXRlIG9mIGFuXG4gKiBhcnJheS4gVGhlIGJhc2ljIGFwcHJvYWNoIGlzIHRvIGNhbGN1bGF0ZSB0aGUgZWRpdCBkaXN0YW5jZSBtYXRyaXggYW5kXG4gKiBjaG9vc2UgdGhlIHNob3J0ZXN0IHBhdGggdGhyb3VnaCBpdC5cbiAqXG4gKiBDb21wbGV4aXR5OiBPKGwgKiBwKVxuICogICBsOiBUaGUgbGVuZ3RoIG9mIHRoZSBjdXJyZW50IGFycmF5XG4gKiAgIHA6IFRoZSBsZW5ndGggb2YgdGhlIG9sZCBhcnJheVxuICpcbiAqIEBwYXJhbSB7IUFycmF5fSBjdXJyZW50IFRoZSBjdXJyZW50IFwiY2hhbmdlZFwiIGFycmF5IGZvciB3aGljaCB0b1xuICogY2FsY3VsYXRlIHNwbGljZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gY3VycmVudFN0YXJ0IFN0YXJ0aW5nIGluZGV4IGluIHRoZSBgY3VycmVudGAgYXJyYXkgZm9yXG4gKiB3aGljaCBzcGxpY2VzIGFyZSBjYWxjdWxhdGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRFbmQgRW5kaW5nIGluZGV4IGluIHRoZSBgY3VycmVudGAgYXJyYXkgZm9yXG4gKiB3aGljaCBzcGxpY2VzIGFyZSBjYWxjdWxhdGVkLlxuICogQHBhcmFtIHshQXJyYXl9IG9sZCBUaGUgb3JpZ2luYWwgXCJ1bmNoYW5nZWRcIiBhcnJheSB0byBjb21wYXJlIGBjdXJyZW50YFxuICogYWdhaW5zdCB0byBkZXRlcm1pbmUgc3BsaWNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvbGRTdGFydCBTdGFydGluZyBpbmRleCBpbiB0aGUgYG9sZGAgYXJyYXkgZm9yXG4gKiB3aGljaCBzcGxpY2VzIGFyZSBjYWxjdWxhdGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IG9sZEVuZCBFbmRpbmcgaW5kZXggaW4gdGhlIGBvbGRgIGFycmF5IGZvclxuICogd2hpY2ggc3BsaWNlcyBhcmUgY2FsY3VsYXRlZC5cbiAqIEByZXR1cm4geyFBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzcGxpY2UgcmVjb3JkIG9iamVjdHMuIEVhY2ggb2YgdGhlc2VcbiAqIGNvbnRhaW5zOiBgaW5kZXhgIHRoZSBsb2NhdGlvbiB3aGVyZSB0aGUgc3BsaWNlIG9jY3VycmVkOyBgcmVtb3ZlZGBcbiAqIHRoZSBhcnJheSBvZiByZW1vdmVkIGl0ZW1zIGZyb20gdGhpcyBsb2NhdGlvbjsgYGFkZGVkQ291bnRgIHRoZSBudW1iZXJcbiAqIG9mIGl0ZW1zIGFkZGVkIGF0IHRoaXMgbG9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIGNhbGNTcGxpY2VzKGN1cnJlbnQsIGN1cnJlbnRTdGFydCwgY3VycmVudEVuZCxcbiAgICAgICAgICAgICAgICAgICAgICBvbGQsIG9sZFN0YXJ0LCBvbGRFbmQpIHtcbiAgbGV0IHByZWZpeENvdW50ID0gMDtcbiAgbGV0IHN1ZmZpeENvdW50ID0gMDtcbiAgbGV0IHNwbGljZTtcblxuICBsZXQgbWluTGVuZ3RoID0gTWF0aC5taW4oY3VycmVudEVuZCAtIGN1cnJlbnRTdGFydCwgb2xkRW5kIC0gb2xkU3RhcnQpO1xuICBpZiAoY3VycmVudFN0YXJ0ID09IDAgJiYgb2xkU3RhcnQgPT0gMClcbiAgICBwcmVmaXhDb3VudCA9IHNoYXJlZFByZWZpeChjdXJyZW50LCBvbGQsIG1pbkxlbmd0aCk7XG5cbiAgaWYgKGN1cnJlbnRFbmQgPT0gY3VycmVudC5sZW5ndGggJiYgb2xkRW5kID09IG9sZC5sZW5ndGgpXG4gICAgc3VmZml4Q291bnQgPSBzaGFyZWRTdWZmaXgoY3VycmVudCwgb2xkLCBtaW5MZW5ndGggLSBwcmVmaXhDb3VudCk7XG5cbiAgY3VycmVudFN0YXJ0ICs9IHByZWZpeENvdW50O1xuICBvbGRTdGFydCArPSBwcmVmaXhDb3VudDtcbiAgY3VycmVudEVuZCAtPSBzdWZmaXhDb3VudDtcbiAgb2xkRW5kIC09IHN1ZmZpeENvdW50O1xuXG4gIGlmIChjdXJyZW50RW5kIC0gY3VycmVudFN0YXJ0ID09IDAgJiYgb2xkRW5kIC0gb2xkU3RhcnQgPT0gMClcbiAgICByZXR1cm4gW107XG5cbiAgaWYgKGN1cnJlbnRTdGFydCA9PSBjdXJyZW50RW5kKSB7XG4gICAgc3BsaWNlID0gbmV3U3BsaWNlKGN1cnJlbnRTdGFydCwgW10sIDApO1xuICAgIHdoaWxlIChvbGRTdGFydCA8IG9sZEVuZClcbiAgICAgIHNwbGljZS5yZW1vdmVkLnB1c2gob2xkW29sZFN0YXJ0KytdKTtcblxuICAgIHJldHVybiBbIHNwbGljZSBdO1xuICB9IGVsc2UgaWYgKG9sZFN0YXJ0ID09IG9sZEVuZClcbiAgICByZXR1cm4gWyBuZXdTcGxpY2UoY3VycmVudFN0YXJ0LCBbXSwgY3VycmVudEVuZCAtIGN1cnJlbnRTdGFydCkgXTtcblxuICBsZXQgb3BzID0gc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKFxuICAgICAgY2FsY0VkaXREaXN0YW5jZXMoY3VycmVudCwgY3VycmVudFN0YXJ0LCBjdXJyZW50RW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGQsIG9sZFN0YXJ0LCBvbGRFbmQpKTtcblxuICBzcGxpY2UgPSB1bmRlZmluZWQ7XG4gIGxldCBzcGxpY2VzID0gW107XG4gIGxldCBpbmRleCA9IGN1cnJlbnRTdGFydDtcbiAgbGV0IG9sZEluZGV4ID0gb2xkU3RhcnQ7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3dpdGNoKG9wc1tpXSkge1xuICAgICAgY2FzZSBFRElUX0xFQVZFOlxuICAgICAgICBpZiAoc3BsaWNlKSB7XG4gICAgICAgICAgc3BsaWNlcy5wdXNoKHNwbGljZSk7XG4gICAgICAgICAgc3BsaWNlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgb2xkSW5kZXgrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEVESVRfVVBEQVRFOlxuICAgICAgICBpZiAoIXNwbGljZSlcbiAgICAgICAgICBzcGxpY2UgPSBuZXdTcGxpY2UoaW5kZXgsIFtdLCAwKTtcblxuICAgICAgICBzcGxpY2UuYWRkZWRDb3VudCsrO1xuICAgICAgICBpbmRleCsrO1xuXG4gICAgICAgIHNwbGljZS5yZW1vdmVkLnB1c2gob2xkW29sZEluZGV4XSk7XG4gICAgICAgIG9sZEluZGV4Kys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFRElUX0FERDpcbiAgICAgICAgaWYgKCFzcGxpY2UpXG4gICAgICAgICAgc3BsaWNlID0gbmV3U3BsaWNlKGluZGV4LCBbXSwgMCk7XG5cbiAgICAgICAgc3BsaWNlLmFkZGVkQ291bnQrKztcbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEVESVRfREVMRVRFOlxuICAgICAgICBpZiAoIXNwbGljZSlcbiAgICAgICAgICBzcGxpY2UgPSBuZXdTcGxpY2UoaW5kZXgsIFtdLCAwKTtcblxuICAgICAgICBzcGxpY2UucmVtb3ZlZC5wdXNoKG9sZFtvbGRJbmRleF0pO1xuICAgICAgICBvbGRJbmRleCsrO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoc3BsaWNlKSB7XG4gICAgc3BsaWNlcy5wdXNoKHNwbGljZSk7XG4gIH1cbiAgcmV0dXJuIHNwbGljZXM7XG59XG5cbmZ1bmN0aW9uIHNoYXJlZFByZWZpeChjdXJyZW50LCBvbGQsIHNlYXJjaExlbmd0aCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaExlbmd0aDsgaSsrKVxuICAgIGlmICghZXF1YWxzKGN1cnJlbnRbaV0sIG9sZFtpXSkpXG4gICAgICByZXR1cm4gaTtcbiAgcmV0dXJuIHNlYXJjaExlbmd0aDtcbn1cblxuZnVuY3Rpb24gc2hhcmVkU3VmZml4KGN1cnJlbnQsIG9sZCwgc2VhcmNoTGVuZ3RoKSB7XG4gIGxldCBpbmRleDEgPSBjdXJyZW50Lmxlbmd0aDtcbiAgbGV0IGluZGV4MiA9IG9sZC5sZW5ndGg7XG4gIGxldCBjb3VudCA9IDA7XG4gIHdoaWxlIChjb3VudCA8IHNlYXJjaExlbmd0aCAmJiBlcXVhbHMoY3VycmVudFstLWluZGV4MV0sIG9sZFstLWluZGV4Ml0pKVxuICAgIGNvdW50Kys7XG5cbiAgcmV0dXJuIGNvdW50O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2Ygc3BsaWNlIHJlY29yZHMgaW5kaWNhdGluZyB0aGUgbWluaW11bSBlZGl0cyByZXF1aXJlZFxuICogdG8gdHJhbnNmb3JtIHRoZSBgcHJldmlvdXNgIGFycmF5IGludG8gdGhlIGBjdXJyZW50YCBhcnJheS5cbiAqXG4gKiBTcGxpY2UgcmVjb3JkcyBhcmUgb3JkZXJlZCBieSBpbmRleCBhbmQgY29udGFpbiB0aGUgZm9sbG93aW5nIGZpZWxkczpcbiAqIC0gYGluZGV4YDogaW5kZXggd2hlcmUgZWRpdCBzdGFydGVkXG4gKiAtIGByZW1vdmVkYDogYXJyYXkgb2YgcmVtb3ZlZCBpdGVtcyBmcm9tIHRoaXMgaW5kZXhcbiAqIC0gYGFkZGVkQ291bnRgOiBudW1iZXIgb2YgaXRlbXMgYWRkZWQgYXQgdGhpcyBpbmRleFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gdGhlIExldmVuc2h0ZWluIFwibWluaW11bSBlZGl0IGRpc3RhbmNlXCJcbiAqIGFsZ29yaXRobS4gTm90ZSB0aGF0IHVwZGF0ZXMgYXJlIHRyZWF0ZWQgYXMgcmVtb3ZhbCBmb2xsb3dlZCBieSBhZGRpdGlvbi5cbiAqXG4gKiBUaGUgd29yc3QtY2FzZSB0aW1lIGNvbXBsZXhpdHkgb2YgdGhpcyBhbGdvcml0aG0gaXMgYE8obCAqIHApYFxuICogICBsOiBUaGUgbGVuZ3RoIG9mIHRoZSBjdXJyZW50IGFycmF5XG4gKiAgIHA6IFRoZSBsZW5ndGggb2YgdGhlIHByZXZpb3VzIGFycmF5XG4gKlxuICogSG93ZXZlciwgdGhlIHdvcnN0LWNhc2UgY29tcGxleGl0eSBpcyByZWR1Y2VkIGJ5IGFuIGBPKG4pYCBvcHRpbWl6YXRpb25cbiAqIHRvIGRldGVjdCBhbnkgc2hhcmVkIHByZWZpeCAmIHN1ZmZpeCBiZXR3ZWVuIHRoZSB0d28gYXJyYXlzIGFuZCBvbmx5XG4gKiBwZXJmb3JtIHRoZSBtb3JlIGV4cGVuc2l2ZSBtaW5pbXVtIGVkaXQgZGlzdGFuY2UgY2FsY3VsYXRpb24gb3ZlciB0aGVcbiAqIG5vbi1zaGFyZWQgcG9ydGlvbnMgb2YgdGhlIGFycmF5cy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7IUFycmF5fSBjdXJyZW50IFRoZSBcImNoYW5nZWRcIiBhcnJheSBmb3Igd2hpY2ggc3BsaWNlcyB3aWxsIGJlXG4gKiBjYWxjdWxhdGVkLlxuICogQHBhcmFtIHshQXJyYXl9IHByZXZpb3VzIFRoZSBcInVuY2hhbmdlZFwiIG9yaWdpbmFsIGFycmF5IHRvIGNvbXBhcmVcbiAqIGBjdXJyZW50YCBhZ2FpbnN0IHRvIGRldGVybWluZSB0aGUgc3BsaWNlcy5cbiAqIEByZXR1cm4geyFBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzcGxpY2UgcmVjb3JkIG9iamVjdHMuIEVhY2ggb2YgdGhlc2VcbiAqIGNvbnRhaW5zOiBgaW5kZXhgIHRoZSBsb2NhdGlvbiB3aGVyZSB0aGUgc3BsaWNlIG9jY3VycmVkOyBgcmVtb3ZlZGBcbiAqIHRoZSBhcnJheSBvZiByZW1vdmVkIGl0ZW1zIGZyb20gdGhpcyBsb2NhdGlvbjsgYGFkZGVkQ291bnRgIHRoZSBudW1iZXJcbiAqIG9mIGl0ZW1zIGFkZGVkIGF0IHRoaXMgbG9jYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTcGxpY2VzKGN1cnJlbnQsIHByZXZpb3VzKSB7XG4gIHJldHVybiBjYWxjU3BsaWNlcyhjdXJyZW50LCAwLCBjdXJyZW50Lmxlbmd0aCwgcHJldmlvdXMsIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzLmxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGVxdWFscyhjdXJyZW50VmFsdWUsIHByZXZpb3VzVmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZSA9PT0gcHJldmlvdXNWYWx1ZTtcbn1cbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmltcG9ydCB7IGNhbGN1bGF0ZVNwbGljZXMgfSBmcm9tICcuL2FycmF5LXNwbGljZS5qcyc7XG5pbXBvcnQgeyBtaWNyb1Rhc2sgfSBmcm9tICcuL2FzeW5jLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuL3dyYXAuanMnO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBgbm9kZWAgaXMgYSBzbG90IGVsZW1lbnRcbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgTm9kZSB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBgbm9kZWAgaXMgYSBzbG90XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1Nsb3Qobm9kZSkge1xuICByZXR1cm4gKG5vZGUubG9jYWxOYW1lID09PSAnc2xvdCcpO1xufVxuXG4vKipcbiAqIENsYXNzIHRoYXQgbGlzdGVucyBmb3IgY2hhbmdlcyAoYWRkaXRpb25zIG9yIHJlbW92YWxzKSB0b1xuICogXCJmbGF0dGVuZWQgbm9kZXNcIiBvbiBhIGdpdmVuIGBub2RlYC4gVGhlIGxpc3Qgb2YgZmxhdHRlbmVkIG5vZGVzIGNvbnNpc3RzXG4gKiBvZiBhIG5vZGUncyBjaGlsZHJlbiBhbmQsIGZvciBhbnkgY2hpbGRyZW4gdGhhdCBhcmUgYDxzbG90PmAgZWxlbWVudHMsXG4gKiB0aGUgZXhwYW5kZWQgZmxhdHRlbmVkIGxpc3Qgb2YgYGFzc2lnbmVkTm9kZXNgLlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSBvYnNlcnZlZCBub2RlIGhhcyBjaGlsZHJlbiBgPGE+PC9hPjxzbG90Pjwvc2xvdD48Yj48L2I+YFxuICogYW5kIHRoZSBgPHNsb3Q+YCBoYXMgb25lIGA8ZGl2PmAgYXNzaWduZWQgdG8gaXQsIHRoZW4gdGhlIGZsYXR0ZW5lZFxuICogbm9kZXMgbGlzdCBpcyBgPGE+PC9hPjxkaXY+PC9kaXY+PGI+PC9iPmAuIElmIHRoZSBgPHNsb3Q+YCBoYXMgb3RoZXJcbiAqIGA8c2xvdD5gIGVsZW1lbnRzIGFzc2lnbmVkIHRvIGl0LCB0aGVzZSBhcmUgZmxhdHRlbmVkIGFzIHdlbGwuXG4gKlxuICogVGhlIHByb3ZpZGVkIGBjYWxsYmFja2AgaXMgY2FsbGVkIHdoZW5ldmVyIGFueSBjaGFuZ2UgdG8gdGhpcyBsaXN0XG4gKiBvZiBmbGF0dGVuZWQgbm9kZXMgb2NjdXJzLCB3aGVyZSBhbiBhZGRpdGlvbiBvciByZW1vdmFsIG9mIGEgbm9kZSBpc1xuICogY29uc2lkZXJlZCBhIGNoYW5nZS4gVGhlIGBjYWxsYmFja2AgaXMgY2FsbGVkIHdpdGggb25lIGFyZ3VtZW50LCBhbiBvYmplY3RcbiAqIGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgYW55IGBhZGRlZE5vZGVzYCBhbmQgYHJlbW92ZWROb2Rlc2AuXG4gKlxuICogTm90ZTogdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBhc3luY2hyb25vdXMgdG8gYW55IGNoYW5nZXNcbiAqIGF0IGEgbWljcm90YXNrIGNoZWNrcG9pbnQuIFRoaXMgaXMgYmVjYXVzZSBvYnNlcnZhdGlvbiBpcyBwZXJmb3JtZWQgdXNpbmdcbiAqIGBNdXRhdGlvbk9ic2VydmVyYCBhbmQgdGhlIGA8c2xvdD5gIGVsZW1lbnQncyBgc2xvdGNoYW5nZWAgZXZlbnQgd2hpY2hcbiAqIGFyZSBhc3luY2hyb25vdXMuXG4gKlxuICogQW4gZXhhbXBsZTpcbiAqIGBgYGpzXG4gKiBjbGFzcyBUZXN0U2VsZk9ic2VydmUgZXh0ZW5kcyBQb2x5bWVyRWxlbWVudCB7XG4gKiAgIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAndGVzdC1zZWxmLW9ic2VydmUnO31cbiAqICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gKiAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAqICAgICB0aGlzLl9vYnNlcnZlciA9IG5ldyBGbGF0dGVuZWROb2Rlc09ic2VydmVyKHRoaXMsIChpbmZvKSA9PiB7XG4gKiAgICAgICB0aGlzLmluZm8gPSBpbmZvO1xuICogICAgIH0pO1xuICogICB9XG4gKiAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICogICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gKiAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICogICB9XG4gKiB9XG4gKiBjdXN0b21FbGVtZW50cy5kZWZpbmUoVGVzdFNlbGZPYnNlcnZlLmlzLCBUZXN0U2VsZk9ic2VydmUpO1xuICogYGBgXG4gKlxuICogQHN1bW1hcnkgQ2xhc3MgdGhhdCBsaXN0ZW5zIGZvciBjaGFuZ2VzIChhZGRpdGlvbnMgb3IgcmVtb3ZhbHMpIHRvXG4gKiBcImZsYXR0ZW5lZCBub2Rlc1wiIG9uIGEgZ2l2ZW4gYG5vZGVgLlxuICogQGltcGxlbWVudHMge1BvbHltZXJEb21BcGkuT2JzZXJ2ZUhhbmRsZX1cbiAqL1xuZXhwb3J0IGxldCBGbGF0dGVuZWROb2Rlc09ic2VydmVyID0gY2xhc3Mge1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGZsYXR0ZW5lZCBub2RlcyBmb3IgdGhlIGdpdmVuIGBub2RlYC5cbiAgICogVGhpcyBsaXN0IGNvbnNpc3RzIG9mIGEgbm9kZSdzIGNoaWxkcmVuIGFuZCwgZm9yIGFueSBjaGlsZHJlblxuICAgKiB0aGF0IGFyZSBgPHNsb3Q+YCBlbGVtZW50cywgdGhlIGV4cGFuZGVkIGZsYXR0ZW5lZCBsaXN0IG9mIGBhc3NpZ25lZE5vZGVzYC5cbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBvYnNlcnZlZCBub2RlIGhhcyBjaGlsZHJlbiBgPGE+PC9hPjxzbG90Pjwvc2xvdD48Yj48L2I+YFxuICAgKiBhbmQgdGhlIGA8c2xvdD5gIGhhcyBvbmUgYDxkaXY+YCBhc3NpZ25lZCB0byBpdCwgdGhlbiB0aGUgZmxhdHRlbmVkXG4gICAqIG5vZGVzIGxpc3QgaXMgYDxhPjwvYT48ZGl2PjwvZGl2PjxiPjwvYj5gLiBJZiB0aGUgYDxzbG90PmAgaGFzIG90aGVyXG4gICAqIGA8c2xvdD5gIGVsZW1lbnRzIGFzc2lnbmVkIHRvIGl0LCB0aGVzZSBhcmUgZmxhdHRlbmVkIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fCFIVE1MU2xvdEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgZm9yIHdoaWNoIHRvXG4gICAqICAgICAgcmV0dXJuIHRoZSBsaXN0IG9mIGZsYXR0ZW5lZCBub2Rlcy5cbiAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gVGhlIGxpc3Qgb2YgZmxhdHRlbmVkIG5vZGVzIGZvciB0aGUgZ2l2ZW4gYG5vZGVgLlxuICAgKiBAbm9jb2xsYXBzZSBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8yNzYzXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgc3RhdGljIGdldEZsYXR0ZW5lZE5vZGVzKG5vZGUpIHtcbiAgICBjb25zdCB3cmFwcGVkID0gd3JhcChub2RlKTtcbiAgICBpZiAoaXNTbG90KG5vZGUpKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHshSFRNTFNsb3RFbGVtZW50fSAqLyhub2RlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICAgICAgcmV0dXJuIHdyYXBwZWQuYXNzaWduZWROb2Rlcyh7ZmxhdHRlbjogdHJ1ZX0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh3cmFwcGVkLmNoaWxkTm9kZXMpLm1hcCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAoaXNTbG90KG5vZGUpKSB7XG4gICAgICAgICAgbm9kZSA9IC8qKiBAdHlwZSB7IUhUTUxTbG90RWxlbWVudH0gKi8obm9kZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1hc3NpZ25cbiAgICAgICAgICByZXR1cm4gd3JhcChub2RlKS5hc3NpZ25lZE5vZGVzKHtmbGF0dGVuOiB0cnVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtub2RlXTtcbiAgICAgICAgfVxuICAgICAgfSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gdGFyZ2V0IE5vZGUgb24gd2hpY2ggdG8gbGlzdGVuIGZvciBjaGFuZ2VzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbih0aGlzOiBFbGVtZW50LCB7IHRhcmdldDogIUhUTUxFbGVtZW50LCBhZGRlZE5vZGVzOiAhQXJyYXk8IUVsZW1lbnQ+LCByZW1vdmVkTm9kZXM6ICFBcnJheTwhRWxlbWVudD4gfSk6dm9pZH0gY2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlcmUgYXJlIGFkZGl0aW9uc1xuICAgKiBvciByZW1vdmFscyBmcm9tIHRoZSB0YXJnZXQncyBsaXN0IG9mIGZsYXR0ZW5lZCBub2Rlcy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBjb25zdHJ1Y3Rvcih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge011dGF0aW9uT2JzZXJ2ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9zaGFkeUNoaWxkcmVuT2JzZXJ2ZXIgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtNdXRhdGlvbk9ic2VydmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlciA9IG51bGw7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fZWZmZWN0aXZlTm9kZXMgPSBbXTtcbiAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgdGhpcy5fc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKCl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9ib3VuZFNjaGVkdWxlID0gKCkgPT4ge1xuICAgICAgdGhpcy5fc2NoZWR1bGUoKTtcbiAgICB9O1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICAgIHRoaXMuX3NjaGVkdWxlKCk7XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGVzIGFuIG9ic2VydmVyLiBUaGlzIG1ldGhvZCBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuXG4gICAqIGEgYEZsYXR0ZW5lZE5vZGVzT2JzZXJ2ZXJgIGlzIGNyZWF0ZWQuIEl0IHNob3VsZCBvbmx5IGJlIGNhbGxlZCB0b1xuICAgKiByZS1hY3RpdmF0ZSBhbiBvYnNlcnZlciB0aGF0IGhhcyBiZWVuIGRlYWN0aXZhdGVkIHZpYSB0aGUgYGRpc2Nvbm5lY3RgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbm5lY3QoKSB7XG4gICAgaWYgKGlzU2xvdCh0aGlzLl90YXJnZXQpKSB7XG4gICAgICB0aGlzLl9saXN0ZW5TbG90cyhbdGhpcy5fdGFyZ2V0XSk7XG4gICAgfSBlbHNlIGlmICh3cmFwKHRoaXMuX3RhcmdldCkuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuX2xpc3RlblNsb3RzKFxuICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGVMaXN0PCFOb2RlPn0gKi8gKHdyYXAodGhpcy5fdGFyZ2V0KS5jaGlsZHJlbikpO1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeURPTSkge1xuICAgICAgICB0aGlzLl9zaGFkeUNoaWxkcmVuT2JzZXJ2ZXIgPVxuICAgICAgICAgIHdpbmRvdy5TaGFkeURPTS5vYnNlcnZlQ2hpbGRyZW4odGhpcy5fdGFyZ2V0LCAobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9uYXRpdmVDaGlsZHJlbk9ic2VydmVyID1cbiAgICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLl90YXJnZXQsIHtjaGlsZExpc3Q6IHRydWV9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlcyB0aGUgZmxhdHRlbmVkIG5vZGVzIG9ic2VydmVyLiBBZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kXG4gICAqIHRoZSBvYnNlcnZlciBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQgd2hlbiBjaGFuZ2VzIHRvIGZsYXR0ZW5lZCBub2Rlc1xuICAgKiBvY2N1ci4gVGhlIGBjb25uZWN0YCBtZXRob2QgbWF5IGJlIHN1YnNlcXVlbnRseSBjYWxsZWQgdG8gcmVhY3RpdmF0ZVxuICAgKiB0aGUgb2JzZXJ2ZXIuXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHtcbiAgICBpZiAoaXNTbG90KHRoaXMuX3RhcmdldCkpIHtcbiAgICAgIHRoaXMuX3VubGlzdGVuU2xvdHMoW3RoaXMuX3RhcmdldF0pO1xuICAgIH0gZWxzZSBpZiAod3JhcCh0aGlzLl90YXJnZXQpLmNoaWxkcmVuKSB7XG4gICAgICB0aGlzLl91bmxpc3RlblNsb3RzKFxuICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGVMaXN0PCFOb2RlPn0gKi8gKHdyYXAodGhpcy5fdGFyZ2V0KS5jaGlsZHJlbikpO1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeURPTSAmJiB0aGlzLl9zaGFkeUNoaWxkcmVuT2JzZXJ2ZXIpIHtcbiAgICAgICAgd2luZG93LlNoYWR5RE9NLnVub2JzZXJ2ZUNoaWxkcmVuKHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlcik7XG4gICAgICAgIHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NjaGVkdWxlKCkge1xuICAgIGlmICghdGhpcy5fc2NoZWR1bGVkKSB7XG4gICAgICB0aGlzLl9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgbWljcm9UYXNrLnJ1bigoKSA9PiB0aGlzLmZsdXNoKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PE11dGF0aW9uUmVjb3JkPn0gbXV0YXRpb25zIE11dGF0aW9ucyBzaWduYWxlZCBieSB0aGUgbXV0YXRpb24gb2JzZXJ2ZXJcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9wcm9jZXNzTXV0YXRpb25zKG11dGF0aW9ucykge1xuICAgIHRoaXMuX3Byb2Nlc3NTbG90TXV0YXRpb25zKG11dGF0aW9ucyk7XG4gICAgdGhpcy5mbHVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8TXV0YXRpb25SZWNvcmQ+fSBtdXRhdGlvbnMgTXV0YXRpb25zIHNpZ25hbGVkIGJ5IHRoZSBtdXRhdGlvbiBvYnNlcnZlclxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NTbG90TXV0YXRpb25zKG11dGF0aW9ucykge1xuICAgIGlmIChtdXRhdGlvbnMpIHtcbiAgICAgIGZvciAobGV0IGk9MDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbXV0YXRpb24gPSBtdXRhdGlvbnNbaV07XG4gICAgICAgIGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdGVuU2xvdHMobXV0YXRpb24uYWRkZWROb2Rlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG11dGF0aW9uLnJlbW92ZWROb2Rlcykge1xuICAgICAgICAgIHRoaXMuX3VubGlzdGVuU2xvdHMobXV0YXRpb24ucmVtb3ZlZE5vZGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaGVzIHRoZSBvYnNlcnZlciBjYXVzaW5nIGFueSBwZW5kaW5nIGNoYW5nZXMgdG8gYmUgaW1tZWRpYXRlbHlcbiAgICogZGVsaXZlcmVkIHRoZSBvYnNlcnZlciBjYWxsYmFjay4gQnkgZGVmYXVsdCB0aGVzZSBjaGFuZ2VzIGFyZSBkZWxpdmVyZWRcbiAgICogYXN5bmNocm9ub3VzbHkgYXQgdGhlIG5leHQgbWljcm90YXNrIGNoZWNrcG9pbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhbnkgcGVuZGluZyBjaGFuZ2VzIGNhdXNlZCB0aGUgb2JzZXJ2ZXJcbiAgICogY2FsbGJhY2sgdG8gcnVuLlxuICAgKi9cbiAgZmx1c2goKSB7XG4gICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5TaGFkeURPTSkge1xuICAgICAgU2hhZHlET00uZmx1c2goKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX3Byb2Nlc3NTbG90TXV0YXRpb25zKHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIudGFrZVJlY29yZHMoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9zaGFkeUNoaWxkcmVuT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX3Byb2Nlc3NTbG90TXV0YXRpb25zKHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlci50YWtlUmVjb3JkcygpKTtcbiAgICB9XG4gICAgdGhpcy5fc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgbGV0IGluZm8gPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuX3RhcmdldCxcbiAgICAgIGFkZGVkTm9kZXM6IFtdLFxuICAgICAgcmVtb3ZlZE5vZGVzOiBbXVxuICAgIH07XG4gICAgbGV0IG5ld05vZGVzID0gdGhpcy5jb25zdHJ1Y3Rvci5nZXRGbGF0dGVuZWROb2Rlcyh0aGlzLl90YXJnZXQpO1xuICAgIGxldCBzcGxpY2VzID0gY2FsY3VsYXRlU3BsaWNlcyhuZXdOb2RlcyxcbiAgICAgIHRoaXMuX2VmZmVjdGl2ZU5vZGVzKTtcbiAgICAvLyBwcm9jZXNzIHJlbW92YWxzXG4gICAgZm9yIChsZXQgaT0wLCBzOyAoaTxzcGxpY2VzLmxlbmd0aCkgJiYgKHM9c3BsaWNlc1tpXSk7IGkrKykge1xuICAgICAgZm9yIChsZXQgaj0wLCBuOyAoaiA8IHMucmVtb3ZlZC5sZW5ndGgpICYmIChuPXMucmVtb3ZlZFtqXSk7IGorKykge1xuICAgICAgICBpbmZvLnJlbW92ZWROb2Rlcy5wdXNoKG4pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm9jZXNzIGFkZHNcbiAgICBmb3IgKGxldCBpPTAsIHM7IChpPHNwbGljZXMubGVuZ3RoKSAmJiAocz1zcGxpY2VzW2ldKTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqPXMuaW5kZXg7IGogPCBzLmluZGV4ICsgcy5hZGRlZENvdW50OyBqKyspIHtcbiAgICAgICAgaW5mby5hZGRlZE5vZGVzLnB1c2gobmV3Tm9kZXNbal0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyB1cGRhdGUgY2FjaGVcbiAgICB0aGlzLl9lZmZlY3RpdmVOb2RlcyA9IG5ld05vZGVzO1xuICAgIGxldCBkaWRGbHVzaCA9IGZhbHNlO1xuICAgIGlmIChpbmZvLmFkZGVkTm9kZXMubGVuZ3RoIHx8IGluZm8ucmVtb3ZlZE5vZGVzLmxlbmd0aCkge1xuICAgICAgZGlkRmx1c2ggPSB0cnVlO1xuICAgICAgdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuX3RhcmdldCwgaW5mbyk7XG4gICAgfVxuICAgIHJldHVybiBkaWRGbHVzaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwhTm9kZT58IU5vZGVMaXN0PCFOb2RlPn0gbm9kZUxpc3QgTm9kZXMgdGhhdCBjb3VsZCBjaGFuZ2VcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9saXN0ZW5TbG90cyhub2RlTGlzdCkge1xuICAgIGZvciAobGV0IGk9MDsgaSA8IG5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgbiA9IG5vZGVMaXN0W2ldO1xuICAgICAgaWYgKGlzU2xvdChuKSkge1xuICAgICAgICBuLmFkZEV2ZW50TGlzdGVuZXIoJ3Nsb3RjaGFuZ2UnLCB0aGlzLl9ib3VuZFNjaGVkdWxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8IU5vZGU+fCFOb2RlTGlzdDwhTm9kZT59IG5vZGVMaXN0IE5vZGVzIHRoYXQgY291bGQgY2hhbmdlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdW5saXN0ZW5TbG90cyhub2RlTGlzdCkge1xuICAgIGZvciAobGV0IGk9MDsgaSA8IG5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgbiA9IG5vZGVMaXN0W2ldO1xuICAgICAgaWYgKGlzU2xvdChuKSkge1xuICAgICAgICBuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Nsb3RjaGFuZ2UnLCB0aGlzLl9ib3VuZFNjaGVkdWxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTsiLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKlxuRXh0cmVtZWx5IHNpbXBsZSBjc3MgcGFyc2VyLiBJbnRlbmRlZCB0byBiZSBub3QgbW9yZSB0aGFuIHdoYXQgd2UgbmVlZFxuYW5kIGRlZmluaXRlbHkgbm90IG5lY2Vzc2FyaWx5IGNvcnJlY3QgPSkuXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKiBAdW5yZXN0cmljdGVkICovXG5jbGFzcyBTdHlsZU5vZGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzWydzdGFydCddID0gMDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzWydlbmQnXSA9IDA7XG4gICAgLyoqIEB0eXBlIHtTdHlsZU5vZGV9ICovXG4gICAgdGhpc1sncHJldmlvdXMnXSA9IG51bGw7XG4gICAgLyoqIEB0eXBlIHtTdHlsZU5vZGV9ICovXG4gICAgdGhpc1sncGFyZW50J10gPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8U3R5bGVOb2RlPn0gKi9cbiAgICB0aGlzWydydWxlcyddID0gbnVsbDtcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzWydwYXJzZWRDc3NUZXh0J10gPSAnJztcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzWydjc3NUZXh0J10gPSAnJztcbiAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgdGhpc1snYXRSdWxlJ10gPSBmYWxzZTtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzWyd0eXBlJ10gPSAwO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXNbJ2tleWZyYW1lc05hbWUnXSA9ICcnO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXNbJ3NlbGVjdG9yJ10gPSAnJztcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzWydwYXJzZWRTZWxlY3RvciddID0gJyc7XG4gIH1cbn1cblxuZXhwb3J0IHtTdHlsZU5vZGV9XG5cbi8vIGdpdmVuIGEgc3RyaW5nIG9mIGNzcywgcmV0dXJuIGEgc2ltcGxlIHJ1bGUgdHJlZVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7U3R5bGVOb2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UodGV4dCkge1xuICB0ZXh0ID0gY2xlYW4odGV4dCk7XG4gIHJldHVybiBwYXJzZUNzcyhsZXgodGV4dCksIHRleHQpO1xufVxuXG4vLyByZW1vdmUgc3R1ZmYgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGF0IG1heSBoaW5kZXIgcGFyc2luZ1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBjbGVhbihjc3NUZXh0KSB7XG4gIHJldHVybiBjc3NUZXh0LnJlcGxhY2UoUlguY29tbWVudHMsICcnKS5yZXBsYWNlKFJYLnBvcnQsICcnKTtcbn1cblxuLy8gc3VwZXIgc2ltcGxlIHsuLi59IGxleGVyIHRoYXQgcmV0dXJucyBhIG5vZGUgdHJlZVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7U3R5bGVOb2RlfVxuICovXG5mdW5jdGlvbiBsZXgodGV4dCkge1xuICBsZXQgcm9vdCA9IG5ldyBTdHlsZU5vZGUoKTtcbiAgcm9vdFsnc3RhcnQnXSA9IDA7XG4gIHJvb3RbJ2VuZCddID0gdGV4dC5sZW5ndGhcbiAgbGV0IG4gPSByb290O1xuICBmb3IgKGxldCBpID0gMCwgbCA9IHRleHQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHRleHRbaV0gPT09IE9QRU5fQlJBQ0UpIHtcbiAgICAgIGlmICghblsncnVsZXMnXSkge1xuICAgICAgICBuWydydWxlcyddID0gW107XG4gICAgICB9XG4gICAgICBsZXQgcCA9IG47XG4gICAgICBsZXQgcHJldmlvdXMgPSBwWydydWxlcyddW3BbJ3J1bGVzJ10ubGVuZ3RoIC0gMV0gfHwgbnVsbDtcbiAgICAgIG4gPSBuZXcgU3R5bGVOb2RlKCk7XG4gICAgICBuWydzdGFydCddID0gaSArIDE7XG4gICAgICBuWydwYXJlbnQnXSA9IHA7XG4gICAgICBuWydwcmV2aW91cyddID0gcHJldmlvdXM7XG4gICAgICBwWydydWxlcyddLnB1c2gobik7XG4gICAgfSBlbHNlIGlmICh0ZXh0W2ldID09PSBDTE9TRV9CUkFDRSkge1xuICAgICAgblsnZW5kJ10gPSBpICsgMTtcbiAgICAgIG4gPSBuWydwYXJlbnQnXSB8fCByb290O1xuICAgIH1cbiAgfVxuICByZXR1cm4gcm9vdDtcbn1cblxuLy8gYWRkIHNlbGVjdG9ycy9jc3NUZXh0IHRvIG5vZGUgdHJlZVxuLyoqXG4gKiBAcGFyYW0ge1N0eWxlTm9kZX0gbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge1N0eWxlTm9kZX1cbiAqL1xuZnVuY3Rpb24gcGFyc2VDc3Mobm9kZSwgdGV4dCkge1xuICBsZXQgdCA9IHRleHQuc3Vic3RyaW5nKG5vZGVbJ3N0YXJ0J10sIG5vZGVbJ2VuZCddIC0gMSk7XG4gIG5vZGVbJ3BhcnNlZENzc1RleHQnXSA9IG5vZGVbJ2Nzc1RleHQnXSA9IHQudHJpbSgpO1xuICBpZiAobm9kZVsncGFyZW50J10pIHtcbiAgICBsZXQgc3MgPSBub2RlWydwcmV2aW91cyddID8gbm9kZVsncHJldmlvdXMnXVsnZW5kJ10gOiBub2RlWydwYXJlbnQnXVsnc3RhcnQnXTtcbiAgICB0ID0gdGV4dC5zdWJzdHJpbmcoc3MsIG5vZGVbJ3N0YXJ0J10gLSAxKTtcbiAgICB0ID0gX2V4cGFuZFVuaWNvZGVFc2NhcGVzKHQpO1xuICAgIHQgPSB0LnJlcGxhY2UoUlgubXVsdGlwbGVTcGFjZXMsICcgJyk7XG4gICAgLy8gVE9ETyhzb3J2ZWxsKTogYWQgaG9jOyBtYWtlIHNlbGVjdG9yIGluY2x1ZGUgb25seSBhZnRlciBsYXN0IDtcbiAgICAvLyBoZWxwcyB3aXRoIG1peGluIHN5bnRheFxuICAgIHQgPSB0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCc7JykgKyAxKTtcbiAgICBsZXQgcyA9IG5vZGVbJ3BhcnNlZFNlbGVjdG9yJ10gPSBub2RlWydzZWxlY3RvciddID0gdC50cmltKCk7XG4gICAgbm9kZVsnYXRSdWxlJ10gPSAocy5pbmRleE9mKEFUX1NUQVJUKSA9PT0gMCk7XG4gICAgLy8gbm90ZSwgc3VwcG9ydCBhIHN1YnNldCBvZiBydWxlIHR5cGVzLi4uXG4gICAgaWYgKG5vZGVbJ2F0UnVsZSddKSB7XG4gICAgICBpZiAocy5pbmRleE9mKE1FRElBX1NUQVJUKSA9PT0gMCkge1xuICAgICAgICBub2RlWyd0eXBlJ10gPSB0eXBlcy5NRURJQV9SVUxFO1xuICAgICAgfSBlbHNlIGlmIChzLm1hdGNoKFJYLmtleWZyYW1lc1J1bGUpKSB7XG4gICAgICAgIG5vZGVbJ3R5cGUnXSA9IHR5cGVzLktFWUZSQU1FU19SVUxFO1xuICAgICAgICBub2RlWydrZXlmcmFtZXNOYW1lJ10gPVxuICAgICAgICAgIG5vZGVbJ3NlbGVjdG9yJ10uc3BsaXQoUlgubXVsdGlwbGVTcGFjZXMpLnBvcCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocy5pbmRleE9mKFZBUl9TVEFSVCkgPT09IDApIHtcbiAgICAgICAgbm9kZVsndHlwZSddID0gdHlwZXMuTUlYSU5fUlVMRTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVbJ3R5cGUnXSA9IHR5cGVzLlNUWUxFX1JVTEU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCByJCA9IG5vZGVbJ3J1bGVzJ107XG4gIGlmIChyJCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gciQubGVuZ3RoLCByO1xuICAgICAgKGkgPCBsKSAmJiAociA9IHIkW2ldKTsgaSsrKSB7XG4gICAgICBwYXJzZUNzcyhyLCB0ZXh0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogY29udmVyc2lvbiBvZiBzb3J0IHVuaWNvZGUgZXNjYXBlcyB3aXRoIHNwYWNlcyBsaWtlIGBcXDMzIGAgKGFuZCBsb25nZXIpIGludG9cbiAqIGV4cGFuZGVkIGZvcm0gdGhhdCBkb2Vzbid0IHJlcXVpcmUgdHJhaWxpbmcgc3BhY2UgYFxcMDAwMDMzYFxuICogQHBhcmFtIHtzdHJpbmd9IHNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gX2V4cGFuZFVuaWNvZGVFc2NhcGVzKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFxcXChbMC05YS1mXXsxLDZ9KVxccy9naSwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IGNvZGUgPSBhcmd1bWVudHNbMV0sXG4gICAgICByZXBlYXQgPSA2IC0gY29kZS5sZW5ndGg7XG4gICAgd2hpbGUgKHJlcGVhdC0tKSB7XG4gICAgICBjb2RlID0gJzAnICsgY29kZTtcbiAgICB9XG4gICAgcmV0dXJuICdcXFxcJyArIGNvZGU7XG4gIH0pO1xufVxuXG4vKipcbiAqIHN0cmluZ2lmeSBwYXJzZWQgY3NzLlxuICogQHBhcmFtIHtTdHlsZU5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHByZXNlcnZlUHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmc9fSB0ZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkobm9kZSwgcHJlc2VydmVQcm9wZXJ0aWVzLCB0ZXh0ID0gJycpIHtcbiAgLy8gY2FsYyBydWxlIGNzc1RleHRcbiAgbGV0IGNzc1RleHQgPSAnJztcbiAgaWYgKG5vZGVbJ2Nzc1RleHQnXSB8fCBub2RlWydydWxlcyddKSB7XG4gICAgbGV0IHIkID0gbm9kZVsncnVsZXMnXTtcbiAgICBpZiAociQgJiYgIV9oYXNNaXhpblJ1bGVzKHIkKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByJC5sZW5ndGgsIHI7XG4gICAgICAgIChpIDwgbCkgJiYgKHIgPSByJFtpXSk7IGkrKykge1xuICAgICAgICBjc3NUZXh0ID0gc3RyaW5naWZ5KHIsIHByZXNlcnZlUHJvcGVydGllcywgY3NzVGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzc1RleHQgPSBwcmVzZXJ2ZVByb3BlcnRpZXMgPyBub2RlWydjc3NUZXh0J10gOlxuICAgICAgICByZW1vdmVDdXN0b21Qcm9wcyhub2RlWydjc3NUZXh0J10pO1xuICAgICAgY3NzVGV4dCA9IGNzc1RleHQudHJpbSgpO1xuICAgICAgaWYgKGNzc1RleHQpIHtcbiAgICAgICAgY3NzVGV4dCA9ICcgICcgKyBjc3NUZXh0ICsgJ1xcbic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGVtaXQgcnVsZSBpZiB0aGVyZSBpcyBjc3NUZXh0XG4gIGlmIChjc3NUZXh0KSB7XG4gICAgaWYgKG5vZGVbJ3NlbGVjdG9yJ10pIHtcbiAgICAgIHRleHQgKz0gbm9kZVsnc2VsZWN0b3InXSArICcgJyArIE9QRU5fQlJBQ0UgKyAnXFxuJztcbiAgICB9XG4gICAgdGV4dCArPSBjc3NUZXh0O1xuICAgIGlmIChub2RlWydzZWxlY3RvciddKSB7XG4gICAgICB0ZXh0ICs9IENMT1NFX0JSQUNFICsgJ1xcblxcbic7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8U3R5bGVOb2RlPn0gcnVsZXNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIF9oYXNNaXhpblJ1bGVzKHJ1bGVzKSB7XG4gIGxldCByID0gcnVsZXNbMF07XG4gIHJldHVybiBCb29sZWFuKHIpICYmIEJvb2xlYW4oclsnc2VsZWN0b3InXSkgJiYgclsnc2VsZWN0b3InXS5pbmRleE9mKFZBUl9TVEFSVCkgPT09IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tUHJvcHMoY3NzVGV4dCkge1xuICBjc3NUZXh0ID0gcmVtb3ZlQ3VzdG9tUHJvcEFzc2lnbm1lbnQoY3NzVGV4dCk7XG4gIHJldHVybiByZW1vdmVDdXN0b21Qcm9wQXBwbHkoY3NzVGV4dCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUN1c3RvbVByb3BBc3NpZ25tZW50KGNzc1RleHQpIHtcbiAgcmV0dXJuIGNzc1RleHRcbiAgICAucmVwbGFjZShSWC5jdXN0b21Qcm9wLCAnJylcbiAgICAucmVwbGFjZShSWC5taXhpblByb3AsICcnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVDdXN0b21Qcm9wQXBwbHkoY3NzVGV4dCkge1xuICByZXR1cm4gY3NzVGV4dFxuICAgIC5yZXBsYWNlKFJYLm1peGluQXBwbHksICcnKVxuICAgIC5yZXBsYWNlKFJYLnZhckFwcGx5LCAnJyk7XG59XG5cbi8qKiBAZW51bSB7bnVtYmVyfSAqL1xuZXhwb3J0IGNvbnN0IHR5cGVzID0ge1xuICBTVFlMRV9SVUxFOiAxLFxuICBLRVlGUkFNRVNfUlVMRTogNyxcbiAgTUVESUFfUlVMRTogNCxcbiAgTUlYSU5fUlVMRTogMTAwMFxufVxuXG5jb25zdCBPUEVOX0JSQUNFID0gJ3snO1xuY29uc3QgQ0xPU0VfQlJBQ0UgPSAnfSc7XG5cbi8vIGhlbHBlciByZWdleHAnc1xuY29uc3QgUlggPSB7XG4gIGNvbW1lbnRzOiAvXFwvXFwqW14qXSpcXCorKFteLypdW14qXSpcXCorKSpcXC8vZ2ltLFxuICBwb3J0OiAvQGltcG9ydFteO10qOy9naW0sXG4gIGN1c3RvbVByb3A6IC8oPzpeW147XFwtXFxzfV0rKT8tLVteO3t9XSo/Oltee307XSo/KD86WztcXG5dfCQpL2dpbSxcbiAgbWl4aW5Qcm9wOiAvKD86XlteO1xcLVxcc31dKyk/LS1bXjt7fV0qPzpbXnt9O10qP3tbXn1dKj99KD86WztcXG5dfCQpPy9naW0sXG4gIG1peGluQXBwbHk6IC9AYXBwbHlcXHMqXFwoP1teKTtdKlxcKT9cXHMqKD86WztcXG5dfCQpPy9naW0sXG4gIHZhckFwcGx5OiAvW147Ol0qPzpbXjtdKj92YXJcXChbXjtdKlxcKSg/Ols7XFxuXXwkKT8vZ2ltLFxuICBrZXlmcmFtZXNSdWxlOiAvXkBbXlxcc10qa2V5ZnJhbWVzLyxcbiAgbXVsdGlwbGVTcGFjZXM6IC9cXHMrL2dcbn1cblxuY29uc3QgVkFSX1NUQVJUID0gJy0tJztcbmNvbnN0IE1FRElBX1NUQVJUID0gJ0BtZWRpYSc7XG5jb25zdCBBVF9TVEFSVCA9ICdAJztcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqIEB0eXBlIHshU2V0PHN0cmluZz59ICovXG5jb25zdCBzdHlsZVRleHRTZXQgPSBuZXcgU2V0KCk7XG5cbmV4cG9ydCBjb25zdCBzY29waW5nQXR0cmlidXRlID0gJ3NoYWR5LXVuc2NvcGVkJztcblxuLyoqXG4gKiBBZGQgYSBzcGVjaWZpY2FsbHktbWFya2VkIHN0eWxlIHRvIHRoZSBkb2N1bWVudCBkaXJlY3RseSwgYW5kIG9ubHkgb25lIGNvcHkgb2YgdGhhdCBzdHlsZS5cbiAqXG4gKiBAcGFyYW0geyFIVE1MU3R5bGVFbGVtZW50fSBzdHlsZVxuICogQHJldHVybiB7dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1Vuc2NvcGVkU3R5bGUoc3R5bGUpIHtcbiAgY29uc3QgdGV4dCA9IHN0eWxlLnRleHRDb250ZW50O1xuICBpZiAoIXN0eWxlVGV4dFNldC5oYXModGV4dCkpIHtcbiAgICBzdHlsZVRleHRTZXQuYWRkKHRleHQpO1xuICAgIGNvbnN0IG5ld1N0eWxlID0gc3R5bGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobmV3U3R5bGUpO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHlsZSBpcyBzdXBwb3NlZCB0byBiZSB1bnNjb3BlZFxuICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHN0eWxlIGhhcyB0aGUgdW5zY29waW5nIGF0dHJpYnV0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVbnNjb3BlZFN0eWxlKHN0eWxlKSB7XG4gIHJldHVybiBzdHlsZS5oYXNBdHRyaWJ1dGUoc2NvcGluZ0F0dHJpYnV0ZSk7XG59IiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge25hdGl2ZVNoYWRvdywgbmF0aXZlQ3NzVmFyaWFibGVzLCBjc3NCdWlsZH0gZnJvbSAnLi9zdHlsZS1zZXR0aW5ncy5qcyc7XG5pbXBvcnQge3BhcnNlLCBzdHJpbmdpZnksIHR5cGVzLCBTdHlsZU5vZGV9IGZyb20gJy4vY3NzLXBhcnNlLmpzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHtNRURJQV9NQVRDSH0gZnJvbSAnLi9jb21tb24tcmVnZXguanMnO1xuaW1wb3J0IHtwcm9jZXNzVW5zY29wZWRTdHlsZSwgaXNVbnNjb3BlZFN0eWxlfSBmcm9tICcuL3Vuc2NvcGVkLXN0eWxlLWhhbmRsZXIuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfFN0eWxlTm9kZX0gcnVsZXNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oU3R5bGVOb2RlKT19IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Nzc1RleHQgKHJ1bGVzLCBjYWxsYmFjaykge1xuICBpZiAoIXJ1bGVzKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGlmICh0eXBlb2YgcnVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgcnVsZXMgPSBwYXJzZShydWxlcyk7XG4gIH1cbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgZm9yRWFjaFJ1bGUocnVsZXMsIGNhbGxiYWNrKTtcbiAgfVxuICByZXR1cm4gc3RyaW5naWZ5KHJ1bGVzLCBuYXRpdmVDc3NWYXJpYWJsZXMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAqIEByZXR1cm4ge1N0eWxlTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bGVzRm9yU3R5bGUoc3R5bGUpIHtcbiAgaWYgKCFzdHlsZVsnX19jc3NSdWxlcyddICYmIHN0eWxlLnRleHRDb250ZW50KSB7XG4gICAgc3R5bGVbJ19fY3NzUnVsZXMnXSA9IHBhcnNlKHN0eWxlLnRleHRDb250ZW50KTtcbiAgfVxuICByZXR1cm4gc3R5bGVbJ19fY3NzUnVsZXMnXSB8fCBudWxsO1xufVxuXG4vLyBUZXN0cyBpZiBhIHJ1bGUgaXMgYSBrZXlmcmFtZXMgc2VsZWN0b3IsIHdoaWNoIGxvb2tzIGFsbW9zdCBleGFjdGx5XG4vLyBsaWtlIGEgbm9ybWFsIHNlbGVjdG9yIGJ1dCBpcyBub3QgKGl0IGhhcyBub3RoaW5nIHRvIGRvIHdpdGggc2NvcGluZ1xuLy8gZm9yIGV4YW1wbGUpLlxuLyoqXG4gKiBAcGFyYW0ge1N0eWxlTm9kZX0gcnVsZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5ZnJhbWVzU2VsZWN0b3IocnVsZSkge1xuICByZXR1cm4gQm9vbGVhbihydWxlWydwYXJlbnQnXSkgJiZcbiAgcnVsZVsncGFyZW50J11bJ3R5cGUnXSA9PT0gdHlwZXMuS0VZRlJBTUVTX1JVTEU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtTdHlsZU5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb249fSBzdHlsZVJ1bGVDYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbj19IGtleWZyYW1lc1J1bGVDYWxsYmFja1xuICogQHBhcmFtIHtib29sZWFuPX0gb25seUFjdGl2ZVJ1bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoUnVsZShub2RlLCBzdHlsZVJ1bGVDYWxsYmFjaywga2V5ZnJhbWVzUnVsZUNhbGxiYWNrLCBvbmx5QWN0aXZlUnVsZXMpIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBza2lwUnVsZXMgPSBmYWxzZTtcbiAgbGV0IHR5cGUgPSBub2RlWyd0eXBlJ107XG4gIGlmIChvbmx5QWN0aXZlUnVsZXMpIHtcbiAgICBpZiAodHlwZSA9PT0gdHlwZXMuTUVESUFfUlVMRSkge1xuICAgICAgbGV0IG1hdGNoTWVkaWEgPSBub2RlWydzZWxlY3RvciddLm1hdGNoKE1FRElBX01BVENIKTtcbiAgICAgIGlmIChtYXRjaE1lZGlhKSB7XG4gICAgICAgIC8vIGlmIHJ1bGUgaXMgYSBub24gbWF0Y2hpbmcgQG1lZGlhIHJ1bGUsIHNraXAgc3VicnVsZXNcbiAgICAgICAgaWYgKCF3aW5kb3cubWF0Y2hNZWRpYShtYXRjaE1lZGlhWzFdKS5tYXRjaGVzKSB7XG4gICAgICAgICAgc2tpcFJ1bGVzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAodHlwZSA9PT0gdHlwZXMuU1RZTEVfUlVMRSkge1xuICAgIHN0eWxlUnVsZUNhbGxiYWNrKG5vZGUpO1xuICB9IGVsc2UgaWYgKGtleWZyYW1lc1J1bGVDYWxsYmFjayAmJlxuICAgIHR5cGUgPT09IHR5cGVzLktFWUZSQU1FU19SVUxFKSB7XG4gICAga2V5ZnJhbWVzUnVsZUNhbGxiYWNrKG5vZGUpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IHR5cGVzLk1JWElOX1JVTEUpIHtcbiAgICBza2lwUnVsZXMgPSB0cnVlO1xuICB9XG4gIGxldCByJCA9IG5vZGVbJ3J1bGVzJ107XG4gIGlmIChyJCAmJiAhc2tpcFJ1bGVzKSB7XG4gICAgZm9yIChsZXQgaT0wLCBsPXIkLmxlbmd0aCwgcjsgKGk8bCkgJiYgKHI9ciRbaV0pOyBpKyspIHtcbiAgICAgIGZvckVhY2hSdWxlKHIsIHN0eWxlUnVsZUNhbGxiYWNrLCBrZXlmcmFtZXNSdWxlQ2FsbGJhY2ssIG9ubHlBY3RpdmVSdWxlcyk7XG4gICAgfVxuICB9XG59XG5cbi8vIGFkZCBhIHN0cmluZyBvZiBjc3NUZXh0IHRvIHRoZSBkb2N1bWVudC5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb25pa2VyXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtOb2RlfSBjb250ZXh0Tm9kZVxuICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q3NzKGNzc1RleHQsIG1vbmlrZXIsIHRhcmdldCwgY29udGV4dE5vZGUpIHtcbiAgbGV0IHN0eWxlID0gY3JlYXRlU2NvcGVTdHlsZShjc3NUZXh0LCBtb25pa2VyKTtcbiAgYXBwbHlTdHlsZShzdHlsZSwgdGFyZ2V0LCBjb250ZXh0Tm9kZSk7XG4gIHJldHVybiBzdHlsZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHBhcmFtIHtzdHJpbmd9IG1vbmlrZXJcbiAqIEByZXR1cm4ge0hUTUxTdHlsZUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTY29wZVN0eWxlKGNzc1RleHQsIG1vbmlrZXIpIHtcbiAgbGV0IHN0eWxlID0gLyoqIEB0eXBlIHtIVE1MU3R5bGVFbGVtZW50fSAqLyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpKTtcbiAgaWYgKG1vbmlrZXIpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ3Njb3BlJywgbW9uaWtlcik7XG4gIH1cbiAgc3R5bGUudGV4dENvbnRlbnQgPSBjc3NUZXh0O1xuICByZXR1cm4gc3R5bGU7XG59XG5cbi8qKlxuICogVHJhY2sgdGhlIHBvc2l0aW9uIG9mIHRoZSBsYXN0IGFkZGVkIHN0eWxlIGZvciBwbGFjaW5nIHBsYWNlaG9sZGVyc1xuICogQHR5cGUge05vZGV9XG4gKi9cbmxldCBsYXN0SGVhZEFwcGx5Tm9kZSA9IG51bGw7XG5cbi8vIGluc2VydCBhIGNvbW1lbnQgbm9kZSBhcyBhIHN0eWxpbmcgcG9zaXRpb24gcGxhY2Vob2xkZXIuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb25pa2VyXG4gKiBAcmV0dXJuIHshQ29tbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3R5bGVQbGFjZUhvbGRlcihtb25pa2VyKSB7XG4gIGxldCBwbGFjZUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBTaGFkeSBET00gc3R5bGVzIGZvciAnICtcbiAgICBtb25pa2VyICsgJyAnKTtcbiAgbGV0IGFmdGVyID0gbGFzdEhlYWRBcHBseU5vZGUgP1xuICAgIGxhc3RIZWFkQXBwbHlOb2RlWyduZXh0U2libGluZyddIDogbnVsbDtcbiAgbGV0IHNjb3BlID0gZG9jdW1lbnQuaGVhZDtcbiAgc2NvcGUuaW5zZXJ0QmVmb3JlKHBsYWNlSG9sZGVyLCBhZnRlciB8fCBzY29wZS5maXJzdENoaWxkKTtcbiAgbGFzdEhlYWRBcHBseU5vZGUgPSBwbGFjZUhvbGRlcjtcbiAgcmV0dXJuIHBsYWNlSG9sZGVyO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAqIEBwYXJhbSB7P05vZGV9IHRhcmdldFxuICogQHBhcmFtIHs/Tm9kZX0gY29udGV4dE5vZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3R5bGUoc3R5bGUsIHRhcmdldCwgY29udGV4dE5vZGUpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IHx8IGRvY3VtZW50LmhlYWQ7XG4gIGxldCBhZnRlciA9IChjb250ZXh0Tm9kZSAmJiBjb250ZXh0Tm9kZS5uZXh0U2libGluZykgfHxcbiAgICB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgYWZ0ZXIpO1xuICBpZiAoIWxhc3RIZWFkQXBwbHlOb2RlKSB7XG4gICAgbGFzdEhlYWRBcHBseU5vZGUgPSBzdHlsZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBvbmx5IHVwZGF0ZSBsYXN0SGVhZEFwcGx5Tm9kZSBpZiB0aGUgbmV3IHN0eWxlIGlzIGluc2VydGVkIGFmdGVyIHRoZSBvbGQgbGFzdEhlYWRBcHBseU5vZGVcbiAgICBsZXQgcG9zaXRpb24gPSBzdHlsZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihsYXN0SGVhZEFwcGx5Tm9kZSk7XG4gICAgaWYgKHBvc2l0aW9uID09PSBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORykge1xuICAgICAgbGFzdEhlYWRBcHBseU5vZGUgPSBzdHlsZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gYnVpbGRUeXBlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUYXJnZXRlZEJ1aWxkKGJ1aWxkVHlwZSkge1xuICByZXR1cm4gbmF0aXZlU2hhZG93ID8gYnVpbGRUeXBlID09PSAnc2hhZG93JyA6IGJ1aWxkVHlwZSA9PT0gJ3NoYWR5Jztcbn1cblxuLyoqXG4gKiBXYWxrIGZyb20gdGV4dFtzdGFydF0gbWF0Y2hpbmcgcGFyZW5zIGFuZFxuICogcmV0dXJucyBwb3NpdGlvbiBvZiB0aGUgb3V0ZXIgZW5kIHBhcmVuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTWF0Y2hpbmdQYXJlbih0ZXh0LCBzdGFydCkge1xuICBsZXQgbGV2ZWwgPSAwO1xuICBmb3IgKGxldCBpPXN0YXJ0LCBsPXRleHQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHRleHRbaV0gPT09ICcoJykge1xuICAgICAgbGV2ZWwrKztcbiAgICB9IGVsc2UgaWYgKHRleHRbaV0gPT09ICcpJykge1xuICAgICAgaWYgKC0tbGV2ZWwgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZyl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVmFyaWFibGVBbmRGYWxsYmFjayhzdHIsIGNhbGxiYWNrKSB7XG4gIC8vIGZpbmQgJ3ZhcignXG4gIGxldCBzdGFydCA9IHN0ci5pbmRleE9mKCd2YXIoJyk7XG4gIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAvLyBubyB2YXI/LCBldmVyeXRoaW5nIGlzIHByZWZpeFxuICAgIHJldHVybiBjYWxsYmFjayhzdHIsICcnLCAnJywgJycpO1xuICB9XG4gIC8vJHtwcmVmaXh9dmFyKCR7aW5uZXJ9KSR7c3VmZml4fVxuICBsZXQgZW5kID0gZmluZE1hdGNoaW5nUGFyZW4oc3RyLCBzdGFydCArIDMpO1xuICBsZXQgaW5uZXIgPSBzdHIuc3Vic3RyaW5nKHN0YXJ0ICsgNCwgZW5kKTtcbiAgbGV0IHByZWZpeCA9IHN0ci5zdWJzdHJpbmcoMCwgc3RhcnQpO1xuICAvLyBzdWZmaXggbWF5IGhhdmUgb3RoZXIgdmFyaWFibGVzXG4gIGxldCBzdWZmaXggPSBwcm9jZXNzVmFyaWFibGVBbmRGYWxsYmFjayhzdHIuc3Vic3RyaW5nKGVuZCArIDEpLCBjYWxsYmFjayk7XG4gIGxldCBjb21tYSA9IGlubmVyLmluZGV4T2YoJywnKTtcbiAgLy8gdmFsdWUgYW5kIGZhbGxiYWNrIGFyZ3Mgc2hvdWxkIGJlIHRyaW1tZWQgdG8gbWF0Y2ggaW4gcHJvcGVydHkgbG9va3VwXG4gIGlmIChjb21tYSA9PT0gLTEpIHtcbiAgICAvLyB2YXJpYWJsZSwgbm8gZmFsbGJhY2tcbiAgICByZXR1cm4gY2FsbGJhY2socHJlZml4LCBpbm5lci50cmltKCksICcnLCBzdWZmaXgpO1xuICB9XG4gIC8vIHZhcigke3ZhbHVlfSwke2ZhbGxiYWNrfSlcbiAgbGV0IHZhbHVlID0gaW5uZXIuc3Vic3RyaW5nKDAsIGNvbW1hKS50cmltKCk7XG4gIGxldCBmYWxsYmFjayA9IGlubmVyLnN1YnN0cmluZyhjb21tYSArIDEpLnRyaW0oKTtcbiAgcmV0dXJuIGNhbGxiYWNrKHByZWZpeCwgdmFsdWUsIGZhbGxiYWNrLCBzdWZmaXgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRFbGVtZW50Q2xhc3NSYXcoZWxlbWVudCwgdmFsdWUpIHtcbiAgLy8gdXNlIG5hdGl2ZSBzZXRBdHRyaWJ1dGUgcHJvdmlkZWQgYnkgU2hhZHlET00gd2hlbiBzZXRBdHRyaWJ1dGUgaXMgcGF0Y2hlZFxuICBpZiAobmF0aXZlU2hhZG93KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvd1snU2hhZHlET00nXVsnbmF0aXZlTWV0aG9kcyddWydzZXRBdHRyaWJ1dGUnXS5jYWxsKGVsZW1lbnQsICdjbGFzcycsIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlIHtmdW5jdGlvbigqKToqfVxuICovXG5leHBvcnQgY29uc3Qgd3JhcCA9IHdpbmRvd1snU2hhZHlET00nXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ3dyYXAnXSB8fCAoKG5vZGUpID0+IG5vZGUpO1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudCB8IHtpczogc3RyaW5nLCBleHRlbmRzOiBzdHJpbmd9fSBlbGVtZW50XG4gKiBAcmV0dXJuIHt7aXM6IHN0cmluZywgdHlwZUV4dGVuc2lvbjogc3RyaW5nfX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElzRXh0ZW5kcyhlbGVtZW50KSB7XG4gIGxldCBsb2NhbE5hbWUgPSBlbGVtZW50Wydsb2NhbE5hbWUnXTtcbiAgbGV0IGlzID0gJycsIHR5cGVFeHRlbnNpb24gPSAnJztcbiAgLypcbiAgTk9URTogdGVjaG5pY2FsbHksIHRoaXMgY2FuIGJlIHdyb25nIGZvciBjZXJ0YWluIHN2ZyBlbGVtZW50c1xuICB3aXRoIGAtYCBpbiB0aGUgbmFtZSBsaWtlIGA8Zm9udC1mYWNlPmBcbiAgKi9cbiAgaWYgKGxvY2FsTmFtZSkge1xuICAgIGlmIChsb2NhbE5hbWUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIGlzID0gbG9jYWxOYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlRXh0ZW5zaW9uID0gbG9jYWxOYW1lO1xuICAgICAgaXMgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lzJykpIHx8ICcnO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpcyA9IC8qKiBAdHlwZSB7P30gKi8oZWxlbWVudCkuaXM7XG4gICAgdHlwZUV4dGVuc2lvbiA9IC8qKiBAdHlwZSB7P30gKi8oZWxlbWVudCkuZXh0ZW5kcztcbiAgfVxuICByZXR1cm4ge2lzLCB0eXBlRXh0ZW5zaW9ufTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2F0aGVyU3R5bGVUZXh0KGVsZW1lbnQpIHtcbiAgLyoqIEB0eXBlIHshQXJyYXk8c3RyaW5nPn0gKi9cbiAgY29uc3Qgc3R5bGVUZXh0UGFydHMgPSBbXTtcbiAgY29uc3Qgc3R5bGVzID0gLyoqIEB0eXBlIHshTm9kZUxpc3Q8IUhUTUxTdHlsZUVsZW1lbnQ+fSAqLyhlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0eWxlJykpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHN0eWxlID0gc3R5bGVzW2ldO1xuICAgIGlmIChpc1Vuc2NvcGVkU3R5bGUoc3R5bGUpKSB7XG4gICAgICBpZiAoIW5hdGl2ZVNoYWRvdykge1xuICAgICAgICBwcm9jZXNzVW5zY29wZWRTdHlsZShzdHlsZSk7XG4gICAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZVRleHRQYXJ0cy5wdXNoKHN0eWxlLnRleHRDb250ZW50KTtcbiAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3R5bGVUZXh0UGFydHMuam9pbignJykudHJpbSgpO1xufVxuXG4vKipcbiAqIFNwbGl0IGEgc2VsZWN0b3Igc2VwYXJhdGVkIGJ5IGNvbW1hcyBpbnRvIGFuIGFycmF5IGluIGEgc21hcnQgd2F5XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRTZWxlY3Rvckxpc3Qoc2VsZWN0b3IpIHtcbiAgY29uc3QgcGFydHMgPSBbXTtcbiAgbGV0IHBhcnQgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPj0gMCAmJiBpIDwgc2VsZWN0b3IubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBBIHNlbGVjdG9yIHdpdGggcGFyZW50aGVzZXMgd2lsbCBiZSBvbmUgY29tcGxldGUgcGFydFxuICAgIGlmIChzZWxlY3RvcltpXSA9PT0gJygnKSB7XG4gICAgICAvLyBmaW5kIHRoZSBtYXRjaGluZyBwYXJlblxuICAgICAgY29uc3QgZW5kID0gZmluZE1hdGNoaW5nUGFyZW4oc2VsZWN0b3IsIGkpO1xuICAgICAgLy8gcHVzaCB0aGUgcGFyZW4gYmxvY2sgaW50byB0aGUgcGFydFxuICAgICAgcGFydCArPSBzZWxlY3Rvci5zbGljZShpLCBlbmQgKyAxKTtcbiAgICAgIC8vIG1vdmUgdGhlIGluZGV4IHRvIGFmdGVyIHRoZSBwYXJlbiBibG9ja1xuICAgICAgaSA9IGVuZDtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdG9yW2ldID09PSAnLCcpIHtcbiAgICAgIHBhcnRzLnB1c2gocGFydCk7XG4gICAgICBwYXJ0ID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnQgKz0gc2VsZWN0b3JbaV07XG4gICAgfVxuICB9XG4gIC8vIGNhdGNoIGFueSBwaWVjZXMgYWZ0ZXIgdGhlIGxhc3QgY29tbWFcbiAgaWYgKHBhcnQpIHtcbiAgICBwYXJ0cy5wdXNoKHBhcnQpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn1cblxuY29uc3QgQ1NTX0JVSUxEX0FUVFIgPSAnY3NzLWJ1aWxkJztcblxuLyoqXG4gKiBSZXR1cm4gdGhlIHBvbHltZXItY3NzLWJ1aWxkIFwiYnVpbGQgdHlwZVwiIGFwcGxpZWQgdG8gdGhpcyBlbGVtZW50XG4gKlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FuIGJlIFwiXCIsIFwic2hhZHlcIiwgb3IgXCJzaGFkb3dcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3NzQnVpbGQoZWxlbWVudCkge1xuICBpZiAoY3NzQnVpbGQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8oY3NzQnVpbGQpO1xuICB9XG4gIGlmIChlbGVtZW50Ll9fY3NzQnVpbGQgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIHRyeSBhdHRyaWJ1dGUgZmlyc3QsIGFzIGl0IGlzIHRoZSBjb21tb24gY2FzZVxuICAgIGNvbnN0IGF0dHJWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKENTU19CVUlMRF9BVFRSKTtcbiAgICBpZiAoYXR0clZhbHVlKSB7XG4gICAgICBlbGVtZW50Ll9fY3NzQnVpbGQgPSBhdHRyVmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1aWxkQ29tbWVudCA9IGdldEJ1aWxkQ29tbWVudChlbGVtZW50KTtcbiAgICAgIGlmIChidWlsZENvbW1lbnQgIT09ICcnKSB7XG4gICAgICAgIC8vIHJlbW92ZSBidWlsZCBjb21tZW50IHNvIGl0IGlzIG5vdCBuZWVkbGVzc2x5IGNvcGllZCBpbnRvIGV2ZXJ5IGVsZW1lbnQgaW5zdGFuY2VcbiAgICAgICAgcmVtb3ZlQnVpbGRDb21tZW50KGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgZWxlbWVudC5fX2Nzc0J1aWxkID0gYnVpbGRDb21tZW50O1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudC5fX2Nzc0J1aWxkIHx8ICcnO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBlbGVtZW50LCBlaXRoZXIgYSA8dGVtcGxhdGU+IG9yIDxzdHlsZT4sIGhhcyBiZWVuIHByb2Nlc3NlZFxuICogYnkgcG9seW1lci1jc3MtYnVpbGQuXG4gKlxuICogSWYgc28sIHRoZW4gd2UgY2FuIG1ha2UgYSBudW1iZXIgb2Ygb3B0aW1pemF0aW9uczpcbiAqIC0gcG9seW1lci1jc3MtYnVpbGQgd2lsbCBkZWNvbXBvc2UgbWl4aW5zIGludG8gaW5kaXZpZHVhbCBDU1MgQ3VzdG9tIFByb3BlcnRpZXMsXG4gKiBzbyB0aGUgQXBwbHlTaGltIGNhbiBiZSBza2lwcGVkIGVudGlyZWx5LlxuICogLSBVbmRlciBuYXRpdmUgU2hhZG93RE9NLCB0aGUgc3R5bGUgdGV4dCBjYW4ganVzdCBiZSBjb3BpZWQgaW50byBlYWNoIGluc3RhbmNlXG4gKiB3aXRob3V0IG1vZGlmaWNhdGlvblxuICogLSBJZiB0aGUgYnVpbGQgaXMgXCJzaGFkeVwiIGFuZCBTaGFkeURPTSBpcyBpbiB1c2UsIHRoZSBzdHlsaW5nIGRvZXMgbm90IG5lZWRcbiAqIHNjb3BpbmcgYmV5b25kIHRoZSBzaGltbWluZyBvZiBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcbiAqXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRIYXNCdWlsdENzcyhlbGVtZW50KSB7XG4gIHJldHVybiBnZXRDc3NCdWlsZChlbGVtZW50KSAhPT0gJyc7XG59XG5cbi8qKlxuICogRm9yIHRlbXBsYXRlcyBtYWRlIHdpdGggdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWxzLCBwb2x5bWVyLWNzcy1idWlsZCB3aWxsXG4gKiBpbnNlcnQgYSBjb21tZW50IG9mIHRoZSBmb3JtIGA8IS0tY3NzLWJ1aWxkOnNoYWRvdy0tPmBcbiAqXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVpbGRDb21tZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgYnVpbGRDb21tZW50ID0gZWxlbWVudC5sb2NhbE5hbWUgPT09ICd0ZW1wbGF0ZScgP1xuICAgICAgLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKGVsZW1lbnQpLmNvbnRlbnQuZmlyc3RDaGlsZCA6XG4gICAgICBlbGVtZW50LmZpcnN0Q2hpbGQ7XG4gIGlmIChidWlsZENvbW1lbnQgaW5zdGFuY2VvZiBDb21tZW50KSB7XG4gICAgY29uc3QgY29tbWVudFBhcnRzID0gYnVpbGRDb21tZW50LnRleHRDb250ZW50LnRyaW0oKS5zcGxpdCgnOicpO1xuICAgIGlmIChjb21tZW50UGFydHNbMF0gPT09IENTU19CVUlMRF9BVFRSKSB7XG4gICAgICByZXR1cm4gY29tbWVudFBhcnRzWzFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGNzcyBidWlsZCBzdGF0dXMgaXMgb3B0aW1hbCwgYW5kIGRvIG5vIHVubmVlZGVkIHdvcmsuXG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBjc3NCdWlsZCBDU1MgYnVpbGQgc3RhdHVzXG4gKiBAcmV0dXJuIHtib29sZWFufSBjc3MgYnVpbGQgaXMgb3B0aW1hbCBvciBub3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT3B0aW1hbENzc0J1aWxkKGNzc0J1aWxkID0gJycpIHtcbiAgLy8gQ1NTIGN1c3RvbSBwcm9wZXJ0eSBzaGltIGFsd2F5cyByZXF1aXJlcyB3b3JrXG4gIGlmIChjc3NCdWlsZCA9PT0gJycgfHwgIW5hdGl2ZUNzc1ZhcmlhYmxlcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gbmF0aXZlU2hhZG93ID8gY3NzQnVpbGQgPT09ICdzaGFkb3cnIDogY3NzQnVpbGQgPT09ICdzaGFkeSc7XG59XG5cbi8qKlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQnVpbGRDb21tZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgYnVpbGRDb21tZW50ID0gZWxlbWVudC5sb2NhbE5hbWUgPT09ICd0ZW1wbGF0ZScgP1xuICAgICAgLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKGVsZW1lbnQpLmNvbnRlbnQuZmlyc3RDaGlsZCA6XG4gICAgICBlbGVtZW50LmZpcnN0Q2hpbGQ7XG4gIGJ1aWxkQ29tbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJ1aWxkQ29tbWVudCk7XG59XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuLypcbiAqIFRoZSBhcHBseSBzaGltIHNpbXVsYXRlcyB0aGUgYmVoYXZpb3Igb2YgYEBhcHBseWAgcHJvcG9zZWQgYXRcbiAqIGh0dHBzOi8vdGFiYXRraW5zLmdpdGh1Yi5pby9zcGVjcy9jc3MtYXBwbHktcnVsZS8uXG4gKiBUaGUgYXBwcm9hY2ggaXMgdG8gY29udmVydCBhIHByb3BlcnR5IGxpa2UgdGhpczpcbiAqXG4gKiAgICAtLWZvbzoge2NvbG9yOiByZWQ7IGJhY2tncm91bmQ6IGJsdWU7fVxuICpcbiAqIHRvIHRoaXM6XG4gKlxuICogICAgLS1mb29fLV9jb2xvcjogcmVkO1xuICogICAgLS1mb29fLV9iYWNrZ3JvdW5kOiBibHVlO1xuICpcbiAqIFRoZW4gd2hlcmUgYEBhcHBseSAtLWZvb2AgaXMgdXNlZCwgdGhhdCBpcyBjb252ZXJ0ZWQgdG86XG4gKlxuICogICAgY29sb3I6IHZhcigtLWZvb18tX2NvbG9yKTtcbiAqICAgIGJhY2tncm91bmQ6IHZhcigtLWZvb18tX2JhY2tncm91bmQpO1xuICpcbiAqIFRoaXMgYXBwcm9hY2ggZ2VuZXJhbGx5IHdvcmtzIGJ1dCB0aGVyZSBhcmUgc29tZSBpc3N1ZXMgYW5kIGxpbWl0YXRpb25zLlxuICogQ29uc2lkZXIsIGZvciBleGFtcGxlLCB0aGF0IHNvbWV3aGVyZSAqYmV0d2Vlbiogd2hlcmUgYC0tZm9vYCBpcyBzZXQgYW5kIHVzZWQsXG4gKiBhbm90aGVyIGVsZW1lbnQgc2V0cyBpdCB0bzpcbiAqXG4gKiAgICAtLWZvbzogeyBib3JkZXI6IDJweCBzb2xpZCByZWQ7IH1cbiAqXG4gKiBXZSBtdXN0IG5vdyBlbnN1cmUgdGhhdCB0aGUgY29sb3IgYW5kIGJhY2tncm91bmQgZnJvbSB0aGUgcHJldmlvdXMgc2V0dGluZ1xuICogZG8gbm90IGFwcGx5LiBUaGlzIGlzIGFjY29tcGxpc2hlZCBieSBjaGFuZ2luZyB0aGUgcHJvcGVydHkgc2V0IHRvIHRoaXM6XG4gKlxuICogICAgLS1mb29fLV9ib3JkZXI6IDJweCBzb2xpZCByZWQ7XG4gKiAgICAtLWZvb18tX2NvbG9yOiBpbml0aWFsO1xuICogICAgLS1mb29fLV9iYWNrZ3JvdW5kOiBpbml0aWFsO1xuICpcbiAqIFRoaXMgd29ya3MgYnV0IGludHJvZHVjZXMgb25lIG5ldyBpc3N1ZS5cbiAqIENvbnNpZGVyIHRoaXMgc2V0dXAgYXQgdGhlIHBvaW50IHdoZXJlIHRoZSBgQGFwcGx5YCBpcyB1c2VkOlxuICpcbiAqICAgIGJhY2tncm91bmQ6IG9yYW5nZTtcbiAqICAgIGBAYXBwbHlgIC0tZm9vO1xuICpcbiAqIEluIHRoaXMgY2FzZSB0aGUgYmFja2dyb3VuZCB3aWxsIGJlIHVuc2V0IChpbml0aWFsKSByYXRoZXIgdGhhbiB0aGUgZGVzaXJlZFxuICogYG9yYW5nZWAuIFdlIGFkZHJlc3MgdGhpcyBieSBhbHRlcmluZyB0aGUgcHJvcGVydHkgc2V0IHRvIHVzZSBhIGZhbGxiYWNrXG4gKiB2YWx1ZSBsaWtlIHRoaXM6XG4gKlxuICogICAgY29sb3I6IHZhcigtLWZvb18tX2NvbG9yKTtcbiAqICAgIGJhY2tncm91bmQ6IHZhcigtLWZvb18tX2JhY2tncm91bmQsIG9yYW5nZSk7XG4gKiAgICBib3JkZXI6IHZhcigtLWZvb18tX2JvcmRlcik7XG4gKlxuICogTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGlzIHJldGFpbmVkIGluIHRoZSBwcm9wZXJ0eSBzZXQgYW5kIHRoZSBgYmFja2dyb3VuZGAgaXNcbiAqIHRoZSBkZXNpcmVkIGBvcmFuZ2VgLiBUaGlzIGxlYWRzIHVzIHRvIGEgbGltaXRhdGlvbi5cbiAqXG4gKiBMaW1pdGF0aW9uIDE6XG5cbiAqIE9ubHkgcHJvcGVydGllcyBpbiB0aGUgcnVsZSB3aGVyZSB0aGUgYEBhcHBseWBcbiAqIGlzIHVzZWQgYXJlIGNvbnNpZGVyZWQgYXMgZGVmYXVsdCB2YWx1ZXMuXG4gKiBJZiBhbm90aGVyIHJ1bGUgbWF0Y2hlcyB0aGUgZWxlbWVudCBhbmQgc2V0cyBgYmFja2dyb3VuZGAgd2l0aFxuICogbGVzcyBzcGVjaWZpY2l0eSB0aGFuIHRoZSBydWxlIGluIHdoaWNoIGBAYXBwbHlgIGFwcGVhcnMsXG4gKiB0aGUgYGJhY2tncm91bmRgIHdpbGwgbm90IGJlIHNldC5cbiAqXG4gKiBMaW1pdGF0aW9uIDI6XG4gKlxuICogV2hlbiB1c2luZyBQb2x5bWVyJ3MgYHVwZGF0ZVN0eWxlc2AgYXBpLCBuZXcgcHJvcGVydGllcyBtYXkgbm90IGJlIHNldCBmb3JcbiAqIGBAYXBwbHlgIHByb3BlcnRpZXMuXG5cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtmb3JFYWNoUnVsZSwgcHJvY2Vzc1ZhcmlhYmxlQW5kRmFsbGJhY2ssIHJ1bGVzRm9yU3R5bGUsIHRvQ3NzVGV4dCwgZ2F0aGVyU3R5bGVUZXh0fSBmcm9tICcuL3N0eWxlLXV0aWwuanMnO1xuaW1wb3J0IHtNSVhJTl9NQVRDSCwgVkFSX0FTU0lHTn0gZnJvbSAnLi9jb21tb24tcmVnZXguanMnO1xuaW1wb3J0IHtkZXRlY3RNaXhpbn0gZnJvbSAnLi9jb21tb24tdXRpbHMuanMnO1xuaW1wb3J0IHtTdHlsZU5vZGV9IGZyb20gJy4vY3NzLXBhcnNlLmpzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG5jb25zdCBBUFBMWV9OQU1FX0NMRUFOID0gLztcXHMqL207XG5jb25zdCBJTklUSUFMX0lOSEVSSVQgPSAvXlxccyooaW5pdGlhbCl8KGluaGVyaXQpXFxzKiQvO1xuY29uc3QgSU1QT1JUQU5UID0gL1xccyohaW1wb3J0YW50LztcblxuLy8gc2VwYXJhdG9yIHVzZWQgYmV0d2VlbiBtaXhpbi1uYW1lIGFuZCBtaXhpbi1wcm9wZXJ0eS1uYW1lIHdoZW4gcHJvZHVjaW5nIHByb3BlcnRpZXNcbi8vIE5PVEU6IHBsYWluICctJyBtYXkgY2F1c2UgY29sbGlzaW9ucyBpbiB1c2VyIHN0eWxlc1xuY29uc3QgTUlYSU5fVkFSX1NFUCA9ICdfLV8nO1xuXG4vKipcbiAqIEB0eXBlZGVmIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xubGV0IFByb3BlcnR5RW50cnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBAdHlwZWRlZiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5sZXQgRGVwZW5kYW50c0VudHJ5OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbi8qKiBAdHlwZWRlZiB7e1xuICogICAgcHJvcGVydGllczogUHJvcGVydHlFbnRyeSxcbiAqICAgIGRlcGVuZGFudHM6IERlcGVuZGFudHNFbnRyeVxuICogfX1cbiAqL1xubGV0IE1peGluTWFwRW50cnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLy8gbWFwIG9mIG1peGluIHRvIHByb3BlcnR5IG5hbWVzXG4vLyAtLWZvbzoge2JvcmRlcjogMnB4fSAtPiB7cHJvcGVydGllczogeygtLWZvbywgWydib3JkZXInXSl9LCBkZXBlbmRhbnRzOiB7J2VsZW1lbnQtbmFtZSc6IHByb3RvfX1cbmNsYXNzIE1peGluTWFwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIU1peGluTWFwRW50cnk+fSAqL1xuICAgIHRoaXMuX21hcCA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFQcm9wZXJ0eUVudHJ5fSBwcm9wc1xuICAgKi9cbiAgc2V0KG5hbWUsIHByb3BzKSB7XG4gICAgbmFtZSA9IG5hbWUudHJpbSgpO1xuICAgIHRoaXMuX21hcFtuYW1lXSA9IHtcbiAgICAgIHByb3BlcnRpZXM6IHByb3BzLFxuICAgICAgZGVwZW5kYW50czoge31cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge01peGluTWFwRW50cnl9XG4gICAqL1xuICBnZXQobmFtZSkge1xuICAgIG5hbWUgPSBuYW1lLnRyaW0oKTtcbiAgICByZXR1cm4gdGhpcy5fbWFwW25hbWVdIHx8IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3Igd2hlbiBhbiBlbGVtZW50IGlzIG1hcmtlZCBpbnZhbGlkXG4gKiBAdHlwZSB7P2Z1bmN0aW9uKHN0cmluZyl9XG4gKi9cbmxldCBpbnZhbGlkQ2FsbGJhY2sgPSBudWxsO1xuXG4vKiogQHVucmVzdHJpY3RlZCAqL1xuY2xhc3MgQXBwbHlTaGltIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAvKiogQHR5cGUge0hUTUxNZXRhRWxlbWVudH0gKi9cbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fbWFwID0gbmV3IE1peGluTWFwKCk7XG4gIH1cbiAgLyoqXG4gICAqIHJldHVybiB0cnVlIGlmIGBjc3NUZXh0YCBjb250YWlucyBhIG1peGluIGRlZmluaXRpb24gb3IgY29uc3VtcHRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGRldGVjdE1peGluKGNzc1RleHQpIHtcbiAgICByZXR1cm4gZGV0ZWN0TWl4aW4oY3NzVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogR2F0aGVyIHN0eWxlcyBpbnRvIG9uZSBzdHlsZSBmb3IgZWFzaWVyIHByb2Nlc3NpbmdcbiAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAgICovXG4gIGdhdGhlclN0eWxlcyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IHN0eWxlVGV4dCA9IGdhdGhlclN0eWxlVGV4dCh0ZW1wbGF0ZS5jb250ZW50KTtcbiAgICBpZiAoc3R5bGVUZXh0KSB7XG4gICAgICBjb25zdCBzdHlsZSA9IC8qKiBAdHlwZSB7IUhUTUxTdHlsZUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpO1xuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZVRleHQ7XG4gICAgICB0ZW1wbGF0ZS5jb250ZW50Lmluc2VydEJlZm9yZShzdHlsZSwgdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gICAqL1xuICB0cmFuc2Zvcm1UZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHtcbiAgICBpZiAodGVtcGxhdGUuX2dhdGhlcmVkU3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGVtcGxhdGUuX2dhdGhlcmVkU3R5bGUgPSB0aGlzLmdhdGhlclN0eWxlcyh0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7SFRNTFN0eWxlRWxlbWVudH0gKi9cbiAgICBjb25zdCBzdHlsZSA9IHRlbXBsYXRlLl9nYXRoZXJlZFN0eWxlO1xuICAgIHJldHVybiBzdHlsZSA/IHRoaXMudHJhbnNmb3JtU3R5bGUoc3R5bGUsIGVsZW1lbnROYW1lKSA6IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gICAqL1xuICB0cmFuc2Zvcm1TdHlsZShzdHlsZSwgZWxlbWVudE5hbWUgPSAnJykge1xuICAgIGxldCBhc3QgPSBydWxlc0ZvclN0eWxlKHN0eWxlKTtcbiAgICB0aGlzLnRyYW5zZm9ybVJ1bGVzKGFzdCwgZWxlbWVudE5hbWUpO1xuICAgIHN0eWxlLnRleHRDb250ZW50ID0gdG9Dc3NUZXh0KGFzdCk7XG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAgICogQHJldHVybiB7U3R5bGVOb2RlfVxuICAgKi9cbiAgdHJhbnNmb3JtQ3VzdG9tU3R5bGUoc3R5bGUpIHtcbiAgICBsZXQgYXN0ID0gcnVsZXNGb3JTdHlsZShzdHlsZSk7XG4gICAgZm9yRWFjaFJ1bGUoYXN0LCAocnVsZSkgPT4ge1xuICAgICAgaWYgKHJ1bGVbJ3NlbGVjdG9yJ10gPT09ICc6cm9vdCcpIHtcbiAgICAgICAgcnVsZVsnc2VsZWN0b3InXSA9ICdodG1sJztcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNmb3JtUnVsZShydWxlKTtcbiAgICB9KVxuICAgIHN0eWxlLnRleHRDb250ZW50ID0gdG9Dc3NUZXh0KGFzdCk7XG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtTdHlsZU5vZGV9IHJ1bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKi9cbiAgdHJhbnNmb3JtUnVsZXMocnVsZXMsIGVsZW1lbnROYW1lKSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50TmFtZTtcbiAgICBmb3JFYWNoUnVsZShydWxlcywgKHIpID0+IHtcbiAgICAgIHRoaXMudHJhbnNmb3JtUnVsZShyKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVN0eWxlTm9kZX0gcnVsZVxuICAgKi9cbiAgdHJhbnNmb3JtUnVsZShydWxlKSB7XG4gICAgcnVsZVsnY3NzVGV4dCddID0gdGhpcy50cmFuc2Zvcm1Dc3NUZXh0KHJ1bGVbJ3BhcnNlZENzc1RleHQnXSwgcnVsZSk7XG4gICAgLy8gOnJvb3Qgd2FzIG9ubHkgdXNlZCBmb3IgdmFyaWFibGUgYXNzaWdubWVudCBpbiBwcm9wZXJ0eSBzaGltLFxuICAgIC8vIGJ1dCBnZW5lcmF0ZXMgaW52YWxpZCBzZWxlY3RvcnMgd2l0aCByZWFsIHByb3BlcnRpZXMuXG4gICAgLy8gcmVwbGFjZSB3aXRoIGA6aG9zdCA+ICpgLCB3aGljaCBzZXJ2ZXMgdGhlIHNhbWUgZWZmZWN0XG4gICAgaWYgKHJ1bGVbJ3NlbGVjdG9yJ10gPT09ICc6cm9vdCcpIHtcbiAgICAgIHJ1bGVbJ3NlbGVjdG9yJ10gPSAnOmhvc3QgPiAqJztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gICAqIEBwYXJhbSB7IVN0eWxlTm9kZX0gcnVsZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0cmFuc2Zvcm1Dc3NUZXh0KGNzc1RleHQsIHJ1bGUpIHtcbiAgICAvLyBwcm9kdWNlIHZhcmlhYmxlc1xuICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UoVkFSX0FTU0lHTiwgKG1hdGNoVGV4dCwgcHJvcGVydHlOYW1lLCB2YWx1ZVByb3BlcnR5LCB2YWx1ZU1peGluKSA9PlxuICAgICAgdGhpcy5fcHJvZHVjZUNzc1Byb3BlcnRpZXMobWF0Y2hUZXh0LCBwcm9wZXJ0eU5hbWUsIHZhbHVlUHJvcGVydHksIHZhbHVlTWl4aW4sIHJ1bGUpKTtcbiAgICAvLyBjb25zdW1lIG1peGluc1xuICAgIHJldHVybiB0aGlzLl9jb25zdW1lQ3NzUHJvcGVydGllcyhjc3NUZXh0LCBydWxlKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9nZXRJbml0aWFsVmFsdWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgIGlmICghdGhpcy5fbWVhc3VyZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX21lYXN1cmVFbGVtZW50ID0gLyoqIEB0eXBlIHtIVE1MTWV0YUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKSk7XG4gICAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FwcGx5LXNoaW0tbWVhc3VyZScsICcnKTtcbiAgICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmFsbCA9ICdpbml0aWFsJztcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5fbWVhc3VyZUVsZW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fbWVhc3VyZUVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICB9XG4gIC8qKlxuICAgKiBXYWxrIG92ZXIgYWxsIHJ1bGVzIGJlZm9yZSB0aGlzIHJ1bGUgdG8gZmluZCBmYWxsYmFja3MgZm9yIG1peGluc1xuICAgKlxuICAgKiBAcGFyYW0geyFTdHlsZU5vZGV9IHN0YXJ0UnVsZVxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAgX2ZhbGxiYWNrc0Zyb21QcmV2aW91c1J1bGVzKHN0YXJ0UnVsZSkge1xuICAgIC8vIGZpbmQgdGhlIFwidG9wXCIgcnVsZVxuICAgIGxldCB0b3BSdWxlID0gc3RhcnRSdWxlO1xuICAgIHdoaWxlICh0b3BSdWxlWydwYXJlbnQnXSkge1xuICAgICAgdG9wUnVsZSA9IHRvcFJ1bGVbJ3BhcmVudCddO1xuICAgIH1cbiAgICBjb25zdCBmYWxsYmFja3MgPSB7fTtcbiAgICBsZXQgc2VlblN0YXJ0UnVsZSA9IGZhbHNlO1xuICAgIGZvckVhY2hSdWxlKHRvcFJ1bGUsIChyKSA9PiB7XG4gICAgICAvLyBzdG9wIHdoZW4gd2UgaGl0IHRoZSBpbnB1dCBydWxlXG4gICAgICBzZWVuU3RhcnRSdWxlID0gc2VlblN0YXJ0UnVsZSB8fCByID09PSBzdGFydFJ1bGU7XG4gICAgICBpZiAoc2VlblN0YXJ0UnVsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBOT1RFOiBPbmx5IG1hdGNoaW5nIHNlbGVjdG9ycyBhcmUgXCJzYWZlXCIgZm9yIHRoaXMgZmFsbGJhY2sgcHJvY2Vzc2luZ1xuICAgICAgLy8gSXQgd291bGQgYmUgcHJvaGliaXRpdmUgdG8gcnVuIGBtYXRjaGVzU2VsZWN0b3IoKWAgb24gZWFjaCBzZWxlY3RvcixcbiAgICAgIC8vIHNvIHdlIGNoZWF0IGFuZCBvbmx5IGNoZWNrIGlmIHRoZSBzYW1lIHNlbGVjdG9yIHN0cmluZyBpcyB1c2VkLCB3aGljaFxuICAgICAgLy8gZ3VhcmFudGVlcyB0aGluZ3MgbGlrZSBzcGVjaWZpY2l0eSBtYXRjaGluZ1xuICAgICAgaWYgKHJbJ3NlbGVjdG9yJ10gPT09IHN0YXJ0UnVsZVsnc2VsZWN0b3InXSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGZhbGxiYWNrcywgdGhpcy5fY3NzVGV4dFRvTWFwKHJbJ3BhcnNlZENzc1RleHQnXSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmYWxsYmFja3M7XG4gIH1cbiAgLyoqXG4gICAqIHJlcGxhY2UgbWl4aW4gY29uc3VtcHRpb24gd2l0aCB2YXJpYWJsZSBjb25zdW1wdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0geyFTdHlsZU5vZGU9fSBydWxlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9jb25zdW1lQ3NzUHJvcGVydGllcyh0ZXh0LCBydWxlKSB7XG4gICAgLyoqIEB0eXBlIHtBcnJheX0gKi9cbiAgICBsZXQgbSA9IG51bGw7XG4gICAgLy8gbG9vcCBvdmVyIHRleHQgdW50aWwgYWxsIG1peGlucyB3aXRoIGRlZmludGlvbnMgaGF2ZSBiZWVuIGFwcGxpZWRcbiAgICB3aGlsZSgobSA9IE1JWElOX01BVENILmV4ZWModGV4dCkpKSB7XG4gICAgICBsZXQgbWF0Y2hUZXh0ID0gbVswXTtcbiAgICAgIGxldCBtaXhpbk5hbWUgPSBtWzFdO1xuICAgICAgbGV0IGlkeCA9IG0uaW5kZXg7XG4gICAgICAvLyBjb2xsZWN0IHByb3BlcnRpZXMgYmVmb3JlIGFwcGx5IHRvIGJlIFwiZGVmYXVsdHNcIiBpZiBtaXhpbiBtaWdodCBvdmVycmlkZSB0aGVtXG4gICAgICAvLyBtYXRjaCBpbmNsdWRlcyBhIFwicHJlZml4XCIsIHNvIGZpbmQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIG9mIEBhcHBseVxuICAgICAgbGV0IGFwcGx5UG9zID0gaWR4ICsgbWF0Y2hUZXh0LmluZGV4T2YoJ0BhcHBseScpO1xuICAgICAgbGV0IGFmdGVyQXBwbHlQb3MgPSBpZHggKyBtYXRjaFRleHQubGVuZ3RoO1xuICAgICAgLy8gZmluZCBwcm9wcyBkZWZpbmVkIGJlZm9yZSB0aGlzIEBhcHBseVxuICAgICAgbGV0IHRleHRCZWZvcmVBcHBseSA9IHRleHQuc2xpY2UoMCwgYXBwbHlQb3MpO1xuICAgICAgbGV0IHRleHRBZnRlckFwcGx5ID0gdGV4dC5zbGljZShhZnRlckFwcGx5UG9zKTtcbiAgICAgIGxldCBkZWZhdWx0cyA9IHJ1bGUgPyB0aGlzLl9mYWxsYmFja3NGcm9tUHJldmlvdXNSdWxlcyhydWxlKSA6IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5fY3NzVGV4dFRvTWFwKHRleHRCZWZvcmVBcHBseSkpO1xuICAgICAgbGV0IHJlcGxhY2VtZW50ID0gdGhpcy5fYXRBcHBseVRvQ3NzUHJvcGVydGllcyhtaXhpbk5hbWUsIGRlZmF1bHRzKTtcbiAgICAgIC8vIHVzZSByZWdleCBtYXRjaCBwb3NpdGlvbiB0byByZXBsYWNlIG1peGluLCBrZWVwIGxpbmVhciBwcm9jZXNzaW5nIHRpbWVcbiAgICAgIHRleHQgPSBgJHt0ZXh0QmVmb3JlQXBwbHl9JHtyZXBsYWNlbWVudH0ke3RleHRBZnRlckFwcGx5fWA7XG4gICAgICAvLyBtb3ZlIHJlZ2V4IHNlYXJjaCB0byBfYWZ0ZXJfIHJlcGxhY2VtZW50XG4gICAgICBNSVhJTl9NQVRDSC5sYXN0SW5kZXggPSBpZHggKyByZXBsYWNlbWVudC5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIC8qKlxuICAgKiBwcm9kdWNlIHZhcmlhYmxlIGNvbnN1bXB0aW9uIGF0IHRoZSBzaXRlIG9mIG1peGluIGNvbnN1bXB0aW9uXG4gICAqIGBAYXBwbHlgIC0tZm9vOyAtPiBmb3IgYWxsIHByb3BzICgke3Byb3BuYW1lfTogdmFyKC0tZm9vXy1fJHtwcm9wbmFtZX0sICR7ZmFsbGJhY2tbcHJvcG5hbWVdfX0pKVxuICAgKiBFeGFtcGxlOlxuICAgKiAgYm9yZGVyOiB2YXIoLS1mb29fLV9ib3JkZXIpOyBwYWRkaW5nOiB2YXIoLS1mb29fLV9wYWRkaW5nLCAycHgpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtaXhpbk5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IGZhbGxiYWNrc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBfYXRBcHBseVRvQ3NzUHJvcGVydGllcyhtaXhpbk5hbWUsIGZhbGxiYWNrcykge1xuICAgIG1peGluTmFtZSA9IG1peGluTmFtZS5yZXBsYWNlKEFQUExZX05BTUVfQ0xFQU4sICcnKTtcbiAgICBsZXQgdmFycyA9IFtdO1xuICAgIGxldCBtaXhpbkVudHJ5ID0gdGhpcy5fbWFwLmdldChtaXhpbk5hbWUpO1xuICAgIC8vIGlmIHdlIGRlcGVuZCBvbiBhIG1peGluIGJlZm9yZSBpdCBpcyBjcmVhdGVkXG4gICAgLy8gbWFrZSBhIHNlbnRpbmVsIGVudHJ5IGluIHRoZSBtYXAgdG8gYWRkIHRoaXMgZWxlbWVudCBhcyBhIGRlcGVuZGVuY3kgZm9yIHdoZW4gaXQgaXMgZGVmaW5lZC5cbiAgICBpZiAoIW1peGluRW50cnkpIHtcbiAgICAgIHRoaXMuX21hcC5zZXQobWl4aW5OYW1lLCB7fSk7XG4gICAgICBtaXhpbkVudHJ5ID0gdGhpcy5fbWFwLmdldChtaXhpbk5hbWUpO1xuICAgIH1cbiAgICBpZiAobWl4aW5FbnRyeSkge1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIG1peGluRW50cnkuZGVwZW5kYW50c1t0aGlzLl9jdXJyZW50RWxlbWVudF0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgbGV0IHAsIHBhcnRzLCBmO1xuICAgICAgY29uc3QgcHJvcGVydGllcyA9IG1peGluRW50cnkucHJvcGVydGllcztcbiAgICAgIGZvciAocCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGYgPSBmYWxsYmFja3MgJiYgZmFsbGJhY2tzW3BdO1xuICAgICAgICBwYXJ0cyA9IFtwLCAnOiB2YXIoJywgbWl4aW5OYW1lLCBNSVhJTl9WQVJfU0VQLCBwXTtcbiAgICAgICAgaWYgKGYpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKCcsJywgZi5yZXBsYWNlKElNUE9SVEFOVCwgJycpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKCcpJyk7XG4gICAgICAgIGlmIChJTVBPUlRBTlQudGVzdChwcm9wZXJ0aWVzW3BdKSkge1xuICAgICAgICAgIHBhcnRzLnB1c2goJyAhaW1wb3J0YW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFycy5wdXNoKHBhcnRzLmpvaW4oJycpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhcnMuam9pbignOyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9yZXBsYWNlSW5pdGlhbE9ySW5oZXJpdChwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBsZXQgbWF0Y2ggPSBJTklUSUFMX0lOSEVSSVQuZXhlYyh2YWx1ZSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgLy8gaW5pdGlhbFxuICAgICAgICAvLyByZXBsYWNlIGBpbml0aWFsYCB3aXRoIHRoZSBjb25jcmV0ZSBpbml0aWFsIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5XG4gICAgICAgIHZhbHVlID0gdGhpcy5fZ2V0SW5pdGlhbFZhbHVlRm9yUHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW5oZXJpdFxuICAgICAgICAvLyB3aXRoIHRoaXMgcHVycG9zZnVsbHkgaWxsZWdhbCB2YWx1ZSwgdGhlIHZhcmlhYmxlIHdpbGwgYmUgaW52YWxpZCBhdFxuICAgICAgICAvLyBjb21wdXRlIHRpbWUgKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jc3MtdmFyaWFibGVzLyNpbnZhbGlkLWF0LWNvbXB1dGVkLXZhbHVlLXRpbWUpXG4gICAgICAgIC8vIGFuZCBmb3IgaW5oZXJpdGluZyB2YWx1ZXMsIHdpbGwgYmVoYXZlIHNpbWlsYXJseVxuICAgICAgICAvLyB3ZSBjYW5ub3Qgc3VwcG9ydCB0aGUgc2FtZSBiZWhhdmlvciBmb3Igbm9uIGluaGVyaXRpbmcgdmFsdWVzIGxpa2UgJ2JvcmRlcidcbiAgICAgICAgdmFsdWUgPSAnYXBwbHktc2hpbS1pbmhlcml0JztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFwicGFyc2VcIiBhIG1peGluIGRlZmluaXRpb24gaW50byBhIG1hcCBvZiBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXNcbiAgICogY3NzVGV4dFRvTWFwKCdib3JkZXI6IDJweCBzb2xpZCBibGFjaycpIC0+ICgnYm9yZGVyJywgJzJweCBzb2xpZCBibGFjaycpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlcGxhY2VJbml0aWFsT3JJbmhlcml0XG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICAgKi9cbiAgX2Nzc1RleHRUb01hcCh0ZXh0LCByZXBsYWNlSW5pdGlhbE9ySW5oZXJpdCA9IGZhbHNlKSB7XG4gICAgbGV0IHByb3BzID0gdGV4dC5zcGxpdCgnOycpO1xuICAgIGxldCBwcm9wZXJ0eSwgdmFsdWU7XG4gICAgbGV0IG91dCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwLCBwLCBzcDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwID0gcHJvcHNbaV07XG4gICAgICBpZiAocCkge1xuICAgICAgICBzcCA9IHAuc3BsaXQoJzonKTtcbiAgICAgICAgLy8gaWdub3JlIGxpbmVzIHRoYXQgYXJlbid0IGRlZmluaXRpb25zIGxpa2UgQG1lZGlhXG4gICAgICAgIGlmIChzcC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcHJvcGVydHkgPSBzcFswXS50cmltKCk7XG4gICAgICAgICAgLy8gc29tZSBwcm9wZXJ0aWVzIG1heSBoYXZlICc6JyBpbiB0aGUgdmFsdWUsIGxpa2UgZGF0YSB1cmxzXG4gICAgICAgICAgdmFsdWUgPSBzcC5zbGljZSgxKS5qb2luKCc6Jyk7XG4gICAgICAgICAgaWYgKHJlcGxhY2VJbml0aWFsT3JJbmhlcml0KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3JlcGxhY2VJbml0aWFsT3JJbmhlcml0KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG91dFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TWl4aW5NYXBFbnRyeX0gbWl4aW5FbnRyeVxuICAgKi9cbiAgX2ludmFsaWRhdGVNaXhpbkVudHJ5KG1peGluRW50cnkpIHtcbiAgICBpZiAoIWludmFsaWRDYWxsYmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBlbGVtZW50TmFtZSBpbiBtaXhpbkVudHJ5LmRlcGVuZGFudHMpIHtcbiAgICAgIGlmIChlbGVtZW50TmFtZSAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgaW52YWxpZENhbGxiYWNrKGVsZW1lbnROYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoVGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlOYW1lXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWVQcm9wZXJ0eVxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlTWl4aW5cbiAgICogQHBhcmFtIHshU3R5bGVOb2RlfSBydWxlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9wcm9kdWNlQ3NzUHJvcGVydGllcyhtYXRjaFRleHQsIHByb3BlcnR5TmFtZSwgdmFsdWVQcm9wZXJ0eSwgdmFsdWVNaXhpbiwgcnVsZSkge1xuICAgIC8vIGhhbmRsZSBjYXNlIHdoZXJlIHByb3BlcnR5IHZhbHVlIGlzIGEgbWl4aW5cbiAgICBpZiAodmFsdWVQcm9wZXJ0eSkge1xuICAgICAgLy8gZm9ybTogLS1taXhpbjI6IHZhcigtLW1peGluMSksIHdoZXJlIC0tbWl4aW4xIGlzIGluIHRoZSBtYXBcbiAgICAgIHByb2Nlc3NWYXJpYWJsZUFuZEZhbGxiYWNrKHZhbHVlUHJvcGVydHksIChwcmVmaXgsIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0aGlzLl9tYXAuZ2V0KHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlTWl4aW4gPSBgQGFwcGx5ICR7dmFsdWV9O2BcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghdmFsdWVNaXhpbikge1xuICAgICAgcmV0dXJuIG1hdGNoVGV4dDtcbiAgICB9XG4gICAgbGV0IG1peGluQXNQcm9wZXJ0aWVzID0gdGhpcy5fY29uc3VtZUNzc1Byb3BlcnRpZXMoJycgKyB2YWx1ZU1peGluLCBydWxlKTtcbiAgICBsZXQgcHJlZml4ID0gbWF0Y2hUZXh0LnNsaWNlKDAsIG1hdGNoVGV4dC5pbmRleE9mKCctLScpKTtcbiAgICAvLyBgaW5pdGlhbGAgYW5kIGBpbmhlcml0YCBhcyBwcm9wZXJ0aWVzIGluIGEgbWFwIHNob3VsZCBiZSByZXBsYWNlZCBiZWNhdXNlXG4gICAgLy8gdGhlc2Uga2V5d29yZHMgYXJlIGVhZ2VybHkgZXZhbHVhdGVkIHdoZW4gdGhlIG1peGluIGJlY29tZXMgQ1NTIEN1c3RvbSBQcm9wZXJ0aWVzLFxuICAgIC8vIGFuZCB3b3VsZCBzZXQgdGhlIHZhcmlhYmxlIHZhbHVlLCByYXRoZXIgdGhhbiBjYXJyeSB0aGUga2V5d29yZCB0byB0aGUgYHZhcigpYCB1c2FnZS5cbiAgICBsZXQgbWl4aW5WYWx1ZXMgPSB0aGlzLl9jc3NUZXh0VG9NYXAobWl4aW5Bc1Byb3BlcnRpZXMsIHRydWUpO1xuICAgIGxldCBjb21iaW5lZFByb3BzID0gbWl4aW5WYWx1ZXM7XG4gICAgbGV0IG1peGluRW50cnkgPSB0aGlzLl9tYXAuZ2V0KHByb3BlcnR5TmFtZSk7XG4gICAgbGV0IG9sZFByb3BzID0gbWl4aW5FbnRyeSAmJiBtaXhpbkVudHJ5LnByb3BlcnRpZXM7XG4gICAgaWYgKG9sZFByb3BzKSB7XG4gICAgICAvLyBOT1RFOiBzaW5jZSB3ZSB1c2UgbWl4aW4sIHRoZSBtYXAgb2YgcHJvcGVydGllcyBpcyB1cGRhdGVkIGhlcmVcbiAgICAgIC8vIGFuZCB0aGlzIGlzIHdoYXQgd2Ugd2FudC5cbiAgICAgIGNvbWJpbmVkUHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUob2xkUHJvcHMpLCBtaXhpblZhbHVlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21hcC5zZXQocHJvcGVydHlOYW1lLCBjb21iaW5lZFByb3BzKTtcbiAgICB9XG4gICAgbGV0IG91dCA9IFtdO1xuICAgIGxldCBwLCB2O1xuICAgIC8vIHNldCB2YXJpYWJsZXMgZGVmaW5lZCBieSBjdXJyZW50IG1peGluXG4gICAgbGV0IG5lZWRUb0ludmFsaWRhdGUgPSBmYWxzZTtcbiAgICBmb3IgKHAgaW4gY29tYmluZWRQcm9wcykge1xuICAgICAgdiA9IG1peGluVmFsdWVzW3BdO1xuICAgICAgLy8gaWYgcHJvcGVydHkgbm90IGRlZmluZWQgYnkgY3VycmVudCBtaXhpbiwgc2V0IGluaXRpYWxcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdiA9ICdpbml0aWFsJztcbiAgICAgIH1cbiAgICAgIGlmIChvbGRQcm9wcyAmJiAhKHAgaW4gb2xkUHJvcHMpKSB7XG4gICAgICAgIG5lZWRUb0ludmFsaWRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgb3V0LnB1c2goYCR7cHJvcGVydHlOYW1lfSR7TUlYSU5fVkFSX1NFUH0ke3B9OiAke3Z9YCk7XG4gICAgfVxuICAgIGlmIChuZWVkVG9JbnZhbGlkYXRlKSB7XG4gICAgICB0aGlzLl9pbnZhbGlkYXRlTWl4aW5FbnRyeShtaXhpbkVudHJ5KTtcbiAgICB9XG4gICAgaWYgKG1peGluRW50cnkpIHtcbiAgICAgIG1peGluRW50cnkucHJvcGVydGllcyA9IGNvbWJpbmVkUHJvcHM7XG4gICAgfVxuICAgIC8vIGJlY2F1c2UgdGhlIG1peGluTWFwIGlzIGdsb2JhbCwgdGhlIG1peGluIG1pZ2h0IGNvbmZsaWN0IHdpdGhcbiAgICAvLyBhIGRpZmZlcmVudCBzY29wZSdzIHNpbXBsZSB2YXJpYWJsZSBkZWZpbml0aW9uOlxuICAgIC8vIEV4YW1wbGU6XG4gICAgLy8gc29tZSBzdHlsZSBzb21ld2hlcmU6XG4gICAgLy8gLS1taXhpbjE6eyAuLi4gfVxuICAgIC8vIC0tbWl4aW4yOiB2YXIoLS1taXhpbjEpO1xuICAgIC8vIHNvbWUgb3RoZXIgZWxlbWVudDpcbiAgICAvLyAtLW1peGluMTogMTBweCBzb2xpZCByZWQ7XG4gICAgLy8gLS1mb286IHZhcigtLW1peGluMSk7XG4gICAgLy8gSW4gdGhpcyBjYXNlLCB3ZSBsZWF2ZSB0aGUgb3JpZ2luYWwgdmFyaWFibGUgZGVmaW5pdGlvbiBpbiBwbGFjZS5cbiAgICBpZiAodmFsdWVQcm9wZXJ0eSkge1xuICAgICAgcHJlZml4ID0gYCR7bWF0Y2hUZXh0fTske3ByZWZpeH1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cHJlZml4fSR7b3V0LmpvaW4oJzsgJyl9O2A7XG4gIH1cbn1cblxuLyogZXhwb3J0cyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1hc3NpZ24gKi9cbkFwcGx5U2hpbS5wcm90b3R5cGVbJ2RldGVjdE1peGluJ10gPSBBcHBseVNoaW0ucHJvdG90eXBlLmRldGVjdE1peGluO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtU3R5bGUnXSA9IEFwcGx5U2hpbS5wcm90b3R5cGUudHJhbnNmb3JtU3R5bGU7XG5BcHBseVNoaW0ucHJvdG90eXBlWyd0cmFuc2Zvcm1DdXN0b21TdHlsZSddID0gQXBwbHlTaGltLnByb3RvdHlwZS50cmFuc2Zvcm1DdXN0b21TdHlsZTtcbkFwcGx5U2hpbS5wcm90b3R5cGVbJ3RyYW5zZm9ybVJ1bGVzJ10gPSBBcHBseVNoaW0ucHJvdG90eXBlLnRyYW5zZm9ybVJ1bGVzO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtUnVsZSddID0gQXBwbHlTaGltLnByb3RvdHlwZS50cmFuc2Zvcm1SdWxlO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtVGVtcGxhdGUnXSA9IEFwcGx5U2hpbS5wcm90b3R5cGUudHJhbnNmb3JtVGVtcGxhdGU7XG5BcHBseVNoaW0ucHJvdG90eXBlWydfc2VwYXJhdG9yJ10gPSBNSVhJTl9WQVJfU0VQO1xuLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWFzc2lnbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFwcGx5U2hpbS5wcm90b3R5cGUsICdpbnZhbGlkQ2FsbGJhY2snLCB7XG4gIC8qKiBAcmV0dXJuIHs/ZnVuY3Rpb24oc3RyaW5nKX0gKi9cbiAgZ2V0KCkge1xuICAgIHJldHVybiBpbnZhbGlkQ2FsbGJhY2s7XG4gIH0sXG4gIC8qKiBAcGFyYW0gez9mdW5jdGlvbihzdHJpbmcpfSBjYiAqL1xuICBzZXQoY2IpIHtcbiAgICBpbnZhbGlkQ2FsbGJhY2sgPSBjYjtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFwcGx5U2hpbTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhSFRNTFRlbXBsYXRlRWxlbWVudD59XG4gKi9cbmNvbnN0IHRlbXBsYXRlTWFwID0ge307XG5leHBvcnQgZGVmYXVsdCB0ZW1wbGF0ZU1hcDtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCB0ZW1wbGF0ZU1hcCBmcm9tICcuL3RlbXBsYXRlLW1hcC5qcyc7XG5pbXBvcnQge1N0eWxlTm9kZX0gZnJvbSAnLi9jc3MtcGFyc2UuanMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbi8qXG4gKiBVdGlsaXRpZXMgZm9yIGhhbmRsaW5nIGludmFsaWRhdGluZyBhcHBseS1zaGltIG1peGlucyBmb3IgYSBnaXZlbiB0ZW1wbGF0ZS5cbiAqXG4gKiBUaGUgaW52YWxpZGF0aW9uIHN0cmF0ZWd5IGludm9sdmVzIGtlZXBpbmcgdHJhY2sgb2YgdGhlIFwiY3VycmVudFwiIHZlcnNpb24gb2YgYSB0ZW1wbGF0ZSdzIG1peGlucywgYW5kIHVwZGF0aW5nIHRoYXQgY291bnQgd2hlbiBhIG1peGluIGlzIGludmFsaWRhdGVkLlxuICogVGhlIHRlbXBsYXRlXG4gKi9cblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQ1VSUkVOVF9WRVJTSU9OID0gJ19hcHBseVNoaW1DdXJyZW50VmVyc2lvbic7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IE5FWFRfVkVSU0lPTiA9ICdfYXBwbHlTaGltTmV4dFZlcnNpb24nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBWQUxJREFUSU5HX1ZFUlNJT04gPSAnX2FwcGx5U2hpbVZhbGlkYXRpbmdWZXJzaW9uJztcblxuLyoqXG4gKiBAY29uc3Qge1Byb21pc2U8dm9pZD59XG4gKi9cbmNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGUoZWxlbWVudE5hbWUpe1xuICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIGludmFsaWRhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgdG8gbWFyayBhIHRlbXBsYXRlIGludmFsaWRcbiAqIGFuZCBzaWduYWwgdGhhdCB0aGUgc3R5bGUgaW5zaWRlIG11c3QgYmUgcmVnZW5lcmF0ZWQuXG4gKlxuICogVXNlIGBzdGFydFZhbGlkYXRpbmdUZW1wbGF0ZWAgdG8gYmVnaW4gYW4gYXN5bmNocm9ub3VzIHZhbGlkYXRpb24gY3ljbGUuXG4gKiBEdXJpbmcgdGhhdCBjeWNsZSwgY2FsbCBgdGVtcGxhdGVJc1ZhbGlkYXRpbmdgIHRvIHNlZSBpZiB0aGUgdGVtcGxhdGUgbXVzdFxuICogYmUgcmV2YWxpZGF0ZWRcbiAqIEBwYXJhbSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAvLyBkZWZhdWx0IHRoZSBjdXJyZW50IHZlcnNpb24gdG8gMFxuICB0ZW1wbGF0ZVtDVVJSRU5UX1ZFUlNJT05dID0gdGVtcGxhdGVbQ1VSUkVOVF9WRVJTSU9OXSB8fCAwO1xuICAvLyBlbnN1cmUgdGhlIFwidmFsaWRhdGluZyBmb3JcIiBmbGFnIGV4aXN0c1xuICB0ZW1wbGF0ZVtWQUxJREFUSU5HX1ZFUlNJT05dID0gdGVtcGxhdGVbVkFMSURBVElOR19WRVJTSU9OXSB8fCAwO1xuICAvLyBpbmNyZW1lbnQgdGhlIG5leHQgdmVyc2lvblxuICB0ZW1wbGF0ZVtORVhUX1ZFUlNJT05dID0gKHRlbXBsYXRlW05FWFRfVkVSU0lPTl0gfHwgMCkgKyAxO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWQoZWxlbWVudE5hbWUpIHtcbiAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVNYXBbZWxlbWVudE5hbWVdO1xuICBpZiAodGVtcGxhdGUpIHtcbiAgICByZXR1cm4gdGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKSB7XG4gIHJldHVybiB0ZW1wbGF0ZVtDVVJSRU5UX1ZFUlNJT05dID09PSB0ZW1wbGF0ZVtORVhUX1ZFUlNJT05dO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRhdGluZyhlbGVtZW50TmFtZSkge1xuICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZUlzVmFsaWRhdGluZyh0ZW1wbGF0ZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdGVtcGxhdGUgaXMgY3VycmVudGx5IGludmFsaWQgYW5kIGBzdGFydFZhbGlkYXRpbmdgIGhhcyBiZWVuIGNhbGxlZCBzaW5jZSB0aGUgbGFzdCBpbnZhbGlkYXRpb24uXG4gKiBJZiBmYWxzZSwgdGhlIHRlbXBsYXRlIG11c3QgYmUgdmFsaWRhdGVkLlxuICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlSXNWYWxpZGF0aW5nKHRlbXBsYXRlKSB7XG4gIHJldHVybiAhdGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKSAmJiB0ZW1wbGF0ZVtWQUxJREFUSU5HX1ZFUlNJT05dID09PSB0ZW1wbGF0ZVtORVhUX1ZFUlNJT05dO1xufVxuXG4vKipcbiAqIHRoZSB0ZW1wbGF0ZSBpcyBtYXJrZWQgYXMgYHZhbGlkYXRpbmdgIGZvciBvbmUgbWljcm90YXNrIHNvIHRoYXQgYWxsIGluc3RhbmNlc1xuICogZm91bmQgaW4gdGhlIHRyZWUgY3Jhd2wgb2YgYGFwcGx5U3R5bGVgIHdpbGwgdXBkYXRlIHRoZW1zZWx2ZXMsXG4gKiBidXQgdGhlIHRlbXBsYXRlIHdpbGwgb25seSBiZSB1cGRhdGVkIG9uY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRWYWxpZGF0aW5nKGVsZW1lbnROYW1lKSB7XG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXTtcbiAgc3RhcnRWYWxpZGF0aW5nVGVtcGxhdGUodGVtcGxhdGUpO1xufVxuXG4vKipcbiAqIEJlZ2luIGFuIGFzeW5jaHJvbm91cyBpbnZhbGlkYXRpb24gY3ljbGUuXG4gKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgZXZlcnkgdmFsaWRhdGlvbiBvZiBhIHRlbXBsYXRlXG4gKlxuICogQWZ0ZXIgb25lIG1pY3JvdGFzaywgdGhlIHRlbXBsYXRlIHdpbGwgYmUgbWFya2VkIGFzIHZhbGlkIHVudGlsIHRoZSBuZXh0IGNhbGwgdG8gYGludmFsaWRhdGVUZW1wbGF0ZWBcbiAqIEBwYXJhbSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0VmFsaWRhdGluZ1RlbXBsYXRlKHRlbXBsYXRlKSB7XG4gIC8vIHJlbWVtYmVyIHRoYXQgdGhlIGN1cnJlbnQgXCJuZXh0IHZlcnNpb25cIiBpcyB0aGUgcmVhc29uIGZvciB0aGlzIHZhbGlkYXRpb24gY3ljbGVcbiAgdGVtcGxhdGVbVkFMSURBVElOR19WRVJTSU9OXSA9IHRlbXBsYXRlW05FWFRfVkVSU0lPTl07XG4gIC8vIGhvd2V2ZXIsIHRoZXJlIG9ubHkgbmVlZHMgdG8gYmUgb25lIGFzeW5jIHRhc2sgdG8gY2xlYXIgdGhlIGNvdW50ZXJzXG4gIGlmICghdGVtcGxhdGUuX3ZhbGlkYXRpbmcpIHtcbiAgICB0ZW1wbGF0ZS5fdmFsaWRhdGluZyA9IHRydWU7XG4gICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gc3luYyB0aGUgY3VycmVudCB2ZXJzaW9uIHRvIGxldCBmdXR1cmUgaW52YWxpZGF0aW9ucyBjYXVzZSBhIHJlZnJlc2ggY3ljbGVcbiAgICAgIHRlbXBsYXRlW0NVUlJFTlRfVkVSU0lPTl0gPSB0ZW1wbGF0ZVtORVhUX1ZFUlNJT05dO1xuICAgICAgdGVtcGxhdGUuX3ZhbGlkYXRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50c0FyZUludmFsaWQoKSB7XG4gIGZvciAobGV0IGVsZW1lbnROYW1lIGluIHRlbXBsYXRlTWFwKSB7XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVNYXBbZWxlbWVudE5hbWVdO1xuICAgIGlmICghdGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEFwcGx5U2hpbSBmcm9tICcuLi9zcmMvYXBwbHktc2hpbS5qcyc7XG5pbXBvcnQgdGVtcGxhdGVNYXAgZnJvbSAnLi4vc3JjL3RlbXBsYXRlLW1hcC5qcyc7XG5pbXBvcnQge2dldElzRXh0ZW5kcywgdG9Dc3NUZXh0LCBlbGVtZW50SGFzQnVpbHRDc3N9IGZyb20gJy4uL3NyYy9zdHlsZS11dGlsLmpzJztcbmltcG9ydCAqIGFzIEFwcGx5U2hpbVV0aWxzIGZyb20gJy4uL3NyYy9hcHBseS1zaGltLXV0aWxzLmpzJztcbmltcG9ydCB7Z2V0Q29tcHV0ZWRTdHlsZVZhbHVlLCB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi9zcmMvY29tbW9uLXV0aWxzLmpzJztcbmltcG9ydCB7Q3VzdG9tU3R5bGVJbnRlcmZhY2VJbnRlcmZhY2V9IGZyb20gJy4uL3NyYy9jdXN0b20tc3R5bGUtaW50ZXJmYWNlLmpzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHtuYXRpdmVDc3NWYXJpYWJsZXMsIG5hdGl2ZVNoYWRvdywgY3NzQnVpbGQsIGRpc2FibGVSdW50aW1lfSBmcm9tICcuLi9zcmMvc3R5bGUtc2V0dGluZ3MuanMnO1xuXG4vKiogQGNvbnN0IHtBcHBseVNoaW19ICovXG5jb25zdCBhcHBseVNoaW0gPSBuZXcgQXBwbHlTaGltKCk7XG5cbmNsYXNzIEFwcGx5U2hpbUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7P0N1c3RvbVN0eWxlSW50ZXJmYWNlSW50ZXJmYWNlfSAqL1xuICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UgPSBudWxsO1xuICAgIGFwcGx5U2hpbVsnaW52YWxpZENhbGxiYWNrJ10gPSBBcHBseVNoaW1VdGlscy5pbnZhbGlkYXRlO1xuICB9XG4gIGVuc3VyZSgpIHtcbiAgICBpZiAodGhpcy5jdXN0b21TdHlsZUludGVyZmFjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlKSB7XG4gICAgICB0aGlzLmN1c3RvbVN0eWxlSW50ZXJmYWNlID1cbiAgICAgICAgICAvKiogQHR5cGUgeyFDdXN0b21TdHlsZUludGVyZmFjZUludGVyZmFjZX0gKi8gKFxuICAgICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MuQ3VzdG9tU3R5bGVJbnRlcmZhY2UpO1xuICAgICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsndHJhbnNmb3JtQ2FsbGJhY2snXSA9IChzdHlsZSkgPT4ge1xuICAgICAgICBhcHBseVNoaW0udHJhbnNmb3JtQ3VzdG9tU3R5bGUoc3R5bGUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3ZhbGlkYXRlQ2FsbGJhY2snXSA9ICgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICovXG4gIHByZXBhcmVUZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmIChlbGVtZW50SGFzQnVpbHRDc3ModGVtcGxhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXSA9IHRlbXBsYXRlO1xuICAgIGxldCBhc3QgPSBhcHBseVNoaW0udHJhbnNmb3JtVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lKTtcbiAgICAvLyBzYXZlIG9yaWdpbmFsIHN0eWxlIGFzdCB0byB1c2UgZm9yIHJldmFsaWRhdGluZyBpbnN0YW5jZXNcbiAgICB0ZW1wbGF0ZVsnX3N0eWxlQXN0J10gPSBhc3Q7XG4gIH1cbiAgZmx1c2hDdXN0b21TdHlsZXMoKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICBpZiAoIXRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHN0eWxlcyA9IHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3Byb2Nlc3NTdHlsZXMnXSgpO1xuICAgIGlmICghdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGxldCBjcyA9IHN0eWxlc1tpXTtcbiAgICAgIGxldCBzdHlsZSA9IHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ2dldFN0eWxlRm9yQ3VzdG9tU3R5bGUnXShjcyk7XG4gICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgYXBwbHlTaGltLnRyYW5zZm9ybUN1c3RvbVN0eWxlKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgKi9cbiAgc3R5bGVTdWJ0cmVlKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC5zaGFkb3dSb290KSB7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudChlbGVtZW50KTtcbiAgICAgIGxldCBzaGFkb3dDaGlsZHJlbiA9XG4gICAgICAgICAgLyoqIEB0eXBlIHshUGFyZW50Tm9kZX0gKi8gKGVsZW1lbnQuc2hhZG93Um9vdCkuY2hpbGRyZW4gfHxcbiAgICAgICAgICBlbGVtZW50LnNoYWRvd1Jvb3QuY2hpbGROb2RlcztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhZG93Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5zdHlsZVN1YnRyZWUoLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi8oc2hhZG93Q2hpbGRyZW5baV0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbiB8fCBlbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3R5bGVTdWJ0cmVlKC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovKGNoaWxkcmVuW2ldKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBzdHlsZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgbGV0IHtpc30gPSBnZXRJc0V4dGVuZHMoZWxlbWVudCk7XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVNYXBbaXNdO1xuICAgIGlmICh0ZW1wbGF0ZSAmJiBlbGVtZW50SGFzQnVpbHRDc3ModGVtcGxhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZSAmJiAhQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKSkge1xuICAgICAgLy8gb25seSByZXZhbGlkYXRlIHRlbXBsYXRlIG9uY2VcbiAgICAgIGlmICghQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkYXRpbmcodGVtcGxhdGUpKSB7XG4gICAgICAgIHRoaXMucHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBpcyk7XG4gICAgICAgIEFwcGx5U2hpbVV0aWxzLnN0YXJ0VmFsaWRhdGluZ1RlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIH1cbiAgICAgIC8vIHVwZGF0ZSB0aGlzIGVsZW1lbnQgaW5zdGFuY2VcbiAgICAgIGxldCByb290ID0gZWxlbWVudC5zaGFkb3dSb290O1xuICAgICAgaWYgKHJvb3QpIHtcbiAgICAgICAgbGV0IHN0eWxlID0gLyoqIEB0eXBlIHtIVE1MU3R5bGVFbGVtZW50fSAqLyhyb290LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpO1xuICAgICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgICAvLyByZXVzZSB0aGUgdGVtcGxhdGUncyBzdHlsZSBhc3QsIGl0IGhhcyBhbGwgdGhlIG9yaWdpbmFsIGNzcyB0ZXh0XG4gICAgICAgICAgc3R5bGVbJ19fY3NzUnVsZXMnXSA9IHRlbXBsYXRlWydfc3R5bGVBc3QnXTtcbiAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRvQ3NzVGV4dCh0ZW1wbGF0ZVsnX3N0eWxlQXN0J10pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgKi9cbiAgc3R5bGVEb2N1bWVudChwcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICB0aGlzLnN0eWxlU3VidHJlZShkb2N1bWVudC5ib2R5LCBwcm9wZXJ0aWVzKTtcbiAgfVxufVxuXG5pZiAoIXdpbmRvdy5TaGFkeUNTUyB8fCAhd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltKSB7XG4gIGNvbnN0IGFwcGx5U2hpbUludGVyZmFjZSA9IG5ldyBBcHBseVNoaW1JbnRlcmZhY2UoKTtcbiAgbGV0IEN1c3RvbVN0eWxlSW50ZXJmYWNlID0gd2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5DdXN0b21TdHlsZUludGVyZmFjZTtcblxuICAvKiogQHN1cHByZXNzIHtkdXBsaWNhdGV9ICovXG4gIHdpbmRvdy5TaGFkeUNTUyA9IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZWxlbWVudEV4dGVuZHNcbiAgICAgKi9cbiAgICBwcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICBhcHBseVNoaW1JbnRlcmZhY2UuZmx1c2hDdXN0b21TdHlsZXMoKTtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5wcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGVsZW1lbnRFeHRlbmRzXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHtcbiAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlRG9tKHRlbXBsYXRlLCBlbGVtZW50TmFtZSkge30sIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgc3R5bGVTdWJ0cmVlKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLnN0eWxlU3VidHJlZShlbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBzdHlsZUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLmZsdXNoQ3VzdG9tU3R5bGVzKCk7XG4gICAgICBhcHBseVNoaW1JbnRlcmZhY2Uuc3R5bGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBzdHlsZURvY3VtZW50KHByb3BlcnRpZXMpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLnN0eWxlRG9jdW1lbnQocHJvcGVydGllcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIH0sXG5cbiAgICBmbHVzaEN1c3RvbVN0eWxlcygpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgIH0sXG5cbiAgICBuYXRpdmVDc3M6IG5hdGl2ZUNzc1ZhcmlhYmxlcyxcbiAgICBuYXRpdmVTaGFkb3c6IG5hdGl2ZVNoYWRvdyxcbiAgICBjc3NCdWlsZDogY3NzQnVpbGQsXG4gICAgZGlzYWJsZVJ1bnRpbWU6IGRpc2FibGVSdW50aW1lLFxuICB9O1xuXG4gIGlmIChDdXN0b21TdHlsZUludGVyZmFjZSkge1xuICAgIHdpbmRvdy5TaGFkeUNTUy5DdXN0b21TdHlsZUludGVyZmFjZSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlO1xuICB9XG59XG5cbndpbmRvdy5TaGFkeUNTUy5BcHBseVNoaW0gPSBhcHBseVNoaW07XG4iLCIvKipcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIEBzdXBwcmVzcyB7Y2hlY2tQcm90b3R5cGFsVHlwZXN9XG4gKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZFxuICogYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heVxuICogYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieVxuICogR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUFxuICogcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBQcm9wZXJ0eUFjY2Vzc29ycyB9IGZyb20gJy4vcHJvcGVydHktYWNjZXNzb3JzLmpzJztcblxuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcblxuY29uc3QgSE9TVF9ESVIgPSAvOmhvc3RcXCg6ZGlyXFwoKGx0cnxydGwpXFwpXFwpL2c7XG5jb25zdCBIT1NUX0RJUl9SRVBMQUNNRU5UID0gJzpob3N0KFtkaXI9XCIkMVwiXSknO1xuXG5jb25zdCBFTF9ESVIgPSAvKFtcXHNcXHctI1xcLlxcW1xcXVxcKl0qKTpkaXJcXCgobHRyfHJ0bClcXCkvZztcbmNvbnN0IEVMX0RJUl9SRVBMQUNNRU5UID0gJzpob3N0KFtkaXI9XCIkMlwiXSkgJDEnO1xuXG5jb25zdCBESVJfQ0hFQ0sgPSAvOmRpclxcKCg/Omx0cnxydGwpXFwpLztcblxuY29uc3QgU0hJTV9TSEFET1cgPSBCb29sZWFuKHdpbmRvd1snU2hhZHlET00nXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ2luVXNlJ10pO1xuXG4vKipcbiAqIEB0eXBlIHshQXJyYXk8IVBvbHltZXJfRGlyTWl4aW4+fVxuICovXG5jb25zdCBESVJfSU5TVEFOQ0VTID0gW107XG5cbi8qKiBAdHlwZSB7P011dGF0aW9uT2JzZXJ2ZXJ9ICovXG5sZXQgb2JzZXJ2ZXIgPSBudWxsO1xuXG5sZXQgZG9jdW1lbnREaXIgPSAnJztcblxuZnVuY3Rpb24gZ2V0UlRMKCkge1xuICBkb2N1bWVudERpciA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVBvbHltZXJfRGlyTWl4aW59IGluc3RhbmNlIEluc3RhbmNlIHRvIHNldCBSVEwgc3RhdHVzIG9uXG4gKi9cbmZ1bmN0aW9uIHNldFJUTChpbnN0YW5jZSkge1xuICBpZiAoIWluc3RhbmNlLl9fYXV0b0Rpck9wdE91dCkge1xuICAgIGNvbnN0IGVsID0gLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKGluc3RhbmNlKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RpcicsIGRvY3VtZW50RGlyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVEaXJlY3Rpb24oKSB7XG4gIGdldFJUTCgpO1xuICBkb2N1bWVudERpciA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IERJUl9JTlNUQU5DRVMubGVuZ3RoOyBpKyspIHtcbiAgICBzZXRSVEwoRElSX0lOU1RBTkNFU1tpXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGFrZVJlY29yZHMoKSB7XG4gIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci50YWtlUmVjb3JkcygpLmxlbmd0aCkge1xuICAgIHVwZGF0ZURpcmVjdGlvbigpO1xuICB9XG59XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IGFsbG93cyBlbGVtZW50cyB0byB1c2UgdGhlIGA6ZGlyYCBDU1MgU2VsZWN0b3IgdG9cbiAqIGhhdmUgdGV4dCBkaXJlY3Rpb24gc3BlY2lmaWMgc3R5bGluZy5cbiAqXG4gKiBXaXRoIHRoaXMgbWl4aW4sIGFueSBzdHlsZXNoZWV0IHByb3ZpZGVkIGluIHRoZSB0ZW1wbGF0ZSB3aWxsIHRyYW5zZm9ybVxuICogYDpkaXJgIGludG8gYDpob3N0KFtkaXJdKWAgYW5kIHN5bmMgZGlyZWN0aW9uIHdpdGggdGhlIHBhZ2UgdmlhIHRoZVxuICogZWxlbWVudCdzIGBkaXJgIGF0dHJpYnV0ZS5cbiAqXG4gKiBFbGVtZW50cyBjYW4gb3B0IG91dCBvZiB0aGUgZ2xvYmFsIHBhZ2UgdGV4dCBkaXJlY3Rpb24gYnkgc2V0dGluZyB0aGUgYGRpcmBcbiAqIGF0dHJpYnV0ZSBkaXJlY3RseSBpbiBgcmVhZHkoKWAgb3IgaW4gSFRNTC5cbiAqXG4gKiBDYXZlYXRzOlxuICogLSBBcHBsaWNhdGlvbnMgbXVzdCBzZXQgYDxodG1sIGRpcj1cImx0clwiPmAgb3IgYDxodG1sIGRpcj1cInJ0bFwiPmAgdG8gc3luY1xuICogICBkaXJlY3Rpb25cbiAqIC0gQXV0b21hdGljIGxlZnQtdG8tcmlnaHQgb3IgcmlnaHQtdG8tbGVmdCBzdHlsaW5nIGlzIHN5bmMnZCB3aXRoIHRoZVxuICogICBgPGh0bWw+YCBlbGVtZW50IG9ubHkuXG4gKiAtIENoYW5naW5nIGBkaXJgIGF0IHJ1bnRpbWUgaXMgc3VwcG9ydGVkLlxuICogLSBPcHRpbmcgb3V0IG9mIHRoZSBnbG9iYWwgZGlyZWN0aW9uIHN0eWxpbmcgaXMgcGVybWFuZW50XG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5QWNjZXNzb3JzXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3Mgd2l0aCBtaXhpbiBhcHBsaWVkLlxuICovXG5leHBvcnQgY29uc3QgRGlyTWl4aW4gPSBkZWR1cGluZ01peGluKChiYXNlKSA9PiB7XG5cbiAgaWYgKCFTSElNX1NIQURPVykge1xuICAgIGlmICghb2JzZXJ2ZXIpIHtcbiAgICAgIGdldFJUTCgpO1xuICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih1cGRhdGVEaXJlY3Rpb24pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHthdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnZGlyJ119KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1Byb3BlcnR5QWNjZXNzb3JzfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3QgZWxlbWVudEJhc2UgPSBQcm9wZXJ0eUFjY2Vzc29ycyhiYXNlKTtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfRGlyTWl4aW59XG4gICAqL1xuICBjbGFzcyBEaXIgZXh0ZW5kcyBlbGVtZW50QmFzZSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dCAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkkgLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gLlxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9jZXNzU3R5bGVUZXh0KGNzc1RleHQsIGJhc2VVUkkpIHtcbiAgICAgIC8vIFRPRE8oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMjQwKTpcbiAgICAgIC8vICAgICBDaGFuZ2UgYmFjayB0byBqdXN0IHN1cGVyLm1ldGhvZENhbGwoKVxuICAgICAgY3NzVGV4dCA9IGVsZW1lbnRCYXNlLl9wcm9jZXNzU3R5bGVUZXh0LmNhbGwodGhpcywgY3NzVGV4dCwgYmFzZVVSSSk7XG4gICAgICBpZiAoIVNISU1fU0hBRE9XICYmIERJUl9DSEVDSy50ZXN0KGNzc1RleHQpKSB7XG4gICAgICAgIGNzc1RleHQgPSB0aGlzLl9yZXBsYWNlRGlySW5Dc3NUZXh0KGNzc1RleHQpO1xuICAgICAgICB0aGlzLl9fYWN0aXZhdGVEaXIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNzc1RleHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBgOmRpcmAgaW4gdGhlIGdpdmVuIENTUyB0ZXh0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBDU1MgdGV4dCB0byByZXBsYWNlIERJUlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTW9kaWZpZWQgQ1NTXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3JlcGxhY2VEaXJJbkNzc1RleHQodGV4dCkge1xuICAgICAgbGV0IHJlcGxhY2VkVGV4dCA9IHRleHQ7XG4gICAgICByZXBsYWNlZFRleHQgPSByZXBsYWNlZFRleHQucmVwbGFjZShIT1NUX0RJUiwgSE9TVF9ESVJfUkVQTEFDTUVOVCk7XG4gICAgICByZXBsYWNlZFRleHQgPSByZXBsYWNlZFRleHQucmVwbGFjZShFTF9ESVIsIEVMX0RJUl9SRVBMQUNNRU5UKTtcbiAgICAgIHJldHVybiByZXBsYWNlZFRleHQ7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5fX2F1dG9EaXJPcHRPdXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c30gQ2xvc3VyZSBkb2Vzbid0IHVuZGVyc3RhbmQgdGhhdCBgdGhpc2AgaXMgYW5cbiAgICAgKiAgICAgSFRNTEVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgc3VwZXIucmVhZHkoKTtcbiAgICAgIHRoaXMuX19hdXRvRGlyT3B0T3V0ID0gLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMpLmhhc0F0dHJpYnV0ZSgnZGlyJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSWYgaXQgZXhpc3RzIG9uIGVsZW1lbnRCYXNlLCBpdCBjYW4gYmVcbiAgICAgKiAgIHN1cGVyJ2RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKGVsZW1lbnRCYXNlLnByb3RvdHlwZS5jb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuX19hY3RpdmF0ZURpcikge1xuICAgICAgICB0YWtlUmVjb3JkcygpO1xuICAgICAgICBESVJfSU5TVEFOQ0VTLnB1c2godGhpcyk7XG4gICAgICAgIHNldFJUTCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBJZiBpdCBleGlzdHMgb24gZWxlbWVudEJhc2UsIGl0IGNhbiBiZVxuICAgICAqICAgc3VwZXInZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICBpZiAoZWxlbWVudEJhc2UucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5fX2FjdGl2YXRlRGlyKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IERJUl9JTlNUQU5DRVMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICAgICAgRElSX0lOU1RBTkNFUy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIERpci5fX2FjdGl2YXRlRGlyID0gZmFsc2U7XG5cbiAgcmV0dXJuIERpcjtcbn0pO1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuZnVuY3Rpb24gcmVzb2x2ZSgpIHtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoJ3VucmVzb2x2ZWQnKTtcbn1cblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICByZXNvbHZlKCk7XG59IGVsc2Uge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlc29sdmUpO1xufVxuXG5leHBvcnQge307XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuL2Jvb3QuanMnO1xuaW1wb3J0IHtlbnF1ZXVlRGVib3VuY2VyLCBmbHVzaERlYm91bmNlcnN9IGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJztcbmV4cG9ydCB7ZW5xdWV1ZURlYm91bmNlcn07XG5cbi8qKlxuICogRm9yY2VzIHNldmVyYWwgY2xhc3NlcyBvZiBhc3luY2hyb25vdXNseSBxdWV1ZWQgdGFza3MgdG8gZmx1c2g6XG4gKiAtIERlYm91bmNlcnMgYWRkZWQgdmlhIGBlbnF1ZXVlRGVib3VuY2VyYFxuICogLSBTaGFkeURPTSBkaXN0cmlidXRpb25cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3QgZmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgbGV0IHNoYWR5RE9NLCBkZWJvdW5jZXJzO1xuICBkbyB7XG4gICAgc2hhZHlET00gPSB3aW5kb3cuU2hhZHlET00gJiYgU2hhZHlET00uZmx1c2goKTtcbiAgICBpZiAod2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5TY29waW5nU2hpbSkge1xuICAgICAgd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltLmZsdXNoKCk7XG4gICAgfVxuICAgIGRlYm91bmNlcnMgPSBmbHVzaERlYm91bmNlcnMoKTtcbiAgfSB3aGlsZSAoc2hhZHlET00gfHwgZGVib3VuY2Vycyk7XG59O1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi4vdXRpbHMvd3JhcC5qcyc7XG5pbXBvcnQgJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcbmltcG9ydCB7IEZsYXR0ZW5lZE5vZGVzT2JzZXJ2ZXIgfSBmcm9tICcuLi91dGlscy9mbGF0dGVuZWQtbm9kZXMtb2JzZXJ2ZXIuanMnO1xuZXhwb3J0IHsgZmx1c2gsIGVucXVldWVEZWJvdW5jZXIgYXMgYWRkRGVib3VuY2VyIH0gZnJvbSAnLi4vdXRpbHMvZmx1c2guanMnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbmltcG9ydCB7IERlYm91bmNlciB9IGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJzsgIC8vIHVzZWQgaW4gdHlwZSBhbm5vdGF0aW9uc1xuLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXG5jb25zdCBwID0gRWxlbWVudC5wcm90b3R5cGU7XG4vKipcbiAqIEBjb25zdCB7ZnVuY3Rpb24odGhpczpOb2RlLCBzdHJpbmcpOiBib29sZWFufVxuICovXG5jb25zdCBub3JtYWxpemVkTWF0Y2hlc1NlbGVjdG9yID0gcC5tYXRjaGVzIHx8IHAubWF0Y2hlc1NlbGVjdG9yIHx8XG4gIHAubW96TWF0Y2hlc1NlbGVjdG9yIHx8IHAubXNNYXRjaGVzU2VsZWN0b3IgfHxcbiAgcC5vTWF0Y2hlc1NlbGVjdG9yIHx8IHAud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuXG4vKipcbiAqIENyb3NzLXBsYXRmb3JtIGBlbGVtZW50Lm1hdGNoZXNgIHNoaW0uXG4gKlxuICogQGZ1bmN0aW9uIG1hdGNoZXNTZWxlY3RvclxuICogQHBhcmFtIHshTm9kZX0gbm9kZSBOb2RlIHRvIGNoZWNrIHNlbGVjdG9yIGFnYWluc3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBTZWxlY3RvciB0byBtYXRjaFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBub2RlIG1hdGNoZWQgc2VsZWN0b3JcbiAqL1xuZXhwb3J0IGNvbnN0IG1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKG5vZGUsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBub3JtYWxpemVkTWF0Y2hlc1NlbGVjdG9yLmNhbGwobm9kZSwgc2VsZWN0b3IpO1xufTtcblxuLyoqXG4gKiBOb2RlIEFQSSB3cmFwcGVyIGNsYXNzIHJldHVybmVkIGZyb20gYFBvbHltZXIuZG9tLih0YXJnZXQpYCB3aGVuXG4gKiBgdGFyZ2V0YCBpcyBhIGBOb2RlYC5cbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyRG9tQXBpfVxuICogQHVucmVzdHJpY3RlZFxuICovXG5jbGFzcyBEb21BcGlOYXRpdmUge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlIE5vZGUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIFBvbHltZXIuZG9tIGhlbHBlciBvYmplY3QuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihub2RlKSB7XG4gICAgaWYgKHdpbmRvd1snU2hhZHlET00nXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ2luVXNlJ10pIHtcbiAgICAgIHdpbmRvd1snU2hhZHlET00nXVsncGF0Y2gnXShub2RlKTtcbiAgICB9XG4gICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGluc3RhbmNlIG9mIGBGbGF0dGVuZWROb2Rlc09ic2VydmVyYCB0aGF0XG4gICAqIGxpc3RlbnMgZm9yIG5vZGUgY2hhbmdlcyBvbiB0aGlzIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpIVE1MRWxlbWVudCwgeyB0YXJnZXQ6ICFIVE1MRWxlbWVudCwgYWRkZWROb2RlczogIUFycmF5PCFFbGVtZW50PiwgcmVtb3ZlZE5vZGVzOiAhQXJyYXk8IUVsZW1lbnQ+IH0pOnZvaWR9IGNhbGxiYWNrIENhbGxlZCB3aGVuIGRpcmVjdCBvciBkaXN0cmlidXRlZCBjaGlsZHJlblxuICAgKiAgIG9mIHRoaXMgZWxlbWVudCBjaGFuZ2VzXG4gICAqIEByZXR1cm4geyFQb2x5bWVyRG9tQXBpLk9ic2VydmVIYW5kbGV9IE9ic2VydmVyIGluc3RhbmNlXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgb2JzZXJ2ZU5vZGVzKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0dGVuZWROb2Rlc09ic2VydmVyKFxuICAgICAgICAvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odGhpcy5ub2RlKSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuIG9ic2VydmVyIHByZXZpb3VzbHkgY3JlYXRlZCB2aWEgYG9ic2VydmVOb2Rlc2BcbiAgICpcbiAgICogQHBhcmFtIHshUG9seW1lckRvbUFwaS5PYnNlcnZlSGFuZGxlfSBvYnNlcnZlckhhbmRsZSBPYnNlcnZlciBpbnN0YW5jZVxuICAgKiAgIHRvIGRpc2Nvbm5lY3QuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdW5vYnNlcnZlTm9kZXMob2JzZXJ2ZXJIYW5kbGUpIHtcbiAgICBvYnNlcnZlckhhbmRsZS5kaXNjb25uZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZWQgYXMgYSBiYWNrd2FyZHMtY29tcGF0aWJsZSBBUEkgb25seS4gIFRoaXMgbWV0aG9kIGRvZXMgbm90aGluZy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIG5vdGlmeU9ic2VydmVyKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBub2RlIGlzIGNvbnRhaW5lZCB3aXRoIHRoaXMgZWxlbWVudCdzXG4gICAqIGxpZ2h0LURPTSBjaGlsZHJlbiBvciBzaGFkb3cgcm9vdCwgaW5jbHVkaW5nIGFueSBuZXN0ZWQgc2hhZG93IHJvb3RzXG4gICAqIG9mIGNoaWxkcmVuIHRoZXJlaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBOb2RlIHRvIHRlc3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBgbm9kZWAgaXMgY29udGFpbmVkIHdpdGhpblxuICAgKiAgIHRoaXMgZWxlbWVudCdzIGxpZ2h0IG9yIHNoYWRvdyBET00uXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZGVlcENvbnRhaW5zKG5vZGUpIHtcbiAgICBpZiAod3JhcCh0aGlzLm5vZGUpLmNvbnRhaW5zKG5vZGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IG4gPSBub2RlO1xuICAgIGxldCBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgLy8gd2FsayBmcm9tIG5vZGUgdG8gYHRoaXNgIG9yIGBkb2N1bWVudGBcbiAgICB3aGlsZSAobiAmJiBuICE9PSBkb2MgJiYgbiAhPT0gdGhpcy5ub2RlKSB7XG4gICAgICAvLyB1c2UgbG9naWNhbCBwYXJlbnRub2RlLCBvciBuYXRpdmUgU2hhZG93Um9vdCBob3N0XG4gICAgICBuID0gd3JhcChuKS5wYXJlbnROb2RlIHx8IHdyYXAobikuaG9zdDtcbiAgICB9XG4gICAgcmV0dXJuIG4gPT09IHRoaXMubm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb290IG5vZGUgb2YgdGhpcyBub2RlLiAgRXF1aXZhbGVudCB0byBgZ2V0Um9vdE5vZGUoKWAuXG4gICAqXG4gICAqIEByZXR1cm4ge05vZGV9IFRvcCBtb3N0IGVsZW1lbnQgaW4gdGhlIGRvbSB0cmVlIGluIHdoaWNoIHRoZSBub2RlXG4gICAqIGV4aXN0cy4gSWYgdGhlIG5vZGUgaXMgY29ubmVjdGVkIHRvIGEgZG9jdW1lbnQgdGhpcyBpcyBlaXRoZXIgYVxuICAgKiBzaGFkb3dSb290IG9yIHRoZSBkb2N1bWVudDsgb3RoZXJ3aXNlLCBpdCBtYXkgYmUgdGhlIG5vZGVcbiAgICogaXRzZWxmIG9yIGEgbm9kZSBvciBkb2N1bWVudCBmcmFnbWVudCBjb250YWluaW5nIGl0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGdldE93bmVyUm9vdCgpIHtcbiAgICByZXR1cm4gd3JhcCh0aGlzLm5vZGUpLmdldFJvb3ROb2RlKCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHNsb3QgZWxlbWVudHMsIHJldHVybnMgdGhlIG5vZGVzIGFzc2lnbmVkIHRvIHRoZSBzbG90OyBvdGhlcndpc2VcbiAgICogYW4gZW1wdHkgYXJyYXkuIEl0IGlzIGVxdWl2YWxlbnQgdG8gYDxzbG90Pi5hZGRpZ25lZE5vZGVzKHtmbGF0dGVuOnRydWV9KWAuXG4gICAqXG4gICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IEFycmF5IG9mIGFzc2lnbmVkIG5vZGVzXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0RGlzdHJpYnV0ZWROb2RlcygpIHtcbiAgICByZXR1cm4gKHRoaXMubm9kZS5sb2NhbE5hbWUgPT09ICdzbG90JykgP1xuICAgICAgd3JhcCh0aGlzLm5vZGUpLmFzc2lnbmVkTm9kZXMoe2ZsYXR0ZW46IHRydWV9KSA6XG4gICAgICBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCBzbG90cyB0aGlzIGVsZW1lbnQgd2FzIGRpc3RyaWJ1dGVkIHRvLlxuICAgKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxTbG90RWxlbWVudD59IERlc2NyaXB0aW9uXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHMoKSB7XG4gICAgbGV0IGlwJCA9IFtdO1xuICAgIGxldCBuID0gd3JhcCh0aGlzLm5vZGUpLmFzc2lnbmVkU2xvdDtcbiAgICB3aGlsZSAobikge1xuICAgICAgaXAkLnB1c2gobik7XG4gICAgICBuID0gd3JhcChuKS5hc3NpZ25lZFNsb3Q7XG4gICAgfVxuICAgIHJldHVybiBpcCQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgYGltcG9ydE5vZGVgIG9uIHRoZSBgb3duZXJEb2N1bWVudGAgZm9yIHRoaXMgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZSBOb2RlIHRvIGltcG9ydFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRlZXAgVHJ1ZSBpZiB0aGUgbm9kZSBzaG91bGQgYmUgY2xvbmVkIGRlZXBseSBkdXJpbmdcbiAgICogICBpbXBvcnRcbiAgICogQHJldHVybiB7Tm9kZX0gQ2xvbmUgb2YgZ2l2ZW4gbm9kZSBpbXBvcnRlZCB0byB0aGlzIG93bmVyIGRvY3VtZW50XG4gICAqL1xuICBpbXBvcnROb2RlKG5vZGUsIGRlZXApIHtcbiAgICBsZXQgZG9jID0gdGhpcy5ub2RlIGluc3RhbmNlb2YgRG9jdW1lbnQgPyB0aGlzLm5vZGUgOlxuICAgICAgdGhpcy5ub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgcmV0dXJuIHdyYXAoZG9jKS5pbXBvcnROb2RlKG5vZGUsIGRlZXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IFJldHVybnMgYSBmbGF0dGVuZWQgbGlzdCBvZiBhbGwgY2hpbGQgbm9kZXMgYW5kXG4gICAqIG5vZGVzIGFzc2lnbmVkIHRvIGNoaWxkIHNsb3RzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGdldEVmZmVjdGl2ZUNoaWxkTm9kZXMoKSB7XG4gICAgcmV0dXJuIEZsYXR0ZW5lZE5vZGVzT2JzZXJ2ZXIuZ2V0RmxhdHRlbmVkTm9kZXMoXG4gICAgICAgIC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyAodGhpcy5ub2RlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGZpbHRlcmVkIGxpc3Qgb2YgZmxhdHRlbmVkIGNoaWxkIGVsZW1lbnRzIGZvciB0aGlzIGVsZW1lbnQgYmFzZWRcbiAgICogb24gdGhlIGdpdmVuIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gZmlsdGVyIG5vZGVzIGFnYWluc3RcbiAgICogQHJldHVybiB7IUFycmF5PCFIVE1MRWxlbWVudD59IExpc3Qgb2YgZmxhdHRlbmVkIGNoaWxkIGVsZW1lbnRzXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gICAgbGV0IGMkID0gdGhpcy5nZXRFZmZlY3RpdmVDaGlsZE5vZGVzKCk7XG4gICAgbGV0IGxpc3QgPSBbXTtcbiAgICBmb3IgKGxldCBpPTAsIGw9YyQubGVuZ3RoLCBjOyAoaTxsKSAmJiAoYz1jJFtpXSk7IGkrKykge1xuICAgICAgaWYgKChjLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkgJiZcbiAgICAgICAgICBtYXRjaGVzU2VsZWN0b3IoYywgc2VsZWN0b3IpKSB7XG4gICAgICAgIGxpc3QucHVzaChjKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHNoYWRvdyByb290cywgcmV0dXJucyB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudCB3aXRoaW4gdGhpc1xuICAgKiBzaGFkb3cgcm9vdC5cbiAgICpcbiAgICogcmV0dXJuIHtOb2RlfHVuZGVmaW5lZH0gQ3VycmVudGx5IGZvY3VzZWQgZWxlbWVudFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGdldCBhY3RpdmVFbGVtZW50KCkge1xuICAgIGxldCBub2RlID0gdGhpcy5ub2RlO1xuICAgIHJldHVybiBub2RlLl9hY3RpdmVFbGVtZW50ICE9PSB1bmRlZmluZWQgPyBub2RlLl9hY3RpdmVFbGVtZW50IDogbm9kZS5hY3RpdmVFbGVtZW50O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcndhcmRNZXRob2RzKHByb3RvLCBtZXRob2RzKSB7XG4gIGZvciAobGV0IGk9MDsgaSA8IG1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgbWV0aG9kID0gbWV0aG9kc1tpXTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuICAgIHByb3RvW21ldGhvZF0gPSAvKiogQHRoaXMge0RvbUFwaU5hdGl2ZX0gKi8gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlW21ldGhvZF0uYXBwbHkodGhpcy5ub2RlLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcndhcmRSZWFkT25seVByb3BlcnRpZXMocHJvdG8sIHByb3BlcnRpZXMpIHtcbiAgZm9yIChsZXQgaT0wOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBuYW1lID0gcHJvcGVydGllc1tpXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sIG5hbWUsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGRvbUFwaSA9IC8qKiBAdHlwZSB7RG9tQXBpTmF0aXZlfSAqLyh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGRvbUFwaS5ub2RlW25hbWVdO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcndhcmRQcm9wZXJ0aWVzKHByb3RvLCBwcm9wZXJ0aWVzKSB7XG4gIGZvciAobGV0IGk9MDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgbmFtZSA9IHByb3BlcnRpZXNbaV07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCBuYW1lLCB7XG4gICAgICAvKipcbiAgICAgICAqIEB0aGlzIHtEb21BcGlOYXRpdmV9XG4gICAgICAgKiBAcmV0dXJuIHsqfSAuXG4gICAgICAgKi9cbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVbbmFtZV07XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAdGhpcyB7RG9tQXBpTmF0aXZlfVxuICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSAuXG4gICAgICAgKi9cbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5ub2RlW25hbWVdID0gdmFsdWU7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEV2ZW50IEFQSSB3cmFwcGVyIGNsYXNzIHJldHVybmVkIGZyb20gYGRvbS4odGFyZ2V0KWAgd2hlblxuICogYHRhcmdldGAgaXMgYW4gYEV2ZW50YC5cbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50QXBpIHtcbiAgY29uc3RydWN0b3IoZXZlbnQpIHtcbiAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3Qgbm9kZSBvbiB0aGUgYGNvbXBvc2VkUGF0aGAgb2YgdGhpcyBldmVudC5cbiAgICpcbiAgICogQHJldHVybiB7IUV2ZW50VGFyZ2V0fSBUaGUgbm9kZSB0aGlzIGV2ZW50IHdhcyBkaXNwYXRjaGVkIHRvXG4gICAqL1xuICBnZXQgcm9vdFRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXRoWzBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxvY2FsIChyZS10YXJnZXRlZCkgdGFyZ2V0IGZvciB0aGlzIGV2ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHshRXZlbnRUYXJnZXR9IFRoZSBsb2NhbCAocmUtdGFyZ2V0ZWQpIHRhcmdldCBmb3IgdGhpcyBldmVudC5cbiAgICovXG4gIGdldCBsb2NhbFRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudC50YXJnZXQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYGNvbXBvc2VkUGF0aGAgZm9yIHRoaXMgZXZlbnQuXG4gICAqIEByZXR1cm4geyFBcnJheTwhRXZlbnRUYXJnZXQ+fSBUaGUgbm9kZXMgdGhpcyBldmVudCBwcm9wYWdhdGVkIHRocm91Z2hcbiAgICovXG4gIGdldCBwYXRoKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICB9XG59XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBkZWVwXG4gKiBAcmV0dXJuIHshTm9kZX1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5jbG9uZU5vZGU7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQ7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHshTm9kZX0gbmV3Q2hpbGRcbiAqIEBwYXJhbSB7Tm9kZX0gcmVmQ2hpbGRcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmluc2VydEJlZm9yZTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHshTm9kZX1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5yZW1vdmVDaGlsZDtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFOb2RlfSBvbGRDaGlsZFxuICogQHBhcmFtIHshTm9kZX0gbmV3Q2hpbGRcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnJlcGxhY2VDaGlsZDtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnNldEF0dHJpYnV0ZTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGU7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsO1xuXG4vKiogQHR5cGUgez9Ob2RlfSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5wYXJlbnROb2RlO1xuLyoqIEB0eXBlIHs/Tm9kZX0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuZmlyc3RDaGlsZDtcbi8qKiBAdHlwZSB7P05vZGV9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmxhc3RDaGlsZDtcbi8qKiBAdHlwZSB7P05vZGV9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLm5leHRTaWJsaW5nO1xuLyoqIEB0eXBlIHs/Tm9kZX0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUucHJldmlvdXNTaWJsaW5nO1xuLyoqIEB0eXBlIHs/SFRNTEVsZW1lbnR9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmZpcnN0RWxlbWVudENoaWxkO1xuLyoqIEB0eXBlIHs/SFRNTEVsZW1lbnR9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmxhc3RFbGVtZW50Q2hpbGQ7XG4vKiogQHR5cGUgez9IVE1MRWxlbWVudH0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuLyoqIEB0eXBlIHs/SFRNTEVsZW1lbnR9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4vKiogQHR5cGUgeyFBcnJheTwhTm9kZT59ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmNoaWxkTm9kZXM7XG4vKiogQHR5cGUgeyFBcnJheTwhSFRNTEVsZW1lbnQ+fSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5jaGlsZHJlbjtcbi8qKiBAdHlwZSB7P0RPTVRva2VuTGlzdH0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuY2xhc3NMaXN0O1xuXG4vKiogQHR5cGUge3N0cmluZ30gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUudGV4dENvbnRlbnQ7XG4vKiogQHR5cGUge3N0cmluZ30gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuaW5uZXJIVE1MO1xuXG5sZXQgRG9tQXBpSW1wbCA9IERvbUFwaU5hdGl2ZTtcblxuaWYgKHdpbmRvd1snU2hhZHlET00nXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ2luVXNlJ10gJiYgd2luZG93WydTaGFkeURPTSddWydub1BhdGNoJ10gJiYgd2luZG93WydTaGFkeURPTSddWydXcmFwcGVyJ10pIHtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQGV4dGVuZHMge0hUTUxFbGVtZW50fVxuICAgKi9cbiAgY2xhc3MgV3JhcHBlciBleHRlbmRzIHdpbmRvd1snU2hhZHlET00nXVsnV3JhcHBlciddIHt9XG5cbiAgLy8gY29weSBiZXNwb2tlIEFQSSBvbnRvIHdyYXBwZXJcbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoRG9tQXBpTmF0aXZlLnByb3RvdHlwZSkuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgIGlmIChwcm9wICE9ICdhY3RpdmVFbGVtZW50Jykge1xuICAgICAgV3JhcHBlci5wcm90b3R5cGVbcHJvcF0gPSBEb21BcGlOYXRpdmUucHJvdG90eXBlW3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTm90ZSwgYGNsYXNzTGlzdGAgaXMgaGVyZSBvbmx5IGZvciBsZWdhY3kgY29tcGF0aWJpbGl0eSBzaW5jZSBpdCBkb2VzIG5vdFxuICAvLyB0cmlnZ2VyIGRpc3RyaWJ1dGlvbiBpbiB2MSBTaGFkb3cgRE9NLlxuICBmb3J3YXJkUmVhZE9ubHlQcm9wZXJ0aWVzKFdyYXBwZXIucHJvdG90eXBlLCBbXG4gICAgJ2NsYXNzTGlzdCdcbiAgXSk7XG5cbiAgRG9tQXBpSW1wbCA9IFdyYXBwZXI7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRXZlbnRBcGkucHJvdG90eXBlLCB7XG5cbiAgICAvLyBSZXR1cm5zIHRoZSBcImxvd2VzdFwiIG5vZGUgaW4gdGhlIHNhbWUgcm9vdCBhcyB0aGUgZXZlbnQncyBjdXJyZW50VGFyZ2V0LlxuICAgIC8vIFdoZW4gaW4gYG5vUGF0Y2hgIG1vZGUsIHRoaXMgbXVzdCBiZSBjYWxjdWxhdGVkIGJ5IHdhbGtpbmcgdGhlIGV2ZW50J3NcbiAgICAvLyBwYXRoLlxuICAgIGxvY2FsVGFyZ2V0OiB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSb290ID0gY3VycmVudCAmJiBkb20oY3VycmVudCkuZ2V0T3duZXJSb290KCk7XG4gICAgICAgIGNvbnN0IHAkID0gdGhpcy5wYXRoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZSA9IHAkW2ldO1xuICAgICAgICAgIGlmIChkb20oZSkuZ2V0T3duZXJSb290KCkgPT09IGN1cnJlbnRSb290KSB7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9LFxuXG4gICAgcGF0aDoge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gd2luZG93WydTaGFkeURPTSddWydjb21wb3NlZFBhdGgnXSh0aGlzLmV2ZW50KTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG59IGVsc2Uge1xuXG4gIC8vIE1ldGhvZHMgdGhhdCBjYW4gcHJvdm9rZSBkaXN0cmlidXRpb24gb3IgbXVzdCByZXR1cm4gdGhlIGxvZ2ljYWwsIG5vdFxuICAvLyBjb21wb3NlZCB0cmVlLlxuICBmb3J3YXJkTWV0aG9kcyhEb21BcGlOYXRpdmUucHJvdG90eXBlLCBbXG4gICAgJ2Nsb25lTm9kZScsICdhcHBlbmRDaGlsZCcsICdpbnNlcnRCZWZvcmUnLCAncmVtb3ZlQ2hpbGQnLFxuICAgICdyZXBsYWNlQ2hpbGQnLCAnc2V0QXR0cmlidXRlJywgJ3JlbW92ZUF0dHJpYnV0ZScsXG4gICAgJ3F1ZXJ5U2VsZWN0b3InLCAncXVlcnlTZWxlY3RvckFsbCdcbiAgXSk7XG5cbiAgLy8gUHJvcGVydGllcyB0aGF0IHNob3VsZCByZXR1cm4gdGhlIGxvZ2ljYWwsIG5vdCBjb21wb3NlZCB0cmVlLiBOb3RlLCBgY2xhc3NMaXN0YFxuICAvLyBpcyBoZXJlIG9ubHkgZm9yIGxlZ2FjeSBjb21wYXRpYmlsaXR5IHNpbmNlIGl0IGRvZXMgbm90IHRyaWdnZXIgZGlzdHJpYnV0aW9uXG4gIC8vIGluIHYxIFNoYWRvdyBET00uXG4gIGZvcndhcmRSZWFkT25seVByb3BlcnRpZXMoRG9tQXBpTmF0aXZlLnByb3RvdHlwZSwgW1xuICAgICdwYXJlbnROb2RlJywgJ2ZpcnN0Q2hpbGQnLCAnbGFzdENoaWxkJyxcbiAgICAnbmV4dFNpYmxpbmcnLCAncHJldmlvdXNTaWJsaW5nJywgJ2ZpcnN0RWxlbWVudENoaWxkJyxcbiAgICAnbGFzdEVsZW1lbnRDaGlsZCcsICduZXh0RWxlbWVudFNpYmxpbmcnLCAncHJldmlvdXNFbGVtZW50U2libGluZycsXG4gICAgJ2NoaWxkTm9kZXMnLCAnY2hpbGRyZW4nLCAnY2xhc3NMaXN0J1xuICBdKTtcblxuICBmb3J3YXJkUHJvcGVydGllcyhEb21BcGlOYXRpdmUucHJvdG90eXBlLCBbXG4gICAgJ3RleHRDb250ZW50JywgJ2lubmVySFRNTCcsICdjbGFzc05hbWUnXG4gIF0pO1xufVxuXG5leHBvcnQgY29uc3QgRG9tQXBpID0gRG9tQXBpSW1wbDtcblxuLyoqXG4gKiBMZWdhY3kgRE9NIGFuZCBFdmVudCBtYW5pcHVsYXRpb24gQVBJIHdyYXBwZXIgZmFjdG9yeSB1c2VkIHRvIGFic3RyYWN0XG4gKiBkaWZmZXJlbmNlcyBiZXR3ZWVuIG5hdGl2ZSBTaGFkb3cgRE9NIGFuZCBcIlNoYWR5IERPTVwiIHdoZW4gcG9seWZpbGxpbmcgb25cbiAqIG9sZGVyIGJyb3dzZXJzLlxuICpcbiAqIE5vdGUgdGhhdCBpbiBQb2x5bWVyIDIueCB1c2Ugb2YgYFBvbHltZXIuZG9tYCBpcyBubyBsb25nZXIgcmVxdWlyZWQgYW5kXG4gKiBpbiB0aGUgbWFqb3JpdHkgb2YgY2FzZXMgc2ltcGx5IGZhY2FkZXMgZGlyZWN0bHkgdG8gdGhlIHN0YW5kYXJkIG5hdGl2ZVxuICogQVBJLlxuICpcbiAqIEBzdW1tYXJ5IExlZ2FjeSBET00gYW5kIEV2ZW50IG1hbmlwdWxhdGlvbiBBUEkgd3JhcHBlciBmYWN0b3J5IHVzZWQgdG9cbiAqIGFic3RyYWN0IGRpZmZlcmVuY2VzIGJldHdlZW4gbmF0aXZlIFNoYWRvdyBET00gYW5kIFwiU2hhZHkgRE9NLlwiXG4gKiBAcGFyYW0geyhOb2RlfEV2ZW50fERvbUFwaU5hdGl2ZXxFdmVudEFwaSk9fSBvYmogTm9kZSBvciBldmVudCB0byBvcGVyYXRlIG9uXG4gKiBAcmV0dXJuIHshRG9tQXBpTmF0aXZlfCFFdmVudEFwaX0gV3JhcHBlciBwcm92aWRpbmcgZWl0aGVyIG5vZGUgQVBJIG9yIGV2ZW50IEFQSVxuICovXG5leHBvcnQgY29uc3QgZG9tID0gZnVuY3Rpb24ob2JqKSB7XG4gIG9iaiA9IG9iaiB8fCBkb2N1bWVudDtcbiAgaWYgKG9iaiBpbnN0YW5jZW9mIERvbUFwaUltcGwpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshRG9tQXBpfSAqLyhvYmopO1xuICB9XG4gIGlmIChvYmogaW5zdGFuY2VvZiBFdmVudEFwaSkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFFdmVudEFwaX0gKi8ob2JqKTtcbiAgfVxuICBsZXQgaGVscGVyID0gb2JqWydfX2RvbUFwaSddO1xuICBpZiAoIWhlbHBlcikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBFdmVudCkge1xuICAgICAgaGVscGVyID0gbmV3IEV2ZW50QXBpKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlbHBlciA9IG5ldyBEb21BcGlJbXBsKC8qKiBAdHlwZSB7Tm9kZX0gKi8ob2JqKSk7XG4gICAgfVxuICAgIG9ialsnX19kb21BcGknXSA9IGhlbHBlcjtcbiAgfVxuICByZXR1cm4gaGVscGVyO1xufTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxOSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCAnLi9ib290LmpzJztcbmltcG9ydCB7d3JhcH0gZnJvbSAnLi93cmFwLmpzJztcblxuY29uc3QgU2hhZHlET00gPSB3aW5kb3cuU2hhZHlET007XG5jb25zdCBTaGFkeUNTUyA9IHdpbmRvdy5TaGFkeUNTUztcblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiBub2RlIHNjb3BlIGlzIGNvcnJlY3QuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gbm9kZSBOb2RlIHRvIGNoZWNrIHNjb3BlXG4gKiBAcGFyYW0geyFOb2RlfSBzY29wZSBTY29wZSByZWZlcmVuY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbm9kZSBpcyBpbiBzY29wZVxuICovXG5mdW5jdGlvbiBzYW1lU2NvcGUobm9kZSwgc2NvcGUpIHtcbiAgcmV0dXJuIHdyYXAobm9kZSkuZ2V0Um9vdE5vZGUoKSA9PT0gc2NvcGU7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgZWxlbWVudHMgaW4gYSBTaGFkb3dET00gY29udGFpbmVyIGFyZSBzY29wZWQgY29ycmVjdGx5LlxuICogVGhpcyBmdW5jdGlvbiBpcyBvbmx5IG5lZWRlZCB3aGVuIFNoYWR5RE9NIGlzIHVzZWQgYW5kIHVucGF0Y2hlZCBET00gQVBJcyBhcmUgdXNlZCBpbiB0aGlyZCBwYXJ0eSBjb2RlLlxuICogVGhpcyBjYW4gaGFwcGVuIGluIG5vUGF0Y2ggbW9kZSBvciB3aGVuIHNwZWNpYWxpemVkIEFQSXMgbGlrZSByYW5nZXMgb3IgdGFibGVzIGFyZSB1c2VkIHRvIG11dGF0ZSBET00uXG4gKlxuICogQHBhcmFtICB7IUVsZW1lbnR9IGNvbnRhaW5lciBDb250YWluZXIgZWxlbWVudCB0byBzY29wZVxuICogQHBhcmFtICB7Ym9vbGVhbj19IHNob3VsZE9ic2VydmUgaWYgdHJ1ZSwgc3RhcnQgYSBtdXRhdGlvbiBvYnNlcnZlciBmb3IgYWRkZWQgbm9kZXMgdG8gdGhlIGNvbnRhaW5lclxuICogQHJldHVybiB7P011dGF0aW9uT2JzZXJ2ZXJ9IFJldHVybnMgYSBuZXcgTXV0YXRpb25PYnNlcnZlciBvbiBgY29udGFpbmVyYCBpZiBgc2hvdWxkT2JzZXJ2ZWAgaXMgdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlU3VidHJlZShjb250YWluZXIsIHNob3VsZE9ic2VydmUgPSBmYWxzZSkge1xuICAvLyBJZiB1c2luZyBuYXRpdmUgU2hhZG93RE9NLCBhYm9ydFxuICBpZiAoIVNoYWR5RE9NIHx8ICFTaGFkeUNTUykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8vIFNoYWR5Q1NTIGhhbmRsZXMgRE9NIG11dGF0aW9ucyB3aGVuIFNoYWR5RE9NIGRvZXMgbm90IGhhbmRsZSBzY29waW5nIGl0c2VsZlxuICBpZiAoIVNoYWR5RE9NWydoYW5kbGVzRHluYW1pY1Njb3BpbmcnXSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IFNjb3BpbmdTaGltID0gU2hhZHlDU1NbJ1Njb3BpbmdTaGltJ107XG4gIC8vIGlmIFNjb3BpbmdTaGltIGlzIG5vdCBhdmFpbGFibGUsIGFib3J0XG4gIGlmICghU2NvcGluZ1NoaW0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBjYXB0dXJlIGNvcnJlY3Qgc2NvcGUgZm9yIGNvbnRhaW5lclxuICBjb25zdCBjb250YWluZXJTY29wZSA9IFNjb3BpbmdTaGltWydzY29wZUZvck5vZGUnXShjb250YWluZXIpO1xuICBjb25zdCByb290ID0gd3JhcChjb250YWluZXIpLmdldFJvb3ROb2RlKCk7XG5cbiAgY29uc3Qgc2NvcGlmeSA9IChub2RlKSA9PiB7XG4gICAgaWYgKCFzYW1lU2NvcGUobm9kZSwgcm9vdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gTk9URTogbmF0aXZlIHFTQSBkb2VzIG5vdCBob25vciBzY29wZWQgRE9NLCBidXQgaXQgaXMgZmFzdGVyLCBhbmQgdGhlIHNhbWUgYmVoYXZpb3IgYXMgUG9seW1lciB2MVxuICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShTaGFkeURPTVsnbmF0aXZlTWV0aG9kcyddWydxdWVyeVNlbGVjdG9yQWxsJ10uY2FsbChub2RlLCAnKicpKTtcbiAgICBlbGVtZW50cy5wdXNoKG5vZGUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsID0gZWxlbWVudHNbaV07XG4gICAgICBpZiAoIXNhbWVTY29wZShlbCwgcm9vdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJyZW50U2NvcGUgPSBTY29waW5nU2hpbVsnY3VycmVudFNjb3BlRm9yTm9kZSddKGVsKTtcbiAgICAgIGlmIChjdXJyZW50U2NvcGUgIT09IGNvbnRhaW5lclNjb3BlKSB7XG4gICAgICAgIGlmIChjdXJyZW50U2NvcGUgIT09ICcnKSB7XG4gICAgICAgICAgU2NvcGluZ1NoaW1bJ3Vuc2NvcGVOb2RlJ10oZWwsIGN1cnJlbnRTY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgU2NvcGluZ1NoaW1bJ3Njb3BlTm9kZSddKGVsLCBjb250YWluZXJTY29wZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIHNjb3BlIGV2ZXJ5dGhpbmcgaW4gY29udGFpbmVyXG4gIHNjb3BpZnkoY29udGFpbmVyKTtcblxuICBpZiAoc2hvdWxkT2JzZXJ2ZSkge1xuICAgIGNvbnN0IG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG14bnMpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXhucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBteG4gPSBteG5zW2ldO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG14bi5hZGRlZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgY29uc3QgYWRkZWROb2RlID0gbXhuLmFkZGVkTm9kZXNbal07XG4gICAgICAgICAgaWYgKGFkZGVkTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHNjb3BpZnkoYWRkZWROb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBtby5vYnNlcnZlKGNvbnRhaW5lciwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICAgIHJldHVybiBtbztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2FwcGx5LXNoaW0uanMnO1xuaW1wb3J0IHsgRWxlbWVudE1peGluIH0gZnJvbSAnLi4vbWl4aW5zL2VsZW1lbnQtbWl4aW4uanMnO1xuaW1wb3J0IHsgR2VzdHVyZUV2ZW50TGlzdGVuZXJzIH0gZnJvbSAnLi4vbWl4aW5zL2dlc3R1cmUtZXZlbnQtbGlzdGVuZXJzLmpzJztcbmltcG9ydCB7IERpck1peGluIH0gZnJvbSAnLi4vbWl4aW5zL2Rpci1taXhpbi5qcyc7XG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0ICcuLi91dGlscy9yZW5kZXItc3RhdHVzLmpzJztcbmltcG9ydCAnLi4vdXRpbHMvdW5yZXNvbHZlZC5qcyc7XG5pbXBvcnQgeyBkb20sIG1hdGNoZXNTZWxlY3RvciB9IGZyb20gJy4vcG9seW1lci5kb20uanMnO1xuaW1wb3J0IHsgc2V0VG91Y2hBY3Rpb24gfSBmcm9tICcuLi91dGlscy9nZXN0dXJlcy5qcyc7XG5pbXBvcnQgeyBEZWJvdW5jZXIgfSBmcm9tICcuLi91dGlscy9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyB0aW1lT3V0LCBtaWNyb1Rhc2sgfSBmcm9tICcuLi91dGlscy9hc3luYy5qcyc7XG5pbXBvcnQgeyBnZXQgfSBmcm9tICcuLi91dGlscy9wYXRoLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuLi91dGlscy93cmFwLmpzJztcbmltcG9ydCB7IHNjb3BlU3VidHJlZSB9IGZyb20gJy4uL3V0aWxzL3Njb3BlLXN1YnRyZWUuanMnO1xuXG5sZXQgc3R5bGVJbnRlcmZhY2UgPSB3aW5kb3cuU2hhZHlDU1M7XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIFBvbHltZXIncyBcImxlZ2FjeVwiIEFQSSBpbnRlbmRlZCB0byBiZVxuICogYmFja3dhcmQtY29tcGF0aWJsZSB0byB0aGUgZ3JlYXRlc3QgZXh0ZW50IHBvc3NpYmxlIHdpdGggdGhlIEFQSVxuICogZm91bmQgb24gdGhlIFBvbHltZXIgMS54IGBQb2x5bWVyLkJhc2VgIHByb3RvdHlwZSBhcHBsaWVkIHRvIGFsbCBlbGVtZW50c1xuICogZGVmaW5lZCB1c2luZyB0aGUgYFBvbHltZXIoey4uLn0pYCBmdW5jdGlvbi5cbiAqXG4gKiBAbWl4aW5GdW5jdGlvblxuICogQHBvbHltZXJcbiAqIEBhcHBsaWVzTWl4aW4gRWxlbWVudE1peGluXG4gKiBAYXBwbGllc01peGluIEdlc3R1cmVFdmVudExpc3RlbmVyc1xuICogQHByb3BlcnR5IGlzQXR0YWNoZWQge2Jvb2xlYW59IFNldCB0byBgdHJ1ZWAgaW4gdGhpcyBlbGVtZW50J3NcbiAqICAgYGNvbm5lY3RlZENhbGxiYWNrYCBhbmQgYGZhbHNlYCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgUG9seW1lcidzIFwibGVnYWN5XCIgQVBJXG4gKi9cbmV4cG9ydCBjb25zdCBMZWdhY3lFbGVtZW50TWl4aW4gPSBkZWR1cGluZ01peGluKChiYXNlKSA9PiB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfRWxlbWVudE1peGlufVxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9HZXN0dXJlRXZlbnRMaXN0ZW5lcnN9XG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0Rpck1peGlufVxuICAgKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdCBsZWdhY3lFbGVtZW50QmFzZSA9IERpck1peGluKEdlc3R1cmVFdmVudExpc3RlbmVycyhFbGVtZW50TWl4aW4oYmFzZSkpKTtcblxuICAvKipcbiAgICogTWFwIG9mIHNpbXBsZSBuYW1lcyB0byB0b3VjaCBhY3Rpb24gbmFtZXNcbiAgICogQGRpY3RcbiAgICovXG4gIGNvbnN0IERJUkVDVElPTl9NQVAgPSB7XG4gICAgJ3gnOiAncGFuLXgnLFxuICAgICd5JzogJ3Bhbi15JyxcbiAgICAnbm9uZSc6ICdub25lJyxcbiAgICAnYWxsJzogJ2F1dG8nXG4gIH07XG5cbiAgLyoqXG4gICAqIEBwb2x5bWVyXG4gICAqIEBtaXhpbkNsYXNzXG4gICAqIEBleHRlbmRzIHtsZWdhY3lFbGVtZW50QmFzZX1cbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfTGVnYWN5RWxlbWVudE1peGlufVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBMZWdhY3lFbGVtZW50IGV4dGVuZHMgbGVnYWN5RWxlbWVudEJhc2Uge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5pc0F0dGFjaGVkO1xuICAgICAgLyoqIEB0eXBlIHs/V2Vha01hcDwhRWxlbWVudCwgIU9iamVjdDxzdHJpbmcsICFGdW5jdGlvbj4+fSAqL1xuICAgICAgdGhpcy5fX2JvdW5kTGlzdGVuZXJzO1xuICAgICAgLyoqIEB0eXBlIHs/T2JqZWN0PHN0cmluZywgP0Z1bmN0aW9uPn0gKi9cbiAgICAgIHRoaXMuX2RlYm91bmNlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9yd2FyZHMgYGltcG9ydE1ldGFgIGZyb20gdGhlIHByb3RvdHlwZSAoaS5lLiBmcm9tIHRoZSBpbmZvIG9iamVjdFxuICAgICAqIHBhc3NlZCB0byBgUG9seW1lcih7Li4ufSlgKSB0byB0aGUgc3RhdGljIEFQSS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4geyFPYmplY3R9IFRoZSBgaW1wb3J0Lm1ldGFgIG9iamVjdCBzZXQgb24gdGhlIHByb3RvdHlwZVxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IGB0aGlzYCBpcyBhbHdheXMgaW4gdGhlIGluc3RhbmNlIGluXG4gICAgICogIGNsb3N1cmUgZm9yIHNvbWUgcmVhc29uIGV2ZW4gaW4gYSBzdGF0aWMgbWV0aG9kLCByYXRoZXIgdGhhbiB0aGUgY2xhc3NcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgaW1wb3J0TWV0YSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3RvdHlwZS5pbXBvcnRNZXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExlZ2FjeSBjYWxsYmFjayBjYWxsZWQgZHVyaW5nIHRoZSBgY29uc3RydWN0b3JgLCBmb3Igb3ZlcnJpZGluZ1xuICAgICAqIGJ5IHRoZSB1c2VyLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgY3JlYXRlZCgpIHt9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBgY29ubmVjdGVkQ2FsbGJhY2tgXG4gICAgICogd2hpY2ggYWRkcyBQb2x5bWVyIGxlZ2FjeSBBUEkncyBgYXR0YWNoZWRgIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICB0aGlzLmF0dGFjaGVkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGVnYWN5IGNhbGxiYWNrIGNhbGxlZCBkdXJpbmcgYGNvbm5lY3RlZENhbGxiYWNrYCwgZm9yIG92ZXJyaWRpbmdcbiAgICAgKiBieSB0aGUgdXNlci5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGF0dGFjaGVkKCkge31cblxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGFuIGltcGxlbWVudGF0aW9uIG9mIGBkaXNjb25uZWN0ZWRDYWxsYmFja2BcbiAgICAgKiB3aGljaCBhZGRzIFBvbHltZXIgbGVnYWN5IEFQSSdzIGBkZXRhY2hlZGAgbWV0aG9kLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgdGhpcy5pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmRldGFjaGVkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGVnYWN5IGNhbGxiYWNrIGNhbGxlZCBkdXJpbmcgYGRpc2Nvbm5lY3RlZENhbGxiYWNrYCwgZm9yIG92ZXJyaWRpbmdcbiAgICAgKiBieSB0aGUgdXNlci5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGRldGFjaGVkKCkge31cblxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGFuIG92ZXJyaWRlIGltcGxlbWVudGF0aW9uIG9mIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgXG4gICAgICogd2hpY2ggYWRkcyB0aGUgUG9seW1lciBsZWdhY3kgQVBJJ3MgYGF0dHJpYnV0ZUNoYW5nZWRgIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIGF0dHJpYnV0ZS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IG9sZCBPbGQgdmFsdWUgb2YgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWUgQ3VycmVudCB2YWx1ZSBvZiBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBuYW1lc3BhY2UgQXR0cmlidXRlIG5hbWVzcGFjZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlLCBuYW1lc3BhY2UpIHtcbiAgICAgIGlmIChvbGQgIT09IHZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlLCBuYW1lc3BhY2UpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZUNoYW5nZWQobmFtZSwgb2xkLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGVnYWN5IGNhbGxiYWNrIGNhbGxlZCBkdXJpbmcgYGF0dHJpYnV0ZUNoYW5nZWRDaGFsbGJhY2tgLCBmb3Igb3ZlcnJpZGluZ1xuICAgICAqIGJ5IHRoZSB1c2VyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gb2xkIE9sZCB2YWx1ZSBvZiBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBDdXJyZW50IHZhbHVlIG9mIGF0dHJpYnV0ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWQobmFtZSwgb2xkLCB2YWx1ZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgaW1wbGVtZW50YXRpb24gdG9cbiAgICAgKiBhZGQgc3VwcG9ydCBmb3IgY2xhc3MgaW5pdGlhbGl6YXRpb24gdmlhIHRoZSBgX3JlZ2lzdGVyZWRgIGNhbGxiYWNrLlxuICAgICAqIFRoaXMgaXMgY2FsbGVkIG9ubHkgd2hlbiB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQgaXMgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9XG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm9wZXJ0aWVzKCkge1xuICAgICAgbGV0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpO1xuICAgICAgaWYgKCFwcm90by5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX2hhc1JlZ2lzdGVyRmluaXNoZWQnLCBwcm90bykpKSB7XG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyZWQoKTtcbiAgICAgICAgLy8gYmFja3N0b3AgaW4gY2FzZSB0aGUgYF9yZWdpc3RlcmVkYCBpbXBsZW1lbnRhdGlvbiBkb2VzIG5vdCBzZXQgdGhpc1xuICAgICAgICBwcm90by5fX2hhc1JlZ2lzdGVyRmluaXNoZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3VwZXIuX2luaXRpYWxpemVQcm9wZXJ0aWVzKCk7XG4gICAgICB0aGlzLnJvb3QgPSAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqLyh0aGlzKTtcbiAgICAgIHRoaXMuY3JlYXRlZCgpO1xuICAgICAgLy8gRW5zdXJlIGxpc3RlbmVycyBhcmUgYXBwbGllZCBpbW1lZGlhdGVseSBzbyB0aGF0IHRoZXkgYXJlXG4gICAgICAvLyBhZGRlZCBiZWZvcmUgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzLiBUaGlzIGFsbG93cyBhbiBlbGVtZW50IHRvXG4gICAgICAvLyBkZWNvcmF0ZSBpdHNlbGYgdmlhIGFuIGV2ZW50IHByaW9yIHRvIGFueSBkZWNsYXJhdGl2ZSBsaXN0ZW5lcnNcbiAgICAgIC8vIHNlZWluZyB0aGUgZXZlbnQuIE5vdGUsIHRoaXMgZW5zdXJlcyBjb21wYXRpYmlsaXR5IHdpdGggMS54IG9yZGVyaW5nLlxuICAgICAgdGhpcy5fYXBwbHlMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYXV0b21hdGljYWxseSB3aGVuIGFuIGVsZW1lbnQgaXMgaW5pdGlhbGl6aW5nLlxuICAgICAqIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBwZXJmb3JtIGNsYXNzIHJlZ2lzdHJhdGlvbiB0aW1lXG4gICAgICogd29yay4gVGhlIGltcGxlbWVudGF0aW9uIHNob3VsZCBlbnN1cmUgdGhlIHdvcmsgaXMgcGVyZm9ybWVkXG4gICAgICogb25seSBvbmNlIGZvciB0aGUgY2xhc3MuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3JlZ2lzdGVyZWQoKSB7fVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgaW1wbGVtZW50YXRpb24gdG9cbiAgICAgKiBhZGQgc3VwcG9ydCBmb3IgaW5zdGFsbGluZyBgaG9zdEF0dHJpYnV0ZXNgIGFuZCBgbGlzdGVuZXJzYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgcmVhZHkoKSB7XG4gICAgICB0aGlzLl9lbnN1cmVBdHRyaWJ1dGVzKCk7XG4gICAgICBzdXBlci5yZWFkeSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgYW4gZWxlbWVudCBoYXMgcmVxdWlyZWQgYXR0cmlidXRlcy4gQ2FsbGVkIHdoZW4gdGhlIGVsZW1lbnRcbiAgICAgKiBpcyBiZWluZyByZWFkaWVkIHZpYSBgcmVhZHlgLiBVc2VycyBzaG91bGQgb3ZlcnJpZGUgdG8gc2V0IHRoZVxuICAgICAqIGVsZW1lbnQncyByZXF1aXJlZCBhdHRyaWJ1dGVzLiBUaGUgaW1wbGVtZW50YXRpb24gc2hvdWxkIGJlIHN1cmVcbiAgICAgKiB0byBjaGVjayBhbmQgbm90IG92ZXJyaWRlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgYWRkZWQgYnlcbiAgICAgKiB0aGUgdXNlciBvZiB0aGUgZWxlbWVudC4gVHlwaWNhbGx5LCBzZXR0aW5nIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGxlZnRcbiAgICAgKiB0byB0aGUgZWxlbWVudCB1c2VyIGFuZCBub3QgZG9uZSBoZXJlOyByZWFzb25hYmxlIGV4Y2VwdGlvbnMgaW5jbHVkZVxuICAgICAqIHNldHRpbmcgYXJpYSByb2xlcyBhbmQgZm9jdXNhYmlsaXR5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9lbnN1cmVBdHRyaWJ1dGVzKCkge31cblxuICAgIC8qKlxuICAgICAqIEFkZHMgZWxlbWVudCBldmVudCBsaXN0ZW5lcnMuIENhbGxlZCB3aGVuIHRoZSBlbGVtZW50XG4gICAgICogaXMgYmVpbmcgcmVhZGllZCB2aWEgYHJlYWR5YC4gVXNlcnMgc2hvdWxkIG92ZXJyaWRlIHRvXG4gICAgICogYWRkIGFueSByZXF1aXJlZCBlbGVtZW50IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgKiBJbiBwZXJmb3JtYW5jZSBjcml0aWNhbCBlbGVtZW50cywgdGhlIHdvcmsgZG9uZSBoZXJlIHNob3VsZCBiZSBrZXB0XG4gICAgICogdG8gYSBtaW5pbXVtIHNpbmNlIGl0IGlzIGRvbmUgYmVmb3JlIHRoZSBlbGVtZW50IGlzIHJlbmRlcmVkLiBJblxuICAgICAqIHRoZXNlIGVsZW1lbnRzLCBjb25zaWRlciBhZGRpbmcgbGlzdGVuZXJzIGFzeW5jaHJvbm91c2x5IHNvIGFzIG5vdCB0b1xuICAgICAqIGJsb2NrIHJlbmRlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfYXBwbHlMaXN0ZW5lcnMoKSB7fVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSB0eXBlZCBKYXZhU2NyaXB0IHZhbHVlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogTm90ZSB0aGlzIG1ldGhvZCBpcyBwcm92aWRlZCBhcyBiYWNrd2FyZC1jb21wYXRpYmxlIGxlZ2FjeSBBUElcbiAgICAgKiBvbmx5LiAgSXQgaXMgbm90IGRpcmVjdGx5IGNhbGxlZCBieSBhbnkgUG9seW1lciBmZWF0dXJlcy4gVG8gY3VzdG9taXplXG4gICAgICogaG93IHByb3BlcnRpZXMgYXJlIHNlcmlhbGl6ZWQgdG8gYXR0cmlidXRlcyBmb3IgYXR0cmlidXRlIGJpbmRpbmdzIGFuZFxuICAgICAqIGByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWVgIHByb3BlcnRpZXMgYXMgd2VsbCBhcyB0aGlzIG1ldGhvZCwgb3ZlcnJpZGVcbiAgICAgKiB0aGUgYF9zZXJpYWxpemVWYWx1ZWAgbWV0aG9kIHByb3ZpZGVkIGJ5IGBQb2x5bWVyLlByb3BlcnR5QWNjZXNzb3JzYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gZGVzZXJpYWxpemVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmcgfCB1bmRlZmluZWR9IFNlcmlhbGl6ZWQgdmFsdWVcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZXJpYWxpemVWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBzdHJpbmcgdG8gYSB0eXBlZCBKYXZhU2NyaXB0IHZhbHVlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGlzIG1ldGhvZCBpcyBwcm92aWRlZCBhcyBiYWNrd2FyZC1jb21wYXRpYmxlIGxlZ2FjeSBBUElcbiAgICAgKiBvbmx5LiAgSXQgaXMgbm90IGRpcmVjdGx5IGNhbGxlZCBieSBhbnkgUG9seW1lciBmZWF0dXJlcy4gIFRvIGN1c3RvbWl6ZVxuICAgICAqIGhvdyBhdHRyaWJ1dGVzIGFyZSBkZXNlcmlhbGl6ZWQgdG8gcHJvcGVydGllcyBmb3IgaW5cbiAgICAgKiBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCwgb3ZlcnJpZGUgYF9kZXNlcmlhbGl6ZVZhbHVlYCBtZXRob2RcbiAgICAgKiBwcm92aWRlZCBieSBgUG9seW1lci5Qcm9wZXJ0eUFjY2Vzc29yc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgU3RyaW5nIHRvIGRlc2VyaWFsaXplXG4gICAgICogQHBhcmFtIHsqfSB0eXBlIFR5cGUgdG8gZGVzZXJpYWxpemUgdGhlIHN0cmluZyB0b1xuICAgICAqIEByZXR1cm4geyp9IFJldHVybnMgdGhlIGRlc2VyaWFsaXplZCB2YWx1ZSBpbiB0aGUgYHR5cGVgIGdpdmVuLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGRlc2VyaWFsaXplKHZhbHVlLCB0eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyBhIHByb3BlcnR5IHRvIGl0cyBhc3NvY2lhdGVkIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYmFja3dhcmQtY29tcGF0aWJsZSBsZWdhY3kgQVBJXG4gICAgICogb25seS4gIEl0IGlzIG5vdCBkaXJlY3RseSBjYWxsZWQgYnkgYW55IFBvbHltZXIgZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZSB0byByZWZsZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYXR0cmlidXRlIEF0dHJpYnV0ZSBuYW1lIHRvIHJlZmxlY3QuXG4gICAgICogQHBhcmFtIHsqPX0gdmFsdWUgUHJvcGVydHkgdmFsdWUgdG8gcmVmbGVjdC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlKHByb3BlcnR5LCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0eVRvQXR0cmlidXRlKHByb3BlcnR5LCBhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdHlwZWQgdmFsdWUgdG8gYW4gSFRNTCBhdHRyaWJ1dGUgb24gYSBub2RlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGlzIG1ldGhvZCBpcyBwcm92aWRlZCBhcyBiYWNrd2FyZC1jb21wYXRpYmxlIGxlZ2FjeSBBUElcbiAgICAgKiBvbmx5LiAgSXQgaXMgbm90IGRpcmVjdGx5IGNhbGxlZCBieSBhbnkgUG9seW1lciBmZWF0dXJlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2VyaWFsaXplLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGUgQXR0cmlidXRlIG5hbWUgdG8gc2VyaWFsaXplIHRvLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZSBFbGVtZW50IHRvIHNldCBhdHRyaWJ1dGUgdG8uXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzZXJpYWxpemVWYWx1ZVRvQXR0cmlidXRlKHZhbHVlLCBhdHRyaWJ1dGUsIG5vZGUpIHtcbiAgICAgIHRoaXMuX3ZhbHVlVG9Ob2RlQXR0cmlidXRlKC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5vZGUgfHwgdGhpcyksIHZhbHVlLCBhdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyBvd24gcHJvcGVydGllcyAoaW5jbHVkaW5nIGFjY2Vzc29yIGRlc2NyaXB0b3JzKSBmcm9tIGEgc291cmNlXG4gICAgICogb2JqZWN0IHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGFyZ2V0IG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFwaSBTb3VyY2Ugb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcHJvdG90eXBlIG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgYXMgZmlyc3QgYXJndW1lbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZXh0ZW5kKHByb3RvdHlwZSwgYXBpKSB7XG4gICAgICBpZiAoIShwcm90b3R5cGUgJiYgYXBpKSkge1xuICAgICAgICByZXR1cm4gcHJvdG90eXBlIHx8IGFwaTtcbiAgICAgIH1cbiAgICAgIGxldCBuJCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFwaSk7XG4gICAgICBmb3IgKGxldCBpPTAsIG47IChpPG4kLmxlbmd0aCkgJiYgKG49biRbaV0pOyBpKyspIHtcbiAgICAgICAgbGV0IHBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhcGksIG4pO1xuICAgICAgICBpZiAocGQpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBuLCBwZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHByb3BzIGZyb20gYSBzb3VyY2Ugb2JqZWN0IHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIE5vdGUsIHRoaXMgbWV0aG9kIHVzZXMgYSBzaW1wbGUgYGZvci4uLmluYCBzdHJhdGVneSBmb3IgZW51bWVyYXRpbmdcbiAgICAgKiBwcm9wZXJ0aWVzLiAgVG8gZW5zdXJlIG9ubHkgYG93blByb3BlcnRpZXNgIGFyZSBjb3BpZWQgZnJvbSBzb3VyY2VcbiAgICAgKiB0byB0YXJnZXQgYW5kIHRoYXQgYWNjZXNzb3IgaW1wbGVtZW50YXRpb25zIGFyZSBjb3BpZWQsIHVzZSBgZXh0ZW5kYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0IFRhcmdldCBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdH0gc291cmNlIFNvdXJjZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gICAgICogQHJldHVybiB7IU9iamVjdH0gVGFyZ2V0IG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgYXMgZmlyc3QgYXJndW1lbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgbWl4aW4odGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgIGZvciAobGV0IGkgaW4gc291cmNlKSB7XG4gICAgICAgIHRhcmdldFtpXSA9IHNvdXJjZVtpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYmFja3dhcmQtY29tcGF0aWJsZSBsZWdhY3kgQVBJXG4gICAgICogb25seS4gIEl0IGlzIG5vdCBkaXJlY3RseSBjYWxsZWQgYnkgYW55IFBvbHltZXIgZmVhdHVyZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IG9uIHdoaWNoIHRvIHNldCB0aGUgcHJvdG90eXBlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIHByb3RvdHlwZSB0aGF0IHdpbGwgYmUgc2V0IG9uIHRoZSBnaXZlblxuICAgICAqIGBvYmplY3RgLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gUmV0dXJucyB0aGUgZ2l2ZW4gYG9iamVjdGAgd2l0aCBpdHMgcHJvdG90eXBlIHNldFxuICAgICAqIHRvIHRoZSBnaXZlbiBgcHJvdG90eXBlYCBvYmplY3QuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgY2hhaW5PYmplY3Qob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgICAgIGlmIChvYmplY3QgJiYgcHJvdG90eXBlICYmIG9iamVjdCAhPT0gcHJvdG90eXBlKSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qICoqKiogQmVnaW4gVGVtcGxhdGUgKioqKiAqL1xuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgYGltcG9ydE5vZGVgIG9uIHRoZSBgY29udGVudGAgb2YgdGhlIGB0ZW1wbGF0ZWAgc3BlY2lmaWVkIGFuZFxuICAgICAqIHJldHVybnMgYSBkb2N1bWVudCBmcmFnbWVudCBjb250YWluaW5nIHRoZSBpbXBvcnRlZCBjb250ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBIVE1MIHRlbXBsYXRlIGVsZW1lbnQgdG8gaW5zdGFuY2UuXG4gICAgICogQHJldHVybiB7IURvY3VtZW50RnJhZ21lbnR9IERvY3VtZW50IGZyYWdtZW50IGNvbnRhaW5pbmcgdGhlIGltcG9ydGVkXG4gICAgICogICB0ZW1wbGF0ZSBjb250ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IGdvL21pc3NpbmdmbnByb3BzXG4gICAgICovXG4gICAgaW5zdGFuY2VUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnN0cnVjdG9yLl9jb250ZW50Rm9yVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgbGV0IGRvbSA9IC8qKiBAdHlwZSB7IURvY3VtZW50RnJhZ21lbnR9ICovXG4gICAgICAgIChkb2N1bWVudC5pbXBvcnROb2RlKGNvbnRlbnQsIHRydWUpKTtcbiAgICAgIHJldHVybiBkb207XG4gICAgfVxuXG4gICAgLyogKioqKiBCZWdpbiBFdmVudHMgKioqKiAqL1xuXG5cblxuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYSBjdXN0b20gZXZlbnQgd2l0aCBhbiBvcHRpb25hbCBkZXRhaWwgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBOYW1lIG9mIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHsqPX0gZGV0YWlsIERldGFpbCB2YWx1ZSBjb250YWluaW5nIGV2ZW50LXNwZWNpZmljXG4gICAgICogICBwYXlsb2FkLlxuICAgICAqIEBwYXJhbSB7eyBidWJibGVzOiAoYm9vbGVhbnx1bmRlZmluZWQpLCBjYW5jZWxhYmxlOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICAgICAqICAgICBjb21wb3NlZDogKGJvb2xlYW58dW5kZWZpbmVkKSB9PX1cbiAgICAgKiAgb3B0aW9ucyBPYmplY3Qgc3BlY2lmeWluZyBvcHRpb25zLiAgVGhlc2UgbWF5IGluY2x1ZGU6XG4gICAgICogIGBidWJibGVzYCAoYm9vbGVhbiwgZGVmYXVsdHMgdG8gYHRydWVgKSxcbiAgICAgKiAgYGNhbmNlbGFibGVgIChib29sZWFuLCBkZWZhdWx0cyB0byBmYWxzZSksIGFuZFxuICAgICAqICBgbm9kZWAgb24gd2hpY2ggdG8gZmlyZSB0aGUgZXZlbnQgKEhUTUxFbGVtZW50LCBkZWZhdWx0cyB0byBgdGhpc2ApLlxuICAgICAqIEByZXR1cm4geyFFdmVudH0gVGhlIG5ldyBldmVudCB0aGF0IHdhcyBmaXJlZC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBmaXJlKHR5cGUsIGRldGFpbCwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICBkZXRhaWwgPSAoZGV0YWlsID09PSBudWxsIHx8IGRldGFpbCA9PT0gdW5kZWZpbmVkKSA/IHt9IDogZGV0YWlsO1xuICAgICAgbGV0IGV2ZW50ID0gbmV3IEV2ZW50KHR5cGUsIHtcbiAgICAgICAgYnViYmxlczogb3B0aW9ucy5idWJibGVzID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0aW9ucy5idWJibGVzLFxuICAgICAgICBjYW5jZWxhYmxlOiBCb29sZWFuKG9wdGlvbnMuY2FuY2VsYWJsZSksXG4gICAgICAgIGNvbXBvc2VkOiBvcHRpb25zLmNvbXBvc2VkID09PSB1bmRlZmluZWQgPyB0cnVlOiBvcHRpb25zLmNvbXBvc2VkXG4gICAgICB9KTtcbiAgICAgIGV2ZW50LmRldGFpbCA9IGRldGFpbDtcbiAgICAgIGxldCBub2RlID0gb3B0aW9ucy5ub2RlIHx8IHRoaXM7XG4gICAgICB3cmFwKG5vZGUpLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBhZGQgYW4gZXZlbnQgbGlzdGVuZXIgb24gYSBnaXZlbiBlbGVtZW50LFxuICAgICAqIGxhdGUgYm91bmQgdG8gYSBuYW1lZCBtZXRob2Qgb24gdGhpcyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/RXZlbnRUYXJnZXR9IG5vZGUgRWxlbWVudCB0byBhZGQgZXZlbnQgbGlzdGVuZXIgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50IHRvIGxpc3RlbiBmb3IuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgTmFtZSBvZiBoYW5kbGVyIG1ldGhvZCBvbiBgdGhpc2AgdG8gY2FsbC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGxpc3Rlbihub2RlLCBldmVudE5hbWUsIG1ldGhvZE5hbWUpIHtcbiAgICAgIG5vZGUgPSAvKiogQHR5cGUgeyFFdmVudFRhcmdldH0gKi8gKG5vZGUgfHwgdGhpcyk7XG4gICAgICBsZXQgaGJsID0gdGhpcy5fX2JvdW5kTGlzdGVuZXJzIHx8XG4gICAgICAgICh0aGlzLl9fYm91bmRMaXN0ZW5lcnMgPSBuZXcgV2Vha01hcCgpKTtcbiAgICAgIGxldCBibCA9IGhibC5nZXQobm9kZSk7XG4gICAgICBpZiAoIWJsKSB7XG4gICAgICAgIGJsID0ge307XG4gICAgICAgIGhibC5zZXQobm9kZSwgYmwpO1xuICAgICAgfVxuICAgICAgbGV0IGtleSA9IGV2ZW50TmFtZSArIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoIWJsW2tleV0pIHtcbiAgICAgICAgYmxba2V5XSA9IHRoaXMuX2FkZE1ldGhvZEV2ZW50TGlzdGVuZXJUb05vZGUoXG4gICAgICAgICAgICAvKiogQHR5cGUgeyFOb2RlfSAqLyAobm9kZSksIGV2ZW50TmFtZSwgbWV0aG9kTmFtZSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSBhbiBldmVudCBsaXN0ZW5lciBmcm9tIGEgZ2l2ZW4gZWxlbWVudCxcbiAgICAgKiBsYXRlIGJvdW5kIHRvIGEgbmFtZWQgbWV0aG9kIG9uIHRoaXMgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P0V2ZW50VGFyZ2V0fSBub2RlIEVsZW1lbnQgdG8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50IHRvIHN0b3AgbGlzdGVuaW5nIHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIE5hbWUgb2YgaGFuZGxlciBtZXRob2Qgb24gYHRoaXNgIHRvIG5vdCBjYWxsXG4gICAgIGFueW1vcmUuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICB1bmxpc3Rlbihub2RlLCBldmVudE5hbWUsIG1ldGhvZE5hbWUpIHtcbiAgICAgIG5vZGUgPSAvKiogQHR5cGUgeyFFdmVudFRhcmdldH0gKi8gKG5vZGUgfHwgdGhpcyk7XG4gICAgICBsZXQgYmwgPSB0aGlzLl9fYm91bmRMaXN0ZW5lcnMgJiZcbiAgICAgICAgICB0aGlzLl9fYm91bmRMaXN0ZW5lcnMuZ2V0KC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovIChub2RlKSk7XG4gICAgICBsZXQga2V5ID0gZXZlbnROYW1lICsgbWV0aG9kTmFtZTtcbiAgICAgIGxldCBoYW5kbGVyID0gYmwgJiYgYmxba2V5XTtcbiAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJGcm9tTm9kZShcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGV9ICovIChub2RlKSwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgYmxba2V5XSA9IC8qKiBAdHlwZSB7P30gKi8gKG51bGwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHNjcm9sbGluZyBiZWhhdmlvciB0byBhbGwgZGlyZWN0aW9uLCBvbmUgZGlyZWN0aW9uLCBvciBub25lLlxuICAgICAqXG4gICAgICogVmFsaWQgc2Nyb2xsIGRpcmVjdGlvbnM6XG4gICAgICogICAtICdhbGwnOiBzY3JvbGwgaW4gYW55IGRpcmVjdGlvblxuICAgICAqICAgLSAneCc6IHNjcm9sbCBvbmx5IGluIHRoZSAneCcgZGlyZWN0aW9uXG4gICAgICogICAtICd5Jzogc2Nyb2xsIG9ubHkgaW4gdGhlICd5JyBkaXJlY3Rpb25cbiAgICAgKiAgIC0gJ25vbmUnOiBkaXNhYmxlIHNjcm9sbGluZyBmb3IgdGhpcyBub2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGRpcmVjdGlvbiBEaXJlY3Rpb24gdG8gYWxsb3cgc2Nyb2xsaW5nXG4gICAgICogRGVmYXVsdHMgdG8gYGFsbGAuXG4gICAgICogQHBhcmFtIHtFbGVtZW50PX0gbm9kZSBFbGVtZW50IHRvIGFwcGx5IHNjcm9sbCBkaXJlY3Rpb24gc2V0dGluZy5cbiAgICAgKiBEZWZhdWx0cyB0byBgdGhpc2AuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzZXRTY3JvbGxEaXJlY3Rpb24oZGlyZWN0aW9uLCBub2RlKSB7XG4gICAgICBzZXRUb3VjaEFjdGlvbihcbiAgICAgICAgICAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAobm9kZSB8fCB0aGlzKSxcbiAgICAgICAgICBESVJFQ1RJT05fTUFQW2RpcmVjdGlvbl0gfHwgJ2F1dG8nKTtcbiAgICB9XG4gICAgLyogKioqKiBFbmQgRXZlbnRzICoqKiogKi9cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBydW4gYHF1ZXJ5U2VsZWN0b3JgIG9uIHRoaXMgbG9jYWwgRE9NIHNjb3BlLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYWxscyBgUG9seW1lci5kb20odGhpcy5yb290KS5xdWVyeVNlbGVjdG9yKHNsY3RyKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2xjdHIgU2VsZWN0b3IgdG8gcnVuIG9uIHRoaXMgbG9jYWwgRE9NIHNjb3BlXG4gICAgICogQHJldHVybiB7RWxlbWVudH0gRWxlbWVudCBmb3VuZCBieSB0aGUgc2VsZWN0b3IsIG9yIG51bGwgaWYgbm90IGZvdW5kLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgICQkKHNsY3RyKSB7XG4gICAgICAvLyBOb3RlLCBubyBuZWVkIHRvIGB3cmFwYCB0aGlzIGJlY2F1c2Ugcm9vdCBpcyBhbHdheXMgcGF0Y2hlZFxuICAgICAgcmV0dXJuIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKHNsY3RyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGVsZW1lbnQgd2hvc2UgbG9jYWwgZG9tIHdpdGhpbiB3aGljaCB0aGlzIGVsZW1lbnRcbiAgICAgKiBpcyBjb250YWluZWQuIFRoaXMgaXMgYSBzaG9ydGhhbmQgZm9yXG4gICAgICogYHRoaXMuZ2V0Um9vdE5vZGUoKS5ob3N0YC5cbiAgICAgKiBAdGhpcyB7RWxlbWVudH1cbiAgICAgKiBAcmV0dXJuIHs/Tm9kZX0gVGhlIGVsZW1lbnQgd2hvc2UgbG9jYWwgZG9tIHdpdGhpbiB3aGljaCB0aGlzIGVsZW1lbnQgaXNcbiAgICAgKiBjb250YWluZWQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZ2V0IGRvbUhvc3QoKSB7XG4gICAgICBsZXQgcm9vdCA9IHdyYXAodGhpcykuZ2V0Um9vdE5vZGUoKTtcbiAgICAgIHJldHVybiAocm9vdCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpID8gLyoqIEB0eXBlIHtTaGFkb3dSb290fSAqLyAocm9vdCkuaG9zdCA6IHJvb3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9yY2UgdGhpcyBlbGVtZW50IHRvIGRpc3RyaWJ1dGUgaXRzIGNoaWxkcmVuIHRvIGl0cyBsb2NhbCBkb20uXG4gICAgICogVGhpcyBzaG91bGQgbm90IGJlIG5lY2Vzc2FyeSBhcyBvZiBQb2x5bWVyIDIuMC4yIGFuZCBpcyBwcm92aWRlZCBvbmx5XG4gICAgICogZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZGlzdHJpYnV0ZUNvbnRlbnQoKSB7XG4gICAgICBjb25zdCB0aGlzRWwgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovICh0aGlzKTtcbiAgICAgIGNvbnN0IGRvbUFwaSA9IC8qKiBAdHlwZSB7UG9seW1lckRvbUFwaX0gKi8oZG9tKHRoaXNFbCkpO1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeURPTSAmJiBkb21BcGkuc2hhZG93Um9vdCkge1xuICAgICAgICBTaGFkeURPTS5mbHVzaCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIG5vZGVzIHRoYXQgYXJlIHRoZSBlZmZlY3RpdmUgY2hpbGROb2Rlcy4gVGhlIGVmZmVjdGl2ZVxuICAgICAqIGNoaWxkTm9kZXMgbGlzdCBpcyB0aGUgc2FtZSBhcyB0aGUgZWxlbWVudCdzIGNoaWxkTm9kZXMgZXhjZXB0IHRoYXRcbiAgICAgKiBhbnkgYDxjb250ZW50PmAgZWxlbWVudHMgYXJlIHJlcGxhY2VkIHdpdGggdGhlIGxpc3Qgb2Ygbm9kZXMgZGlzdHJpYnV0ZWRcbiAgICAgKiB0byB0aGUgYDxjb250ZW50PmAsIHRoZSByZXN1bHQgb2YgaXRzIGBnZXREaXN0cmlidXRlZE5vZGVzYCBtZXRob2QuXG4gICAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gTGlzdCBvZiBlZmZlY3RpdmUgY2hpbGQgbm9kZXMuXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9IExlZ2FjeUVsZW1lbnRNaXhpbiBtdXN0IGJlIGFwcGxpZWQgdG8gYW5cbiAgICAgKiAgICAgSFRNTEVsZW1lbnRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBnZXRFZmZlY3RpdmVDaGlsZE5vZGVzKCkge1xuICAgICAgY29uc3QgdGhpc0VsID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGhpcyk7XG4gICAgICBjb25zdCBkb21BcGkgPSAvKiogQHR5cGUge1BvbHltZXJEb21BcGl9ICovIChkb20odGhpc0VsKSk7XG4gICAgICByZXR1cm4gZG9tQXBpLmdldEVmZmVjdGl2ZUNoaWxkTm9kZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBub2RlcyBkaXN0cmlidXRlZCB3aXRoaW4gdGhpcyBlbGVtZW50IHRoYXQgbWF0Y2hcbiAgICAgKiBgc2VsZWN0b3JgLiBUaGVzZSBjYW4gYmUgZG9tIGNoaWxkcmVuIG9yIGVsZW1lbnRzIGRpc3RyaWJ1dGVkIHRvXG4gICAgICogY2hpbGRyZW4gdGhhdCBhcmUgaW5zZXJ0aW9uIHBvaW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gcnVuLlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IExpc3Qgb2YgZGlzdHJpYnV0ZWQgZWxlbWVudHMgdGhhdCBtYXRjaCBzZWxlY3Rvci5cbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c30gTGVnYWN5RWxlbWVudE1peGluIG11c3QgYmUgYXBwbGllZCB0byBhblxuICAgICAqIEhUTUxFbGVtZW50XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgcXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gICAgICBjb25zdCB0aGlzRWwgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovICh0aGlzKTtcbiAgICAgIGNvbnN0IGRvbUFwaSA9IC8qKiBAdHlwZSB7UG9seW1lckRvbUFwaX0gKi8gKGRvbSh0aGlzRWwpKTtcbiAgICAgIHJldHVybiBkb21BcGkucXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBlbGVtZW50cyB0aGF0IGFyZSB0aGUgZWZmZWN0aXZlIGNoaWxkcmVuLiBUaGUgZWZmZWN0aXZlXG4gICAgICogY2hpbGRyZW4gbGlzdCBpcyB0aGUgc2FtZSBhcyB0aGUgZWxlbWVudCdzIGNoaWxkcmVuIGV4Y2VwdCB0aGF0XG4gICAgICogYW55IGA8Y29udGVudD5gIGVsZW1lbnRzIGFyZSByZXBsYWNlZCB3aXRoIHRoZSBsaXN0IG9mIGVsZW1lbnRzXG4gICAgICogZGlzdHJpYnV0ZWQgdG8gdGhlIGA8Y29udGVudD5gLlxuICAgICAqXG4gICAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gTGlzdCBvZiBlZmZlY3RpdmUgY2hpbGRyZW4uXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZ2V0RWZmZWN0aXZlQ2hpbGRyZW4oKSB7XG4gICAgICBsZXQgbGlzdCA9IHRoaXMuZ2V0RWZmZWN0aXZlQ2hpbGROb2RlcygpO1xuICAgICAgcmV0dXJuIGxpc3QuZmlsdGVyKGZ1bmN0aW9uKC8qKiBAdHlwZSB7IU5vZGV9ICovIG4pIHtcbiAgICAgICAgcmV0dXJuIChuLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIG9mIHRleHQgY29udGVudCB0aGF0IGlzIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxuICAgICAqIHRleHQgY29udGVudCdzIG9mIHRoZSBlbGVtZW50J3MgZWZmZWN0aXZlIGNoaWxkTm9kZXMgKHRoZSBlbGVtZW50c1xuICAgICAqIHJldHVybmVkIGJ5IDxhIGhyZWY9XCIjZ2V0RWZmZWN0aXZlQ2hpbGROb2Rlcz5nZXRFZmZlY3RpdmVDaGlsZE5vZGVzPC9hPi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTGlzdCBvZiBlZmZlY3RpdmUgY2hpbGRyZW4uXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZ2V0RWZmZWN0aXZlVGV4dENvbnRlbnQoKSB7XG4gICAgICBsZXQgY24gPSB0aGlzLmdldEVmZmVjdGl2ZUNoaWxkTm9kZXMoKTtcbiAgICAgIGxldCB0YyA9IFtdO1xuICAgICAgZm9yIChsZXQgaT0wLCBjOyAoYyA9IGNuW2ldKTsgaSsrKSB7XG4gICAgICAgIGlmIChjLm5vZGVUeXBlICE9PSBOb2RlLkNPTU1FTlRfTk9ERSkge1xuICAgICAgICAgIHRjLnB1c2goYy50ZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0Yy5qb2luKCcnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlZmZlY3RpdmUgY2hpbGROb2RlIHdpdGhpbiB0aGlzIGVsZW1lbnQgdGhhdFxuICAgICAqIG1hdGNoIGBzZWxlY3RvcmAuIFRoZXNlIGNhbiBiZSBkb20gY2hpbGQgbm9kZXMgb3IgZWxlbWVudHMgZGlzdHJpYnV0ZWRcbiAgICAgKiB0byBjaGlsZHJlbiB0aGF0IGFyZSBpbnNlcnRpb24gcG9pbnRzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBTZWxlY3RvciB0byBydW4uXG4gICAgICogQHJldHVybiB7Tm9kZX0gRmlyc3QgZWZmZWN0aXZlIGNoaWxkIG5vZGUgdGhhdCBtYXRjaGVzIHNlbGVjdG9yLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHF1ZXJ5RWZmZWN0aXZlQ2hpbGRyZW4oc2VsZWN0b3IpIHtcbiAgICAgIGxldCBlJCA9IHRoaXMucXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICAgIHJldHVybiBlJCAmJiBlJFswXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBlZmZlY3RpdmUgY2hpbGROb2RlcyB3aXRoaW4gdGhpcyBlbGVtZW50IHRoYXRcbiAgICAgKiBtYXRjaCBgc2VsZWN0b3JgLiBUaGVzZSBjYW4gYmUgZG9tIGNoaWxkIG5vZGVzIG9yIGVsZW1lbnRzIGRpc3RyaWJ1dGVkXG4gICAgICogdG8gY2hpbGRyZW4gdGhhdCBhcmUgaW5zZXJ0aW9uIHBvaW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gcnVuLlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IExpc3Qgb2YgZWZmZWN0aXZlIGNoaWxkIG5vZGVzIHRoYXQgbWF0Y2hcbiAgICAgKiAgICAgc2VsZWN0b3IuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgcXVlcnlBbGxFZmZlY3RpdmVDaGlsZHJlbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMucXVlcnlEaXN0cmlidXRlZEVsZW1lbnRzKHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBub2RlcyBkaXN0cmlidXRlZCB0byB0aGlzIGVsZW1lbnQncyBgPHNsb3Q+YC5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgZWxlbWVudCBjb250YWlucyBtb3JlIHRoYW4gb25lIGA8c2xvdD5gIGluIGl0cyBsb2NhbCBET00sXG4gICAgICogYW4gb3B0aW9uYWwgc2VsZWN0b3IgbWF5IGJlIHBhc3NlZCB0byBjaG9vc2UgdGhlIGRlc2lyZWQgY29udGVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gc2xjdHIgQ1NTIHNlbGVjdG9yIHRvIGNob29zZSB0aGUgZGVzaXJlZFxuICAgICAqICAgYDxzbG90PmAuICBEZWZhdWx0cyB0byBgY29udGVudGAuXG4gICAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gTGlzdCBvZiBkaXN0cmlidXRlZCBub2RlcyBmb3IgdGhlIGA8c2xvdD5gLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldENvbnRlbnRDaGlsZE5vZGVzKHNsY3RyKSB7XG4gICAgICAvLyBOb3RlLCBubyBuZWVkIHRvIGB3cmFwYCB0aGlzIGJlY2F1c2Ugcm9vdCBpcyBhbHdheXNcbiAgICAgIGxldCBjb250ZW50ID0gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3Ioc2xjdHIgfHwgJ3Nsb3QnKTtcbiAgICAgIHJldHVybiBjb250ZW50ID9cbiAgICAgICAgICAvKiogQHR5cGUge1BvbHltZXJEb21BcGl9ICovIChkb20oY29udGVudCkpLmdldERpc3RyaWJ1dGVkTm9kZXMoKSA6XG4gICAgICAgICAgW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgZWxlbWVudCBjaGlsZHJlbiBkaXN0cmlidXRlZCB0byB0aGlzIGVsZW1lbnQnc1xuICAgICAqIGA8c2xvdD5gLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBlbGVtZW50IGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgYDxzbG90PmAgaW4gaXRzXG4gICAgICogbG9jYWwgRE9NLCBhbiBvcHRpb25hbCBzZWxlY3RvciBtYXkgYmUgcGFzc2VkIHRvIGNob29zZSB0aGUgZGVzaXJlZFxuICAgICAqIGNvbnRlbnQuICBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gYGdldENvbnRlbnRDaGlsZE5vZGVzYCBpbiB0aGF0IG9ubHlcbiAgICAgKiBlbGVtZW50cyBhcmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IHNsY3RyIENTUyBzZWxlY3RvciB0byBjaG9vc2UgdGhlIGRlc2lyZWRcbiAgICAgKiAgIGA8Y29udGVudD5gLiAgRGVmYXVsdHMgdG8gYGNvbnRlbnRgLlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhSFRNTEVsZW1lbnQ+fSBMaXN0IG9mIGRpc3RyaWJ1dGVkIG5vZGVzIGZvciB0aGVcbiAgICAgKiAgIGA8c2xvdD5gLlxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldENvbnRlbnRDaGlsZHJlbihzbGN0cikge1xuICAgICAgbGV0IGNoaWxkcmVuID0gLyoqIEB0eXBlIHshQXJyYXk8IUhUTUxFbGVtZW50Pn0gKi8odGhpcy5nZXRDb250ZW50Q2hpbGROb2RlcyhzbGN0cikuZmlsdGVyKGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgcmV0dXJuIChuLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSk7XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgYW4gZWxlbWVudCBpcyBpbiB0aGlzIGVsZW1lbnQncyBsaWdodCBET00gdHJlZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P05vZGV9IG5vZGUgVGhlIGVsZW1lbnQgdG8gYmUgY2hlY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIG5vZGUgaXMgaW4gdGhpcyBlbGVtZW50J3MgbGlnaHQgRE9NIHRyZWUuXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9IExlZ2FjeUVsZW1lbnRNaXhpbiBtdXN0IGJlIGFwcGxpZWQgdG8gYW5cbiAgICAgKiBIVE1MRWxlbWVudFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGlzTGlnaHREZXNjZW5kYW50KG5vZGUpIHtcbiAgICAgIGNvbnN0IHRoaXNOb2RlID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAodGhpcyk7XG4gICAgICByZXR1cm4gdGhpc05vZGUgIT09IG5vZGUgJiYgd3JhcCh0aGlzTm9kZSkuY29udGFpbnMobm9kZSkgJiZcbiAgICAgICAgd3JhcCh0aGlzTm9kZSkuZ2V0Um9vdE5vZGUoKSA9PT0gd3JhcChub2RlKS5nZXRSb290Tm9kZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIGFuIGVsZW1lbnQgaXMgaW4gdGhpcyBlbGVtZW50J3MgbG9jYWwgRE9NIHRyZWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFbGVtZW50fSBub2RlIFRoZSBlbGVtZW50IHRvIGJlIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBub2RlIGlzIGluIHRoaXMgZWxlbWVudCdzIGxvY2FsIERPTSB0cmVlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGlzTG9jYWxEZXNjZW5kYW50KG5vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnJvb3QgPT09IHdyYXAobm9kZSkuZ2V0Um9vdE5vZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOby1vcCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIFRoaXMgc2hvdWxkIG5vdyBiZSBoYW5kbGVkIGJ5XG4gICAgICogU2hhZHlDc3MgbGlicmFyeS5cbiAgICAgKiBAcGFyYW0gIHshRWxlbWVudH0gY29udGFpbmVyIENvbnRhaW5lciBlbGVtZW50IHRvIHNjb3BlXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbj19IHNob3VsZE9ic2VydmUgaWYgdHJ1ZSwgc3RhcnQgYSBtdXRhdGlvbiBvYnNlcnZlciBmb3IgYWRkZWQgbm9kZXMgdG8gdGhlIGNvbnRhaW5lclxuICAgICAqIEByZXR1cm4gez9NdXRhdGlvbk9ic2VydmVyfSBSZXR1cm5zIGEgbmV3IE11dGF0aW9uT2JzZXJ2ZXIgb24gYGNvbnRhaW5lcmAgaWYgYHNob3VsZE9ic2VydmVgIGlzIHRydWUuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgc2NvcGVTdWJ0cmVlKGNvbnRhaW5lciwgc2hvdWxkT2JzZXJ2ZSA9IGZhbHNlKSB7XG4gICAgICByZXR1cm4gc2NvcGVTdWJ0cmVlKGNvbnRhaW5lciwgc2hvdWxkT2JzZXJ2ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29tcHV0ZWQgc3R5bGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgVGhlIGNzcyBwcm9wZXJ0eSBuYW1lLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gUmV0dXJucyB0aGUgY29tcHV0ZWQgY3NzIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBgcHJvcGVydHlgLlxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfSBMZWdhY3lFbGVtZW50TWl4aW4gbXVzdCBiZSBhcHBsaWVkIHRvIGFuXG4gICAgICogICAgIEhUTUxFbGVtZW50XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlKHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gc3R5bGVJbnRlcmZhY2UuZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlKC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovKHRoaXMpLCBwcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgLy8gZGVib3VuY2VcblxuICAgIC8qKlxuICAgICAqIENhbGwgYGRlYm91bmNlYCB0byBjb2xsYXBzZSBtdWx0aXBsZSByZXF1ZXN0cyBmb3IgYSBuYW1lZCB0YXNrIGludG9cbiAgICAgKiBvbmUgaW52b2NhdGlvbiB3aGljaCBpcyBtYWRlIGFmdGVyIHRoZSB3YWl0IHRpbWUgaGFzIGVsYXBzZWQgd2l0aFxuICAgICAqIG5vIG5ldyByZXF1ZXN0LiAgSWYgbm8gd2FpdCB0aW1lIGlzIGdpdmVuLCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWRcbiAgICAgKiBhdCBtaWNyb3Rhc2sgdGltaW5nIChndWFyYW50ZWVkIGJlZm9yZSBwYWludCkuXG4gICAgICpcbiAgICAgKiAgICAgZGVib3VuY2VkQ2xpY2tBY3Rpb24oZSkge1xuICAgICAqICAgICAgIC8vIHdpbGwgbm90IGNhbGwgYHByb2Nlc3NDbGlja2AgbW9yZSB0aGFuIG9uY2UgcGVyIDEwMG1zXG4gICAgICogICAgICAgdGhpcy5kZWJvdW5jZSgnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgdGhpcy5wcm9jZXNzQ2xpY2soKTtcbiAgICAgKiAgICAgICB9IDEwMCk7XG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqb2JOYW1lIFN0cmluZyB0byBpZGVudGlmeSB0aGUgZGVib3VuY2Ugam9iLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTp2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCAod2l0aCBgdGhpc2BcbiAgICAgKiAgIGNvbnRleHQpIHdoZW4gdGhlIHdhaXQgdGltZSBlbGFwc2VzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gd2FpdCBPcHRpb25hbCB3YWl0IHRpbWUgaW4gbWlsbGlzZWNvbmRzIChtcykgYWZ0ZXIgdGhlXG4gICAgICogICBsYXN0IHNpZ25hbCB0aGF0IG11c3QgZWxhcHNlIGJlZm9yZSBpbnZva2luZyBgY2FsbGJhY2tgXG4gICAgICogQHJldHVybiB7IU9iamVjdH0gUmV0dXJucyBhIGRlYm91bmNlciBvYmplY3Qgb24gd2hpY2ggZXhpc3RzIHRoZVxuICAgICAqIGZvbGxvd2luZyBtZXRob2RzOiBgaXNBY3RpdmUoKWAgcmV0dXJucyB0cnVlIGlmIHRoZSBkZWJvdW5jZXIgaXNcbiAgICAgKiBhY3RpdmU7IGBjYW5jZWwoKWAgY2FuY2VscyB0aGUgZGVib3VuY2VyIGlmIGl0IGlzIGFjdGl2ZTtcbiAgICAgKiBgZmx1c2goKWAgaW1tZWRpYXRlbHkgaW52b2tlcyB0aGUgZGVib3VuY2VkIGNhbGxiYWNrIGlmIHRoZSBkZWJvdW5jZXJcbiAgICAgKiBpcyBhY3RpdmUuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZGVib3VuY2Uoam9iTmFtZSwgY2FsbGJhY2ssIHdhaXQpIHtcbiAgICAgIHRoaXMuX2RlYm91bmNlcnMgPSB0aGlzLl9kZWJvdW5jZXJzIHx8IHt9O1xuICAgICAgcmV0dXJuIHRoaXMuX2RlYm91bmNlcnNbam9iTmFtZV0gPSBEZWJvdW5jZXIuZGVib3VuY2UoXG4gICAgICAgICAgICB0aGlzLl9kZWJvdW5jZXJzW2pvYk5hbWVdXG4gICAgICAgICAgLCB3YWl0ID4gMCA/IHRpbWVPdXQuYWZ0ZXIod2FpdCkgOiBtaWNyb1Rhc2tcbiAgICAgICAgICAsIGNhbGxiYWNrLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIG5hbWVkIGRlYm91bmNlciBpcyBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gam9iTmFtZSBUaGUgbmFtZSBvZiB0aGUgZGVib3VuY2VyIHN0YXJ0ZWQgd2l0aCBgZGVib3VuY2VgXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZGVib3VuY2VyIGlzIGFjdGl2ZSAoaGFzIG5vdCB5ZXQgZmlyZWQpLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGlzRGVib3VuY2VyQWN0aXZlKGpvYk5hbWUpIHtcbiAgICAgIHRoaXMuX2RlYm91bmNlcnMgPSB0aGlzLl9kZWJvdW5jZXJzIHx8IHt9O1xuICAgICAgbGV0IGRlYm91bmNlciA9IHRoaXMuX2RlYm91bmNlcnNbam9iTmFtZV07XG4gICAgICByZXR1cm4gISEoZGVib3VuY2VyICYmIGRlYm91bmNlci5pc0FjdGl2ZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbW1lZGlhdGVseSBjYWxscyB0aGUgZGVib3VuY2VyIGBjYWxsYmFja2AgYW5kIGluYWN0aXZhdGVzIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpvYk5hbWUgVGhlIG5hbWUgb2YgdGhlIGRlYm91bmNlciBzdGFydGVkIHdpdGggYGRlYm91bmNlYFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZmx1c2hEZWJvdW5jZXIoam9iTmFtZSkge1xuICAgICAgdGhpcy5fZGVib3VuY2VycyA9IHRoaXMuX2RlYm91bmNlcnMgfHwge307XG4gICAgICBsZXQgZGVib3VuY2VyID0gdGhpcy5fZGVib3VuY2Vyc1tqb2JOYW1lXTtcbiAgICAgIGlmIChkZWJvdW5jZXIpIHtcbiAgICAgICAgZGVib3VuY2VyLmZsdXNoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FuY2VscyBhbiBhY3RpdmUgZGVib3VuY2VyLiAgVGhlIGBjYWxsYmFja2Agd2lsbCBub3QgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpvYk5hbWUgVGhlIG5hbWUgb2YgdGhlIGRlYm91bmNlciBzdGFydGVkIHdpdGggYGRlYm91bmNlYFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgY2FuY2VsRGVib3VuY2VyKGpvYk5hbWUpIHtcbiAgICAgIHRoaXMuX2RlYm91bmNlcnMgPSB0aGlzLl9kZWJvdW5jZXJzIHx8IHt9O1xuICAgICAgbGV0IGRlYm91bmNlciA9IHRoaXMuX2RlYm91bmNlcnNbam9iTmFtZV07XG4gICAgICBpZiAoZGVib3VuY2VyKSB7XG4gICAgICAgIGRlYm91bmNlci5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSdW5zIGEgY2FsbGJhY2sgZnVuY3Rpb24gYXN5bmNocm9ub3VzbHkuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IChpZiBubyB3YWl0VGltZSBpcyBzcGVjaWZpZWQpLCBhc3luYyBjYWxsYmFja3MgYXJlIHJ1biBhdFxuICAgICAqIG1pY3JvdGFzayB0aW1pbmcsIHdoaWNoIHdpbGwgb2NjdXIgYmVmb3JlIHBhaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHshRnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBydW4sIGJvdW5kIHRvXG4gICAgICogICAgIGB0aGlzYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHdhaXRUaW1lIFRpbWUgdG8gd2FpdCBiZWZvcmUgY2FsbGluZyB0aGVcbiAgICAgKiAgIGBjYWxsYmFja2AuICBJZiB1bnNwZWNpZmllZCBvciAwLCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBydW4gYXQgbWljcm90YXNrXG4gICAgICogICB0aW1pbmcgKGJlZm9yZSBwYWludCkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBIYW5kbGUgdGhhdCBtYXkgYmUgdXNlZCB0byBjYW5jZWwgdGhlIGFzeW5jIGpvYi5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBhc3luYyhjYWxsYmFjaywgd2FpdFRpbWUpIHtcbiAgICAgIHJldHVybiB3YWl0VGltZSA+IDAgPyB0aW1lT3V0LnJ1bihjYWxsYmFjay5iaW5kKHRoaXMpLCB3YWl0VGltZSkgOlxuICAgICAgICAgIH5taWNyb1Rhc2sucnVuKGNhbGxiYWNrLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgYW4gYXN5bmMgb3BlcmF0aW9uIHN0YXJ0ZWQgd2l0aCBgYXN5bmNgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZSBIYW5kbGUgcmV0dXJuZWQgZnJvbSBvcmlnaW5hbCBgYXN5bmNgIGNhbGwgdG9cbiAgICAgKiAgIGNhbmNlbC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNhbmNlbEFzeW5jKGhhbmRsZSkge1xuICAgICAgaGFuZGxlIDwgMCA/IG1pY3JvVGFzay5jYW5jZWwofmhhbmRsZSkgOlxuICAgICAgICAgIHRpbWVPdXQuY2FuY2VsKGhhbmRsZSk7XG4gICAgfVxuXG4gICAgLy8gb3RoZXJcblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgY3JlYXRpbmcgYW4gZWxlbWVudCBhbmQgY29uZmlndXJpbmcgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIEhUTUwgZWxlbWVudCB0YWcgdG8gY3JlYXRlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcHMgT2JqZWN0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIG9uIHRoZVxuICAgICAqICAgIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm4geyFFbGVtZW50fSBOZXdseSBjcmVhdGVkIGFuZCBjb25maWd1cmVkIGVsZW1lbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgY3JlYXRlKHRhZywgcHJvcHMpIHtcbiAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgaWYgKGVsdC5zZXRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgZWx0LnNldFByb3BlcnRpZXMocHJvcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAobGV0IG4gaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGVsdFtuXSA9IHByb3BzW25dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGVsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb2x5ZmlsbCBmb3IgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcywgd2hpY2ggaXMgc29tZXRpbWVzIHN0aWxsXG4gICAgICogcHJlZml4ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gdGVzdC5cbiAgICAgKiBAcGFyYW0geyFFbGVtZW50PX0gbm9kZSBFbGVtZW50IHRvIHRlc3QgdGhlIHNlbGVjdG9yIGFnYWluc3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZWxlbWVudCBtYXRjaGVzIHRoZSBzZWxlY3Rvci5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBlbGVtZW50TWF0Y2hlcyhzZWxlY3Rvciwgbm9kZSkge1xuICAgICAgcmV0dXJuIG1hdGNoZXNTZWxlY3RvciggKG5vZGUgfHwgdGhpcyksIHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIGFuIEhUTUwgYXR0cmlidXRlIG9uIG9yIG9mZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEhUTUwgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBib29sIEJvb2xlYW4gdG8gZm9yY2UgdGhlIGF0dHJpYnV0ZSBvbiBvciBvZmYuXG4gICAgICogICAgV2hlbiB1bnNwZWNpZmllZCwgdGhlIHN0YXRlIG9mIHRoZSBhdHRyaWJ1dGUgd2lsbCBiZSByZXZlcnNlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBhdHRyaWJ1dGUgbm93IGV4aXN0c1xuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHRvZ2dsZUF0dHJpYnV0ZShuYW1lLCBib29sKSB7XG4gICAgICBsZXQgbm9kZSA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8odGhpcyk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBub2RlID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyhhcmd1bWVudHNbMl0pO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICBib29sID0gIW5vZGUuaGFzQXR0cmlidXRlKG5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgd3JhcChub2RlKS5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXAobm9kZSkucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIGEgQ1NTIGNsYXNzIG9uIG9yIG9mZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIENTUyBjbGFzcyBuYW1lXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gYm9vbCBCb29sZWFuIHRvIGZvcmNlIHRoZSBjbGFzcyBvbiBvciBvZmYuXG4gICAgICogICAgV2hlbiB1bnNwZWNpZmllZCwgdGhlIHN0YXRlIG9mIHRoZSBjbGFzcyB3aWxsIGJlIHJldmVyc2VkLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudD19IG5vZGUgTm9kZSB0byB0YXJnZXQuICBEZWZhdWx0cyB0byBgdGhpc2AuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICB0b2dnbGVDbGFzcyhuYW1lLCBib29sLCBub2RlKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobm9kZSB8fCB0aGlzKTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgYm9vbCA9ICFub2RlLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChib29sKSB7XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcm9zcy1wbGF0Zm9ybSBoZWxwZXIgZm9yIHNldHRpbmcgYW4gZWxlbWVudCdzIENTUyBgdHJhbnNmb3JtYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2Zvcm1UZXh0IFRyYW5zZm9ybSBzZXR0aW5nLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudD19IG5vZGUgRWxlbWVudCB0byBhcHBseSB0aGUgdHJhbnNmb3JtIHRvLlxuICAgICAqIERlZmF1bHRzIHRvIGB0aGlzYFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgdHJhbnNmb3JtKHRyYW5zZm9ybVRleHQsIG5vZGUpIHtcbiAgICAgIG5vZGUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChub2RlIHx8IHRoaXMpO1xuICAgICAgbm9kZS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1UZXh0O1xuICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1UZXh0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyb3NzLXBsYXRmb3JtIGhlbHBlciBmb3Igc2V0dGluZyBhbiBlbGVtZW50J3MgQ1NTIGB0cmFuc2xhdGUzZGBcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geCBYIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHkgWSBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB6IFogb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7RWxlbWVudD19IG5vZGUgRWxlbWVudCB0byBhcHBseSB0aGUgdHJhbnNmb3JtIHRvLlxuICAgICAqIERlZmF1bHRzIHRvIGB0aGlzYC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHRyYW5zbGF0ZTNkKHgsIHksIHosIG5vZGUpIHtcbiAgICAgIG5vZGUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChub2RlIHx8IHRoaXMpO1xuICAgICAgdGhpcy50cmFuc2Zvcm0oJ3RyYW5zbGF0ZTNkKCcgKyB4ICsgJywnICsgeSArICcsJyArIHogKyAnKScsIG5vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIGFuIGFycmF5LCBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYXJyYXkgaXMgc3BlY2lmaWVkIGJ5IHBhdGgsIGEgY2hhbmdlIG5vdGlmaWNhdGlvbiBpc1xuICAgICAqIGdlbmVyYXRlZCwgc28gdGhhdCBvYnNlcnZlcnMsIGRhdGEgYmluZGluZ3MgYW5kIGNvbXB1dGVkXG4gICAgICogcHJvcGVydGllcyB3YXRjaGluZyB0aGF0IHBhdGggY2FuIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhcnJheSBpcyBwYXNzZWQgZGlyZWN0bHksICoqbm8gY2hhbmdlXG4gICAgICogbm90aWZpY2F0aW9uIGlzIGdlbmVyYXRlZCoqLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8bnVtYmVyfHN0cmluZz59IGFycmF5T3JQYXRoIFBhdGggdG8gYXJyYXkgZnJvbVxuICAgICAqICAgICB3aGljaCB0byByZW1vdmUgdGhlIGl0ZW1cbiAgICAgKiAgIChvciB0aGUgYXJyYXkgaXRzZWxmKS5cbiAgICAgKiBAcGFyYW0geyp9IGl0ZW0gSXRlbSB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFycmF5IGNvbnRhaW5pbmcgaXRlbSByZW1vdmVkLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGFycmF5RGVsZXRlKGFycmF5T3JQYXRoLCBpdGVtKSB7XG4gICAgICBsZXQgaW5kZXg7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJheU9yUGF0aCkpIHtcbiAgICAgICAgaW5kZXggPSBhcnJheU9yUGF0aC5pbmRleE9mKGl0ZW0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIHJldHVybiBhcnJheU9yUGF0aC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgYXJyID0gZ2V0KHRoaXMsIGFycmF5T3JQYXRoKTtcbiAgICAgICAgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zcGxpY2UoYXJyYXlPclBhdGgsIGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gbG9nZ2luZ1xuXG4gICAgLyoqXG4gICAgICogRmFjYWRlcyBgY29uc29sZS5sb2dgL2B3YXJuYC9gZXJyb3JgIGFzIG92ZXJyaWRlIHBvaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsIE9uZSBvZiAnbG9nJywgJ3dhcm4nLCAnZXJyb3InXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJncyBBcnJheSBvZiBzdHJpbmdzIG9yIG9iamVjdHMgdG8gbG9nXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfbG9nZ2VyKGxldmVsLCBhcmdzKSB7XG4gICAgICAvLyBhY2NlcHQgWydmb28nLCAnYmFyJ10gYW5kIFtbJ2ZvbycsICdiYXInXV1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3MpICYmIGFyZ3MubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgICAgYXJncyA9IGFyZ3NbMF07XG4gICAgICB9XG4gICAgICBzd2l0Y2gobGV2ZWwpIHtcbiAgICAgICAgY2FzZSAnbG9nJzpcbiAgICAgICAgY2FzZSAnd2Fybic6XG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICBjb25zb2xlW2xldmVsXSguLi5hcmdzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGYWNhZGVzIGBjb25zb2xlLmxvZ2AgYXMgYW4gb3ZlcnJpZGUgcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgQXJyYXkgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHRvIGxvZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2xvZyguLi5hcmdzKSB7XG4gICAgICB0aGlzLl9sb2dnZXIoJ2xvZycsIGFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZhY2FkZXMgYGNvbnNvbGUud2FybmAgYXMgYW4gb3ZlcnJpZGUgcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgQXJyYXkgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHRvIGxvZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3dhcm4oLi4uYXJncykge1xuICAgICAgdGhpcy5fbG9nZ2VyKCd3YXJuJywgYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmFjYWRlcyBgY29uc29sZS5lcnJvcmAgYXMgYW4gb3ZlcnJpZGUgcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgQXJyYXkgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHRvIGxvZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2Vycm9yKC4uLmFyZ3MpIHtcbiAgICAgIHRoaXMuX2xvZ2dlcignZXJyb3InLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgbWVzc2FnZSB1c2luZyB0aGUgZWxlbWVudCB0eXBlIGFuIGEgbWV0aG9kIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZSBNZXRob2QgbmFtZSB0byBhc3NvY2lhdGUgd2l0aCBtZXNzYWdlXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIEFycmF5IG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB0byBsb2dcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQXJyYXkgd2l0aCBmb3JtYXR0aW5nIGluZm9ybWF0aW9uIGZvciBgY29uc29sZWBcbiAgICAgKiAgIGxvZ2dpbmcuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2xvZ2YobWV0aG9kTmFtZSwgLi4uYXJncykge1xuICAgICAgcmV0dXJuIFsnWyVzOjolc10nLCB0aGlzLmlzLCBtZXRob2ROYW1lLCAuLi5hcmdzXTtcbiAgICB9XG5cbiAgfVxuXG4gIExlZ2FjeUVsZW1lbnQucHJvdG90eXBlLmlzID0gJyc7XG5cbiAgcmV0dXJuIExlZ2FjeUVsZW1lbnQ7XG59KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCB7IExlZ2FjeUVsZW1lbnRNaXhpbiB9IGZyb20gJy4vbGVnYWN5LWVsZW1lbnQtbWl4aW4uanMnO1xuaW1wb3J0IHsgbGVnYWN5T3B0aW1pemF0aW9ucyB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcblxuY29uc3QgbGlmZWN5Y2xlUHJvcHMgPSB7XG4gIGF0dGFjaGVkOiB0cnVlLFxuICBkZXRhY2hlZDogdHJ1ZSxcbiAgcmVhZHk6IHRydWUsXG4gIGNyZWF0ZWQ6IHRydWUsXG4gIGJlZm9yZVJlZ2lzdGVyOiB0cnVlLFxuICByZWdpc3RlcmVkOiB0cnVlLFxuICBhdHRyaWJ1dGVDaGFuZ2VkOiB0cnVlLFxuICBsaXN0ZW5lcnM6IHRydWUsXG4gIGhvc3RBdHRyaWJ1dGVzOiB0cnVlXG59O1xuXG5jb25zdCBleGNsdWRlT25JbmZvID0ge1xuICBhdHRhY2hlZDogdHJ1ZSxcbiAgZGV0YWNoZWQ6IHRydWUsXG4gIHJlYWR5OiB0cnVlLFxuICBjcmVhdGVkOiB0cnVlLFxuICBiZWZvcmVSZWdpc3RlcjogdHJ1ZSxcbiAgcmVnaXN0ZXJlZDogdHJ1ZSxcbiAgYXR0cmlidXRlQ2hhbmdlZDogdHJ1ZSxcbiAgYmVoYXZpb3JzOiB0cnVlLFxuICBfbm9BY2Nlc3NvcnM6IHRydWVcbn07XG5cbmNvbnN0IGV4Y2x1ZGVPbkJlaGF2aW9ycyA9IE9iamVjdC5hc3NpZ24oe1xuICBsaXN0ZW5lcnM6IHRydWUsXG4gIGhvc3RBdHRyaWJ1dGVzOiB0cnVlLFxuICBwcm9wZXJ0aWVzOiB0cnVlLFxuICBvYnNlcnZlcnM6IHRydWUsXG59LCBleGNsdWRlT25JbmZvKTtcblxuZnVuY3Rpb24gY29weVByb3BlcnRpZXMoc291cmNlLCB0YXJnZXQsIGV4Y2x1ZGVQcm9wcykge1xuICBjb25zdCBub0FjY2Vzc29ycyA9IHNvdXJjZS5fbm9BY2Nlc3NvcnM7XG4gIGNvbnN0IHByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2UpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnR5TmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgcCA9IHByb3BlcnR5TmFtZXNbaV07XG4gICAgaWYgKHAgaW4gZXhjbHVkZVByb3BzKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG5vQWNjZXNzb3JzKSB7XG4gICAgICB0YXJnZXRbcF0gPSBzb3VyY2VbcF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBwKTtcbiAgICAgIGlmIChwZCkge1xuICAgICAgICAvLyBlbnN1cmUgcHJvcGVydHkgaXMgY29uZmlndXJhYmxlIHNvIHRoYXQgYSBsYXRlciBiZWhhdmlvciBjYW5cbiAgICAgICAgLy8gcmUtY29uZmlndXJlIGl0LlxuICAgICAgICBwZC5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwLCBwZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhIFwibGVnYWN5XCIgYmVoYXZpb3Igb3IgYXJyYXkgb2YgYmVoYXZpb3JzIHRvIHRoZSBwcm92aWRlZCBjbGFzcy5cbiAqXG4gKiBOb3RlOiB0aGlzIG1ldGhvZCB3aWxsIGF1dG9tYXRpY2FsbHkgYWxzbyBhcHBseSB0aGUgYExlZ2FjeUVsZW1lbnRNaXhpbmBcbiAqIHRvIGVuc3VyZSB0aGF0IGFueSBsZWdhY3kgYmVoYXZpb3JzIGNhbiByZWx5IG9uIGxlZ2FjeSBQb2x5bWVyIEFQSSBvblxuICogdGhlIHVuZGVybHlpbmcgZWxlbWVudC5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0geyFPYmplY3R8IUFycmF5PCFPYmplY3Q+fSBiZWhhdmlvcnMgQmVoYXZpb3Igb2JqZWN0IG9yIGFycmF5IG9mIGJlaGF2aW9ycy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBrbGFzcyBFbGVtZW50IGNsYXNzLlxuICogQHJldHVybiB7P30gUmV0dXJucyBhIG5ldyBFbGVtZW50IGNsYXNzIGV4dGVuZGVkIGJ5IHRoZVxuICogcGFzc2VkIGluIGBiZWhhdmlvcnNgIGFuZCBhbHNvIGJ5IGBMZWdhY3lFbGVtZW50TWl4aW5gLlxuICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHMsIGNoZWNrVHlwZXN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtaXhpbkJlaGF2aW9ycyhiZWhhdmlvcnMsIGtsYXNzKSB7XG4gIHJldHVybiBHZW5lcmF0ZUNsYXNzRnJvbUluZm8oe30sIExlZ2FjeUVsZW1lbnRNaXhpbihrbGFzcyksIGJlaGF2aW9ycyk7XG59XG5cbi8vIE5PVEU6XG4vLyAxLnhcbi8vIEJlaGF2aW9ycyB3ZXJlIG1peGVkIGluICppbiByZXZlcnNlIG9yZGVyKiBhbmQgZGUtZHVwZWQgb24gdGhlIGZseS5cbi8vIFRoZSBydWxlIHdhcyB0aGF0IGJlaGF2aW9yIHByb3BlcnRpZXMgd2VyZSBjb3BpZWQgb250byB0aGUgZWxlbWVudFxuLy8gcHJvdG90eXBlIGlmIGFuZCBvbmx5IGlmIHRoZSBwcm9wZXJ0eSBkaWQgbm90IGFscmVhZHkgZXhpc3QuXG4vLyBHaXZlbjogUG9seW1lcnsgYmVoYXZpb3JzOiBbQSwgQiwgQywgQSwgQl19LCBwcm9wZXJ0eSBjb3B5IG9yZGVyIHdhczpcbi8vICgxKSwgQiwgKDIpLCBBLCAoMykgQy4gVGhpcyBtZWFucyBwcm90b3R5cGUgcHJvcGVydGllcyB3aW4gb3ZlclxuLy8gQiBwcm9wZXJ0aWVzIHdpbiBvdmVyIEEgd2luIG92ZXIgQy4gVGhpcyBtaXJyb3JzIHdoYXQgd291bGQgaGFwcGVuXG4vLyB3aXRoIGluaGVyaXRhbmNlIGlmIGVsZW1lbnQgZXh0ZW5kZWQgQiBleHRlbmRlZCBBIGV4dGVuZGVkIEMuXG4vL1xuLy8gQWdhaW4gZ2l2ZW4sIFBvbHltZXJ7IGJlaGF2aW9yczogW0EsIEIsIEMsIEEsIEJdfSwgdGhlIHJlc3VsdGluZ1xuLy8gYGJlaGF2aW9yc2AgYXJyYXkgd2FzIFtDLCBBLCBCXS5cbi8vIEJlaGF2aW9yIGxpZmVjeWNsZSBtZXRob2RzIHdlcmUgY2FsbGVkIGluIGJlaGF2aW9yIGFycmF5IG9yZGVyXG4vLyBmb2xsb3dlZCBieSB0aGUgZWxlbWVudCwgZS5nLiAoMSkgQy5jcmVhdGVkLCAoMikgQS5jcmVhdGVkLFxuLy8gKDMpIEIuY3JlYXRlZCwgKDQpIGVsZW1lbnQuY3JlYXRlZC4gVGhlcmUgd2FzIG5vIHN1cHBvcnQgZm9yXG4vLyBzdXBlciwgYW5kIFwic3VwZXItYmVoYXZpb3JcIiBtZXRob2RzIHdlcmUgY2FsbGFibGUgb25seSBieSBuYW1lKS5cbi8vXG4vLyAyLnhcbi8vIEJlaGF2aW9ycyBhcmUgbWFkZSBpbnRvIHByb3BlciBtaXhpbnMgd2hpY2ggbGl2ZSBpbiB0aGVcbi8vIGVsZW1lbnQncyBwcm90b3R5cGUgY2hhaW4uIEJlaGF2aW9ycyBhcmUgcGxhY2VkIGluIHRoZSBlbGVtZW50IHByb3RvdHlwZVxuLy8gZWxkZXN0IHRvIHlvdW5nZXN0IGFuZCBkZS1kdXBlZCB5b3VuZ2VzdCB0byBvbGRlc3Q6XG4vLyBTbywgZmlyc3QgW0EsIEIsIEMsIEEsIEJdIGJlY29tZXMgW0MsIEEsIEJdIHRoZW4sXG4vLyB0aGUgZWxlbWVudCBwcm90b3R5cGUgYmVjb21lcyAob2xkZXN0KSAoMSkgUG9seW1lckVsZW1lbnQsICgyKSBjbGFzcyhDKSxcbi8vICgzKSBjbGFzcyhBKSwgKDQpIGNsYXNzKEIpLCAoNSkgY2xhc3MoUG9seW1lcih7Li4ufSkpLlxuLy8gUmVzdWx0OlxuLy8gVGhpcyBtZWFucyBlbGVtZW50IHByb3BlcnRpZXMgd2luIG92ZXIgQiBwcm9wZXJ0aWVzIHdpbiBvdmVyIEEgd2luXG4vLyBvdmVyIEMuIChzYW1lIGFzIDEueClcbi8vIElmIGxpZmVjeWNsZSBpcyBjYWxsZWQgKHN1cGVyIHRoZW4gbWUpLCBvcmRlciBpc1xuLy8gKDEpIEMuY3JlYXRlZCwgKDIpIEEuY3JlYXRlZCwgKDMpIEIuY3JlYXRlZCwgKDQpIGVsZW1lbnQuY3JlYXRlZFxuLy8gKGFnYWluIHNhbWUgYXMgMS54KVxuZnVuY3Rpb24gYXBwbHlCZWhhdmlvcnMocHJvdG8sIGJlaGF2aW9ycywgbGlmZWN5Y2xlKSB7XG4gIGZvciAobGV0IGk9MDsgaTxiZWhhdmlvcnMubGVuZ3RoOyBpKyspIHtcbiAgICBhcHBseUluZm8ocHJvdG8sIGJlaGF2aW9yc1tpXSwgbGlmZWN5Y2xlLCBleGNsdWRlT25CZWhhdmlvcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5SW5mbyhwcm90bywgaW5mbywgbGlmZWN5Y2xlLCBleGNsdWRlUHJvcHMpIHtcbiAgY29weVByb3BlcnRpZXMoaW5mbywgcHJvdG8sIGV4Y2x1ZGVQcm9wcyk7XG4gIGZvciAobGV0IHAgaW4gbGlmZWN5Y2xlUHJvcHMpIHtcbiAgICBpZiAoaW5mb1twXSkge1xuICAgICAgbGlmZWN5Y2xlW3BdID0gbGlmZWN5Y2xlW3BdIHx8IFtdO1xuICAgICAgbGlmZWN5Y2xlW3BdLnB1c2goaW5mb1twXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheX0gYmVoYXZpb3JzIExpc3Qgb2YgYmVoYXZpb3JzIHRvIGZsYXR0ZW4uXG4gKiBAcGFyYW0ge0FycmF5PX0gbGlzdCBUYXJnZXQgbGlzdCB0byBmbGF0dGVuIGJlaGF2aW9ycyBpbnRvLlxuICogQHBhcmFtIHtBcnJheT19IGV4Y2x1ZGUgTGlzdCBvZiBiZWhhdmlvcnMgdG8gZXhjbHVkZSBmcm9tIHRoZSBsaXN0LlxuICogQHJldHVybiB7IUFycmF5fSBSZXR1cm5zIHRoZSBsaXN0IG9mIGZsYXR0ZW5lZCBiZWhhdmlvcnMuXG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW5CZWhhdmlvcnMoYmVoYXZpb3JzLCBsaXN0LCBleGNsdWRlKSB7XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICBmb3IgKGxldCBpPWJlaGF2aW9ycy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgYiA9IGJlaGF2aW9yc1tpXTtcbiAgICBpZiAoYikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgZmxhdHRlbkJlaGF2aW9ycyhiLCBsaXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRlZHVwXG4gICAgICAgIGlmIChsaXN0LmluZGV4T2YoYikgPCAwICYmICghZXhjbHVkZSB8fCBleGNsdWRlLmluZGV4T2YoYikgPCAwKSkge1xuICAgICAgICAgIGxpc3QudW5zaGlmdChiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2JlaGF2aW9yIGlzIG51bGwsIGNoZWNrIGZvciBtaXNzaW5nIG9yIDQwNCBpbXBvcnQnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxpc3Q7XG59XG5cbi8qKlxuICogQ29waWVzIHByb3BlcnR5IGRlc2NyaXB0b3JzIGZyb20gc291cmNlIHRvIHRhcmdldCwgb3ZlcndyaXRpbmcgYWxsIGZpZWxkc1xuICogb2YgYW55IHByZXZpb3VzIGRlc2NyaXB0b3IgZm9yIGEgcHJvcGVydHkgKmV4Y2VwdCogZm9yIGB2YWx1ZWAsIHdoaWNoIGlzXG4gKiBtZXJnZWQgaW4gZnJvbSB0aGUgdGFyZ2V0IGlmIGl0IGRvZXMgbm90IGV4aXN0IG9uIHRoZSBzb3VyY2UuXG4gKlxuICogQHBhcmFtIHsqfSB0YXJnZXQgVGFyZ2V0IHByb3BlcnRpZXMgb2JqZWN0XG4gKiBAcGFyYW0geyp9IHNvdXJjZSBTb3VyY2UgcHJvcGVydGllcyBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWVyZ2VQcm9wZXJ0aWVzKHRhcmdldCwgc291cmNlKSB7XG4gIGZvciAoY29uc3QgcCBpbiBzb3VyY2UpIHtcbiAgICBjb25zdCB0YXJnZXRJbmZvID0gdGFyZ2V0W3BdO1xuICAgIGNvbnN0IHNvdXJjZUluZm8gPSBzb3VyY2VbcF07XG4gICAgaWYgKCEoJ3ZhbHVlJyBpbiBzb3VyY2VJbmZvKSAmJiB0YXJnZXRJbmZvICYmICgndmFsdWUnIGluIHRhcmdldEluZm8pKSB7XG4gICAgICB0YXJnZXRbcF0gPSBPYmplY3QuYXNzaWduKHt2YWx1ZTogdGFyZ2V0SW5mby52YWx1ZX0sIHNvdXJjZUluZm8pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbcF0gPSBzb3VyY2VJbmZvO1xuICAgIH1cbiAgfVxufVxuXG4vKiBOb3RlIGFib3V0IGNvbnN0cnVjdGlvbiBhbmQgZXh0ZW5zaW9uIG9mIGxlZ2FjeSBjbGFzc2VzLlxuICBbQ2hhbmdlZCBpbiBRNCAyMDE4IHRvIG9wdGltaXplIHBlcmZvcm1hbmNlLl1cblxuICBXaGVuIGNhbGxpbmcgYFBvbHltZXJgIG9yIGBtaXhpbkJlaGF2aW9yc2AsIHRoZSBnZW5lcmF0ZWQgY2xhc3MgYmVsb3cgaXNcbiAgbWFkZS4gVGhlIGxpc3Qgb2YgYmVoYXZpb3JzIHdhcyBwcmV2aW91c2x5IG1hZGUgaW50byBvbmUgZ2VuZXJhdGVkIGNsYXNzIHBlclxuICBiZWhhdmlvciwgYnV0IHRoaXMgaXMgbm8gbG9uZ2VyIHRoZSBjYXNlIGFzIGJlaGF2aW9ycyBhcmUgbm93IGNhbGxlZFxuICBtYW51YWxseS4gTm90ZSwgdGhlcmUgbWF5ICpzdGlsbCogYmUgbXVsdGlwbGUgZ2VuZXJhdGVkIGNsYXNzZXMgaW4gdGhlXG4gIGVsZW1lbnQncyBwcm90b3R5cGUgY2hhaW4gaWYgZXh0ZW5zaW9uIGlzIHVzZWQgd2l0aCBgbWl4aW5CZWhhdmlvcnNgLlxuXG4gIFRoZSBnZW5lcmF0ZWQgY2xhc3MgaXMgZGlyZWN0bHkgdGllZCB0byB0aGUgaW5mbyBvYmplY3QgYW5kIGJlaGF2aW9yc1xuICB1c2VkIHRvIGNyZWF0ZSBpdC4gVGhhdCBsaXN0IG9mIGJlaGF2aW9ycyBpcyBmaWx0ZXJlZCBzbyBpdCdzIG9ubHkgdGhlXG4gIGJlaGF2aW9ycyBub3QgYWN0aXZlIG9uIHRoZSBzdXBlcmNsYXNzLiBJbiBvcmRlciB0byBjYWxsIHRocm91Z2ggdG8gdGhlXG4gIGVudGlyZSBsaXN0IG9mIGxpZmVjeWNsZSBtZXRob2RzLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGBzdXBlcmAuXG5cbiAgVGhlIGVsZW1lbnQncyBgcHJvcGVydGllc2AgYW5kIGBvYnNlcnZlcnNgIGFyZSBjb250cm9sbGVkIHZpYSB0aGUgZmluYWxpemF0aW9uXG4gIG1lY2hhbmlzbSBwcm92aWRlZCBieSBgUHJvcGVydGllc01peGluYC4gYFByb3BlcnRpZXNgIGFuZCBgb2JzZXJ2ZXJzYCBhcmVcbiAgY29sbGVjdGVkIGJ5IG1hbnVhbGx5IHRyYXZlcnNpbmcgdGhlIHByb3RvdHlwZSBjaGFpbiBhbmQgbWVyZ2luZy5cblxuICBUbyBsaW1pdCBjaGFuZ2VzLCB0aGUgYF9yZWdpc3RlcmVkYCBtZXRob2QgaXMgY2FsbGVkIHZpYSBgX2luaXRpYWxpemVQcm9wZXJ0aWVzYFxuICBhbmQgbm90IGBfZmluYWxpemVDbGFzc2AuXG5cbiovXG4vKipcbiAqIEBwYXJhbSB7IVBvbHltZXJJbml0fSBpbmZvIFBvbHltZXIgaW5mbyBvYmplY3RcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OkhUTUxFbGVtZW50KX0gQmFzZSBiYXNlIGNsYXNzIHRvIGV4dGVuZCB3aXRoIGluZm8gb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdD19IGJlaGF2aW9ycyBiZWhhdmlvcnMgdG8gY29weSBpbnRvIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6SFRNTEVsZW1lbnQpfSBHZW5lcmF0ZWQgY2xhc3NcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc31cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEdlbmVyYXRlQ2xhc3NGcm9tSW5mbyhpbmZvLCBCYXNlLCBiZWhhdmlvcnMpIHtcblxuICAvLyBtYW5hZ2VzIGJlaGF2aW9yIGFuZCBsaWZlY3ljbGUgcHJvY2Vzc2luZyAoZmlsbGVkIGluIGFmdGVyIGNsYXNzIGRlZmluaXRpb24pXG4gIGxldCBiZWhhdmlvckxpc3Q7XG4gIGNvbnN0IGxpZmVjeWNsZSA9IHt9O1xuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBjbGFzcyBQb2x5bWVyR2VuZXJhdGVkIGV4dGVuZHMgQmFzZSB7XG5cbiAgICAvLyBleHBsaWNpdGx5IG5vdCBjYWxsaW5nIHN1cGVyLl9maW5hbGl6ZUNsYXNzXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIF9maW5hbGl6ZUNsYXNzKCkge1xuICAgICAgLy8gaWYgY2FsbGluZyB2aWEgYSBzdWJjbGFzcyB0aGF0IGhhc24ndCBiZWVuIGdlbmVyYXRlZCwgcGFzcyB0aHJvdWdoIHRvIHN1cGVyXG4gICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZ2VuZXJhdGVkRnJvbScsIHRoaXMpKSkge1xuICAgICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAgIC8vICAgICBDaGFuZ2UgYmFjayB0byBqdXN0IHN1cGVyLm1ldGhvZENhbGwoKVxuICAgICAgICBCYXNlLl9maW5hbGl6ZUNsYXNzLmNhbGwodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbnRlcmxlYXZlIHByb3BlcnRpZXMgYW5kIG9ic2VydmVycyBwZXIgYmVoYXZpb3IgYW5kIGBpbmZvYFxuICAgICAgICBpZiAoYmVoYXZpb3JMaXN0KSB7XG4gICAgICAgICAgZm9yIChsZXQgaT0wLCBiOyBpIDwgYmVoYXZpb3JMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBiID0gYmVoYXZpb3JMaXN0W2ldO1xuICAgICAgICAgICAgaWYgKGIucHJvcGVydGllcykge1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnRpZXMoYi5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiLm9ic2VydmVycykge1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9ic2VydmVycyhiLm9ic2VydmVycywgYi5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZm8ucHJvcGVydGllcykge1xuICAgICAgICAgIHRoaXMuY3JlYXRlUHJvcGVydGllcyhpbmZvLnByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLm9ic2VydmVycykge1xuICAgICAgICAgIHRoaXMuY3JlYXRlT2JzZXJ2ZXJzKGluZm8ub2JzZXJ2ZXJzLCBpbmZvLnByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBwcmVwYXJlIHRoZSBlbGVtZW50IHRlbXBsYXRlXG4gICAgICAgIHRoaXMuX3ByZXBhcmVUZW1wbGF0ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIGlmIChiZWhhdmlvckxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgYmVoYXZpb3JMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbWVyZ2VQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGJlaGF2aW9yTGlzdFtpXS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWVyZ2VQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIGluZm8ucHJvcGVydGllcyk7XG4gICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVycygpIHtcbiAgICAgIGxldCBvYnNlcnZlcnMgPSBbXTtcbiAgICAgIGlmIChiZWhhdmlvckxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wLCBiOyBpIDwgYmVoYXZpb3JMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYiA9IGJlaGF2aW9yTGlzdFtpXTtcbiAgICAgICAgICBpZiAoYi5vYnNlcnZlcnMpIHtcbiAgICAgICAgICAgIG9ic2VydmVycyA9IG9ic2VydmVycy5jb25jYXQoYi5vYnNlcnZlcnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGluZm8ub2JzZXJ2ZXJzKSB7XG4gICAgICAgIG9ic2VydmVycyA9IG9ic2VydmVycy5jb25jYXQoaW5mby5vYnNlcnZlcnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ic2VydmVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGNyZWF0ZWQoKSB7XG4gICAgICBzdXBlci5jcmVhdGVkKCk7XG4gICAgICBjb25zdCBsaXN0ID0gbGlmZWN5Y2xlLmNyZWF0ZWQ7XG4gICAgICBpZiAobGlzdCkge1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGlzdFtpXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJlZCgpIHtcbiAgICAgIC8qIE5PVEU6IGBiZWZvcmVSZWdpc3RlcmAgaXMgY2FsbGVkIGhlcmUgZm9yIGJjLCBidXQgdGhlIGJlaGF2aW9yXG4gICAgICAgIGlzIGRpZmZlcmVudCB0aGFuIGluIDEueC4gSW4gMS4wLCB0aGUgbWV0aG9kIHdhcyBjYWxsZWQgKmFmdGVyKlxuICAgICAgICBtaXhpbmcgcHJvdG90eXBlcyB0b2dldGhlciBidXQgKmJlZm9yZSogcHJvY2Vzc2luZyBvZiBtZXRhLW9iamVjdHMuXG4gICAgICAgIEhvd2V2ZXIsIGR5bmFtaWMgZWZmZWN0cyBjYW4gc3RpbGwgYmUgc2V0IGhlcmUgYW5kIGNhbiBiZSBkb25lIGVpdGhlclxuICAgICAgICBpbiBgYmVmb3JlUmVnaXN0ZXJgIG9yIGByZWdpc3RlcmVkYC4gSXQgaXMgbm8gbG9uZ2VyIHBvc3NpYmxlIHRvIHNldFxuICAgICAgICBgaXNgIGluIGBiZWZvcmVSZWdpc3RlcmAgYXMgeW91IGNvdWxkIGluIDEueC5cbiAgICAgICovXG4gICAgICAvLyBvbmx5IHByb2NlZWQgaWYgdGhlIGdlbmVyYXRlZCBjbGFzcycgcHJvdG90eXBlIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICAgICAgY29uc3QgZ2VuZXJhdGVkUHJvdG8gPSBQb2x5bWVyR2VuZXJhdGVkLnByb3RvdHlwZTtcbiAgICAgIGlmICghZ2VuZXJhdGVkUHJvdG8uaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19oYXNSZWdpc3RlckZpbmlzaGVkJywgZ2VuZXJhdGVkUHJvdG8pKSkge1xuICAgICAgICBnZW5lcmF0ZWRQcm90by5fX2hhc1JlZ2lzdGVyRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAvLyBlbnN1cmUgc3VwZXJjbGFzcyBpcyByZWdpc3RlcmVkIGZpcnN0LlxuICAgICAgICBzdXBlci5fcmVnaXN0ZXJlZCgpO1xuICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgb250byB0aGUgZ2VuZXJhdGVkIGNsYXNzIGxhemlseSBpZiB3ZSdyZSBvcHRpbWl6aW5nLFxuICAgICAgICBpZiAobGVnYWN5T3B0aW1pemF0aW9ucykge1xuICAgICAgICAgIGNvcHlQcm9wZXJ0aWVzVG9Qcm90byhnZW5lcmF0ZWRQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWFrZSBzdXJlIGxlZ2FjeSBsaWZlY3ljbGUgaXMgY2FsbGVkIG9uIHRoZSAqZWxlbWVudConcyBwcm90b3R5cGVcbiAgICAgICAgLy8gYW5kIG5vdCB0aGUgZ2VuZXJhdGVkIGNsYXNzIHByb3RvdHlwZTsgaWYgdGhlIGVsZW1lbnQgaGFzIGJlZW5cbiAgICAgICAgLy8gZXh0ZW5kZWQsIHRoZXNlIGFyZSAqbm90KiB0aGUgc2FtZS5cbiAgICAgICAgY29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7XG4gICAgICAgIGxldCBsaXN0ID0gbGlmZWN5Y2xlLmJlZm9yZVJlZ2lzdGVyO1xuICAgICAgICBpZiAobGlzdCkge1xuICAgICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RbaV0uY2FsbChwcm90byk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxpc3QgPSBsaWZlY3ljbGUucmVnaXN0ZXJlZDtcbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0W2ldLmNhbGwocHJvdG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX2FwcGx5TGlzdGVuZXJzKCkge1xuICAgICAgc3VwZXIuX2FwcGx5TGlzdGVuZXJzKCk7XG4gICAgICBjb25zdCBsaXN0ID0gbGlmZWN5Y2xlLmxpc3RlbmVycztcbiAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBsaXN0W2ldO1xuICAgICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGwgaW4gbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2FkZE1ldGhvZEV2ZW50TGlzdGVuZXJUb05vZGUodGhpcywgbCwgbGlzdGVuZXJzW2xdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBub3RlOiBleGNlcHRpb24gdG8gXCJzdXBlciB0aGVuIG1lXCIgcnVsZTtcbiAgICAvLyBkbyB3b3JrIGJlZm9yZSBjYWxsaW5nIHN1cGVyIHNvIHRoYXQgc3VwZXIgYXR0cmlidXRlc1xuICAgIC8vIG9ubHkgYXBwbHkgaWYgbm90IGFscmVhZHkgc2V0LlxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX2Vuc3VyZUF0dHJpYnV0ZXMoKSB7XG4gICAgICBjb25zdCBsaXN0ID0gbGlmZWN5Y2xlLmhvc3RBdHRyaWJ1dGVzO1xuICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT1saXN0Lmxlbmd0aC0xOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGNvbnN0IGhvc3RBdHRyaWJ1dGVzID0gbGlzdFtpXTtcbiAgICAgICAgICBmb3IgKGxldCBhIGluIGhvc3RBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2Vuc3VyZUF0dHJpYnV0ZShhLCBob3N0QXR0cmlidXRlc1thXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN1cGVyLl9lbnN1cmVBdHRyaWJ1dGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICByZWFkeSgpIHtcbiAgICAgIHN1cGVyLnJlYWR5KCk7XG4gICAgICBsZXQgbGlzdCA9IGxpZmVjeWNsZS5yZWFkeTtcbiAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaXN0W2ldLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGF0dGFjaGVkKCkge1xuICAgICAgc3VwZXIuYXR0YWNoZWQoKTtcbiAgICAgIGxldCBsaXN0ID0gbGlmZWN5Y2xlLmF0dGFjaGVkO1xuICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3RbaV0uY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgZGV0YWNoZWQoKSB7XG4gICAgICBzdXBlci5kZXRhY2hlZCgpO1xuICAgICAgbGV0IGxpc3QgPSBsaWZlY3ljbGUuZGV0YWNoZWQ7XG4gICAgICBpZiAobGlzdCkge1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGlzdFtpXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBuYXRpdmUgQ3VzdG9tIEVsZW1lbnRzIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIHRvXG4gICAgICogc2V0IGFuIGF0dHJpYnV0ZSB2YWx1ZSB0byBhIHByb3BlcnR5IHZpYSBgX2F0dHJpYnV0ZVRvUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUgdGhhdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBvbGQgT2xkIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWUgTmV3IGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZChuYW1lLCBvbGQsIHZhbHVlKSB7XG4gICAgICBzdXBlci5hdHRyaWJ1dGVDaGFuZ2VkKCk7XG4gICAgICBsZXQgbGlzdCA9IGxpZmVjeWNsZS5hdHRyaWJ1dGVDaGFuZ2VkO1xuICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3RbaV0uY2FsbCh0aGlzLCBuYW1lLCBvbGQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGFwcGx5IGJlaGF2aW9ycywgbm90ZSBhY3R1YWwgY29weWluZyBpcyBkb25lIGxhemlseSBhdCBmaXJzdCBpbnN0YW5jZSBjcmVhdGlvblxuICBpZiAoYmVoYXZpb3JzKSB7XG4gICAgLy8gTk9URTogZW5zdXJlIHRoZSBiZWhhdmlvciBpcyBleHRlbmRpbmcgYSBjbGFzcyB3aXRoXG4gICAgLy8gbGVnYWN5IGVsZW1lbnQgYXBpLiBUaGlzIGlzIG5lY2Vzc2FyeSBzaW5jZSBiZWhhdmlvcnMgZXhwZWN0IHRvIGJlIGFibGVcbiAgICAvLyB0byBhY2Nlc3MgMS54IGxlZ2FjeSBhcGkuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGJlaGF2aW9ycykpIHtcbiAgICAgIGJlaGF2aW9ycyA9IFtiZWhhdmlvcnNdO1xuICAgIH1cbiAgICBsZXQgc3VwZXJCZWhhdmlvcnMgPSBCYXNlLnByb3RvdHlwZS5iZWhhdmlvcnM7XG4gICAgLy8gZ2V0IGZsYXR0ZW5lZCwgZGVkdXBlZCBsaXN0IG9mIGJlaGF2aW9ycyAqbm90KiBhbHJlYWR5IG9uIHN1cGVyIGNsYXNzXG4gICAgYmVoYXZpb3JMaXN0ID0gZmxhdHRlbkJlaGF2aW9ycyhiZWhhdmlvcnMsIG51bGwsIHN1cGVyQmVoYXZpb3JzKTtcbiAgICBQb2x5bWVyR2VuZXJhdGVkLnByb3RvdHlwZS5iZWhhdmlvcnMgPSBzdXBlckJlaGF2aW9ycyA/XG4gICAgICBzdXBlckJlaGF2aW9ycy5jb25jYXQoYmVoYXZpb3JzKSA6IGJlaGF2aW9yTGlzdDtcbiAgfVxuXG4gIGNvbnN0IGNvcHlQcm9wZXJ0aWVzVG9Qcm90byA9IChwcm90bykgPT4ge1xuICAgIGlmIChiZWhhdmlvckxpc3QpIHtcbiAgICAgIGFwcGx5QmVoYXZpb3JzKHByb3RvLCBiZWhhdmlvckxpc3QsIGxpZmVjeWNsZSk7XG4gICAgfVxuICAgIGFwcGx5SW5mbyhwcm90bywgaW5mbywgbGlmZWN5Y2xlLCBleGNsdWRlT25JbmZvKTtcbiAgfTtcblxuICAvLyBjb3B5IHByb3BlcnRpZXMgaWYgd2UncmUgbm90IG9wdGltaXppbmdcbiAgaWYgKCFsZWdhY3lPcHRpbWl6YXRpb25zKSB7XG4gICAgY29weVByb3BlcnRpZXNUb1Byb3RvKFBvbHltZXJHZW5lcmF0ZWQucHJvdG90eXBlKTtcbiAgfVxuXG4gIFBvbHltZXJHZW5lcmF0ZWQuZ2VuZXJhdGVkRnJvbSA9IGluZm87XG5cbiAgcmV0dXJuIFBvbHltZXJHZW5lcmF0ZWQ7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY2xhc3MgdGhhdCBleHRlbmRzIGBMZWdhY3lFbGVtZW50YCBiYXNlZCBvbiB0aGVcbiAqIHByb3ZpZGVkIGluZm8gb2JqZWN0LiAgTWV0YWRhdGEgb2JqZWN0cyBvbiB0aGUgYGluZm9gIG9iamVjdFxuICogKGBwcm9wZXJ0aWVzYCwgYG9ic2VydmVyc2AsIGBsaXN0ZW5lcnNgLCBgYmVoYXZpb3JzYCwgYGlzYCkgYXJlIHVzZWRcbiAqIGZvciBQb2x5bWVyJ3MgbWV0YS1wcm9ncmFtbWluZyBzeXN0ZW1zLCBhbmQgYW55IGZ1bmN0aW9ucyBhcmUgY29waWVkXG4gKiB0byB0aGUgZ2VuZXJhdGVkIGNsYXNzLlxuICpcbiAqIFZhbGlkIFwibWV0YWRhdGFcIiB2YWx1ZXMgYXJlIGFzIGZvbGxvd3M6XG4gKlxuICogYGlzYDogU3RyaW5nIHByb3ZpZGluZyB0aGUgdGFnIG5hbWUgdG8gcmVnaXN0ZXIgdGhlIGVsZW1lbnQgdW5kZXIuIEluXG4gKiBhZGRpdGlvbiwgaWYgYSBgZG9tLW1vZHVsZWAgd2l0aCB0aGUgc2FtZSBpZCBleGlzdHMsIHRoZSBmaXJzdCB0ZW1wbGF0ZVxuICogaW4gdGhhdCBgZG9tLW1vZHVsZWAgd2lsbCBiZSBzdGFtcGVkIGludG8gdGhlIHNoYWRvdyByb290IG9mIHRoaXMgZWxlbWVudCxcbiAqIHdpdGggc3VwcG9ydCBmb3IgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzIChgb24tLi4uYCksIFBvbHltZXIgZGF0YVxuICogYmluZGluZ3MgKGBbWy4uLl1dYCBhbmQgYHt7Li4ufX1gKSwgYW5kIGlkLWJhc2VkIG5vZGUgZmluZGluZyBpbnRvXG4gKiBgdGhpcy4kYC5cbiAqXG4gKiBgcHJvcGVydGllc2A6IE9iamVjdCBkZXNjcmliaW5nIHByb3BlcnR5LXJlbGF0ZWQgbWV0YWRhdGEgdXNlZCBieSBQb2x5bWVyXG4gKiBmZWF0dXJlcyAoa2V5OiBwcm9wZXJ0eSBuYW1lcywgdmFsdWU6IG9iamVjdCBjb250YWluaW5nIHByb3BlcnR5IG1ldGFkYXRhKS5cbiAqIFZhbGlkIGtleXMgaW4gcGVyLXByb3BlcnR5IG1ldGFkYXRhIGluY2x1ZGU6XG4gKiAtIGB0eXBlYCAoU3RyaW5nfE51bWJlcnxPYmplY3R8QXJyYXl8Li4uKTogVXNlZCBieVxuICogICBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCB0byBkZXRlcm1pbmUgaG93IHN0cmluZy1iYXNlZCBhdHRyaWJ1dGVzXG4gKiAgIGFyZSBkZXNlcmlhbGl6ZWQgdG8gSmF2YVNjcmlwdCBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiAtIGBub3RpZnlgIChib29sZWFuKTogQ2F1c2VzIGEgY2hhbmdlIGluIHRoZSBwcm9wZXJ0eSB0byBmaXJlIGFcbiAqICAgbm9uLWJ1YmJsaW5nIGV2ZW50IGNhbGxlZCBgPHByb3BlcnR5Pi1jaGFuZ2VkYC4gRWxlbWVudHMgdGhhdCBoYXZlXG4gKiAgIGVuYWJsZWQgdHdvLXdheSBiaW5kaW5nIHRvIHRoZSBwcm9wZXJ0eSB1c2UgdGhpcyBldmVudCB0byBvYnNlcnZlIGNoYW5nZXMuXG4gKiAtIGByZWFkT25seWAgKGJvb2xlYW4pOiBDcmVhdGVzIGEgZ2V0dGVyIGZvciB0aGUgcHJvcGVydHksIGJ1dCBubyBzZXR0ZXIuXG4gKiAgIFRvIHNldCBhIHJlYWQtb25seSBwcm9wZXJ0eSwgdXNlIHRoZSBwcml2YXRlIHNldHRlciBtZXRob2RcbiAqICAgYF9zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpYC5cbiAqIC0gYG9ic2VydmVyYCAoc3RyaW5nKTogT2JzZXJ2ZXIgbWV0aG9kIG5hbWUgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gKiAgIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLiBUaGUgYXJndW1lbnRzIG9mIHRoZSBtZXRob2QgYXJlXG4gKiAgIGAodmFsdWUsIHByZXZpb3VzVmFsdWUpYC5cbiAqIC0gYGNvbXB1dGVkYCAoc3RyaW5nKTogU3RyaW5nIGRlc2NyaWJpbmcgbWV0aG9kIGFuZCBkZXBlbmRlbnQgcHJvcGVydGllc1xuICogICBmb3IgY29tcHV0aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IChlLmcuIGAnY29tcHV0ZUZvbyhiYXIsIHpvdCknYCkuXG4gKiAgIENvbXB1dGVkIHByb3BlcnRpZXMgYXJlIHJlYWQtb25seSBieSBkZWZhdWx0IGFuZCBjYW4gb25seSBiZSBjaGFuZ2VkXG4gKiAgIHZpYSB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjb21wdXRpbmcgbWV0aG9kLlxuICpcbiAqIGBvYnNlcnZlcnNgOiBBcnJheSBvZiBzdHJpbmdzIGRlc2NyaWJpbmcgbXVsdGktcHJvcGVydHkgb2JzZXJ2ZXIgbWV0aG9kc1xuICogIGFuZCB0aGVpciBkZXBlbmRlbnQgcHJvcGVydGllcyAoZS5nLiBgJ29ic2VydmVBQkMoYSwgYiwgYyknYCkuXG4gKlxuICogYGxpc3RlbmVyc2A6IE9iamVjdCBkZXNjcmliaW5nIGV2ZW50IGxpc3RlbmVycyB0byBiZSBhZGRlZCB0byBlYWNoXG4gKiAgaW5zdGFuY2Ugb2YgdGhpcyBlbGVtZW50IChrZXk6IGV2ZW50IG5hbWUsIHZhbHVlOiBtZXRob2QgbmFtZSkuXG4gKlxuICogYGJlaGF2aW9yc2A6IEFycmF5IG9mIGFkZGl0aW9uYWwgYGluZm9gIG9iamVjdHMgY29udGFpbmluZyBtZXRhZGF0YVxuICogYW5kIGNhbGxiYWNrcyBpbiB0aGUgc2FtZSBmb3JtYXQgYXMgdGhlIGBpbmZvYCBvYmplY3QgaGVyZSB3aGljaCBhcmVcbiAqIG1lcmdlZCBpbnRvIHRoaXMgZWxlbWVudC5cbiAqXG4gKiBgaG9zdEF0dHJpYnV0ZXNgOiBPYmplY3QgbGlzdGluZyBhdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGhvc3RcbiAqICBvbmNlIGNyZWF0ZWQgKGtleTogYXR0cmlidXRlIG5hbWUsIHZhbHVlOiBhdHRyaWJ1dGUgdmFsdWUpLiAgVmFsdWVzXG4gKiAgYXJlIHNlcmlhbGl6ZWQgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHZhbHVlLiAgSG9zdCBhdHRyaWJ1dGVzIHNob3VsZFxuICogIGdlbmVyYWxseSBiZSBsaW1pdGVkIHRvIGF0dHJpYnV0ZXMgc3VjaCBhcyBgdGFiSW5kZXhgIGFuZCBgYXJpYS0uLi5gLlxuICogIEF0dHJpYnV0ZXMgaW4gYGhvc3RBdHRyaWJ1dGVzYCBhcmUgb25seSBhcHBsaWVkIGlmIGEgdXNlci1zdXBwbGllZFxuICogIGF0dHJpYnV0ZSBpcyBub3QgYWxyZWFkeSBwcmVzZW50IChhdHRyaWJ1dGVzIGluIG1hcmt1cCBvdmVycmlkZVxuICogIGBob3N0QXR0cmlidXRlc2ApLlxuICpcbiAqIEluIGFkZGl0aW9uLCB0aGUgZm9sbG93aW5nIFBvbHltZXItc3BlY2lmaWMgY2FsbGJhY2tzIG1heSBiZSBwcm92aWRlZDpcbiAqIC0gYHJlZ2lzdGVyZWRgOiBjYWxsZWQgYWZ0ZXIgZmlyc3QgaW5zdGFuY2Ugb2YgdGhpcyBlbGVtZW50LFxuICogLSBgY3JlYXRlZGA6IGNhbGxlZCBkdXJpbmcgYGNvbnN0cnVjdG9yYFxuICogLSBgYXR0YWNoZWRgOiBjYWxsZWQgZHVyaW5nIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqIC0gYGRldGFjaGVkYDogY2FsbGVkIGR1cmluZyBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgXG4gKiAtIGByZWFkeWA6IGNhbGxlZCBiZWZvcmUgZmlyc3QgYGF0dGFjaGVkYCwgYWZ0ZXIgYWxsIHByb3BlcnRpZXMgb2ZcbiAqICAgdGhpcyBlbGVtZW50IGhhdmUgYmVlbiBwcm9wYWdhdGVkIHRvIGl0cyB0ZW1wbGF0ZSBhbmQgYWxsIG9ic2VydmVyc1xuICogICBoYXZlIHJ1blxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJJbml0fSBpbmZvIE9iamVjdCBjb250YWluaW5nIFBvbHltZXIgbWV0YWRhdGEgYW5kIGZ1bmN0aW9uc1xuICogICB0byBiZWNvbWUgY2xhc3MgbWV0aG9kcy5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOlR9IG1peGluIE9wdGlvbmFsIG1peGluIHRvIGFwcGx5IHRvIGxlZ2FjeSBiYXNlIGNsYXNzXG4gKiAgIGJlZm9yZSBleHRlbmRpbmcgd2l0aCBQb2x5bWVyIG1ldGFwcm9ncmFtbWluZy5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpIVE1MRWxlbWVudCl9IEdlbmVyYXRlZCBjbGFzc1xuICovXG5leHBvcnQgY29uc3QgQ2xhc3MgPSBmdW5jdGlvbihpbmZvLCBtaXhpbikge1xuICBpZiAoIWluZm8pIHtcbiAgICBjb25zb2xlLndhcm4oJ1BvbHltZXIuQ2xhc3MgcmVxdWlyZXMgYGluZm9gIGFyZ3VtZW50Jyk7XG4gIH1cbiAgbGV0IGtsYXNzID0gbWl4aW4gPyBtaXhpbihMZWdhY3lFbGVtZW50TWl4aW4oSFRNTEVsZW1lbnQpKSA6XG4gICAgICBMZWdhY3lFbGVtZW50TWl4aW4oSFRNTEVsZW1lbnQpO1xuICBrbGFzcyA9IEdlbmVyYXRlQ2xhc3NGcm9tSW5mbyhpbmZvLCBrbGFzcywgaW5mby5iZWhhdmlvcnMpO1xuICAvLyBkZWNvcmF0ZSBrbGFzcyB3aXRoIHJlZ2lzdHJhdGlvbiBpbmZvXG4gIGtsYXNzLmlzID0ga2xhc3MucHJvdG90eXBlLmlzID0gaW5mby5pcztcbiAgcmV0dXJuIGtsYXNzO1xufTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBDbGFzcyB9IGZyb20gJy4vY2xhc3MuanMnO1xuXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG4vKipcbiAqIExlZ2FjeSBjbGFzcyBmYWN0b3J5IGFuZCByZWdpc3RyYXRpb24gaGVscGVyIGZvciBkZWZpbmluZyBQb2x5bWVyXG4gKiBlbGVtZW50cy5cbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvXG4gKlxuICogICAgIGltcG9ydCB7Q2xhc3N9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9jbGFzcy5qcyc7XG4gKiAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKGluZm8uaXMsIENsYXNzKGluZm8pKTtcbiAqXG4gKiBTZWUgYENsYXNzYCBmb3IgZGV0YWlscyBvbiB2YWxpZCBsZWdhY3kgbWV0YWRhdGEgZm9ybWF0IGZvciBgaW5mb2AuXG4gKlxuICogQGdsb2JhbFxuICogQG92ZXJyaWRlXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7IVBvbHltZXJJbml0fSBpbmZvIE9iamVjdCBjb250YWluaW5nIFBvbHltZXIgbWV0YWRhdGEgYW5kIGZ1bmN0aW9uc1xuICogICB0byBiZWNvbWUgY2xhc3MgbWV0aG9kcy5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzogSFRNTEVsZW1lbnQpfSBHZW5lcmF0ZWQgY2xhc3NcbiAqIEBzdXBwcmVzcyB7ZHVwbGljYXRlLCBpbnZhbGlkQ2FzdHMsIGNoZWNrVHlwZXN9XG4gKi9cbmNvbnN0IFBvbHltZXIgPSBmdW5jdGlvbihpbmZvKSB7XG4gIC8vIGlmIGlucHV0IGlzIGEgYGNsYXNzYCAoYWthIGEgZnVuY3Rpb24gd2l0aCBhIHByb3RvdHlwZSksIHVzZSB0aGUgcHJvdG90eXBlXG4gIC8vIHJlbWVtYmVyIHRoYXQgdGhlIGBjb25zdHJ1Y3RvcmAgd2lsbCBuZXZlciBiZSBjYWxsZWRcbiAgbGV0IGtsYXNzO1xuICBpZiAodHlwZW9mIGluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICBrbGFzcyA9IGluZm87XG4gIH0gZWxzZSB7XG4gICAga2xhc3MgPSBQb2x5bWVyLkNsYXNzKGluZm8pO1xuICB9XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShrbGFzcy5pcywgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKGtsYXNzKSk7XG4gIHJldHVybiBrbGFzcztcbn07XG5cblBvbHltZXIuQ2xhc3MgPSBDbGFzcztcblxuZXhwb3J0IHsgUG9seW1lciB9OyIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuXG4vLyBDb21tb24gaW1wbGVtZW50YXRpb24gZm9yIG1peGluICYgYmVoYXZpb3JcbmZ1bmN0aW9uIG11dGFibGVQcm9wZXJ0eUNoYW5nZShpbnN0LCBwcm9wZXJ0eSwgdmFsdWUsIG9sZCwgbXV0YWJsZURhdGEpIHtcbiAgbGV0IGlzT2JqZWN0O1xuICBpZiAobXV0YWJsZURhdGEpIHtcbiAgICBpc09iamVjdCA9ICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKTtcbiAgICAvLyBQdWxsIGBvbGRgIGZvciBPYmplY3RzIGZyb20gdGVtcCBjYWNoZSwgYnV0IHRyZWF0IGBudWxsYCBhcyBhIHByaW1pdGl2ZVxuICAgIGlmIChpc09iamVjdCkge1xuICAgICAgb2xkID0gaW5zdC5fX2RhdGFUZW1wW3Byb3BlcnR5XTtcbiAgICB9XG4gIH1cbiAgLy8gU3RyaWN0IGVxdWFsaXR5IGNoZWNrLCBidXQgcmV0dXJuIGZhbHNlIGZvciBOYU49PT1OYU5cbiAgbGV0IHNob3VsZENoYW5nZSA9IChvbGQgIT09IHZhbHVlICYmIChvbGQgPT09IG9sZCB8fCB2YWx1ZSA9PT0gdmFsdWUpKTtcbiAgLy8gT2JqZWN0cyBhcmUgc3RvcmVkIGluIHRlbXBvcmFyeSBjYWNoZSAoY2xlYXJlZCBhdCBlbmQgb2ZcbiAgLy8gdHVybiksIHdoaWNoIGlzIHVzZWQgZm9yIGRpcnR5LWNoZWNraW5nXG4gIGlmIChpc09iamVjdCAmJiBzaG91bGRDaGFuZ2UpIHtcbiAgICBpbnN0Ll9fZGF0YVRlbXBbcHJvcGVydHldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHNob3VsZENoYW5nZTtcbn1cblxuLyoqXG4gKiBFbGVtZW50IGNsYXNzIG1peGluIHRvIHNraXAgc3RyaWN0IGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzIGFuZCBhcnJheXNcbiAqIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZSBcImRpcnR5XCIpLCBmb3IgdXNlIG9uIGVsZW1lbnRzIHV0aWxpemluZ1xuICogYFByb3BlcnR5RWZmZWN0c2BcbiAqXG4gKiBCeSBkZWZhdWx0LCBgUHJvcGVydHlFZmZlY3RzYCBwZXJmb3JtcyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgb25cbiAqIG9iamVjdHMsIHdoaWNoIG1lYW5zIHRoYXQgYW55IGRlZXAgbW9kaWZpY2F0aW9ucyB0byBhbiBvYmplY3Qgb3IgYXJyYXkgd2lsbFxuICogbm90IGJlIHByb3BhZ2F0ZWQgdW5sZXNzIFwiaW1tdXRhYmxlXCIgZGF0YSBwYXR0ZXJucyBhcmUgdXNlZCAoaS5lLiBhbGwgb2JqZWN0XG4gKiByZWZlcmVuY2VzIGZyb20gdGhlIHJvb3QgdG8gdGhlIG11dGF0aW9uIHdlcmUgY2hhbmdlZCkuXG4gKlxuICogUG9seW1lciBhbHNvIHByb3ZpZGVzIGEgcHJvcHJpZXRhcnkgZGF0YSBtdXRhdGlvbiBhbmQgcGF0aCBub3RpZmljYXRpb24gQVBJXG4gKiAoZS5nLiBgbm90aWZ5UGF0aGAsIGBzZXRgLCBhbmQgYXJyYXkgbXV0YXRpb24gQVBJJ3MpIHRoYXQgYWxsb3cgZWZmaWNpZW50XG4gKiBtdXRhdGlvbiBhbmQgbm90aWZpY2F0aW9uIG9mIGRlZXAgY2hhbmdlcyBpbiBhbiBvYmplY3QgZ3JhcGggdG8gYWxsIGVsZW1lbnRzXG4gKiBib3VuZCB0byB0aGUgc2FtZSBvYmplY3QgZ3JhcGguXG4gKlxuICogSW4gY2FzZXMgd2hlcmUgbmVpdGhlciBpbW11dGFibGUgcGF0dGVybnMgbm9yIHRoZSBkYXRhIG11dGF0aW9uIEFQSSBjYW4gYmVcbiAqIHVzZWQsIGFwcGx5aW5nIHRoaXMgbWl4aW4gd2lsbCBjYXVzZSBQb2x5bWVyIHRvIHNraXAgZGlydHkgY2hlY2tpbmcgZm9yXG4gKiBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIikuICBUaGlzIGFsbG93cyBhXG4gKiB1c2VyIHRvIG1ha2UgYSBkZWVwIG1vZGlmaWNhdGlvbiB0byBhIGJvdW5kIG9iamVjdCBncmFwaCwgYW5kIHRoZW4gZWl0aGVyXG4gKiBzaW1wbHkgcmUtc2V0IHRoZSBvYmplY3QgKGUuZy4gYHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zYCkgb3IgY2FsbCBgbm90aWZ5UGF0aGBcbiAqIChlLmcuIGB0aGlzLm5vdGlmeVBhdGgoJ2l0ZW1zJylgKSB0byB1cGRhdGUgdGhlIHRyZWUuICBOb3RlIHRoYXQgYWxsXG4gKiBlbGVtZW50cyB0aGF0IHdpc2ggdG8gYmUgdXBkYXRlZCBiYXNlZCBvbiBkZWVwIG11dGF0aW9ucyBtdXN0IGFwcGx5IHRoaXNcbiAqIG1peGluIG9yIG90aGVyd2lzZSBza2lwIHN0cmljdCBkaXJ0eSBjaGVja2luZyBmb3Igb2JqZWN0cy9hcnJheXMuXG4gKiBTcGVjaWZpY2FsbHksIGFueSBlbGVtZW50cyBpbiB0aGUgYmluZGluZyB0cmVlIGJldHdlZW4gdGhlIHNvdXJjZSBvZiBhXG4gKiBtdXRhdGlvbiBhbmQgdGhlIGNvbnN1bXB0aW9uIG9mIGl0IG11c3QgYXBwbHkgdGhpcyBtaXhpbiBvciBlbmFibGUgdGhlXG4gKiBgT3B0aW9uYWxNdXRhYmxlRGF0YWAgbWl4aW4uXG4gKlxuICogSW4gb3JkZXIgdG8gbWFrZSB0aGUgZGlydHkgY2hlY2sgc3RyYXRlZ3kgY29uZmlndXJhYmxlLCBzZWVcbiAqIGBPcHRpb25hbE11dGFibGVEYXRhYC5cbiAqXG4gKiBOb3RlLCB0aGUgcGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzIG9mIHByb3BhZ2F0aW5nIGxhcmdlIG9iamVjdCBncmFwaHNcbiAqIHdpbGwgYmUgd29yc2UgYXMgb3Bwb3NlZCB0byB1c2luZyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgd2l0aCBpbW11dGFibGVcbiAqIHBhdHRlcm5zIG9yIFBvbHltZXIncyBwYXRoIG5vdGlmaWNhdGlvbiBBUEkuXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRvIHNraXAgc3RyaWN0IGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzXG4gKiAgIGFuZCBhcnJheXNcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBNdXRhYmxlRGF0YSA9IGRlZHVwaW5nTWl4aW4oc3VwZXJDbGFzcyA9PiB7XG5cbiAgLyoqXG4gICAqIEBwb2x5bWVyXG4gICAqIEBtaXhpbkNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX011dGFibGVEYXRhfVxuICAgKi9cbiAgY2xhc3MgTXV0YWJsZURhdGEgZXh0ZW5kcyBzdXBlckNsYXNzIHtcbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYFByb3BlcnR5RWZmZWN0c2AgdG8gcHJvdmlkZSBvcHRpb24gZm9yIHNraXBwaW5nXG4gICAgICogc3RyaWN0IGVxdWFsaXR5IGNoZWNraW5nIGZvciBPYmplY3RzIGFuZCBBcnJheXMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBwdWxscyB0aGUgdmFsdWUgdG8gZGlydHkgY2hlY2sgYWdhaW5zdCBmcm9tIHRoZSBgX19kYXRhVGVtcGBcbiAgICAgKiBjYWNoZSAocmF0aGVyIHRoYW4gdGhlIG5vcm1hbCBgX19kYXRhYCBjYWNoZSkgZm9yIE9iamVjdHMuICBTaW5jZSB0aGUgdGVtcFxuICAgICAqIGNhY2hlIGlzIGNsZWFyZWQgYXQgdGhlIGVuZCBvZiBhIHR1cm4sIHRoaXMgaW1wbGVtZW50YXRpb24gYWxsb3dzXG4gICAgICogc2lkZS1lZmZlY3RzIG9mIGRlZXAgb2JqZWN0IGNoYW5nZXMgdG8gYmUgcHJvY2Vzc2VkIGJ5IHJlLXNldHRpbmcgdGhlXG4gICAgICogc2FtZSBvYmplY3QgKHVzaW5nIHRoZSB0ZW1wIGNhY2hlIGFzIGFuIGluLXR1cm4gYmFja3N0b3AgdG8gcHJldmVudFxuICAgICAqIGN5Y2xlcyBkdWUgdG8gMi13YXkgbm90aWZpY2F0aW9uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBOZXcgcHJvcGVydHkgdmFsdWVcbiAgICAgKiBAcGFyYW0geyp9IG9sZCBQcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgY2hhbmdlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIG9sZCkge1xuICAgICAgcmV0dXJuIG11dGFibGVQcm9wZXJ0eUNoYW5nZSh0aGlzLCBwcm9wZXJ0eSwgdmFsdWUsIG9sZCwgdHJ1ZSk7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gTXV0YWJsZURhdGE7XG5cbn0pO1xuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdG8gYWRkIHRoZSBvcHRpb25hbCBhYmlsaXR5IHRvIHNraXAgc3RyaWN0XG4gKiBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZVxuICogXCJkaXJ0eVwiKSBieSBzZXR0aW5nIGEgYG11dGFibGUtZGF0YWAgYXR0cmlidXRlIG9uIGFuIGVsZW1lbnQgaW5zdGFuY2UuXG4gKlxuICogQnkgZGVmYXVsdCwgYFByb3BlcnR5RWZmZWN0c2AgcGVyZm9ybXMgc3RyaWN0IGRpcnR5IGNoZWNraW5nIG9uXG4gKiBvYmplY3RzLCB3aGljaCBtZWFucyB0aGF0IGFueSBkZWVwIG1vZGlmaWNhdGlvbnMgdG8gYW4gb2JqZWN0IG9yIGFycmF5IHdpbGxcbiAqIG5vdCBiZSBwcm9wYWdhdGVkIHVubGVzcyBcImltbXV0YWJsZVwiIGRhdGEgcGF0dGVybnMgYXJlIHVzZWQgKGkuZS4gYWxsIG9iamVjdFxuICogcmVmZXJlbmNlcyBmcm9tIHRoZSByb290IHRvIHRoZSBtdXRhdGlvbiB3ZXJlIGNoYW5nZWQpLlxuICpcbiAqIFBvbHltZXIgYWxzbyBwcm92aWRlcyBhIHByb3ByaWV0YXJ5IGRhdGEgbXV0YXRpb24gYW5kIHBhdGggbm90aWZpY2F0aW9uIEFQSVxuICogKGUuZy4gYG5vdGlmeVBhdGhgLCBgc2V0YCwgYW5kIGFycmF5IG11dGF0aW9uIEFQSSdzKSB0aGF0IGFsbG93IGVmZmljaWVudFxuICogbXV0YXRpb24gYW5kIG5vdGlmaWNhdGlvbiBvZiBkZWVwIGNoYW5nZXMgaW4gYW4gb2JqZWN0IGdyYXBoIHRvIGFsbCBlbGVtZW50c1xuICogYm91bmQgdG8gdGhlIHNhbWUgb2JqZWN0IGdyYXBoLlxuICpcbiAqIEluIGNhc2VzIHdoZXJlIG5laXRoZXIgaW1tdXRhYmxlIHBhdHRlcm5zIG5vciB0aGUgZGF0YSBtdXRhdGlvbiBBUEkgY2FuIGJlXG4gKiB1c2VkLCBhcHBseWluZyB0aGlzIG1peGluIHdpbGwgYWxsb3cgUG9seW1lciB0byBza2lwIGRpcnR5IGNoZWNraW5nIGZvclxuICogb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZSBcImRpcnR5XCIpLiAgVGhpcyBhbGxvd3MgYVxuICogdXNlciB0byBtYWtlIGEgZGVlcCBtb2RpZmljYXRpb24gdG8gYSBib3VuZCBvYmplY3QgZ3JhcGgsIGFuZCB0aGVuIGVpdGhlclxuICogc2ltcGx5IHJlLXNldCB0aGUgb2JqZWN0IChlLmcuIGB0aGlzLml0ZW1zID0gdGhpcy5pdGVtc2ApIG9yIGNhbGwgYG5vdGlmeVBhdGhgXG4gKiAoZS5nLiBgdGhpcy5ub3RpZnlQYXRoKCdpdGVtcycpYCkgdG8gdXBkYXRlIHRoZSB0cmVlLiAgTm90ZSB0aGF0IGFsbFxuICogZWxlbWVudHMgdGhhdCB3aXNoIHRvIGJlIHVwZGF0ZWQgYmFzZWQgb24gZGVlcCBtdXRhdGlvbnMgbXVzdCBhcHBseSB0aGlzXG4gKiBtaXhpbiBvciBvdGhlcndpc2Ugc2tpcCBzdHJpY3QgZGlydHkgY2hlY2tpbmcgZm9yIG9iamVjdHMvYXJyYXlzLlxuICogU3BlY2lmaWNhbGx5LCBhbnkgZWxlbWVudHMgaW4gdGhlIGJpbmRpbmcgdHJlZSBiZXR3ZWVuIHRoZSBzb3VyY2Ugb2YgYVxuICogbXV0YXRpb24gYW5kIHRoZSBjb25zdW1wdGlvbiBvZiBpdCBtdXN0IGVuYWJsZSB0aGlzIG1peGluIG9yIGFwcGx5IHRoZVxuICogYE11dGFibGVEYXRhYCBtaXhpbi5cbiAqXG4gKiBXaGlsZSB0aGlzIG1peGluIGFkZHMgdGhlIGFiaWxpdHkgdG8gZm9yZ28gT2JqZWN0L0FycmF5IGRpcnR5IGNoZWNraW5nLFxuICogdGhlIGBtdXRhYmxlRGF0YWAgZmxhZyBkZWZhdWx0cyB0byBmYWxzZSBhbmQgbXVzdCBiZSBzZXQgb24gdGhlIGluc3RhbmNlLlxuICpcbiAqIE5vdGUsIHRoZSBwZXJmb3JtYW5jZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgcHJvcGFnYXRpbmcgbGFyZ2Ugb2JqZWN0IGdyYXBoc1xuICogd2lsbCBiZSB3b3JzZSBieSByZWx5aW5nIG9uIGBtdXRhYmxlRGF0YTogdHJ1ZWAgYXMgb3Bwb3NlZCB0byB1c2luZ1xuICogc3RyaWN0IGRpcnR5IGNoZWNraW5nIHdpdGggaW1tdXRhYmxlIHBhdHRlcm5zIG9yIFBvbHltZXIncyBwYXRoIG5vdGlmaWNhdGlvblxuICogQVBJLlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQHN1bW1hcnkgRWxlbWVudCBjbGFzcyBtaXhpbiB0byBvcHRpb25hbGx5IHNraXAgc3RyaWN0IGRpcnR5LWNoZWNraW5nXG4gKiAgIGZvciBvYmplY3RzIGFuZCBhcnJheXNcbiAqL1xuZXhwb3J0IGNvbnN0IE9wdGlvbmFsTXV0YWJsZURhdGEgPSBkZWR1cGluZ01peGluKHN1cGVyQ2xhc3MgPT4ge1xuXG4gIC8qKlxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAcG9seW1lclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9PcHRpb25hbE11dGFibGVEYXRhfVxuICAgKi9cbiAgY2xhc3MgT3B0aW9uYWxNdXRhYmxlRGF0YSBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluc3RhbmNlLWxldmVsIGZsYWcgZm9yIGNvbmZpZ3VyaW5nIHRoZSBkaXJ0eS1jaGVja2luZyBzdHJhdGVneVxuICAgICAgICAgKiBmb3IgdGhpcyBlbGVtZW50LiAgV2hlbiB0cnVlLCBPYmplY3RzIGFuZCBBcnJheXMgd2lsbCBza2lwIGRpcnR5XG4gICAgICAgICAqIGNoZWNraW5nLCBvdGhlcndpc2Ugc3RyaWN0IGVxdWFsaXR5IGNoZWNraW5nIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICovXG4gICAgICAgIG11dGFibGVEYXRhOiBCb29sZWFuXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBwcm92aWRlIG9wdGlvbiBmb3Igc2tpcHBpbmdcbiAgICAgKiBzdHJpY3QgZXF1YWxpdHkgY2hlY2tpbmcgZm9yIE9iamVjdHMgYW5kIEFycmF5cy5cbiAgICAgKlxuICAgICAqIFdoZW4gYHRoaXMubXV0YWJsZURhdGFgIGlzIHRydWUgb24gdGhpcyBpbnN0YW5jZSwgdGhpcyBtZXRob2RcbiAgICAgKiBwdWxscyB0aGUgdmFsdWUgdG8gZGlydHkgY2hlY2sgYWdhaW5zdCBmcm9tIHRoZSBgX19kYXRhVGVtcGAgY2FjaGVcbiAgICAgKiAocmF0aGVyIHRoYW4gdGhlIG5vcm1hbCBgX19kYXRhYCBjYWNoZSkgZm9yIE9iamVjdHMuICBTaW5jZSB0aGUgdGVtcFxuICAgICAqIGNhY2hlIGlzIGNsZWFyZWQgYXQgdGhlIGVuZCBvZiBhIHR1cm4sIHRoaXMgaW1wbGVtZW50YXRpb24gYWxsb3dzXG4gICAgICogc2lkZS1lZmZlY3RzIG9mIGRlZXAgb2JqZWN0IGNoYW5nZXMgdG8gYmUgcHJvY2Vzc2VkIGJ5IHJlLXNldHRpbmcgdGhlXG4gICAgICogc2FtZSBvYmplY3QgKHVzaW5nIHRoZSB0ZW1wIGNhY2hlIGFzIGFuIGluLXR1cm4gYmFja3N0b3AgdG8gcHJldmVudFxuICAgICAqIGN5Y2xlcyBkdWUgdG8gMi13YXkgbm90aWZpY2F0aW9uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBOZXcgcHJvcGVydHkgdmFsdWVcbiAgICAgKiBAcGFyYW0geyp9IG9sZCBQcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgY2hhbmdlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIG9sZCkge1xuICAgICAgcmV0dXJuIG11dGFibGVQcm9wZXJ0eUNoYW5nZSh0aGlzLCBwcm9wZXJ0eSwgdmFsdWUsIG9sZCwgdGhpcy5tdXRhYmxlRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE9wdGlvbmFsTXV0YWJsZURhdGE7XG5cbn0pO1xuXG4vLyBFeHBvcnQgZm9yIHVzZSBieSBsZWdhY3kgYmVoYXZpb3Jcbk11dGFibGVEYXRhLl9tdXRhYmxlUHJvcGVydHlDaGFuZ2UgPSBtdXRhYmxlUHJvcGVydHlDaGFuZ2U7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKipcbiAqIE1vZHVsZSBmb3IgcHJlcGFyaW5nIGFuZCBzdGFtcGluZyBpbnN0YW5jZXMgb2YgdGVtcGxhdGVzIHRoYXQgdXRpbGl6ZVxuICogUG9seW1lcidzIGRhdGEtYmluZGluZyBhbmQgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXIgZmVhdHVyZXMuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgLy8gR2V0IGEgdGVtcGxhdGUgZnJvbSBzb21ld2hlcmUsIGUuZy4gbGlnaHQgRE9NXG4gKiAgICAgbGV0IHRlbXBsYXRlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpO1xuICogICAgIC8vIFByZXBhcmUgdGhlIHRlbXBsYXRlXG4gKiAgICAgbGV0IFRlbXBsYXRlQ2xhc3MgPSBUZW1wbGF0aXplLnRlbXBsYXRpemUodGVtcGxhdGUpO1xuICogICAgIC8vIEluc3RhbmNlIHRoZSB0ZW1wbGF0ZSB3aXRoIGFuIGluaXRpYWwgZGF0YSBtb2RlbFxuICogICAgIGxldCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUNsYXNzKHtteVByb3A6ICdpbml0aWFsJ30pO1xuICogICAgIC8vIEluc2VydCB0aGUgaW5zdGFuY2UncyBET00gc29tZXdoZXJlLCBlLmcuIGVsZW1lbnQncyBzaGFkb3cgRE9NXG4gKiAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKGluc3RhbmNlLnJvb3QpO1xuICogICAgIC8vIENoYW5naW5nIGEgcHJvcGVydHkgb24gdGhlIGluc3RhbmNlIHdpbGwgcHJvcGFnYXRlIHRvIGJpbmRpbmdzXG4gKiAgICAgLy8gaW4gdGhlIHRlbXBsYXRlXG4gKiAgICAgaW5zdGFuY2UubXlQcm9wID0gJ25ldyB2YWx1ZSc7XG4gKlxuICogVGhlIGBvcHRpb25zYCBkaWN0aW9uYXJ5IHBhc3NlZCB0byBgdGVtcGxhdGl6ZWAgYWxsb3dzIGZvciBjdXN0b21pemluZ1xuICogZmVhdHVyZXMgb2YgdGhlIGdlbmVyYXRlZCB0ZW1wbGF0ZSBjbGFzcywgaW5jbHVkaW5nIGhvdyBvdXRlci1zY29wZSBob3N0XG4gKiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBmb3J3YXJkZWQgaW50byB0ZW1wbGF0ZSBpbnN0YW5jZXMsIGhvdyBhbnkgaW5zdGFuY2VcbiAqIHByb3BlcnRpZXMgYWRkZWQgaW50byB0aGUgdGVtcGxhdGUncyBzY29wZSBzaG91bGQgYmUgbm90aWZpZWQgb3V0IHRvXG4gKiB0aGUgaG9zdCwgYW5kIHdoZXRoZXIgdGhlIGluc3RhbmNlIHNob3VsZCBiZSBkZWNvcmF0ZWQgYXMgYSBcInBhcmVudCBtb2RlbFwiXG4gKiBvZiBhbnkgZXZlbnQgaGFuZGxlcnMuXG4gKlxuICogICAgIC8vIEN1c3RvbWl6ZSBwcm9wZXJ0eSBmb3J3YXJkaW5nIGFuZCBldmVudCBtb2RlbCBkZWNvcmF0aW9uXG4gKiAgICAgbGV0IFRlbXBsYXRlQ2xhc3MgPSBUZW1wbGF0aXplLnRlbXBsYXRpemUodGVtcGxhdGUsIHRoaXMsIHtcbiAqICAgICAgIHBhcmVudE1vZGVsOiB0cnVlLFxuICogICAgICAgZm9yd2FyZEhvc3RQcm9wKHByb3BlcnR5LCB2YWx1ZSkgey4uLn0sXG4gKiAgICAgICBpbnN0YW5jZVByb3BzOiB7Li4ufSxcbiAqICAgICAgIG5vdGlmeUluc3RhbmNlUHJvcChpbnN0YW5jZSwgcHJvcGVydHksIHZhbHVlKSB7Li4ufSxcbiAqICAgICB9KTtcbiAqXG4gKiBAc3VtbWFyeSBNb2R1bGUgZm9yIHByZXBhcmluZyBhbmQgc3RhbXBpbmcgaW5zdGFuY2VzIG9mIHRlbXBsYXRlc1xuICogICB1dGlsaXppbmcgUG9seW1lciB0ZW1wbGF0aW5nIGZlYXR1cmVzLlxuICovXG5cbmltcG9ydCAnLi9ib290LmpzJztcblxuaW1wb3J0IHsgUHJvcGVydHlFZmZlY3RzIH0gZnJvbSAnLi4vbWl4aW5zL3Byb3BlcnR5LWVmZmVjdHMuanMnO1xuaW1wb3J0IHsgTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcbmltcG9ydCB7IHN0cmljdFRlbXBsYXRlUG9saWN5IH0gZnJvbSAnLi9zZXR0aW5ncy5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi93cmFwLmpzJztcblxuLy8gQmFzZSBjbGFzcyBmb3IgSFRNTFRlbXBsYXRlRWxlbWVudCBleHRlbnNpb24gdGhhdCBoYXMgcHJvcGVydHkgZWZmZWN0c1xuLy8gbWFjaGluZXJ5IGZvciBwcm9wYWdhdGluZyBob3N0IHByb3BlcnRpZXMgdG8gY2hpbGRyZW4uIFRoaXMgaXMgYW4gRVM1XG4vLyBjbGFzcyBvbmx5IGJlY2F1c2UgQmFiZWwgKGluY29ycmVjdGx5KSByZXF1aXJlcyBzdXBlcigpIGluIHRoZSBjbGFzc1xuLy8gY29uc3RydWN0b3IgZXZlbiB0aG91Z2ggbm8gYHRoaXNgIGlzIHVzZWQgYW5kIGl0IHJldHVybnMgYW4gaW5zdGFuY2UuXG5sZXQgbmV3SW5zdGFuY2UgPSBudWxsO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMge0hUTUxUZW1wbGF0ZUVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBIVE1MVGVtcGxhdGVFbGVtZW50RXh0ZW5zaW9uKCkgeyByZXR1cm4gbmV3SW5zdGFuY2U7IH1cbkhUTUxUZW1wbGF0ZUVsZW1lbnRFeHRlbnNpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSwge1xuICBjb25zdHJ1Y3Rvcjoge1xuICAgIHZhbHVlOiBIVE1MVGVtcGxhdGVFbGVtZW50RXh0ZW5zaW9uLFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzfVxuICogQGV4dGVuZHMge0hUTUxUZW1wbGF0ZUVsZW1lbnRFeHRlbnNpb259XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBEYXRhVGVtcGxhdGUgPSBQcm9wZXJ0eUVmZmVjdHMoSFRNTFRlbXBsYXRlRWxlbWVudEV4dGVuc2lvbik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaW1wbGVtZW50cyB7UG9seW1lcl9NdXRhYmxlRGF0YX1cbiAqIEBleHRlbmRzIHtEYXRhVGVtcGxhdGV9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBNdXRhYmxlRGF0YVRlbXBsYXRlID0gTXV0YWJsZURhdGEoRGF0YVRlbXBsYXRlKTtcblxuLy8gQXBwbGllcyBhIERhdGFUZW1wbGF0ZSBzdWJjbGFzcyB0byBhIDx0ZW1wbGF0ZT4gaW5zdGFuY2VcbmZ1bmN0aW9uIHVwZ3JhZGVUZW1wbGF0ZSh0ZW1wbGF0ZSwgY29uc3RydWN0b3IpIHtcbiAgbmV3SW5zdGFuY2UgPSB0ZW1wbGF0ZTtcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRlbXBsYXRlLCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICBuZXcgY29uc3RydWN0b3IoKTtcbiAgbmV3SW5zdGFuY2UgPSBudWxsO1xufVxuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFRlbXBsYXRlSW5zdGFuY2UuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtIVE1MRWxlbWVudH1cbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c31cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHRlbXBsYXRlSW5zdGFuY2VCYXNlID0gUHJvcGVydHlFZmZlY3RzKFxuICAgIC8vIFRoaXMgY2FzdCBzaG91bGRuJ3QgYmUgbmVjY2Vzc2FyeSwgYnV0IENsb3N1cmUgZG9lc24ndCB1bmRlcnN0YW5kIHRoYXRcbiAgICAvLyBcImNsYXNzIHt9XCIgaXMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKG5ldzpPYmplY3QpfSAqLyhjbGFzcyB7fSkpO1xuXG4vKipcbiAqIEBwb2x5bWVyXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0eUVmZmVjdHNcbiAqIEB1bnJlc3RyaWN0ZWRcbiAqL1xuY2xhc3MgVGVtcGxhdGVJbnN0YW5jZUJhc2UgZXh0ZW5kcyB0ZW1wbGF0ZUluc3RhbmNlQmFzZSB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jb25maWd1cmVQcm9wZXJ0aWVzKHByb3BzKTtcbiAgICAvKiogQHR5cGUgeyFTdGFtcGVkVGVtcGxhdGV9ICovXG4gICAgdGhpcy5yb290ID0gdGhpcy5fc3RhbXBUZW1wbGF0ZSh0aGlzLl9fZGF0YUhvc3QpO1xuICAgIC8vIFNhdmUgbGlzdCBvZiBzdGFtcGVkIGNoaWxkcmVuXG4gICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgLyoqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfSAqL1xuICAgIHRoaXMuY2hpbGRyZW4gPSAvKiogQHR5cGUgeyFOb2RlTGlzdH0gKi8gKGNoaWxkcmVuKTtcbiAgICAvLyBQb2x5bWVyIDEueCBkaWQgbm90IHVzZSBgUG9seW1lci5kb21gIGhlcmUgc28gbm90IGJvdGhlcmluZy5cbiAgICBmb3IgKGxldCBuID0gdGhpcy5yb290LmZpcnN0Q2hpbGQ7IG47IG49bi5uZXh0U2libGluZykge1xuICAgICAgY2hpbGRyZW4ucHVzaChuKTtcbiAgICAgIG4uX190ZW1wbGF0aXplSW5zdGFuY2UgPSB0aGlzO1xuICAgIH1cbiAgICBpZiAodGhpcy5fX3RlbXBsYXRpemVPd25lciAmJlxuICAgICAgdGhpcy5fX3RlbXBsYXRpemVPd25lci5fX2hpZGVUZW1wbGF0ZUNoaWxkcmVuX18pIHtcbiAgICAgIHRoaXMuX3Nob3dIaWRlQ2hpbGRyZW4odHJ1ZSk7XG4gICAgfVxuICAgIC8vIEZsdXNoIHByb3BzIG9ubHkgd2hlbiBwcm9wcyBhcmUgcGFzc2VkIGlmIGluc3RhbmNlIHByb3BzIGV4aXN0XG4gICAgLy8gb3Igd2hlbiB0aGVyZSBpc24ndCBpbnN0YW5jZSBwcm9wcy5cbiAgICBsZXQgb3B0aW9ucyA9IHRoaXMuX190ZW1wbGF0aXplT3B0aW9ucztcbiAgICBpZiAoKHByb3BzICYmIG9wdGlvbnMuaW5zdGFuY2VQcm9wcykgfHwgIW9wdGlvbnMuaW5zdGFuY2VQcm9wcykge1xuICAgICAgdGhpcy5fZW5hYmxlUHJvcGVydGllcygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29uZmlndXJlIHRoZSBnaXZlbiBgcHJvcHNgIGJ5IGNhbGxpbmcgYF9zZXRQZW5kaW5nUHJvcGVydHlgLiBBbHNvXG4gICAqIHNldHMgYW55IHByb3BlcnRpZXMgc3RvcmVkIGluIGBfX2hvc3RQcm9wc2AuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBPYmplY3Qgb2YgcHJvcGVydHkgbmFtZS12YWx1ZSBwYWlycyB0byBzZXQuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfY29uZmlndXJlUHJvcGVydGllcyhwcm9wcykge1xuICAgIGxldCBvcHRpb25zID0gdGhpcy5fX3RlbXBsYXRpemVPcHRpb25zO1xuICAgIGlmIChvcHRpb25zLmZvcndhcmRIb3N0UHJvcCkge1xuICAgICAgZm9yIChsZXQgaHByb3AgaW4gdGhpcy5fX2hvc3RQcm9wcykge1xuICAgICAgICB0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkoaHByb3AsIHRoaXMuX19kYXRhSG9zdFsnX2hvc3RfJyArIGhwcm9wXSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFueSBpbnN0YW5jZSBwcm9wcyBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yIHdpbGwgb3ZlcndyaXRlIGhvc3QgcHJvcHM7XG4gICAgLy8gbm9ybWFsbHkgdGhpcyB3b3VsZCBiZSBhIHVzZXIgZXJyb3IgYnV0IHdlIGRvbid0IHNwZWNpZmljYWxseSBmaWx0ZXIgdGhlbVxuICAgIGZvciAobGV0IGlwcm9wIGluIHByb3BzKSB7XG4gICAgICB0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkoaXByb3AsIHByb3BzW2lwcm9wXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGb3J3YXJkcyBhIGhvc3QgcHJvcGVydHkgdG8gdGhpcyBpbnN0YW5jZS4gIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgKiBjYWxsZWQgb24gaW5zdGFuY2VzIGZyb20gdGhlIGBvcHRpb25zLmZvcndhcmRIb3N0UHJvcGAgY2FsbGJhY2tcbiAgICogdG8gcHJvcGFnYXRlIGNoYW5nZXMgb2YgaG9zdCBwcm9wZXJ0aWVzIHRvIGVhY2ggaW5zdGFuY2UuXG4gICAqXG4gICAqIE5vdGUgdGhpcyBtZXRob2QgZW5xdWV1ZXMgdGhlIGNoYW5nZSwgd2hpY2ggYXJlIGZsdXNoZWQgYXMgYSBiYXRjaC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgb3IgcGF0aCBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb2YgdGhlIHByb3BlcnR5IHRvIGZvcndhcmRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGZvcndhcmRIb3N0UHJvcChwcm9wLCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgocHJvcCwgdmFsdWUsIGZhbHNlLCB0cnVlKSkge1xuICAgICAgdGhpcy5fX2RhdGFIb3N0Ll9lbnF1ZXVlQ2xpZW50KHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBwb2ludCBmb3IgYWRkaW5nIGN1c3RvbSBvciBzaW11bGF0ZWQgZXZlbnQgaGFuZGxpbmcuXG4gICAqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlIE5vZGUgdG8gYWRkIGV2ZW50IGxpc3RlbmVyIHRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCk6dm9pZH0gaGFuZGxlciBMaXN0ZW5lciBmdW5jdGlvbiB0byBhZGRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9hZGRFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIGlmICh0aGlzLl9tZXRob2RIb3N0ICYmIHRoaXMuX190ZW1wbGF0aXplT3B0aW9ucy5wYXJlbnRNb2RlbCkge1xuICAgICAgLy8gSWYgdGhpcyBpbnN0YW5jZSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIHBhcmVudCBtb2RlbCwgZGVjb3JhdGVcbiAgICAgIC8vIGV2ZW50cyB0aGlzIHRlbXBsYXRlIGluc3RhbmNlIGFzIGBtb2RlbGBcbiAgICAgIHRoaXMuX21ldGhvZEhvc3QuX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCAoZSkgPT4ge1xuICAgICAgICBlLm1vZGVsID0gdGhpcztcbiAgICAgICAgaGFuZGxlcihlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UgZGVsZWdhdGUgdG8gdGhlIHRlbXBsYXRlJ3MgaG9zdCAod2hpY2ggY291bGQgYmUpXG4gICAgICAvLyBhbm90aGVyIHRlbXBsYXRlIGluc3RhbmNlXG4gICAgICBsZXQgdGVtcGxhdGVIb3N0ID0gdGhpcy5fX2RhdGFIb3N0Ll9fZGF0YUhvc3Q7XG4gICAgICBpZiAodGVtcGxhdGVIb3N0KSB7XG4gICAgICAgIHRlbXBsYXRlSG9zdC5fYWRkRXZlbnRMaXN0ZW5lclRvTm9kZShub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2hvd3Mgb3IgaGlkZXMgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHRvcCBsZXZlbCBjaGlsZCBlbGVtZW50cy4gRm9yXG4gICAqIHRleHQgbm9kZXMsIGB0ZXh0Q29udGVudGAgaXMgcmVtb3ZlZCB3aGlsZSBcImhpZGRlblwiIGFuZCByZXBsYWNlZCB3aGVuXG4gICAqIFwic2hvd24uXCJcbiAgICogQHBhcmFtIHtib29sZWFufSBoaWRlIFNldCB0byB0cnVlIHRvIGhpZGUgdGhlIGNoaWxkcmVuO1xuICAgKiBzZXQgdG8gZmFsc2UgdG8gc2hvdyB0aGVtLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBfc2hvd0hpZGVDaGlsZHJlbihoaWRlKSB7XG4gICAgbGV0IGMgPSB0aGlzLmNoaWxkcmVuO1xuICAgIGZvciAobGV0IGk9MDsgaTxjLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgbiA9IGNbaV07XG4gICAgICAvLyBJZ25vcmUgbm9uLWNoYW5nZXNcbiAgICAgIGlmIChCb29sZWFuKGhpZGUpICE9IEJvb2xlYW4obi5fX2hpZGVUZW1wbGF0ZUNoaWxkcmVuX18pKSB7XG4gICAgICAgIGlmIChuLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICAgIGlmIChoaWRlKSB7XG4gICAgICAgICAgICBuLl9fcG9seW1lclRleHRDb250ZW50X18gPSBuLnRleHRDb250ZW50O1xuICAgICAgICAgICAgbi50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuLnRleHRDb250ZW50ID0gbi5fX3BvbHltZXJUZXh0Q29udGVudF9fO1xuICAgICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGFuZCByZXBsYWNlIHNsb3RcbiAgICAgICAgfSBlbHNlIGlmIChuLmxvY2FsTmFtZSA9PT0gJ3Nsb3QnKSB7XG4gICAgICAgICAgaWYgKGhpZGUpIHtcbiAgICAgICAgICAgIG4uX19wb2x5bWVyUmVwbGFjZWRfXyA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ2hpZGRlbi1zbG90Jyk7XG4gICAgICAgICAgICB3cmFwKHdyYXAobikucGFyZW50Tm9kZSkucmVwbGFjZUNoaWxkKG4uX19wb2x5bWVyUmVwbGFjZWRfXywgbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2UgPSBuLl9fcG9seW1lclJlcGxhY2VkX187XG4gICAgICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgICAgICB3cmFwKHdyYXAocmVwbGFjZSkucGFyZW50Tm9kZSkucmVwbGFjZUNoaWxkKG4sIHJlcGxhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYgKG4uc3R5bGUpIHtcbiAgICAgICAgICBpZiAoaGlkZSkge1xuICAgICAgICAgICAgbi5fX3BvbHltZXJEaXNwbGF5X18gPSBuLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICBuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG4uc3R5bGUuZGlzcGxheSA9IG4uX19wb2x5bWVyRGlzcGxheV9fO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbi5fX2hpZGVUZW1wbGF0ZUNoaWxkcmVuX18gPSBoaWRlO1xuICAgICAgaWYgKG4uX3Nob3dIaWRlQ2hpbGRyZW4pIHtcbiAgICAgICAgbi5fc2hvd0hpZGVDaGlsZHJlbihoaWRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIE92ZXJyaWRlcyBkZWZhdWx0IHByb3BlcnR5LWVmZmVjdHMgaW1wbGVtZW50YXRpb24gdG8gaW50ZXJjZXB0XG4gICAqIHRleHRDb250ZW50IGJpbmRpbmdzIHdoaWxlIGNoaWxkcmVuIGFyZSBcImhpZGRlblwiIGFuZCBjYWNoZSBpblxuICAgKiBwcml2YXRlIHN0b3JhZ2UgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICpcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gc2V0IGEgcHJvcGVydHkgb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgVGhlIHByb3BlcnR5IHRvIHNldFxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3NldFVubWFuYWdlZFByb3BlcnR5VG9Ob2RlKG5vZGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKG5vZGUuX19oaWRlVGVtcGxhdGVDaGlsZHJlbl9fICYmXG4gICAgICAgIG5vZGUubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUgJiYgcHJvcCA9PSAndGV4dENvbnRlbnQnKSB7XG4gICAgICBub2RlLl9fcG9seW1lclRleHRDb250ZW50X18gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIuX3NldFVubWFuYWdlZFByb3BlcnR5VG9Ob2RlKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHBhcmVudCBtb2RlbCBvZiB0aGlzIHRlbXBsYXRlIGluc3RhbmNlLiAgVGhlIHBhcmVudCBtb2RlbFxuICAgKiBpcyBlaXRoZXIgYW5vdGhlciB0ZW1wbGF0aXplIGluc3RhbmNlIHRoYXQgaGFkIG9wdGlvbiBgcGFyZW50TW9kZWw6IHRydWVgLFxuICAgKiBvciBlbHNlIHRoZSBob3N0IGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gVGhlIHBhcmVudCBtb2RlbCBvZiB0aGlzIGluc3RhbmNlXG4gICAqL1xuICBnZXQgcGFyZW50TW9kZWwoKSB7XG4gICAgbGV0IG1vZGVsID0gdGhpcy5fX3BhcmVudE1vZGVsO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIGxldCBvcHRpb25zO1xuICAgICAgbW9kZWwgPSB0aGlzO1xuICAgICAgZG8ge1xuICAgICAgICAvLyBBIHRlbXBsYXRlIGluc3RhbmNlJ3MgYF9fZGF0YUhvc3RgIGlzIGEgPHRlbXBsYXRlPlxuICAgICAgICAvLyBgbW9kZWwuX19kYXRhSG9zdC5fX2RhdGFIb3N0YCBpcyB0aGUgdGVtcGxhdGUncyBob3N0XG4gICAgICAgIG1vZGVsID0gbW9kZWwuX19kYXRhSG9zdC5fX2RhdGFIb3N0O1xuICAgICAgfSB3aGlsZSAoKG9wdGlvbnMgPSBtb2RlbC5fX3RlbXBsYXRpemVPcHRpb25zKSAmJiAhb3B0aW9ucy5wYXJlbnRNb2RlbCk7XG4gICAgICB0aGlzLl9fcGFyZW50TW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0dWIgb2YgSFRNTEVsZW1lbnQncyBgZGlzcGF0Y2hFdmVudGAsIHNvIHRoYXQgZWZmZWN0cyB0aGF0IG1heVxuICAgKiBkaXNwYXRjaCBldmVudHMgc2FmZWx5IG5vLW9wLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBFdmVudCB0byBkaXNwYXRjaFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBBbHdheXMgdHJ1ZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICAgZGlzcGF0Y2hFdmVudChldmVudCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbi8qKiBAdHlwZSB7IURhdGFUZW1wbGF0ZX0gKi9cblRlbXBsYXRlSW5zdGFuY2VCYXNlLnByb3RvdHlwZS5fX2RhdGFIb3N0O1xuLyoqIEB0eXBlIHshVGVtcGxhdGl6ZU9wdGlvbnN9ICovXG5UZW1wbGF0ZUluc3RhbmNlQmFzZS5wcm90b3R5cGUuX190ZW1wbGF0aXplT3B0aW9ucztcbi8qKiBAdHlwZSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSAqL1xuVGVtcGxhdGVJbnN0YW5jZUJhc2UucHJvdG90eXBlLl9tZXRob2RIb3N0O1xuLyoqIEB0eXBlIHshT2JqZWN0fSAqL1xuVGVtcGxhdGVJbnN0YW5jZUJhc2UucHJvdG90eXBlLl9fdGVtcGxhdGl6ZU93bmVyO1xuLyoqIEB0eXBlIHshT2JqZWN0fSAqL1xuVGVtcGxhdGVJbnN0YW5jZUJhc2UucHJvdG90eXBlLl9faG9zdFByb3BzO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMge1RlbXBsYXRlSW5zdGFuY2VCYXNlfVxuICogQGltcGxlbWVudHMge1BvbHltZXJfTXV0YWJsZURhdGF9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBNdXRhYmxlVGVtcGxhdGVJbnN0YW5jZUJhc2UgPSBNdXRhYmxlRGF0YShcbiAgICAvLyBUaGlzIGNhc3Qgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSwgYnV0IENsb3N1cmUgZG9lc24ndCBzZWVtIHRvIHVuZGVyc3RhbmRcbiAgICAvLyB0aGlzIGNvbnN0cnVjdG9yLlxuICAgIC8qKiBAdHlwZSB7ZnVuY3Rpb24obmV3OlRlbXBsYXRlSW5zdGFuY2VCYXNlKX0gKi8oVGVtcGxhdGVJbnN0YW5jZUJhc2UpKTtcblxuZnVuY3Rpb24gZmluZE1ldGhvZEhvc3QodGVtcGxhdGUpIHtcbiAgLy8gVGVjaG5pY2FsbHkgdGhpcyBzaG91bGQgYmUgdGhlIG93bmVyIG9mIHRoZSBvdXRlcm1vc3QgdGVtcGxhdGUuXG4gIC8vIEluIHNoYWRvdyBkb20sIHRoaXMgaXMgYWx3YXlzIGdldFJvb3ROb2RlKCkuaG9zdCwgYnV0IHdlIGNhblxuICAvLyBhcHByb3hpbWF0ZSB0aGlzIHZpYSBjb29wZXJhdGlvbiB3aXRoIG91ciBkYXRhSG9zdCBhbHdheXMgc2V0dGluZ1xuICAvLyBgX21ldGhvZEhvc3RgIGFzIGxvbmcgYXMgdGhlcmUgd2VyZSBiaW5kaW5ncyAob3IgaWQncykgb24gdGhpc1xuICAvLyBpbnN0YW5jZSBjYXVzaW5nIGl0IHRvIGdldCBhIGRhdGFIb3N0LlxuICBsZXQgdGVtcGxhdGVIb3N0ID0gdGVtcGxhdGUuX19kYXRhSG9zdDtcbiAgcmV0dXJuIHRlbXBsYXRlSG9zdCAmJiB0ZW1wbGF0ZUhvc3QuX21ldGhvZEhvc3QgfHwgdGVtcGxhdGVIb3N0O1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyoqXG4gKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBjbGFzcy5wcm90b3R5cGUgaXMgbm90IGRlZmluZWQgZm9yIHNvbWUgcmVhc29uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRlbXBsYXRpemVyQ2xhc3ModGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgb3B0aW9ucykge1xuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBleHRlbmRzIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX1cbiAgICovXG4gIGxldCB0ZW1wbGF0aXplckJhc2UgPSBvcHRpb25zLm11dGFibGVEYXRhID9cbiAgICBNdXRhYmxlVGVtcGxhdGVJbnN0YW5jZUJhc2UgOiBUZW1wbGF0ZUluc3RhbmNlQmFzZTtcblxuICAvLyBBZmZvcmRhbmNlIGZvciBnbG9iYWwgbWl4aW5zIG9udG8gVGVtcGxhdGl6ZUluc3RhbmNlXG4gIGlmICh0ZW1wbGF0aXplLm1peGluKSB7XG4gICAgdGVtcGxhdGl6ZXJCYXNlID0gdGVtcGxhdGl6ZS5taXhpbih0ZW1wbGF0aXplckJhc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFub255bW91cyBjbGFzcyBjcmVhdGVkIGJ5IHRoZSB0ZW1wbGF0aXplXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbGV0IGtsYXNzID0gY2xhc3MgZXh0ZW5kcyB0ZW1wbGF0aXplckJhc2UgeyB9O1xuICAvKiogQG92ZXJyaWRlICovXG4gIGtsYXNzLnByb3RvdHlwZS5fX3RlbXBsYXRpemVPcHRpb25zID0gb3B0aW9ucztcbiAga2xhc3MucHJvdG90eXBlLl9iaW5kVGVtcGxhdGUodGVtcGxhdGUpO1xuICBhZGROb3RpZnlFZmZlY3RzKGtsYXNzLCB0ZW1wbGF0ZSwgdGVtcGxhdGVJbmZvLCBvcHRpb25zKTtcbiAgcmV0dXJuIGtsYXNzO1xufVxuXG4vKipcbiAqIEFkZHMgcHJvcGFnYXRlIGVmZmVjdHMgZnJvbSB0aGUgdGVtcGxhdGUgdG8gdGhlIHRlbXBsYXRlIGluc3RhbmNlIGZvclxuICogcHJvcGVydGllcyB0aGF0IHRoZSBob3N0IGJpbmRzIHRvIHRoZSB0ZW1wbGF0ZSB1c2luZyB0aGUgYF9ob3N0X2AgcHJlZml4LlxuICogXG4gKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBjbGFzcy5wcm90b3R5cGUgaXMgbm90IGRlZmluZWQgZm9yIHNvbWUgcmVhc29uXG4gKi9cbmZ1bmN0aW9uIGFkZFByb3BhZ2F0ZUVmZmVjdHModGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgb3B0aW9ucykge1xuICBsZXQgdXNlckZvcndhcmRIb3N0UHJvcCA9IG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wO1xuICBpZiAodXNlckZvcndhcmRIb3N0UHJvcCAmJiB0ZW1wbGF0ZUluZm8uaGFzSG9zdFByb3BzKSB7XG4gICAgLy8gUHJvdmlkZSBkYXRhIEFQSSBhbmQgcHJvcGVydHkgZWZmZWN0cyBvbiBtZW1vaXplZCB0ZW1wbGF0ZSBjbGFzc1xuICAgIGxldCBrbGFzcyA9IHRlbXBsYXRlSW5mby50ZW1wbGF0aXplVGVtcGxhdGVDbGFzcztcbiAgICBpZiAoIWtsYXNzKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICogQGV4dGVuZHMge0RhdGFUZW1wbGF0ZX1cbiAgICAgICAqL1xuICAgICAgbGV0IHRlbXBsYXRpemVkQmFzZSA9IG9wdGlvbnMubXV0YWJsZURhdGEgPyBNdXRhYmxlRGF0YVRlbXBsYXRlIDogRGF0YVRlbXBsYXRlO1xuICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICBrbGFzcyA9IHRlbXBsYXRlSW5mby50ZW1wbGF0aXplVGVtcGxhdGVDbGFzcyA9XG4gICAgICAgIGNsYXNzIFRlbXBsYXRpemVkVGVtcGxhdGUgZXh0ZW5kcyB0ZW1wbGF0aXplZEJhc2Uge307XG4gICAgICAvLyBBZGQgdGVtcGxhdGUgLSA+aW5zdGFuY2VzIGVmZmVjdHNcbiAgICAgIC8vIGFuZCBob3N0IDwtIHRlbXBsYXRlIGVmZmVjdHNcbiAgICAgIGxldCBob3N0UHJvcHMgPSB0ZW1wbGF0ZUluZm8uaG9zdFByb3BzO1xuICAgICAgZm9yIChsZXQgcHJvcCBpbiBob3N0UHJvcHMpIHtcbiAgICAgICAga2xhc3MucHJvdG90eXBlLl9hZGRQcm9wZXJ0eUVmZmVjdCgnX2hvc3RfJyArIHByb3AsXG4gICAgICAgICAga2xhc3MucHJvdG90eXBlLlBST1BFUlRZX0VGRkVDVF9UWVBFUy5QUk9QQUdBVEUsXG4gICAgICAgICAge2ZuOiBjcmVhdGVGb3J3YXJkSG9zdFByb3BFZmZlY3QocHJvcCwgdXNlckZvcndhcmRIb3N0UHJvcCl9KTtcbiAgICAgICAga2xhc3MucHJvdG90eXBlLl9jcmVhdGVOb3RpZnlpbmdQcm9wZXJ0eSgnX2hvc3RfJyArIHByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgICB1cGdyYWRlVGVtcGxhdGUodGVtcGxhdGUsIGtsYXNzKTtcbiAgICAvLyBNaXggYW55IHByZS1ib3VuZCBkYXRhIGludG8gX19kYXRhOyBubyBuZWVkIHRvIGZsdXNoIHRoaXMgdG9cbiAgICAvLyBpbnN0YW5jZXMgc2luY2UgdGhleSBwdWxsIGZyb20gdGhlIHRlbXBsYXRlIGF0IGluc3RhbmNlLXRpbWVcbiAgICBpZiAodGVtcGxhdGUuX19kYXRhUHJvdG8pIHtcbiAgICAgIC8vIE5vdGUsIGdlbmVyYWxseSBgX19kYXRhUHJvdG9gIGNvdWxkIGJlIGNoYWluZWQsIGJ1dCBpdCdzIGd1YXJhbnRlZWRcbiAgICAgIC8vIHRvIG5vdCBiZSBzaW5jZSB0aGlzIGlzIGEgdmFuaWxsYSB0ZW1wbGF0ZSB3ZSBqdXN0IGFkZGVkIGVmZmVjdHMgdG9cbiAgICAgIE9iamVjdC5hc3NpZ24odGVtcGxhdGUuX19kYXRhLCB0ZW1wbGF0ZS5fX2RhdGFQcm90byk7XG4gICAgfVxuICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIGRhdGEgZm9yIHBlcmZvcm1hbmNlXG4gICAgdGVtcGxhdGUuX19kYXRhVGVtcCA9IHt9O1xuICAgIHRlbXBsYXRlLl9fZGF0YVBlbmRpbmcgPSBudWxsO1xuICAgIHRlbXBsYXRlLl9fZGF0YU9sZCA9IG51bGw7XG4gICAgdGVtcGxhdGUuX2VuYWJsZVByb3BlcnRpZXMoKTtcbiAgfVxufVxuLyogZXNsaW50LWVuYWJsZSB2YWxpZC1qc2RvYyAqL1xuXG5mdW5jdGlvbiBjcmVhdGVGb3J3YXJkSG9zdFByb3BFZmZlY3QoaG9zdFByb3AsIHVzZXJGb3J3YXJkSG9zdFByb3ApIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvcndhcmRIb3N0UHJvcCh0ZW1wbGF0ZSwgcHJvcCwgcHJvcHMpIHtcbiAgICB1c2VyRm9yd2FyZEhvc3RQcm9wLmNhbGwodGVtcGxhdGUuX190ZW1wbGF0aXplT3duZXIsXG4gICAgICBwcm9wLnN1YnN0cmluZygnX2hvc3RfJy5sZW5ndGgpLCBwcm9wc1twcm9wXSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFkZE5vdGlmeUVmZmVjdHMoa2xhc3MsIHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIG9wdGlvbnMpIHtcbiAgbGV0IGhvc3RQcm9wcyA9IHRlbXBsYXRlSW5mby5ob3N0UHJvcHMgfHwge307XG4gIGZvciAobGV0IGlwcm9wIGluIG9wdGlvbnMuaW5zdGFuY2VQcm9wcykge1xuICAgIGRlbGV0ZSBob3N0UHJvcHNbaXByb3BdO1xuICAgIGxldCB1c2VyTm90aWZ5SW5zdGFuY2VQcm9wID0gb3B0aW9ucy5ub3RpZnlJbnN0YW5jZVByb3A7XG4gICAgaWYgKHVzZXJOb3RpZnlJbnN0YW5jZVByb3ApIHtcbiAgICAgIGtsYXNzLnByb3RvdHlwZS5fYWRkUHJvcGVydHlFZmZlY3QoaXByb3AsXG4gICAgICAgIGtsYXNzLnByb3RvdHlwZS5QUk9QRVJUWV9FRkZFQ1RfVFlQRVMuTk9USUZZLFxuICAgICAgICB7Zm46IGNyZWF0ZU5vdGlmeUluc3RhbmNlUHJvcEVmZmVjdChpcHJvcCwgdXNlck5vdGlmeUluc3RhbmNlUHJvcCl9KTtcbiAgICB9XG4gIH1cbiAgaWYgKG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wICYmIHRlbXBsYXRlLl9fZGF0YUhvc3QpIHtcbiAgICBmb3IgKGxldCBocHJvcCBpbiBob3N0UHJvcHMpIHtcbiAgICAgIC8vIEFzIHdlJ3JlIGl0ZXJhdGluZyBob3N0UHJvcHMgaW4gdGhpcyBmdW5jdGlvbiwgbm90ZSB3aGV0aGVyXG4gICAgICAvLyB0aGVyZSB3ZXJlIGFueSwgZm9yIGFuIG9wdGltaXphdGlvbiBpbiBhZGRQcm9wYWdhdGVFZmZlY3RzXG4gICAgICBpZiAoIXRlbXBsYXRlSW5mby5oYXNIb3N0UHJvcHMpIHtcbiAgICAgICAgdGVtcGxhdGVJbmZvLmhhc0hvc3RQcm9wcyA9IHRydWU7XG4gICAgICB9XG4gICAgICBrbGFzcy5wcm90b3R5cGUuX2FkZFByb3BlcnR5RWZmZWN0KGhwcm9wLFxuICAgICAgICBrbGFzcy5wcm90b3R5cGUuUFJPUEVSVFlfRUZGRUNUX1RZUEVTLk5PVElGWSxcbiAgICAgICAge2ZuOiBjcmVhdGVOb3RpZnlIb3N0UHJvcEVmZmVjdCgpfSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vdGlmeUluc3RhbmNlUHJvcEVmZmVjdChpbnN0UHJvcCwgdXNlck5vdGlmeUluc3RhbmNlUHJvcCkge1xuICByZXR1cm4gZnVuY3Rpb24gbm90aWZ5SW5zdGFuY2VQcm9wKGluc3QsIHByb3AsIHByb3BzKSB7XG4gICAgdXNlck5vdGlmeUluc3RhbmNlUHJvcC5jYWxsKGluc3QuX190ZW1wbGF0aXplT3duZXIsXG4gICAgICBpbnN0LCBwcm9wLCBwcm9wc1twcm9wXSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vdGlmeUhvc3RQcm9wRWZmZWN0KCkge1xuICByZXR1cm4gZnVuY3Rpb24gbm90aWZ5SG9zdFByb3AoaW5zdCwgcHJvcCwgcHJvcHMpIHtcbiAgICBpbnN0Ll9fZGF0YUhvc3QuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aCgnX2hvc3RfJyArIHByb3AsIHByb3BzW3Byb3BdLCB0cnVlLCB0cnVlKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYW4gYW5vbnltb3VzIGBQcm9wZXJ0eUVmZmVjdHNgIGNsYXNzIGJvdW5kIHRvIHRoZVxuICogYDx0ZW1wbGF0ZT5gIHByb3ZpZGVkLiAgSW5zdGFuY2luZyB0aGUgY2xhc3Mgd2lsbCByZXN1bHQgaW4gdGhlXG4gKiB0ZW1wbGF0ZSBiZWluZyBzdGFtcGVkIGludG8gYSBkb2N1bWVudCBmcmFnbWVudCBzdG9yZWQgYXMgdGhlIGluc3RhbmNlJ3NcbiAqIGByb290YCBwcm9wZXJ0eSwgYWZ0ZXIgd2hpY2ggaXQgY2FuIGJlIGFwcGVuZGVkIHRvIHRoZSBET00uXG4gKlxuICogVGVtcGxhdGVzIG1heSB1dGlsaXplIGFsbCBQb2x5bWVyIGRhdGEtYmluZGluZyBmZWF0dXJlcyBhcyB3ZWxsIGFzXG4gKiBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMuICBFdmVudCBsaXN0ZW5lcnMgYW5kIGlubGluZSBjb21wdXRpbmdcbiAqIGZ1bmN0aW9ucyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBiZSBjYWxsZWQgb24gdGhlIGhvc3Qgb2YgdGhlIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciByZXR1cm5lZCB0YWtlcyBhIHNpbmdsZSBhcmd1bWVudCBkaWN0aW9uYXJ5IG9mIGluaXRpYWxcbiAqIHByb3BlcnR5IHZhbHVlcyB0byBwcm9wYWdhdGUgaW50byB0ZW1wbGF0ZSBiaW5kaW5ncy4gIEFkZGl0aW9uYWxseVxuICogaG9zdCBwcm9wZXJ0aWVzIGNhbiBiZSBmb3J3YXJkZWQgaW4sIGFuZCBpbnN0YW5jZSBwcm9wZXJ0aWVzIGNhbiBiZVxuICogbm90aWZpZWQgb3V0IGJ5IHByb3ZpZGluZyBvcHRpb25hbCBjYWxsYmFja3MgaW4gdGhlIGBvcHRpb25zYCBkaWN0aW9uYXJ5LlxuICpcbiAqIFZhbGlkIGNvbmZpZ3VyYXRpb24gaW4gYG9wdGlvbnNgIGFyZSBhcyBmb2xsb3dzOlxuICpcbiAqIC0gYGZvcndhcmRIb3N0UHJvcChwcm9wZXJ0eSwgdmFsdWUpYDogQ2FsbGVkIHdoZW4gYSBwcm9wZXJ0eSByZWZlcmVuY2VkXG4gKiAgIGluIHRoZSB0ZW1wbGF0ZSBjaGFuZ2VkIG9uIHRoZSB0ZW1wbGF0ZSdzIGhvc3QuIEFzIHRoaXMgbGlicmFyeSBkb2VzXG4gKiAgIG5vdCByZXRhaW4gcmVmZXJlbmNlcyB0byB0ZW1wbGF0ZXMgaW5zdGFuY2VkIGJ5IHRoZSB1c2VyLCBpdCBpcyB0aGVcbiAqICAgdGVtcGxhdGl6ZSBvd25lcidzIHJlc3BvbnNpYmlsaXR5IHRvIGZvcndhcmQgaG9zdCBwcm9wZXJ0eSBjaGFuZ2VzIGludG9cbiAqICAgdXNlci1zdGFtcGVkIGluc3RhbmNlcy4gIFRoZSBgaW5zdGFuY2UuZm9yd2FyZEhvc3RQcm9wKHByb3BlcnR5LCB2YWx1ZSlgXG4gKiAgICBtZXRob2Qgb24gdGhlIGdlbmVyYXRlZCBjbGFzcyBzaG91bGQgYmUgY2FsbGVkIHRvIGZvcndhcmQgaG9zdFxuICogICBwcm9wZXJ0aWVzIGludG8gdGhlIHRlbXBsYXRlIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcHJvcGVydHktY2hhbmdlZFxuICogICBub3RpZmljYXRpb25zLiBBbnkgcHJvcGVydGllcyByZWZlcmVuY2VkIGluIHRoZSB0ZW1wbGF0ZSB0aGF0IGFyZSBub3RcbiAqICAgZGVmaW5lZCBpbiBgaW5zdGFuY2VQcm9wc2Agd2lsbCBiZSBub3RpZmllZCB1cCB0byB0aGUgdGVtcGxhdGUncyBob3N0XG4gKiAgIGF1dG9tYXRpY2FsbHkuXG4gKiAtIGBpbnN0YW5jZVByb3BzYDogRGljdGlvbmFyeSBvZiBwcm9wZXJ0eSBuYW1lcyB0aGF0IHdpbGwgYmUgYWRkZWRcbiAqICAgdG8gdGhlIGluc3RhbmNlIGJ5IHRoZSB0ZW1wbGF0aXplIG93bmVyLiAgVGhlc2UgcHJvcGVydGllcyBzaGFkb3cgYW55XG4gKiAgIGhvc3QgcHJvcGVydGllcywgYW5kIGNoYW5nZXMgd2l0aGluIHRoZSB0ZW1wbGF0ZSB0byB0aGVzZSBwcm9wZXJ0aWVzXG4gKiAgIHdpbGwgcmVzdWx0IGluIGBub3RpZnlJbnN0YW5jZVByb3BgIGJlaW5nIGNhbGxlZC5cbiAqIC0gYG11dGFibGVEYXRhYDogV2hlbiBgdHJ1ZWAsIHRoZSBnZW5lcmF0ZWQgY2xhc3Mgd2lsbCBza2lwIHN0cmljdFxuICogICBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZVxuICogICBcImRpcnR5XCIpLlxuICogLSBgbm90aWZ5SW5zdGFuY2VQcm9wKGluc3RhbmNlLCBwcm9wZXJ0eSwgdmFsdWUpYDogQ2FsbGVkIHdoZW5cbiAqICAgYW4gaW5zdGFuY2UgcHJvcGVydHkgY2hhbmdlcy4gIFVzZXJzIG1heSBjaG9vc2UgdG8gY2FsbCBgbm90aWZ5UGF0aGBcbiAqICAgb24gZS5nLiB0aGUgb3duZXIgdG8gbm90aWZ5IHRoZSBjaGFuZ2UuXG4gKiAtIGBwYXJlbnRNb2RlbGA6IFdoZW4gYHRydWVgLCBldmVudHMgaGFuZGxlZCBieSBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnNcbiAqICAgKGBvbi1ldmVudD1cImhhbmRsZXJcImApIHdpbGwgYmUgZGVjb3JhdGVkIHdpdGggYSBgbW9kZWxgIHByb3BlcnR5IHBvaW50aW5nXG4gKiAgIHRvIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSB0aGF0IHN0YW1wZWQgaXQuICBJdCB3aWxsIGFsc28gYmUgcmV0dXJuZWRcbiAqICAgZnJvbSBgaW5zdGFuY2UucGFyZW50TW9kZWxgIGluIGNhc2VzIHdoZXJlIHRlbXBsYXRlIGluc3RhbmNlIG5lc3RpbmdcbiAqICAgY2F1c2VzIGFuIGlubmVyIG1vZGVsIHRvIHNoYWRvdyBhbiBvdXRlciBtb2RlbC5cbiAqXG4gKiBBbGwgY2FsbGJhY2tzIGFyZSBjYWxsZWQgYm91bmQgdG8gdGhlIGBvd25lcmAuIEFueSBjb250ZXh0XG4gKiBuZWVkZWQgZm9yIHRoZSBjYWxsYmFja3MgKHN1Y2ggYXMgcmVmZXJlbmNlcyB0byBgaW5zdGFuY2VzYCBzdGFtcGVkKVxuICogc2hvdWxkIGJlIHN0b3JlZCBvbiB0aGUgYG93bmVyYCBzdWNoIHRoYXQgdGhleSBjYW4gYmUgcmV0cmlldmVkIHZpYVxuICogYHRoaXNgLlxuICpcbiAqIFdoZW4gYG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wYCBpcyBkZWNsYXJlZCBhcyBhbiBvcHRpb24sIGFueSBwcm9wZXJ0aWVzXG4gKiByZWZlcmVuY2VkIGluIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZm9yd2FyZGVkIGZyb20gdGhlIGhvc3Qgb2ZcbiAqIHRoZSBgPHRlbXBsYXRlPmAgdG8gaW5zdGFuY2VzLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgYW55IHByb3BlcnRpZXMgbGlzdGVkIGluXG4gKiB0aGUgYG9wdGlvbnMuaW5zdGFuY2VQcm9wc2Agb2JqZWN0LiAgYGluc3RhbmNlUHJvcHNgIGFyZSBhc3N1bWVkIHRvIGJlXG4gKiBtYW5hZ2VkIGJ5IHRoZSBvd25lciBvZiB0aGUgaW5zdGFuY2VzLCBlaXRoZXIgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yXG4gKiBvciBzZXQgYWZ0ZXIgdGhlIGZhY3QuICBOb3RlLCBhbnkgcHJvcGVydGllcyBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3Igd2lsbFxuICogYWx3YXlzIGJlIHNldCB0byB0aGUgaW5zdGFuY2UgKHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGV5IHdvdWxkIG5vcm1hbGx5XG4gKiBiZSBmb3J3YXJkZWQgZnJvbSB0aGUgaG9zdCkuXG4gKlxuICogTm90ZSB0aGF0IGB0ZW1wbGF0aXplKClgIGNhbiBiZSBydW4gb25seSBvbmNlIGZvciBhIGdpdmVuIGA8dGVtcGxhdGU+YC5cbiAqIEZ1cnRoZXIgY2FsbHMgd2lsbCByZXN1bHQgaW4gYW4gZXJyb3IuIEFsc28sIHRoZXJlIGlzIGEgc3BlY2lhbFxuICogYmVoYXZpb3IgaWYgdGhlIHRlbXBsYXRlIHdhcyBkdXBsaWNhdGVkIHRocm91Z2ggYSBtZWNoYW5pc20gc3VjaCBhc1xuICogYDxkb20tcmVwZWF0PmAgb3IgYDx0ZXN0LWZpeHR1cmU+YC4gSW4gdGhpcyBjYXNlLCBhbGwgY2FsbHMgdG9cbiAqIGB0ZW1wbGF0aXplKClgIHJldHVybiB0aGUgc2FtZSBjbGFzcyBmb3IgYWxsIGR1cGxpY2F0ZXMgb2YgYSB0ZW1wbGF0ZS5cbiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIGB0ZW1wbGF0aXplKClgIGlzIGdlbmVyYXRlZCBvbmx5IG9uY2UgdXNpbmdcbiAqIHRoZSBgb3B0aW9uc2AgZnJvbSB0aGUgZmlyc3QgY2FsbC4gVGhpcyBtZWFucyB0aGF0IGFueSBgb3B0aW9uc2BcbiAqIHByb3ZpZGVkIHRvIHN1YnNlcXVlbnQgY2FsbHMgd2lsbCBiZSBpZ25vcmVkLiBUaGVyZWZvcmUsIGl0IGlzIHZlcnlcbiAqIGltcG9ydGFudCBub3QgdG8gY2xvc2Ugb3ZlciBhbnkgdmFyaWFibGVzIGluc2lkZSB0aGUgY2FsbGJhY2tzLiBBbHNvLFxuICogYXJyb3cgZnVuY3Rpb25zIG11c3QgYmUgYXZvaWRlZCBiZWNhdXNlIHRoZXkgYmluZCB0aGUgb3V0ZXIgYHRoaXNgLlxuICogSW5zaWRlIHRoZSBjYWxsYmFja3MsIGFueSBjb250ZXh0dWFsIGluZm9ybWF0aW9uIGNhbiBiZSBhY2Nlc3NlZFxuICogdGhyb3VnaCBgdGhpc2AsIHdoaWNoIHBvaW50cyB0byB0aGUgYG93bmVyYC5cbiAqXG4gKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUZW1wbGF0ZSB0byB0ZW1wbGF0aXplXG4gKiBAcGFyYW0ge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzPX0gb3duZXIgT3duZXIgb2YgdGhlIHRlbXBsYXRlIGluc3RhbmNlcztcbiAqICAgYW55IG9wdGlvbmFsIGNhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoaXMgb3duZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBkaWN0aW9uYXJ5IChzZWUgc3VtbWFyeSBmb3IgZGV0YWlscylcbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUZW1wbGF0ZUluc3RhbmNlQmFzZSwgT2JqZWN0PSl9IEdlbmVyYXRlZCBjbGFzcyBib3VuZFxuICogICB0byB0aGUgdGVtcGxhdGUgcHJvdmlkZWRcbiAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGl6ZSh0ZW1wbGF0ZSwgb3duZXIsIG9wdGlvbnMpIHtcbiAgLy8gVW5kZXIgc3RyaWN0VGVtcGxhdGVQb2xpY3ksIHRoZSB0ZW1wbGF0aXplZCBlbGVtZW50IG11c3QgYmUgb3duZWRcbiAgLy8gYnkgYSAodHJ1c3RlZCkgUG9seW1lciBlbGVtZW50LCBpbmRpY2F0ZWQgYnkgZXhpc3RlbmNlIG9mIF9tZXRob2RIb3N0O1xuICAvLyBlLmcuIGZvciBkb20taWYgJiBkb20tcmVwZWF0IGluIG1haW4gZG9jdW1lbnQsIF9tZXRob2RIb3N0IGlzIG51bGxcbiAgaWYgKHN0cmljdFRlbXBsYXRlUG9saWN5ICYmICFmaW5kTWV0aG9kSG9zdCh0ZW1wbGF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0cmljdFRlbXBsYXRlUG9saWN5OiB0ZW1wbGF0ZSBvd25lciBub3QgdHJ1c3RlZCcpO1xuICB9XG4gIG9wdGlvbnMgPSAvKiogQHR5cGUgeyFUZW1wbGF0aXplT3B0aW9uc30gKi8ob3B0aW9ucyB8fCB7fSk7XG4gIGlmICh0ZW1wbGF0ZS5fX3RlbXBsYXRpemVPd25lcikge1xuICAgIHRocm93IG5ldyBFcnJvcignQSA8dGVtcGxhdGU+IGNhbiBvbmx5IGJlIHRlbXBsYXRpemVkIG9uY2UnKTtcbiAgfVxuICB0ZW1wbGF0ZS5fX3RlbXBsYXRpemVPd25lciA9IG93bmVyO1xuICBjb25zdCBjdG9yID0gb3duZXIgPyBvd25lci5jb25zdHJ1Y3RvciA6IFRlbXBsYXRlSW5zdGFuY2VCYXNlO1xuICBsZXQgdGVtcGxhdGVJbmZvID0gY3Rvci5fcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gIC8vIEdldCBtZW1vaXplZCBiYXNlIGNsYXNzIGZvciB0aGUgcHJvdG90eXBpY2FsIHRlbXBsYXRlLCB3aGljaFxuICAvLyBpbmNsdWRlcyBwcm9wZXJ0eSBlZmZlY3RzIGZvciBiaW5kaW5nIHRlbXBsYXRlICYgZm9yd2FyZGluZ1xuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBleHRlbmRzIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX1cbiAgICovXG4gIGxldCBiYXNlQ2xhc3MgPSB0ZW1wbGF0ZUluZm8udGVtcGxhdGl6ZUluc3RhbmNlQ2xhc3M7XG4gIGlmICghYmFzZUNsYXNzKSB7XG4gICAgYmFzZUNsYXNzID0gY3JlYXRlVGVtcGxhdGl6ZXJDbGFzcyh0ZW1wbGF0ZSwgdGVtcGxhdGVJbmZvLCBvcHRpb25zKTtcbiAgICB0ZW1wbGF0ZUluZm8udGVtcGxhdGl6ZUluc3RhbmNlQ2xhc3MgPSBiYXNlQ2xhc3M7XG4gIH1cbiAgLy8gSG9zdCBwcm9wZXJ0eSBmb3J3YXJkaW5nIG11c3QgYmUgaW5zdGFsbGVkIG9udG8gdGVtcGxhdGUgaW5zdGFuY2VcbiAgYWRkUHJvcGFnYXRlRWZmZWN0cyh0ZW1wbGF0ZSwgdGVtcGxhdGVJbmZvLCBvcHRpb25zKTtcbiAgLy8gU3ViY2xhc3MgYmFzZSBjbGFzcyBhbmQgYWRkIHJlZmVyZW5jZSBmb3IgdGhpcyBzcGVjaWZpYyB0ZW1wbGF0ZVxuICAvKiogQHByaXZhdGUgKi9cbiAgbGV0IGtsYXNzID0gY2xhc3MgVGVtcGxhdGVJbnN0YW5jZSBleHRlbmRzIGJhc2VDbGFzcyB7fTtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBrbGFzcy5wcm90b3R5cGUuX21ldGhvZEhvc3QgPSBmaW5kTWV0aG9kSG9zdCh0ZW1wbGF0ZSk7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAga2xhc3MucHJvdG90eXBlLl9fZGF0YUhvc3QgPSAvKiogQHR5cGUgeyFEYXRhVGVtcGxhdGV9ICovICh0ZW1wbGF0ZSk7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAga2xhc3MucHJvdG90eXBlLl9fdGVtcGxhdGl6ZU93bmVyID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAob3duZXIpO1xuICAvKiogQG92ZXJyaWRlICovXG4gIGtsYXNzLnByb3RvdHlwZS5fX2hvc3RQcm9wcyA9IHRlbXBsYXRlSW5mby5ob3N0UHJvcHM7XG4gIGtsYXNzID0gLyoqIEB0eXBlIHtmdW5jdGlvbihuZXc6VGVtcGxhdGVJbnN0YW5jZUJhc2UpfSAqLyhrbGFzcyk7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICByZXR1cm4ga2xhc3M7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdGVtcGxhdGUgXCJtb2RlbFwiIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIGVsZW1lbnQsIHdoaWNoXG4gKiBzZXJ2ZXMgYXMgdGhlIGJpbmRpbmcgc2NvcGUgZm9yIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSB0aGUgZWxlbWVudCBpc1xuICogY29udGFpbmVkIGluLiBBIHRlbXBsYXRlIG1vZGVsIGlzIGFuIGluc3RhbmNlIG9mXG4gKiBgVGVtcGxhdGVJbnN0YW5jZUJhc2VgLCBhbmQgc2hvdWxkIGJlIHVzZWQgdG8gbWFuaXB1bGF0ZSBkYXRhXG4gKiBhc3NvY2lhdGVkIHdpdGggdGhpcyB0ZW1wbGF0ZSBpbnN0YW5jZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgbGV0IG1vZGVsID0gbW9kZWxGb3JFbGVtZW50KGVsKTtcbiAqICAgaWYgKG1vZGVsLmluZGV4IDwgMTApIHtcbiAqICAgICBtb2RlbC5zZXQoJ2l0ZW0uY2hlY2tlZCcsIHRydWUpO1xuICogICB9XG4gKlxuICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUaGUgbW9kZWwgd2lsbCBiZSByZXR1cm5lZCBmb3JcbiAqICAgZWxlbWVudHMgc3RhbXBlZCBmcm9tIHRoaXMgdGVtcGxhdGVcbiAqIEBwYXJhbSB7Tm9kZT19IG5vZGUgTm9kZSBmb3Igd2hpY2ggdG8gcmV0dXJuIGEgdGVtcGxhdGUgbW9kZWwuXG4gKiBAcmV0dXJuIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX0gVGVtcGxhdGUgaW5zdGFuY2UgcmVwcmVzZW50aW5nIHRoZVxuICogICBiaW5kaW5nIHNjb3BlIGZvciB0aGUgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kZWxGb3JFbGVtZW50KHRlbXBsYXRlLCBub2RlKSB7XG4gIGxldCBtb2RlbDtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICAvLyBBbiBlbGVtZW50IHdpdGggYSBfX3RlbXBsYXRpemVJbnN0YW5jZSBtYXJrcyB0aGUgdG9wIGJvdW5kYXJ5XG4gICAgLy8gb2YgYSBzY29wZTsgd2FsayB1cCB1bnRpbCB3ZSBmaW5kIG9uZSwgYW5kIHRoZW4gZW5zdXJlIHRoYXRcbiAgICAvLyBpdHMgX19kYXRhSG9zdCBtYXRjaGVzIGB0aGlzYCwgbWVhbmluZyB0aGlzIGRvbS1yZXBlYXQgc3RhbXBlZCBpdFxuICAgIGlmICgobW9kZWwgPSBub2RlLl9fdGVtcGxhdGl6ZUluc3RhbmNlKSkge1xuICAgICAgLy8gRm91bmQgYW4gZWxlbWVudCBzdGFtcGVkIGJ5IGFub3RoZXIgdGVtcGxhdGU7IGtlZXAgd2Fsa2luZyB1cFxuICAgICAgLy8gZnJvbSBpdHMgX19kYXRhSG9zdFxuICAgICAgaWYgKG1vZGVsLl9fZGF0YUhvc3QgIT0gdGVtcGxhdGUpIHtcbiAgICAgICAgbm9kZSA9IG1vZGVsLl9fZGF0YUhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0aWxsIGluIGEgdGVtcGxhdGUgc2NvcGUsIGtlZXAgZ29pbmcgdXAgdW50aWxcbiAgICAgIC8vIGEgX190ZW1wbGF0aXplSW5zdGFuY2UgaXMgZm91bmRcbiAgICAgIG5vZGUgPSB3cmFwKG5vZGUpLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlQmFzZSB9O1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKlxuICogTW9kdWxlIHRvIGhpZGUgYDxkb20tYmluZD5gLCBgPGRvbS1pZj5gLCBhbmQgYDxkb20tcmVwZWF0PmAgZWxlbWVudHNcbiAqIG9wdGltYWxseSBpbiBTaGFkeURPTVxuICovXG5cbmltcG9ydCB7bGVnYWN5T3B0aW1pemF0aW9ucywgdXNlU2hhZG93fSBmcm9tICcuL3NldHRpbmdzLmpzJztcblxubGV0IGVsZW1lbnRzSGlkZGVuID0gZmFsc2U7XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBlbGVtZW50cyB3aWxsIGJlIGhpZGRlbiBnbG9iYWxseVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGlkZUVsZW1lbnRzR2xvYmFsbHkoKSB7XG4gIGlmIChsZWdhY3lPcHRpbWl6YXRpb25zICYmICF1c2VTaGFkb3cpIHtcbiAgICBpZiAoIWVsZW1lbnRzSGlkZGVuKSB7XG4gICAgICBlbGVtZW50c0hpZGRlbiA9IHRydWU7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9ICdkb20tYmluZCxkb20taWYsZG9tLXJlcGVhdHtkaXNwbGF5Om5vbmU7fSc7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBQcm9wZXJ0eUVmZmVjdHMgfSBmcm9tICcuLi9taXhpbnMvcHJvcGVydHktZWZmZWN0cy5qcyc7XG5pbXBvcnQgeyBPcHRpb25hbE11dGFibGVEYXRhIH0gZnJvbSAnLi4vbWl4aW5zL211dGFibGUtZGF0YS5qcyc7XG5pbXBvcnQgeyBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMgfSBmcm9tICcuLi9taXhpbnMvZ2VzdHVyZS1ldmVudC1saXN0ZW5lcnMuanMnO1xuaW1wb3J0IHsgc3RyaWN0VGVtcGxhdGVQb2xpY3kgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi4vdXRpbHMvd3JhcC5qcyc7XG5pbXBvcnQgeyBoaWRlRWxlbWVudHNHbG9iYWxseSB9IGZyb20gJy4uL3V0aWxzL2hpZGUtdGVtcGxhdGUtY29udHJvbHMuanMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMge0hUTUxFbGVtZW50fVxuICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzfVxuICogQGltcGxlbWVudHMge1BvbHltZXJfT3B0aW9uYWxNdXRhYmxlRGF0YX1cbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0dlc3R1cmVFdmVudExpc3RlbmVyc31cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGRvbUJpbmRCYXNlID1cbiAgR2VzdHVyZUV2ZW50TGlzdGVuZXJzKFxuICAgIE9wdGlvbmFsTXV0YWJsZURhdGEoXG4gICAgICBQcm9wZXJ0eUVmZmVjdHMoSFRNTEVsZW1lbnQpKSk7XG5cbi8qKlxuICogQ3VzdG9tIGVsZW1lbnQgdG8gYWxsb3cgdXNpbmcgUG9seW1lcidzIHRlbXBsYXRlIGZlYXR1cmVzIChkYXRhIGJpbmRpbmcsXG4gKiBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy4pIGluIHRoZSBtYWluIGRvY3VtZW50IHdpdGhvdXQgZGVmaW5pbmdcbiAqIGEgbmV3IGN1c3RvbSBlbGVtZW50LlxuICpcbiAqIGA8dGVtcGxhdGU+YCB0YWdzIHV0aWxpemluZyBiaW5kaW5ncyBtYXkgYmUgd3JhcHBlZCB3aXRoIHRoZSBgPGRvbS1iaW5kPmBcbiAqIGVsZW1lbnQsIHdoaWNoIHdpbGwgaW1tZWRpYXRlbHkgc3RhbXAgdGhlIHdyYXBwZWQgdGVtcGxhdGUgaW50byB0aGUgbWFpblxuICogZG9jdW1lbnQgYW5kIGJpbmQgZWxlbWVudHMgdG8gdGhlIGBkb20tYmluZGAgZWxlbWVudCBpdHNlbGYgYXMgdGhlXG4gKiBiaW5kaW5nIHNjb3BlLlxuICpcbiAqIEBwb2x5bWVyXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0eUVmZmVjdHNcbiAqIEBhcHBsaWVzTWl4aW4gT3B0aW9uYWxNdXRhYmxlRGF0YVxuICogQGFwcGxpZXNNaXhpbiBHZXN0dXJlRXZlbnRMaXN0ZW5lcnNcbiAqIEBleHRlbmRzIHtkb21CaW5kQmFzZX1cbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IHRvIGFsbG93IHVzaW5nIFBvbHltZXIncyB0ZW1wbGF0ZSBmZWF0dXJlcyAoZGF0YVxuICogICBiaW5kaW5nLCBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy4pIGluIHRoZSBtYWluIGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgRG9tQmluZCBleHRlbmRzIGRvbUJpbmRCYXNlIHtcblxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHsgcmV0dXJuIFsnbXV0YWJsZS1kYXRhJ107IH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmIChzdHJpY3RUZW1wbGF0ZVBvbGljeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdHJpY3RUZW1wbGF0ZVBvbGljeTogZG9tLWJpbmQgbm90IGFsbG93ZWRgKTtcbiAgICB9XG4gICAgdGhpcy5yb290ID0gbnVsbDtcbiAgICB0aGlzLiQgPSBudWxsO1xuICAgIHRoaXMuX19jaGlsZHJlbiA9IG51bGw7XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgYXR0cmlidXRlIHRoYXQgY2hhbmdlZFxuICAgKiBAcGFyYW0gez9zdHJpbmd9IG9sZCBPbGQgYXR0cmlidXRlIHZhbHVlXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWUgTmV3IGF0dHJpYnV0ZSB2YWx1ZVxuICAgKiBAcGFyYW0gez9zdHJpbmd9IG5hbWVzcGFjZSBBdHRyaWJ1dGUgbmFtZXNwYWNlLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUsIG5hbWVzcGFjZSkge1xuICAgIC8vIGFzc3VtZXMgb25seSBvbmUgb2JzZXJ2ZWQgYXR0cmlidXRlXG4gICAgdGhpcy5tdXRhYmxlRGF0YSA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAoIWhpZGVFbGVtZW50c0dsb2JhbGx5KCkpIHtcbiAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX19yZW1vdmVDaGlsZHJlbigpO1xuICB9XG5cbiAgX19pbnNlcnRDaGlsZHJlbigpIHtcbiAgICB3cmFwKHdyYXAodGhpcykucGFyZW50Tm9kZSkuaW5zZXJ0QmVmb3JlKHRoaXMucm9vdCwgdGhpcyk7XG4gIH1cblxuICBfX3JlbW92ZUNoaWxkcmVuKCkge1xuICAgIGlmICh0aGlzLl9fY2hpbGRyZW4pIHtcbiAgICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLl9fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMuX19jaGlsZHJlbltpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNlcyB0aGUgZWxlbWVudCB0byByZW5kZXIgaXRzIGNvbnRlbnQuIFRoaXMgaXMgdHlwaWNhbGx5IG9ubHlcbiAgICogbmVjZXNzYXJ5IHRvIGNhbGwgaWYgSFRNTEltcG9ydHMgd2l0aCB0aGUgYXN5bmMgYXR0cmlidXRlIGFyZSB1c2VkLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIGxldCB0ZW1wbGF0ZTtcbiAgICBpZiAoIXRoaXMuX19jaGlsZHJlbikge1xuICAgICAgdGVtcGxhdGUgPSAvKiogQHR5cGUgez9IVE1MVGVtcGxhdGVFbGVtZW50fSAqLyh0ZW1wbGF0ZSB8fCB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpO1xuICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgICAvLyBXYWl0IHVudGlsIGNoaWxkTGlzdCBjaGFuZ2VzIGFuZCB0ZW1wbGF0ZSBzaG91bGQgYmUgdGhlcmUgYnkgdGhlblxuICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgdGVtcGxhdGUgPSAvKiogQHR5cGUge0hUTUxUZW1wbGF0ZUVsZW1lbnR9ICovKHRoaXMucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKSk7XG4gICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RvbS1iaW5kIHJlcXVpcmVzIGEgPHRlbXBsYXRlPiBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcywge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnJvb3QgPSB0aGlzLl9zdGFtcFRlbXBsYXRlKFxuICAgICAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyh0ZW1wbGF0ZSkpO1xuICAgICAgdGhpcy4kID0gdGhpcy5yb290LiQ7XG4gICAgICB0aGlzLl9fY2hpbGRyZW4gPSBbXTtcbiAgICAgIGZvciAobGV0IG49dGhpcy5yb290LmZpcnN0Q2hpbGQ7IG47IG49bi5uZXh0U2libGluZykge1xuICAgICAgICB0aGlzLl9fY2hpbGRyZW5bdGhpcy5fX2NoaWxkcmVuLmxlbmd0aF0gPSBuO1xuICAgICAgfVxuICAgICAgdGhpcy5fZW5hYmxlUHJvcGVydGllcygpO1xuICAgIH1cbiAgICB0aGlzLl9faW5zZXJ0Q2hpbGRyZW4oKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkb20tY2hhbmdlJywge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlXG4gICAgfSkpO1xuICB9XG5cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkb20tYmluZCcsIERvbUJpbmQpO1xuIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vcG9seW1lci1lbGVtZW50LmpzJztcblxuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZUJhc2UsIHRlbXBsYXRpemUsIG1vZGVsRm9yRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL3RlbXBsYXRpemUuanMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBEZWJvdW5jZXIgfSBmcm9tICcuLi91dGlscy9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyBlbnF1ZXVlRGVib3VuY2VyLCBmbHVzaCB9IGZyb20gJy4uL3V0aWxzL2ZsdXNoLmpzJztcbmltcG9ydCB7IE9wdGlvbmFsTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcbmltcG9ydCB7IG1hdGNoZXMsIHRyYW5zbGF0ZSB9IGZyb20gJy4uL3V0aWxzL3BhdGguanMnO1xuaW1wb3J0IHsgdGltZU91dCwgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0IHsgaGlkZUVsZW1lbnRzR2xvYmFsbHkgfSBmcm9tICcuLi91dGlscy9oaWRlLXRlbXBsYXRlLWNvbnRyb2xzLmpzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX09wdGlvbmFsTXV0YWJsZURhdGF9XG4gKiBAZXh0ZW5kcyB7UG9seW1lckVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBkb21SZXBlYXRCYXNlID0gT3B0aW9uYWxNdXRhYmxlRGF0YShQb2x5bWVyRWxlbWVudCk7XG5cbi8qKlxuICogVGhlIGA8ZG9tLXJlcGVhdD5gIGVsZW1lbnQgd2lsbCBhdXRvbWF0aWNhbGx5IHN0YW1wIGFuZCBiaW5kcyBvbmUgaW5zdGFuY2VcbiAqIG9mIHRlbXBsYXRlIGNvbnRlbnQgdG8gZWFjaCBvYmplY3QgaW4gYSB1c2VyLXByb3ZpZGVkIGFycmF5LlxuICogYGRvbS1yZXBlYXRgIGFjY2VwdHMgYW4gYGl0ZW1zYCBwcm9wZXJ0eSwgYW5kIG9uZSBpbnN0YW5jZSBvZiB0aGUgdGVtcGxhdGVcbiAqIGlzIHN0YW1wZWQgZm9yIGVhY2ggaXRlbSBpbnRvIHRoZSBET00gYXQgdGhlIGxvY2F0aW9uIG9mIHRoZSBgZG9tLXJlcGVhdGBcbiAqIGVsZW1lbnQuICBUaGUgYGl0ZW1gIHByb3BlcnR5IHdpbGwgYmUgc2V0IG9uIGVhY2ggaW5zdGFuY2UncyBiaW5kaW5nXG4gKiBzY29wZSwgdGh1cyB0ZW1wbGF0ZXMgc2hvdWxkIGJpbmQgdG8gc3ViLXByb3BlcnRpZXMgb2YgYGl0ZW1gLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgaHRtbFxuICogPGRvbS1tb2R1bGUgaWQ9XCJlbXBsb3llZS1saXN0XCI+XG4gKlxuICogICA8dGVtcGxhdGU+XG4gKlxuICogICAgIDxkaXY+IEVtcGxveWVlIGxpc3Q6IDwvZGl2PlxuICogICAgIDxkb20tcmVwZWF0IGl0ZW1zPVwie3tlbXBsb3llZXN9fVwiPlxuICogICAgICAgPHRlbXBsYXRlPlxuICogICAgICAgICA8ZGl2PkZpcnN0IG5hbWU6IDxzcGFuPnt7aXRlbS5maXJzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgICA8ZGl2Pkxhc3QgbmFtZTogPHNwYW4+e3tpdGVtLmxhc3R9fTwvc3Bhbj48L2Rpdj5cbiAqICAgICAgIDwvdGVtcGxhdGU+XG4gKiAgICAgPC9kb20tcmVwZWF0PlxuICpcbiAqICAgPC90ZW1wbGF0ZT5cbiAqXG4gKiA8L2RvbS1tb2R1bGU+XG4gKiBgYGBcbiAqXG4gKiBXaXRoIHRoZSBmb2xsb3dpbmcgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbjpcbiAqXG4gKiBgYGBqc1xuICogY2xhc3MgRW1wbG95ZWVMaXN0IGV4dGVuZHMgUG9seW1lckVsZW1lbnQge1xuICogICBzdGF0aWMgZ2V0IGlzKCkgeyByZXR1cm4gJ2VtcGxveWVlLWxpc3QnOyB9XG4gKiAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgZW1wbG95ZWVzOiB7XG4gKiAgICAgICAgIHZhbHVlKCkge1xuICogICAgICAgICAgIHJldHVybiBbXG4gKiAgICAgICAgICAgICB7Zmlyc3Q6ICdCb2InLCBsYXN0OiAnU21pdGgnfSxcbiAqICAgICAgICAgICAgIHtmaXJzdDogJ1NhbGx5JywgbGFzdDogJ0pvaG5zb24nfSxcbiAqICAgICAgICAgICAgIC4uLlxuICogICAgICAgICAgIF07XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9O1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBOb3RpZmljYXRpb25zIGZvciBjaGFuZ2VzIHRvIGl0ZW1zIHN1Yi1wcm9wZXJ0aWVzIHdpbGwgYmUgZm9yd2FyZGVkIHRvIHRlbXBsYXRlXG4gKiBpbnN0YW5jZXMsIHdoaWNoIHdpbGwgdXBkYXRlIHZpYSB0aGUgbm9ybWFsIHN0cnVjdHVyZWQgZGF0YSBub3RpZmljYXRpb24gc3lzdGVtLlxuICpcbiAqIE11dGF0aW9ucyB0byB0aGUgYGl0ZW1zYCBhcnJheSBpdHNlbGYgc2hvdWxkIGJlIG1hZGUgdXNpbmcgdGhlIEFycmF5XG4gKiBtdXRhdGlvbiBBUEkncyBvbiB0aGUgUHJvcGVydHlFZmZlY3RzIG1peGluIChgcHVzaGAsIGBwb3BgLCBgc3BsaWNlYCxcbiAqIGBzaGlmdGAsIGB1bnNoaWZ0YCksIGFuZCB0ZW1wbGF0ZSBpbnN0YW5jZXMgd2lsbCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGVcbiAqIGRhdGEgaW4gdGhlIGFycmF5LlxuICpcbiAqIEV2ZW50cyBjYXVnaHQgYnkgZXZlbnQgaGFuZGxlcnMgd2l0aGluIHRoZSBgZG9tLXJlcGVhdGAgdGVtcGxhdGUgd2lsbCBiZVxuICogZGVjb3JhdGVkIHdpdGggYSBgbW9kZWxgIHByb3BlcnR5LCB3aGljaCByZXByZXNlbnRzIHRoZSBiaW5kaW5nIHNjb3BlIGZvclxuICogZWFjaCB0ZW1wbGF0ZSBpbnN0YW5jZS4gIFRoZSBtb2RlbCBzaG91bGQgYmUgdXNlZCB0byBtYW5pcHVsYXRlIGRhdGEgb24gdGhlXG4gKiBpbnN0YW5jZSwgZm9yIGV4YW1wbGUgYGV2ZW50Lm1vZGVsLnNldCgnaXRlbS5jaGVja2VkJywgdHJ1ZSk7YC5cbiAqXG4gKiBBbHRlcm5hdGl2ZWx5LCB0aGUgbW9kZWwgZm9yIGEgdGVtcGxhdGUgaW5zdGFuY2UgZm9yIGFuIGVsZW1lbnQgc3RhbXBlZCBieVxuICogYSBgZG9tLXJlcGVhdGAgY2FuIGJlIG9idGFpbmVkIHVzaW5nIHRoZSBgbW9kZWxGb3JFbGVtZW50YCBBUEkgb24gdGhlXG4gKiBgZG9tLXJlcGVhdGAgdGhhdCBzdGFtcGVkIGl0LCBmb3IgZXhhbXBsZVxuICogYHRoaXMuJC5kb21SZXBlYXQubW9kZWxGb3JFbGVtZW50KGV2ZW50LnRhcmdldCkuc2V0KCdpdGVtLmNoZWNrZWQnLCB0cnVlKTtgLlxuICogVGhpcyBtYXkgYmUgdXNlZnVsIGZvciBtYW5pcHVsYXRpbmcgaW5zdGFuY2UgZGF0YSBvZiBldmVudCB0YXJnZXRzIG9idGFpbmVkXG4gKiBieSBldmVudCBoYW5kbGVycyBvbiBwYXJlbnRzIG9mIHRoZSBgZG9tLXJlcGVhdGAgKGV2ZW50IGRlbGVnYXRpb24pLlxuICpcbiAqIEEgdmlldy1zcGVjaWZpYyBmaWx0ZXIvc29ydCBtYXkgYmUgYXBwbGllZCB0byBlYWNoIGBkb20tcmVwZWF0YCBieSBzdXBwbHlpbmcgYVxuICogYGZpbHRlcmAgYW5kL29yIGBzb3J0YCBwcm9wZXJ0eS4gIFRoaXMgbWF5IGJlIGEgc3RyaW5nIHRoYXQgbmFtZXMgYSBmdW5jdGlvbiBvblxuICogdGhlIGhvc3QsIG9yIGEgZnVuY3Rpb24gbWF5IGJlIGFzc2lnbmVkIHRvIHRoZSBwcm9wZXJ0eSBkaXJlY3RseS4gIFRoZSBmdW5jdGlvbnNcbiAqIHNob3VsZCBpbXBsZW1lbnRlZCBmb2xsb3dpbmcgdGhlIHN0YW5kYXJkIGBBcnJheWAgZmlsdGVyL3NvcnQgQVBJLlxuICpcbiAqIEluIG9yZGVyIHRvIHJlLXJ1biB0aGUgZmlsdGVyIG9yIHNvcnQgZnVuY3Rpb25zIGJhc2VkIG9uIGNoYW5nZXMgdG8gc3ViLWZpZWxkc1xuICogb2YgYGl0ZW1zYCwgdGhlIGBvYnNlcnZlYCBwcm9wZXJ0eSBtYXkgYmUgc2V0IGFzIGEgc3BhY2Utc2VwYXJhdGVkIGxpc3Qgb2ZcbiAqIGBpdGVtYCBzdWItZmllbGRzIHRoYXQgc2hvdWxkIGNhdXNlIGEgcmUtZmlsdGVyL3NvcnQgd2hlbiBtb2RpZmllZC4gIElmXG4gKiB0aGUgZmlsdGVyIG9yIHNvcnQgZnVuY3Rpb24gZGVwZW5kcyBvbiBwcm9wZXJ0aWVzIG5vdCBjb250YWluZWQgaW4gYGl0ZW1zYCxcbiAqIHRoZSB1c2VyIHNob3VsZCBvYnNlcnZlIGNoYW5nZXMgdG8gdGhvc2UgcHJvcGVydGllcyBhbmQgY2FsbCBgcmVuZGVyYCB0byB1cGRhdGVcbiAqIHRoZSB2aWV3IGJhc2VkIG9uIHRoZSBkZXBlbmRlbmN5IGNoYW5nZS5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgZm9yIGFuIGBkb20tcmVwZWF0YCB3aXRoIGEgZmlsdGVyIG9mIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogYGBganNcbiAqIGlzRW5naW5lZXIoaXRlbSkge1xuICogICByZXR1cm4gaXRlbS50eXBlID09ICdlbmdpbmVlcicgfHwgaXRlbS5tYW5hZ2VyLnR5cGUgPT0gJ2VuZ2luZWVyJztcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFRoZW4gdGhlIGBvYnNlcnZlYCBwcm9wZXJ0eSBzaG91bGQgYmUgY29uZmlndXJlZCBhcyBmb2xsb3dzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkb20tcmVwZWF0IGl0ZW1zPVwie3tlbXBsb3llZXN9fVwiIGZpbHRlcj1cImlzRW5naW5lZXJcIiBvYnNlcnZlPVwidHlwZSBtYW5hZ2VyLnR5cGVcIj5cbiAqIGBgYFxuICpcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAcG9seW1lclxuICogQGV4dGVuZHMge2RvbVJlcGVhdEJhc2V9XG4gKiBAYXBwbGllc01peGluIE9wdGlvbmFsTXV0YWJsZURhdGFcbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IGZvciBzdGFtcGluZyBpbnN0YW5jZSBvZiBhIHRlbXBsYXRlIGJvdW5kIHRvXG4gKiAgIGl0ZW1zIGluIGFuIGFycmF5LlxuICovXG5leHBvcnQgY2xhc3MgRG9tUmVwZWF0IGV4dGVuZHMgZG9tUmVwZWF0QmFzZSB7XG5cbiAgLy8gTm90IG5lZWRlZCB0byBmaW5kIHRlbXBsYXRlOyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBhbmFseXplclxuICAvLyBjYW4gZmluZCB0aGUgdGFnIG5hbWUgZnJvbSBjdXN0b21FbGVtZW50cy5kZWZpbmUgY2FsbFxuICBzdGF0aWMgZ2V0IGlzKCkgeyByZXR1cm4gJ2RvbS1yZXBlYXQnOyB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHsgcmV0dXJuIG51bGw7IH1cblxuICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuZXZlciBET00gaXMgYWRkZWQgb3IgcmVtb3ZlZCBieSB0aGlzIHRlbXBsYXRlIChieVxuICAgICAqIGRlZmF1bHQsIHJlbmRlcmluZyBvY2N1cnMgbGF6aWx5KS4gIFRvIGZvcmNlIGltbWVkaWF0ZSByZW5kZXJpbmcsIGNhbGxcbiAgICAgKiBgcmVuZGVyYC5cbiAgICAgKlxuICAgICAqIEBldmVudCBkb20tY2hhbmdlXG4gICAgICovXG4gICAgcmV0dXJuIHtcblxuICAgICAgLyoqXG4gICAgICAgKiBBbiBhcnJheSBjb250YWluaW5nIGl0ZW1zIGRldGVybWluaW5nIGhvdyBtYW55IGluc3RhbmNlcyBvZiB0aGUgdGVtcGxhdGVcbiAgICAgICAqIHRvIHN0YW1wIGFuZCB0aGF0IHRoYXQgZWFjaCB0ZW1wbGF0ZSBpbnN0YW5jZSBzaG91bGQgYmluZCB0by5cbiAgICAgICAqL1xuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogQXJyYXlcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlIHRvIGFkZCB0byB0aGUgYmluZGluZyBzY29wZSBmb3IgdGhlIGFycmF5XG4gICAgICAgKiBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHRlbXBsYXRlIGluc3RhbmNlLlxuICAgICAgICovXG4gICAgICBhczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHZhbHVlOiAnaXRlbSdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlIHRvIGFkZCB0byB0aGUgYmluZGluZyBzY29wZSB3aXRoIHRoZSBpbmRleFxuICAgICAgICogb2YgdGhlIGluc3RhbmNlIGluIHRoZSBzb3J0ZWQgYW5kIGZpbHRlcmVkIGxpc3Qgb2YgcmVuZGVyZWQgaXRlbXMuXG4gICAgICAgKiBOb3RlLCBmb3IgdGhlIGluZGV4IGluIHRoZSBgdGhpcy5pdGVtc2AgYXJyYXksIHVzZSB0aGUgdmFsdWUgb2YgdGhlXG4gICAgICAgKiBgaXRlbXNJbmRleEFzYCBwcm9wZXJ0eS5cbiAgICAgICAqL1xuICAgICAgaW5kZXhBczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHZhbHVlOiAnaW5kZXgnXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSB2YXJpYWJsZSB0byBhZGQgdG8gdGhlIGJpbmRpbmcgc2NvcGUgd2l0aCB0aGUgaW5kZXhcbiAgICAgICAqIG9mIHRoZSBpbnN0YW5jZSBpbiB0aGUgYHRoaXMuaXRlbXNgIGFycmF5LiBOb3RlLCBmb3IgdGhlIGluZGV4IG9mXG4gICAgICAgKiB0aGlzIGluc3RhbmNlIGluIHRoZSBzb3J0ZWQgYW5kIGZpbHRlcmVkIGxpc3Qgb2YgcmVuZGVyZWQgaXRlbXMsXG4gICAgICAgKiB1c2UgdGhlIHZhbHVlIG9mIHRoZSBgaW5kZXhBc2AgcHJvcGVydHkuXG4gICAgICAgKi9cbiAgICAgIGl0ZW1zSW5kZXhBczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHZhbHVlOiAnaXRlbXNJbmRleCdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBkZXRlcm1pbmUgdGhlIHNvcnQgb3JkZXIgb2YgdGhlIGl0ZW1zLiAgVGhpc1xuICAgICAgICogcHJvcGVydHkgc2hvdWxkIGVpdGhlciBiZSBwcm92aWRlZCBhcyBhIHN0cmluZywgaW5kaWNhdGluZyBhIG1ldGhvZFxuICAgICAgICogbmFtZSBvbiB0aGUgZWxlbWVudCdzIGhvc3QsIG9yIGVsc2UgYmUgYW4gYWN0dWFsIGZ1bmN0aW9uLiAgVGhlXG4gICAgICAgKiBmdW5jdGlvbiBzaG91bGQgbWF0Y2ggdGhlIHNvcnQgZnVuY3Rpb24gcGFzc2VkIHRvIGBBcnJheS5zb3J0YC5cbiAgICAgICAqIFVzaW5nIGEgc29ydCBmdW5jdGlvbiBoYXMgbm8gZWZmZWN0IG9uIHRoZSB1bmRlcmx5aW5nIGBpdGVtc2AgYXJyYXkuXG4gICAgICAgKi9cbiAgICAgIHNvcnQ6IHtcbiAgICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICAgIG9ic2VydmVyOiAnX19zb3J0Q2hhbmdlZCdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBpdGVtcyBvdXQgb2YgdGhlIHZpZXcuICBUaGlzXG4gICAgICAgKiBwcm9wZXJ0eSBzaG91bGQgZWl0aGVyIGJlIHByb3ZpZGVkIGFzIGEgc3RyaW5nLCBpbmRpY2F0aW5nIGEgbWV0aG9kXG4gICAgICAgKiBuYW1lIG9uIHRoZSBlbGVtZW50J3MgaG9zdCwgb3IgZWxzZSBiZSBhbiBhY3R1YWwgZnVuY3Rpb24uICBUaGVcbiAgICAgICAqIGZ1bmN0aW9uIHNob3VsZCBtYXRjaCB0aGUgc29ydCBmdW5jdGlvbiBwYXNzZWQgdG8gYEFycmF5LmZpbHRlcmAuXG4gICAgICAgKiBVc2luZyBhIGZpbHRlciBmdW5jdGlvbiBoYXMgbm8gZWZmZWN0IG9uIHRoZSB1bmRlcmx5aW5nIGBpdGVtc2AgYXJyYXkuXG4gICAgICAgKi9cbiAgICAgIGZpbHRlcjoge1xuICAgICAgICB0eXBlOiBGdW5jdGlvbixcbiAgICAgICAgb2JzZXJ2ZXI6ICdfX2ZpbHRlckNoYW5nZWQnXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdXNpbmcgYSBgZmlsdGVyYCBvciBgc29ydGAgZnVuY3Rpb24sIHRoZSBgb2JzZXJ2ZWAgcHJvcGVydHlcbiAgICAgICAqIHNob3VsZCBiZSBzZXQgdG8gYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiB0aGUgbmFtZXMgb2YgaXRlbVxuICAgICAgICogc3ViLWZpZWxkcyB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgcmUtc29ydCBvciByZS1maWx0ZXIgd2hlbiBjaGFuZ2VkLlxuICAgICAgICogVGhlc2Ugc2hvdWxkIGdlbmVyYWxseSBiZSBmaWVsZHMgb2YgYGl0ZW1gIHRoYXQgdGhlIHNvcnQgb3IgZmlsdGVyXG4gICAgICAgKiBmdW5jdGlvbiBkZXBlbmRzIG9uLlxuICAgICAgICovXG4gICAgICBvYnNlcnZlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgb2JzZXJ2ZXI6ICdfX29ic2VydmVDaGFuZ2VkJ1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHVzaW5nIGEgYGZpbHRlcmAgb3IgYHNvcnRgIGZ1bmN0aW9uLCB0aGUgYGRlbGF5YCBwcm9wZXJ0eVxuICAgICAgICogZGV0ZXJtaW5lcyBhIGRlYm91bmNlIHRpbWUgaW4gbXMgYWZ0ZXIgYSBjaGFuZ2UgdG8gb2JzZXJ2ZWQgaXRlbVxuICAgICAgICogcHJvcGVydGllcyB0aGF0IG11c3QgcGFzcyBiZWZvcmUgdGhlIGZpbHRlciBvciBzb3J0IGlzIHJlLXJ1bi5cbiAgICAgICAqIFRoaXMgaXMgdXNlZnVsIGluIHJhdGUtbGltaXRpbmcgc2h1ZmZsaW5nIG9mIHRoZSB2aWV3IHdoZW5cbiAgICAgICAqIGl0ZW0gY2hhbmdlcyBtYXkgYmUgZnJlcXVlbnQuXG4gICAgICAgKi9cbiAgICAgIGRlbGF5OiBOdW1iZXIsXG5cbiAgICAgIC8qKlxuICAgICAgICogQ291bnQgb2YgY3VycmVudGx5IHJlbmRlcmVkIGl0ZW1zIGFmdGVyIGBmaWx0ZXJgIChpZiBhbnkpIGhhcyBiZWVuIGFwcGxpZWQuXG4gICAgICAgKiBJZiBcImNodW5raW5nIG1vZGVcIiBpcyBlbmFibGVkLCBgcmVuZGVyZWRJdGVtQ291bnRgIGlzIHVwZGF0ZWQgZWFjaCB0aW1lIGFcbiAgICAgICAqIHNldCBvZiB0ZW1wbGF0ZSBpbnN0YW5jZXMgaXMgcmVuZGVyZWQuXG4gICAgICAgKlxuICAgICAgICovXG4gICAgICByZW5kZXJlZEl0ZW1Db3VudDoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIG5vdGlmeTogdHJ1ZSxcbiAgICAgICAgcmVhZE9ubHk6IHRydWVcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogRGVmaW5lcyBhbiBpbml0aWFsIGNvdW50IG9mIHRlbXBsYXRlIGluc3RhbmNlcyB0byByZW5kZXIgYWZ0ZXIgc2V0dGluZ1xuICAgICAgICogdGhlIGBpdGVtc2AgYXJyYXksIGJlZm9yZSB0aGUgbmV4dCBwYWludCwgYW5kIHB1dHMgdGhlIGBkb20tcmVwZWF0YFxuICAgICAgICogaW50byBcImNodW5raW5nIG1vZGVcIi4gIFRoZSByZW1haW5pbmcgaXRlbXMgd2lsbCBiZSBjcmVhdGVkIGFuZCByZW5kZXJlZFxuICAgICAgICogaW5jcmVtZW50YWxseSBhdCBlYWNoIGFuaW1hdGlvbiBmcmFtZSB0aGVyb2YgdW50aWwgYWxsIGluc3RhbmNlcyBoYXZlXG4gICAgICAgKiBiZWVuIHJlbmRlcmVkLlxuICAgICAgICovXG4gICAgICBpbml0aWFsQ291bnQ6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBvYnNlcnZlcjogJ19faW5pdGlhbGl6ZUNodW5raW5nJ1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIGBpbml0aWFsQ291bnRgIGlzIHVzZWQsIHRoaXMgcHJvcGVydHkgZGVmaW5lcyBhIGZyYW1lIHJhdGUgKGluXG4gICAgICAgKiBmcHMpIHRvIHRhcmdldCBieSB0aHJvdHRsaW5nIHRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIHJlbmRlcmVkIGVhY2hcbiAgICAgICAqIGZyYW1lIHRvIG5vdCBleGNlZWQgdGhlIGJ1ZGdldCBmb3IgdGhlIHRhcmdldCBmcmFtZSByYXRlLiAgVGhlXG4gICAgICAgKiBmcmFtZXJhdGUgaXMgZWZmZWN0aXZlbHkgdGhlIG51bWJlciBvZiBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYHMgdGhhdFxuICAgICAgICogaXQgdHJpZXMgdG8gYWxsb3cgdG8gYWN0dWFsbHkgZmlyZSBpbiBhIGdpdmVuIHNlY29uZC4gSXQgZG9lcyB0aGlzXG4gICAgICAgKiBieSBtZWFzdXJpbmcgdGhlIHRpbWUgYmV0d2VlbiBgckFGYHMgYW5kIGNvbnRpbnVvdXNseSBhZGp1c3RpbmcgdGhlXG4gICAgICAgKiBudW1iZXIgb2YgaXRlbXMgY3JlYXRlZCBlYWNoIGByQUZgIHRvIG1haW50YWluIHRoZSB0YXJnZXQgZnJhbWVyYXRlLlxuICAgICAgICogU2V0dGluZyB0aGlzIHRvIGEgaGlnaGVyIG51bWJlciBhbGxvd3MgbG93ZXIgbGF0ZW5jeSBhbmQgaGlnaGVyXG4gICAgICAgKiB0aHJvdWdocHV0IGZvciBldmVudCBoYW5kbGVycyBhbmQgb3RoZXIgdGFza3MsIGJ1dCByZXN1bHRzIGluIGFcbiAgICAgICAqIGxvbmdlciB0aW1lIGZvciB0aGUgcmVtYWluaW5nIGl0ZW1zIHRvIGNvbXBsZXRlIHJlbmRlcmluZy5cbiAgICAgICAqL1xuICAgICAgdGFyZ2V0RnJhbWVyYXRlOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgdmFsdWU6IDIwXG4gICAgICB9LFxuXG4gICAgICBfdGFyZ2V0RnJhbWVUaW1lOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgY29tcHV0ZWQ6ICdfX2NvbXB1dGVGcmFtZVRpbWUodGFyZ2V0RnJhbWVyYXRlKSdcbiAgICAgIH1cblxuICAgIH07XG5cbiAgfVxuXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZXJzKCkge1xuICAgIHJldHVybiBbICdfX2l0ZW1zQ2hhbmdlZChpdGVtcy4qKScgXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2luc3RhbmNlcyA9IFtdO1xuICAgIHRoaXMuX19saW1pdCA9IEluZmluaXR5O1xuICAgIHRoaXMuX19wb29sID0gW107XG4gICAgdGhpcy5fX3JlbmRlckRlYm91bmNlciA9IG51bGw7XG4gICAgdGhpcy5fX2l0ZW1zSWR4VG9JbnN0SWR4ID0ge307XG4gICAgdGhpcy5fX2NodW5rQ291bnQgPSBudWxsO1xuICAgIHRoaXMuX19sYXN0Q2h1bmtUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9fc29ydEZuID0gbnVsbDtcbiAgICB0aGlzLl9fZmlsdGVyRm4gPSBudWxsO1xuICAgIHRoaXMuX19vYnNlcnZlUGF0aHMgPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7P2Z1bmN0aW9uKG5ldzpUZW1wbGF0ZUluc3RhbmNlQmFzZSwgT2JqZWN0PSl9ICovXG4gICAgdGhpcy5fX2N0b3IgPSBudWxsO1xuICAgIHRoaXMuX19pc0RldGFjaGVkID0gdHJ1ZTtcbiAgICB0aGlzLnRlbXBsYXRlID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fX2lzRGV0YWNoZWQgPSB0cnVlO1xuICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLl9faW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9fZGV0YWNoSW5zdGFuY2UoaSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAoIWhpZGVFbGVtZW50c0dsb2JhbGx5KCkpIHtcbiAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgLy8gb25seSBwZXJmb3JtIGF0dGFjaG1lbnQgaWYgdGhlIGVsZW1lbnQgd2FzIHByZXZpb3VzbHkgZGV0YWNoZWQuXG4gICAgaWYgKHRoaXMuX19pc0RldGFjaGVkKSB7XG4gICAgICB0aGlzLl9faXNEZXRhY2hlZCA9IGZhbHNlO1xuICAgICAgbGV0IHdyYXBwZWRQYXJlbnQgPSB3cmFwKHdyYXAodGhpcykucGFyZW50Tm9kZSk7XG4gICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5fX2luc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9fYXR0YWNoSW5zdGFuY2UoaSwgd3JhcHBlZFBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX19lbnN1cmVUZW1wbGF0aXplZCgpIHtcbiAgICAvLyBUZW1wbGF0aXppbmcgKGdlbmVyYXRpbmcgdGhlIGluc3RhbmNlIGNvbnN0cnVjdG9yKSBuZWVkcyB0byB3YWl0XG4gICAgLy8gdW50aWwgcmVhZHksIHNpbmNlIHdvbid0IGhhdmUgaXRzIHRlbXBsYXRlIGNvbnRlbnQgaGFuZGVkIGJhY2sgdG9cbiAgICAvLyBpdCB1bnRpbCB0aGVuXG4gICAgaWYgKCF0aGlzLl9fY3Rvcikge1xuICAgICAgbGV0IHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZSA9IC8qKiBAdHlwZSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gKi8odGhpcy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKTtcbiAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgLy8gLy8gV2FpdCB1bnRpbCBjaGlsZExpc3QgY2hhbmdlcyBhbmQgdGVtcGxhdGUgc2hvdWxkIGJlIHRoZXJlIGJ5IHRoZW5cbiAgICAgICAgbGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuX19yZW5kZXIoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkb20tcmVwZWF0IHJlcXVpcmVzIGEgPHRlbXBsYXRlPiBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcywge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBUZW1wbGF0ZSBpbnN0YW5jZSBwcm9wcyB0aGF0IHNob3VsZCBiZSBleGNsdWRlZCBmcm9tIGZvcndhcmRpbmdcbiAgICAgIGxldCBpbnN0YW5jZVByb3BzID0ge307XG4gICAgICBpbnN0YW5jZVByb3BzW3RoaXMuYXNdID0gdHJ1ZTtcbiAgICAgIGluc3RhbmNlUHJvcHNbdGhpcy5pbmRleEFzXSA9IHRydWU7XG4gICAgICBpbnN0YW5jZVByb3BzW3RoaXMuaXRlbXNJbmRleEFzXSA9IHRydWU7XG4gICAgICB0aGlzLl9fY3RvciA9IHRlbXBsYXRpemUodGVtcGxhdGUsIHRoaXMsIHtcbiAgICAgICAgbXV0YWJsZURhdGE6IHRoaXMubXV0YWJsZURhdGEsXG4gICAgICAgIHBhcmVudE1vZGVsOiB0cnVlLFxuICAgICAgICBpbnN0YW5jZVByb3BzOiBpbnN0YW5jZVByb3BzLFxuICAgICAgICAvKipcbiAgICAgICAgICogQHRoaXMge0RvbVJlcGVhdH1cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgdG8gc2V0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0IHByb3BlcnR5IHRvXG4gICAgICAgICAqL1xuICAgICAgICBmb3J3YXJkSG9zdFByb3A6IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgbGV0IGkkID0gdGhpcy5fX2luc3RhbmNlcztcbiAgICAgICAgICBmb3IgKGxldCBpPTAsIGluc3Q7IChpPGkkLmxlbmd0aCkgJiYgKGluc3Q9aSRbaV0pOyBpKyspIHtcbiAgICAgICAgICAgIGluc3QuZm9yd2FyZEhvc3RQcm9wKHByb3AsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhpcyB7RG9tUmVwZWF0fVxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdCBJbnN0YW5jZSB0byBub3RpZnlcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgdG8gbm90aWZ5XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gbm90aWZ5XG4gICAgICAgICAqL1xuICAgICAgICBub3RpZnlJbnN0YW5jZVByb3A6IGZ1bmN0aW9uKGluc3QsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKG1hdGNoZXModGhpcy5hcywgcHJvcCkpIHtcbiAgICAgICAgICAgIGxldCBpZHggPSBpbnN0W3RoaXMuaXRlbXNJbmRleEFzXTtcbiAgICAgICAgICAgIGlmIChwcm9wID09IHRoaXMuYXMpIHtcbiAgICAgICAgICAgICAgdGhpcy5pdGVtc1tpZHhdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGF0aCA9IHRyYW5zbGF0ZSh0aGlzLmFzLCBgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS4ke2lkeH1gLCBwcm9wKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5UGF0aChwYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBfX2dldE1ldGhvZEhvc3QoKSB7XG4gICAgLy8gVGVjaG5pY2FsbHkgdGhpcyBzaG91bGQgYmUgdGhlIG93bmVyIG9mIHRoZSBvdXRlcm1vc3QgdGVtcGxhdGUuXG4gICAgLy8gSW4gc2hhZG93IGRvbSwgdGhpcyBpcyBhbHdheXMgZ2V0Um9vdE5vZGUoKS5ob3N0LCBidXQgd2UgY2FuXG4gICAgLy8gYXBwcm94aW1hdGUgdGhpcyB2aWEgY29vcGVyYXRpb24gd2l0aCBvdXIgZGF0YUhvc3QgYWx3YXlzIHNldHRpbmdcbiAgICAvLyBgX21ldGhvZEhvc3RgIGFzIGxvbmcgYXMgdGhlcmUgd2VyZSBiaW5kaW5ncyAob3IgaWQncykgb24gdGhpc1xuICAgIC8vIGluc3RhbmNlIGNhdXNpbmcgaXQgdG8gZ2V0IGEgZGF0YUhvc3QuXG4gICAgcmV0dXJuIHRoaXMuX19kYXRhSG9zdC5fbWV0aG9kSG9zdCB8fCB0aGlzLl9fZGF0YUhvc3Q7XG4gIH1cblxuICBfX2Z1bmN0aW9uRnJvbVByb3BlcnR5VmFsdWUoZnVuY3Rpb25Pck1ldGhvZE5hbWUpIHtcbiAgICBpZiAodHlwZW9mIGZ1bmN0aW9uT3JNZXRob2ROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IG1ldGhvZE5hbWUgPSBmdW5jdGlvbk9yTWV0aG9kTmFtZTtcbiAgICAgIGxldCBvYmogPSB0aGlzLl9fZ2V0TWV0aG9kSG9zdCgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gb2JqW21ldGhvZE5hbWVdLmFwcGx5KG9iaiwgYXJndW1lbnRzKTsgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb25Pck1ldGhvZE5hbWU7XG4gIH1cblxuICBfX3NvcnRDaGFuZ2VkKHNvcnQpIHtcbiAgICB0aGlzLl9fc29ydEZuID0gdGhpcy5fX2Z1bmN0aW9uRnJvbVByb3BlcnR5VmFsdWUoc29ydCk7XG4gICAgaWYgKHRoaXMuaXRlbXMpIHsgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIpOyB9XG4gIH1cblxuICBfX2ZpbHRlckNoYW5nZWQoZmlsdGVyKSB7XG4gICAgdGhpcy5fX2ZpbHRlckZuID0gdGhpcy5fX2Z1bmN0aW9uRnJvbVByb3BlcnR5VmFsdWUoZmlsdGVyKTtcbiAgICBpZiAodGhpcy5pdGVtcykgeyB0aGlzLl9fZGVib3VuY2VSZW5kZXIodGhpcy5fX3JlbmRlcik7IH1cbiAgfVxuXG4gIF9fY29tcHV0ZUZyYW1lVGltZShyYXRlKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbCgxMDAwL3JhdGUpO1xuICB9XG5cbiAgX19pbml0aWFsaXplQ2h1bmtpbmcoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbENvdW50KSB7XG4gICAgICB0aGlzLl9fbGltaXQgPSB0aGlzLmluaXRpYWxDb3VudDtcbiAgICAgIHRoaXMuX19jaHVua0NvdW50ID0gdGhpcy5pbml0aWFsQ291bnQ7XG4gICAgICB0aGlzLl9fbGFzdENodW5rVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cbiAgfVxuXG4gIF9fdHJ5UmVuZGVyQ2h1bmsoKSB7XG4gICAgLy8gRGVib3VuY2VkIHNvIHRoYXQgbXVsdGlwbGUgY2FsbHMgdGhyb3VnaCBgX3JlbmRlcmAgYmV0d2VlbiBhbmltYXRpb25cbiAgICAvLyBmcmFtZXMgb25seSBxdWV1ZSBvbmUgbmV3IHJBRiAoZS5nLiBhcnJheSBtdXRhdGlvbiAmIGNodW5rZWQgcmVuZGVyKVxuICAgIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuX19saW1pdCA8IHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9fZGVib3VuY2VSZW5kZXIodGhpcy5fX3JlcXVlc3RSZW5kZXJDaHVuayk7XG4gICAgfVxuICB9XG5cbiAgX19yZXF1ZXN0UmVuZGVyQ2h1bmsoKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT50aGlzLl9fcmVuZGVyQ2h1bmsoKSk7XG4gIH1cblxuICBfX3JlbmRlckNodW5rKCkge1xuICAgIC8vIFNpbXBsZSBhdXRvIGNodW5rU2l6ZSB0aHJvdHRsaW5nIGFsZ29yaXRobSBiYXNlZCBvbiBmZWVkYmFjayBsb29wOlxuICAgIC8vIG1lYXN1cmUgYWN0dWFsIHRpbWUgYmV0d2VlbiBmcmFtZXMgYW5kIHNjYWxlIGNodW5rIGNvdW50IGJ5IHJhdGlvXG4gICAgLy8gb2YgdGFyZ2V0L2FjdHVhbCBmcmFtZSB0aW1lXG4gICAgbGV0IGN1cnJDaHVua1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsZXQgcmF0aW8gPSB0aGlzLl90YXJnZXRGcmFtZVRpbWUgLyAoY3VyckNodW5rVGltZSAtIHRoaXMuX19sYXN0Q2h1bmtUaW1lKTtcbiAgICB0aGlzLl9fY2h1bmtDb3VudCA9IE1hdGgucm91bmQodGhpcy5fX2NodW5rQ291bnQgKiByYXRpbykgfHwgMTtcbiAgICB0aGlzLl9fbGltaXQgKz0gdGhpcy5fX2NodW5rQ291bnQ7XG4gICAgdGhpcy5fX2xhc3RDaHVua1RpbWUgPSBjdXJyQ2h1bmtUaW1lO1xuICAgIHRoaXMuX19kZWJvdW5jZVJlbmRlcih0aGlzLl9fcmVuZGVyKTtcbiAgfVxuXG4gIF9fb2JzZXJ2ZUNoYW5nZWQoKSB7XG4gICAgdGhpcy5fX29ic2VydmVQYXRocyA9IHRoaXMub2JzZXJ2ZSAmJlxuICAgICAgdGhpcy5vYnNlcnZlLnJlcGxhY2UoJy4qJywgJy4nKS5zcGxpdCgnICcpO1xuICB9XG5cbiAgX19pdGVtc0NoYW5nZWQoY2hhbmdlKSB7XG4gICAgaWYgKHRoaXMuaXRlbXMgJiYgIUFycmF5LmlzQXJyYXkodGhpcy5pdGVtcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignZG9tLXJlcGVhdCBleHBlY3RlZCBhcnJheSBmb3IgYGl0ZW1zYCwgZm91bmQnLCB0aGlzLml0ZW1zKTtcbiAgICB9XG4gICAgLy8gSWYgcGF0aCB3YXMgdG8gYW4gaXRlbSAoZS5nLiAnaXRlbXMuMycgb3IgJ2l0ZW1zLjMuZm9vJyksIGZvcndhcmQgdGhlXG4gICAgLy8gcGF0aCB0byB0aGF0IGluc3RhbmNlIHN5bmNocm9ub3VzbHkgKHJldHVybnMgZmFsc2UgZm9yIG5vbi1pdGVtIHBhdGhzKVxuICAgIGlmICghdGhpcy5fX2hhbmRsZUl0ZW1QYXRoKGNoYW5nZS5wYXRoLCBjaGFuZ2UudmFsdWUpKSB7XG4gICAgICAvLyBPdGhlcndpc2UsIHRoZSBhcnJheSB3YXMgcmVzZXQgKCdpdGVtcycpIG9yIHNwbGljZWQgKCdpdGVtcy5zcGxpY2VzJyksXG4gICAgICAvLyBzbyBxdWV1ZSBhIGZ1bGwgcmVmcmVzaFxuICAgICAgdGhpcy5fX2luaXRpYWxpemVDaHVua2luZygpO1xuICAgICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIpO1xuICAgIH1cbiAgfVxuXG4gIF9faGFuZGxlT2JzZXJ2ZWRQYXRocyhwYXRoKSB7XG4gICAgLy8gSGFuZGxlIGNhc2VzIHdoZXJlIHBhdGggY2hhbmdlcyBzaG91bGQgY2F1c2UgYSByZS1zb3J0L2ZpbHRlclxuICAgIGlmICh0aGlzLl9fc29ydEZuIHx8IHRoaXMuX19maWx0ZXJGbikge1xuICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgIC8vIEFsd2F5cyByZS1yZW5kZXIgaWYgdGhlIGl0ZW0gaXRzZWxmIGNoYW5nZWRcbiAgICAgICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIsIHRoaXMuZGVsYXkpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9fb2JzZXJ2ZVBhdGhzKSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgcmUtcmVuZGVyIGlmIHRoZSBwYXRoIGNoYW5nZWQgbWF0Y2hlcyBhbiBvYnNlcnZlZCBwYXRoXG4gICAgICAgIGxldCBwYXRocyA9IHRoaXMuX19vYnNlcnZlUGF0aHM7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxwYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChwYXRoLmluZGV4T2YocGF0aHNbaV0pID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9fZGVib3VuY2VSZW5kZXIodGhpcy5fX3JlbmRlciwgdGhpcy5kZWxheSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpEb21SZXBlYXQpfSBmbiBGdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBkZWxheSBEZWxheSBpbiBtcyB0byBkZWJvdW5jZSBieS5cbiAgICovXG4gIF9fZGVib3VuY2VSZW5kZXIoZm4sIGRlbGF5ID0gMCkge1xuICAgIHRoaXMuX19yZW5kZXJEZWJvdW5jZXIgPSBEZWJvdW5jZXIuZGVib3VuY2UoXG4gICAgICAgICAgdGhpcy5fX3JlbmRlckRlYm91bmNlclxuICAgICAgICAsIGRlbGF5ID4gMCA/IHRpbWVPdXQuYWZ0ZXIoZGVsYXkpIDogbWljcm9UYXNrXG4gICAgICAgICwgZm4uYmluZCh0aGlzKSk7XG4gICAgZW5xdWV1ZURlYm91bmNlcih0aGlzLl9fcmVuZGVyRGVib3VuY2VyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZXMgdGhlIGVsZW1lbnQgdG8gcmVuZGVyIGl0cyBjb250ZW50LiBOb3JtYWxseSByZW5kZXJpbmcgaXNcbiAgICogYXN5bmNocm9ub3VzIHRvIGEgcHJvdm9raW5nIGNoYW5nZS4gVGhpcyBpcyBkb25lIGZvciBlZmZpY2llbmN5IHNvXG4gICAqIHRoYXQgbXVsdGlwbGUgY2hhbmdlcyB0cmlnZ2VyIG9ubHkgYSBzaW5nbGUgcmVuZGVyLiBUaGUgcmVuZGVyIG1ldGhvZFxuICAgKiBzaG91bGQgYmUgY2FsbGVkIGlmLCBmb3IgZXhhbXBsZSwgdGVtcGxhdGUgcmVuZGVyaW5nIGlzIHJlcXVpcmVkIHRvXG4gICAqIHZhbGlkYXRlIGFwcGxpY2F0aW9uIHN0YXRlLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVuZGVyKCkge1xuICAgIC8vIFF1ZXVlIHRoaXMgcmVwZWF0ZXIsIHRoZW4gZmx1c2ggYWxsIGluIG9yZGVyXG4gICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIpO1xuICAgIGZsdXNoKCk7XG4gIH1cblxuICBfX3JlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuX19lbnN1cmVUZW1wbGF0aXplZCgpKSB7XG4gICAgICAvLyBObyB0ZW1wbGF0ZSBmb3VuZCB5ZXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fX2FwcGx5RnVsbFJlZnJlc2goKTtcbiAgICAvLyBSZXNldCB0aGUgcG9vbFxuICAgIC8vIFRPRE8oa3NjaGFhZik6IFJldXNlIHBvb2wgYWNyb3NzIHR1cm5zIGFuZCBuZXN0ZWQgdGVtcGxhdGVzXG4gICAgLy8gTm93IHRoYXQgb2JqZWN0cy9hcnJheXMgYXJlIHJlLWV2YWx1YXRlZCB3aGVuIHNldCwgd2UgY2FuIHNhZmVseVxuICAgIC8vIHJldXNlIHBvb2xlZCBpbnN0YW5jZXMgYWNyb3NzIHR1cm5zLCBob3dldmVyIHdlIHN0aWxsIG5lZWQgdG8gZGVjaWRlXG4gICAgLy8gc2VtYW50aWNzIHJlZ2FyZGluZyBob3cgbG9uZyB0byBob2xkLCBob3cgbWFueSB0byBob2xkLCBldGMuXG4gICAgdGhpcy5fX3Bvb2wubGVuZ3RoID0gMDtcbiAgICAvLyBTZXQgcmVuZGVyZWQgaXRlbSBjb3VudFxuICAgIHRoaXMuX3NldFJlbmRlcmVkSXRlbUNvdW50KHRoaXMuX19pbnN0YW5jZXMubGVuZ3RoKTtcbiAgICAvLyBOb3RpZnkgdXNlcnNcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkb20tY2hhbmdlJywge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlXG4gICAgfSkpO1xuICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIHJlbmRlciBtb3JlIGl0ZW1zXG4gICAgdGhpcy5fX3RyeVJlbmRlckNodW5rKCk7XG4gIH1cblxuICBfX2FwcGx5RnVsbFJlZnJlc2goKSB7XG4gICAgbGV0IGl0ZW1zID0gdGhpcy5pdGVtcyB8fCBbXTtcbiAgICBsZXQgaXNudElkeFRvSXRlbXNJZHggPSBuZXcgQXJyYXkoaXRlbXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpPTA7IGk8aXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlzbnRJZHhUb0l0ZW1zSWR4W2ldID0gaTtcbiAgICB9XG4gICAgLy8gQXBwbHkgdXNlciBmaWx0ZXJcbiAgICBpZiAodGhpcy5fX2ZpbHRlckZuKSB7XG4gICAgICBpc250SWR4VG9JdGVtc0lkeCA9IGlzbnRJZHhUb0l0ZW1zSWR4LmZpbHRlcigoaSwgaWR4LCBhcnJheSkgPT5cbiAgICAgICAgdGhpcy5fX2ZpbHRlckZuKGl0ZW1zW2ldLCBpZHgsIGFycmF5KSk7XG4gICAgfVxuICAgIC8vIEFwcGx5IHVzZXIgc29ydFxuICAgIGlmICh0aGlzLl9fc29ydEZuKSB7XG4gICAgICBpc250SWR4VG9JdGVtc0lkeC5zb3J0KChhLCBiKSA9PiB0aGlzLl9fc29ydEZuKGl0ZW1zW2FdLCBpdGVtc1tiXSkpO1xuICAgIH1cbiAgICAvLyBpdGVtcy0+aW5zdCBtYXAga2VwdCBmb3IgaXRlbSBwYXRoIGZvcndhcmRpbmdcbiAgICBjb25zdCBpdGVtc0lkeFRvSW5zdElkeCA9IHRoaXMuX19pdGVtc0lkeFRvSW5zdElkeCA9IHt9O1xuICAgIGxldCBpbnN0SWR4ID0gMDtcbiAgICAvLyBHZW5lcmF0ZSBpbnN0YW5jZXMgYW5kIGFzc2lnbiBpdGVtc1xuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oaXNudElkeFRvSXRlbXNJZHgubGVuZ3RoLCB0aGlzLl9fbGltaXQpO1xuICAgIGZvciAoOyBpbnN0SWR4PGxpbWl0OyBpbnN0SWR4KyspIHtcbiAgICAgIGxldCBpbnN0ID0gdGhpcy5fX2luc3RhbmNlc1tpbnN0SWR4XTtcbiAgICAgIGxldCBpdGVtSWR4ID0gaXNudElkeFRvSXRlbXNJZHhbaW5zdElkeF07XG4gICAgICBsZXQgaXRlbSA9IGl0ZW1zW2l0ZW1JZHhdO1xuICAgICAgaXRlbXNJZHhUb0luc3RJZHhbaXRlbUlkeF0gPSBpbnN0SWR4O1xuICAgICAgaWYgKGluc3QpIHtcbiAgICAgICAgaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5KHRoaXMuYXMsIGl0ZW0pO1xuICAgICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkodGhpcy5pbmRleEFzLCBpbnN0SWR4KTtcbiAgICAgICAgaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5KHRoaXMuaXRlbXNJbmRleEFzLCBpdGVtSWR4KTtcbiAgICAgICAgaW5zdC5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9faW5zZXJ0SW5zdGFuY2UoaXRlbSwgaW5zdElkeCwgaXRlbUlkeCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSBhbnkgZXh0cmEgaW5zdGFuY2VzIGZyb20gcHJldmlvdXMgc3RhdGVcbiAgICBmb3IgKGxldCBpPXRoaXMuX19pbnN0YW5jZXMubGVuZ3RoLTE7IGk+PWluc3RJZHg7IGktLSkge1xuICAgICAgdGhpcy5fX2RldGFjaEFuZFJlbW92ZUluc3RhbmNlKGkpO1xuICAgIH1cbiAgfVxuXG4gIF9fZGV0YWNoSW5zdGFuY2UoaWR4KSB7XG4gICAgbGV0IGluc3QgPSB0aGlzLl9faW5zdGFuY2VzW2lkeF07XG4gICAgY29uc3Qgd3JhcHBlZFJvb3QgPSB3cmFwKGluc3Qucm9vdCk7XG4gICAgZm9yIChsZXQgaT0wOyBpPGluc3QuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbCA9IGluc3QuY2hpbGRyZW5baV07XG4gICAgICB3cmFwcGVkUm9vdC5hcHBlbmRDaGlsZChlbCk7XG4gICAgfVxuICAgIHJldHVybiBpbnN0O1xuICB9XG5cbiAgX19hdHRhY2hJbnN0YW5jZShpZHgsIHBhcmVudCkge1xuICAgIGxldCBpbnN0ID0gdGhpcy5fX2luc3RhbmNlc1tpZHhdO1xuICAgIC8vIE5vdGUsIHRoaXMgaXMgcHJlLXdyYXBwZWQgYXMgYW4gb3B0aW1pemF0aW9uXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShpbnN0LnJvb3QsIHRoaXMpO1xuICB9XG5cbiAgX19kZXRhY2hBbmRSZW1vdmVJbnN0YW5jZShpZHgpIHtcbiAgICBsZXQgaW5zdCA9IHRoaXMuX19kZXRhY2hJbnN0YW5jZShpZHgpO1xuICAgIGlmIChpbnN0KSB7XG4gICAgICB0aGlzLl9fcG9vbC5wdXNoKGluc3QpO1xuICAgIH1cbiAgICB0aGlzLl9faW5zdGFuY2VzLnNwbGljZShpZHgsIDEpO1xuICB9XG5cbiAgX19zdGFtcEluc3RhbmNlKGl0ZW0sIGluc3RJZHgsIGl0ZW1JZHgpIHtcbiAgICBsZXQgbW9kZWwgPSB7fTtcbiAgICBtb2RlbFt0aGlzLmFzXSA9IGl0ZW07XG4gICAgbW9kZWxbdGhpcy5pbmRleEFzXSA9IGluc3RJZHg7XG4gICAgbW9kZWxbdGhpcy5pdGVtc0luZGV4QXNdID0gaXRlbUlkeDtcbiAgICByZXR1cm4gbmV3IHRoaXMuX19jdG9yKG1vZGVsKTtcbiAgfVxuXG4gIF9faW5zZXJ0SW5zdGFuY2UoaXRlbSwgaW5zdElkeCwgaXRlbUlkeCkge1xuICAgIGxldCBpbnN0ID0gdGhpcy5fX3Bvb2wucG9wKCk7XG4gICAgaWYgKGluc3QpIHtcbiAgICAgIC8vIFRPRE8oa3NjaGFhZik6IElmIHRoZSBwb29sIGlzIHNoYXJlZCBhY3Jvc3MgdHVybnMsIGhvc3RQcm9wc1xuICAgICAgLy8gbmVlZCB0byBiZSByZS1zZXQgdG8gcmV1c2VkIGluc3RhbmNlcyBpbiBhZGRpdGlvbiB0byBpdGVtXG4gICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkodGhpcy5hcywgaXRlbSk7XG4gICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkodGhpcy5pbmRleEFzLCBpbnN0SWR4KTtcbiAgICAgIGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eSh0aGlzLml0ZW1zSW5kZXhBcywgaXRlbUlkeCk7XG4gICAgICBpbnN0Ll9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdCA9IHRoaXMuX19zdGFtcEluc3RhbmNlKGl0ZW0sIGluc3RJZHgsIGl0ZW1JZHgpO1xuICAgIH1cbiAgICBsZXQgYmVmb3JlUm93ID0gdGhpcy5fX2luc3RhbmNlc1tpbnN0SWR4ICsgMV07XG4gICAgbGV0IGJlZm9yZU5vZGUgPSBiZWZvcmVSb3cgPyBiZWZvcmVSb3cuY2hpbGRyZW5bMF0gOiB0aGlzO1xuICAgIHdyYXAod3JhcCh0aGlzKS5wYXJlbnROb2RlKS5pbnNlcnRCZWZvcmUoaW5zdC5yb290LCBiZWZvcmVOb2RlKTtcbiAgICB0aGlzLl9faW5zdGFuY2VzW2luc3RJZHhdID0gaW5zdDtcbiAgICByZXR1cm4gaW5zdDtcbiAgfVxuXG4gIC8vIEltcGxlbWVudHMgZXh0ZW5zaW9uIHBvaW50IGZyb20gVGVtcGxhdGl6ZSBtaXhpblxuICAvKipcbiAgICogU2hvd3Mgb3IgaGlkZXMgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHRvcCBsZXZlbCBjaGlsZCBlbGVtZW50cy4gRm9yXG4gICAqIHRleHQgbm9kZXMsIGB0ZXh0Q29udGVudGAgaXMgcmVtb3ZlZCB3aGlsZSBcImhpZGRlblwiIGFuZCByZXBsYWNlZCB3aGVuXG4gICAqIFwic2hvd24uXCJcbiAgICogQHBhcmFtIHtib29sZWFufSBoaWRkZW4gU2V0IHRvIHRydWUgdG8gaGlkZSB0aGUgY2hpbGRyZW47XG4gICAqIHNldCB0byBmYWxzZSB0byBzaG93IHRoZW0uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9zaG93SGlkZUNoaWxkcmVuKGhpZGRlbikge1xuICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLl9faW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2VzW2ldLl9zaG93SGlkZUNoaWxkcmVuKGhpZGRlbik7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FsbGVkIGFzIGEgc2lkZSBlZmZlY3Qgb2YgYSBob3N0IGl0ZW1zLjxrZXk+LjxwYXRoPiBwYXRoIGNoYW5nZSxcbiAgLy8gcmVzcG9uc2libGUgZm9yIG5vdGlmeWluZyBpdGVtLjxwYXRoPiBjaGFuZ2VzIHRvIGluc3QgZm9yIGtleVxuICBfX2hhbmRsZUl0ZW1QYXRoKHBhdGgsIHZhbHVlKSB7XG4gICAgbGV0IGl0ZW1zUGF0aCA9IHBhdGguc2xpY2UoNik7IC8vICdpdGVtcy4nLmxlbmd0aCA9PSA2XG4gICAgbGV0IGRvdCA9IGl0ZW1zUGF0aC5pbmRleE9mKCcuJyk7XG4gICAgbGV0IGl0ZW1zSWR4ID0gZG90IDwgMCA/IGl0ZW1zUGF0aCA6IGl0ZW1zUGF0aC5zdWJzdHJpbmcoMCwgZG90KTtcbiAgICAvLyBJZiBwYXRoIHdhcyBpbmRleCBpbnRvIGFycmF5Li4uXG4gICAgaWYgKGl0ZW1zSWR4ID09IHBhcnNlSW50KGl0ZW1zSWR4LCAxMCkpIHtcbiAgICAgIGxldCBpdGVtU3ViUGF0aCA9IGRvdCA8IDAgPyAnJyA6IGl0ZW1zUGF0aC5zdWJzdHJpbmcoZG90KzEpO1xuICAgICAgLy8gSWYgdGhlIHBhdGggaXMgb2JzZXJ2ZWQsIGl0IHdpbGwgdHJpZ2dlciBhIGZ1bGwgcmVmcmVzaFxuICAgICAgdGhpcy5fX2hhbmRsZU9ic2VydmVkUGF0aHMoaXRlbVN1YlBhdGgpO1xuICAgICAgLy8gTm90ZSwgZXZlbiBpZiBhIHJ1bGwgcmVmcmVzaCBpcyB0cmlnZ2VyZWQsIGFsd2F5cyBkbyB0aGUgcGF0aFxuICAgICAgLy8gbm90aWZpY2F0aW9uIGJlY2F1c2UgdW5sZXNzIG11dGFibGVEYXRhIGlzIHVzZWQgZm9yIGRvbS1yZXBlYXRcbiAgICAgIC8vIGFuZCBhbGwgZWxlbWVudHMgaW4gdGhlIGluc3RhbmNlIHN1YnRyZWUsIGEgZnVsbCByZWZyZXNoIG1heVxuICAgICAgLy8gbm90IHRyaWdnZXIgdGhlIHByb3BlciB1cGRhdGUuXG4gICAgICBsZXQgaW5zdElkeCA9IHRoaXMuX19pdGVtc0lkeFRvSW5zdElkeFtpdGVtc0lkeF07XG4gICAgICBsZXQgaW5zdCA9IHRoaXMuX19pbnN0YW5jZXNbaW5zdElkeF07XG4gICAgICBpZiAoaW5zdCkge1xuICAgICAgICBsZXQgaXRlbVBhdGggPSB0aGlzLmFzICsgKGl0ZW1TdWJQYXRoID8gJy4nICsgaXRlbVN1YlBhdGggOiAnJyk7XG4gICAgICAgIC8vIFRoaXMgaXMgZWZmZWN0aXZlbHkgYG5vdGlmeVBhdGhgLCBidXQgYXZvaWRzIHNvbWUgb2YgdGhlIG92ZXJoZWFkXG4gICAgICAgIC8vIG9mIHRoZSBwdWJsaWMgQVBJXG4gICAgICAgIGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChpdGVtUGF0aCwgdmFsdWUsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgaW5zdC5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaXRlbSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBlbGVtZW50IHN0YW1wZWQgYnlcbiAgICogdGhpcyBgZG9tLXJlcGVhdGAuXG4gICAqXG4gICAqIE5vdGUsIHRvIG1vZGlmeSBzdWItcHJvcGVydGllcyBvZiB0aGUgaXRlbSxcbiAgICogYG1vZGVsRm9yRWxlbWVudChlbCkuc2V0KCdpdGVtLjxzdWItcHJvcD4nLCB2YWx1ZSlgXG4gICAqIHNob3VsZCBiZSB1c2VkLlxuICAgKlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWwgRWxlbWVudCBmb3Igd2hpY2ggdG8gcmV0dXJuIHRoZSBpdGVtLlxuICAgKiBAcmV0dXJuIHsqfSBJdGVtIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudC5cbiAgICovXG4gIGl0ZW1Gb3JFbGVtZW50KGVsKSB7XG4gICAgbGV0IGluc3RhbmNlID0gdGhpcy5tb2RlbEZvckVsZW1lbnQoZWwpO1xuICAgIHJldHVybiBpbnN0YW5jZSAmJiBpbnN0YW5jZVt0aGlzLmFzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbnN0IGluZGV4IGZvciBhIGdpdmVuIGVsZW1lbnQgc3RhbXBlZCBieSB0aGlzIGBkb20tcmVwZWF0YC5cbiAgICogSWYgYHNvcnRgIGlzIHByb3ZpZGVkLCB0aGUgaW5kZXggd2lsbCByZWZsZWN0IHRoZSBzb3J0ZWQgb3JkZXIgKHJhdGhlclxuICAgKiB0aGFuIHRoZSBvcmlnaW5hbCBhcnJheSBvcmRlcikuXG4gICAqXG4gICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbCBFbGVtZW50IGZvciB3aGljaCB0byByZXR1cm4gdGhlIGluZGV4LlxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfSBSb3cgaW5kZXggYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50IChub3RlIHRoaXMgbWF5XG4gICAqICAgbm90IGNvcnJlc3BvbmQgdG8gdGhlIGFycmF5IGluZGV4IGlmIGEgdXNlciBgc29ydGAgaXMgYXBwbGllZCkuXG4gICAqL1xuICBpbmRleEZvckVsZW1lbnQoZWwpIHtcbiAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLm1vZGVsRm9yRWxlbWVudChlbCk7XG4gICAgcmV0dXJuIGluc3RhbmNlICYmIGluc3RhbmNlW3RoaXMuaW5kZXhBc107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdGVtcGxhdGUgXCJtb2RlbFwiIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIGVsZW1lbnQsIHdoaWNoXG4gICAqIHNlcnZlcyBhcyB0aGUgYmluZGluZyBzY29wZSBmb3IgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHRoZSBlbGVtZW50IGlzXG4gICAqIGNvbnRhaW5lZCBpbi4gQSB0ZW1wbGF0ZSBtb2RlbFxuICAgKiBzaG91bGQgYmUgdXNlZCB0byBtYW5pcHVsYXRlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdGVtcGxhdGUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqICAgbGV0IG1vZGVsID0gbW9kZWxGb3JFbGVtZW50KGVsKTtcbiAgICogICBpZiAobW9kZWwuaW5kZXggPCAxMCkge1xuICAgKiAgICAgbW9kZWwuc2V0KCdpdGVtLmNoZWNrZWQnLCB0cnVlKTtcbiAgICogICB9XG4gICAqXG4gICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbCBFbGVtZW50IGZvciB3aGljaCB0byByZXR1cm4gYSB0ZW1wbGF0ZSBtb2RlbC5cbiAgICogQHJldHVybiB7VGVtcGxhdGVJbnN0YW5jZUJhc2V9IE1vZGVsIHJlcHJlc2VudGluZyB0aGUgYmluZGluZyBzY29wZSBmb3JcbiAgICogICB0aGUgZWxlbWVudC5cbiAgICovXG4gIG1vZGVsRm9yRWxlbWVudChlbCkge1xuICAgIHJldHVybiBtb2RlbEZvckVsZW1lbnQodGhpcy50ZW1wbGF0ZSwgZWwpO1xuICB9XG5cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKERvbVJlcGVhdC5pcywgRG9tUmVwZWF0KTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gJy4uLy4uL3BvbHltZXItZWxlbWVudC5qcyc7XG5cbmltcG9ydCB7IHRlbXBsYXRpemUgfSBmcm9tICcuLi91dGlscy90ZW1wbGF0aXplLmpzJztcbmltcG9ydCB7IERlYm91bmNlciB9IGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJztcbmltcG9ydCB7IGVucXVldWVEZWJvdW5jZXIsIGZsdXNoIH0gZnJvbSAnLi4vdXRpbHMvZmx1c2guanMnO1xuaW1wb3J0IHsgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgcm9vdCB9IGZyb20gJy4uL3V0aWxzL3BhdGguanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0IHsgaGlkZUVsZW1lbnRzR2xvYmFsbHkgfSBmcm9tICcuLi91dGlscy9oaWRlLXRlbXBsYXRlLWNvbnRyb2xzLmpzJztcblxuLyoqXG4gKiBUaGUgYDxkb20taWY+YCBlbGVtZW50IHdpbGwgc3RhbXAgYSBsaWdodC1kb20gYDx0ZW1wbGF0ZT5gIGNoaWxkIHdoZW5cbiAqIHRoZSBgaWZgIHByb3BlcnR5IGJlY29tZXMgdHJ1dGh5LCBhbmQgdGhlIHRlbXBsYXRlIGNhbiB1c2UgUG9seW1lclxuICogZGF0YS1iaW5kaW5nIGFuZCBkZWNsYXJhdGl2ZSBldmVudCBmZWF0dXJlcyB3aGVuIHVzZWQgaW4gdGhlIGNvbnRleHQgb2ZcbiAqIGEgUG9seW1lciBlbGVtZW50J3MgdGVtcGxhdGUuXG4gKlxuICogV2hlbiBgaWZgIGJlY29tZXMgZmFsc3ksIHRoZSBzdGFtcGVkIGNvbnRlbnQgaXMgaGlkZGVuIGJ1dCBub3RcbiAqIHJlbW92ZWQgZnJvbSBkb20uIFdoZW4gYGlmYCBzdWJzZXF1ZW50bHkgYmVjb21lcyB0cnV0aHkgYWdhaW4sIHRoZSBjb250ZW50XG4gKiBpcyBzaW1wbHkgcmUtc2hvd24uIFRoaXMgYXBwcm9hY2ggaXMgdXNlZCBkdWUgdG8gaXRzIGZhdm9yYWJsZSBwZXJmb3JtYW5jZVxuICogY2hhcmFjdGVyaXN0aWNzOiB0aGUgZXhwZW5zZSBvZiBjcmVhdGluZyB0ZW1wbGF0ZSBjb250ZW50IGlzIHBhaWQgb25seVxuICogb25jZSBhbmQgbGF6aWx5LlxuICpcbiAqIFNldCB0aGUgYHJlc3RhbXBgIHByb3BlcnR5IHRvIHRydWUgdG8gZm9yY2UgdGhlIHN0YW1wZWQgY29udGVudCB0byBiZVxuICogY3JlYXRlZCAvIGRlc3Ryb3llZCB3aGVuIHRoZSBgaWZgIGNvbmRpdGlvbiBjaGFuZ2VzLlxuICpcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAcG9seW1lclxuICogQGV4dGVuZHMgUG9seW1lckVsZW1lbnRcbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IHRoYXQgY29uZGl0aW9uYWxseSBzdGFtcHMgYW5kIGhpZGVzIG9yIHJlbW92ZXNcbiAqICAgdGVtcGxhdGUgY29udGVudCBiYXNlZCBvbiBhIGJvb2xlYW4gZmxhZy5cbiAqL1xuZXhwb3J0IGNsYXNzIERvbUlmIGV4dGVuZHMgUG9seW1lckVsZW1lbnQge1xuXG4gIC8vIE5vdCBuZWVkZWQgdG8gZmluZCB0ZW1wbGF0ZTsgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgYW5hbHl6ZXJcbiAgLy8gY2FuIGZpbmQgdGhlIHRhZyBuYW1lIGZyb20gY3VzdG9tRWxlbWVudHMuZGVmaW5lIGNhbGxcbiAgc3RhdGljIGdldCBpcygpIHsgcmV0dXJuICdkb20taWYnOyB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHsgcmV0dXJuIG51bGw7IH1cblxuICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAvKipcbiAgICAgICAqIEZpcmVkIHdoZW5ldmVyIERPTSBpcyBhZGRlZCBvciByZW1vdmVkL2hpZGRlbiBieSB0aGlzIHRlbXBsYXRlIChieVxuICAgICAgICogZGVmYXVsdCwgcmVuZGVyaW5nIG9jY3VycyBsYXppbHkpLiAgVG8gZm9yY2UgaW1tZWRpYXRlIHJlbmRlcmluZywgY2FsbFxuICAgICAgICogYHJlbmRlcmAuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IGRvbS1jaGFuZ2VcbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhpcyB0ZW1wbGF0ZSBzaG91bGQgc3RhbXAuXG4gICAgICAgKi9cbiAgICAgIGlmOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIG9ic2VydmVyOiAnX19kZWJvdW5jZVJlbmRlcidcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0cnVlLCBlbGVtZW50cyB3aWxsIGJlIHJlbW92ZWQgZnJvbSBET00gYW5kIGRpc2NhcmRlZCB3aGVuIGBpZmBcbiAgICAgICAqIGJlY29tZXMgZmFsc2UgYW5kIHJlLWNyZWF0ZWQgYW5kIGFkZGVkIGJhY2sgdG8gdGhlIERPTSB3aGVuIGBpZmBcbiAgICAgICAqIGJlY29tZXMgdHJ1ZS4gIEJ5IGRlZmF1bHQsIHN0YW1wZWQgZWxlbWVudHMgd2lsbCBiZSBoaWRkZW4gYnV0IGxlZnRcbiAgICAgICAqIGluIHRoZSBET00gd2hlbiBgaWZgIGJlY29tZXMgZmFsc2UsIHdoaWNoIGlzIGdlbmVyYWxseSByZXN1bHRzXG4gICAgICAgKiBpbiBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgKi9cbiAgICAgIHJlc3RhbXA6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgb2JzZXJ2ZXI6ICdfX2RlYm91bmNlUmVuZGVyJ1xuICAgICAgfVxuXG4gICAgfTtcblxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVuZGVyRGVib3VuY2VyID0gbnVsbDtcbiAgICB0aGlzLl9faW52YWxpZFByb3BzID0gbnVsbDtcbiAgICB0aGlzLl9faW5zdGFuY2UgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RJZiA9IGZhbHNlO1xuICAgIHRoaXMuX19jdG9yID0gbnVsbDtcbiAgICB0aGlzLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXyA9IGZhbHNlO1xuICB9XG5cbiAgX19kZWJvdW5jZVJlbmRlcigpIHtcbiAgICAvLyBSZW5kZXIgaXMgYXN5bmMgZm9yIDIgcmVhc29uczpcbiAgICAvLyAxLiBUbyBlbGltaW5hdGUgZG9tIGNyZWF0aW9uIHRyYXNoaW5nIGlmIHVzZXIgY29kZSB0aHJhc2hlcyBgaWZgIGluIHRoZVxuICAgIC8vICAgIHNhbWUgdHVybi4gVGhpcyB3YXMgbW9yZSBjb21tb24gaW4gMS54IHdoZXJlIGEgY29tcG91bmQgY29tcHV0ZWRcbiAgICAvLyAgICBwcm9wZXJ0eSBjb3VsZCByZXN1bHQgaW4gdGhlIHJlc3VsdCBjaGFuZ2luZyBtdWx0aXBsZSB0aW1lcywgYnV0IGlzXG4gICAgLy8gICAgbWl0aWdhdGVkIHRvIGEgbGFyZ2UgZXh0ZW50IGJ5IGJhdGNoZWQgcHJvcGVydHkgcHJvY2Vzc2luZyBpbiAyLnguXG4gICAgLy8gMi4gVG8gYXZvaWQgZG91YmxlIG9iamVjdCBwcm9wYWdhdGlvbiB3aGVuIGEgYmFnIGluY2x1ZGluZyB2YWx1ZXMgYm91bmRcbiAgICAvLyAgICB0byB0aGUgYGlmYCBwcm9wZXJ0eSBhcyB3ZWxsIGFzIG9uZSBvciBtb3JlIGhvc3RQcm9wcyBjb3VsZCBlbnF1ZXVlXG4gICAgLy8gICAgdGhlIDxkb20taWY+IHRvIGZsdXNoIGJlZm9yZSB0aGUgPHRlbXBsYXRlPidzIGhvc3QgcHJvcGVydHlcbiAgICAvLyAgICBmb3J3YXJkaW5nLiBJbiB0aGF0IHNjZW5hcmlvIGNyZWF0aW5nIGFuIGluc3RhbmNlIHdvdWxkIHJlc3VsdCBpblxuICAgIC8vICAgIHRoZSBob3N0IHByb3BzIGJlaW5nIHNldCBvbmNlLCBhbmQgdGhlbiB0aGUgZW5xdWV1ZWQgY2hhbmdlcyBvbiB0aGVcbiAgICAvLyAgICB0ZW1wbGF0ZSB3b3VsZCBzZXQgcHJvcGVydGllcyBhIHNlY29uZCB0aW1lLCBwb3RlbnRpYWxseSBjYXVzaW5nIGFuXG4gICAgLy8gICAgb2JqZWN0IHRvIGJlIHNldCB0byBhbiBpbnN0YW5jZSBtb3JlIHRoYW4gb25jZS4gIENyZWF0aW5nIHRoZVxuICAgIC8vICAgIGluc3RhbmNlIGFzeW5jIGZyb20gZmx1c2hpbmcgZGF0YSBlbnN1cmVzIHRoaXMgZG9lc24ndCBoYXBwZW4uIElmXG4gICAgLy8gICAgd2Ugd2FudGVkIGEgc3luYyBvcHRpb24gaW4gdGhlIGZ1dHVyZSwgc2ltcGx5IGhhdmluZyA8ZG9tLWlmPiBmbHVzaFxuICAgIC8vICAgIChvciBjbGVhcikgaXRzIHRlbXBsYXRlJ3MgcGVuZGluZyBob3N0IHByb3BlcnRpZXMgYmVmb3JlIGNyZWF0aW5nXG4gICAgLy8gICAgdGhlIGluc3RhbmNlIHdvdWxkIGFsc28gYXZvaWQgdGhlIHByb2JsZW0uXG4gICAgdGhpcy5fX3JlbmRlckRlYm91bmNlciA9IERlYm91bmNlci5kZWJvdW5jZShcbiAgICAgICAgICB0aGlzLl9fcmVuZGVyRGVib3VuY2VyXG4gICAgICAgICwgbWljcm9UYXNrXG4gICAgICAgICwgKCkgPT4gdGhpcy5fX3JlbmRlcigpKTtcbiAgICBlbnF1ZXVlRGVib3VuY2VyKHRoaXMuX19yZW5kZXJEZWJvdW5jZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBjb25zdCBwYXJlbnQgPSB3cmFwKHRoaXMpLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQgfHwgKHBhcmVudC5ub2RlVHlwZSA9PSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgJiZcbiAgICAgICAgIXdyYXAocGFyZW50KS5ob3N0KSkge1xuICAgICAgdGhpcy5fX3RlYXJkb3duSW5zdGFuY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICghaGlkZUVsZW1lbnRzR2xvYmFsbHkoKSkge1xuICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgICBpZiAodGhpcy5pZikge1xuICAgICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNlcyB0aGUgZWxlbWVudCB0byByZW5kZXIgaXRzIGNvbnRlbnQuIE5vcm1hbGx5IHJlbmRlcmluZyBpc1xuICAgKiBhc3luY2hyb25vdXMgdG8gYSBwcm92b2tpbmcgY2hhbmdlLiBUaGlzIGlzIGRvbmUgZm9yIGVmZmljaWVuY3kgc29cbiAgICogdGhhdCBtdWx0aXBsZSBjaGFuZ2VzIHRyaWdnZXIgb25seSBhIHNpbmdsZSByZW5kZXIuIFRoZSByZW5kZXIgbWV0aG9kXG4gICAqIHNob3VsZCBiZSBjYWxsZWQgaWYsIGZvciBleGFtcGxlLCB0ZW1wbGF0ZSByZW5kZXJpbmcgaXMgcmVxdWlyZWQgdG9cbiAgICogdmFsaWRhdGUgYXBwbGljYXRpb24gc3RhdGUuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgZmx1c2goKTtcbiAgfVxuXG4gIF9fcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLmlmKSB7XG4gICAgICBpZiAoIXRoaXMuX19lbnN1cmVJbnN0YW5jZSgpKSB7XG4gICAgICAgIC8vIE5vIHRlbXBsYXRlIGZvdW5kIHlldFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zaG93SGlkZUNoaWxkcmVuKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnJlc3RhbXApIHtcbiAgICAgIHRoaXMuX190ZWFyZG93bkluc3RhbmNlKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5yZXN0YW1wICYmIHRoaXMuX19pbnN0YW5jZSkge1xuICAgICAgdGhpcy5fc2hvd0hpZGVDaGlsZHJlbigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pZiAhPSB0aGlzLl9sYXN0SWYpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RvbS1jaGFuZ2UnLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNvbXBvc2VkOiB0cnVlXG4gICAgICB9KSk7XG4gICAgICB0aGlzLl9sYXN0SWYgPSB0aGlzLmlmO1xuICAgIH1cbiAgfVxuXG4gIF9fZW5zdXJlSW5zdGFuY2UoKSB7XG4gICAgbGV0IHBhcmVudE5vZGUgPSB3cmFwKHRoaXMpLnBhcmVudE5vZGU7XG4gICAgLy8gR3VhcmQgYWdhaW5zdCBlbGVtZW50IGJlaW5nIGRldGFjaGVkIHdoaWxlIHJlbmRlciB3YXMgcXVldWVkXG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgIGlmICghdGhpcy5fX2N0b3IpIHtcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gLyoqIEB0eXBlIHtIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyh3cmFwKHRoaXMpLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpO1xuICAgICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgICAgLy8gV2FpdCB1bnRpbCBjaGlsZExpc3QgY2hhbmdlcyBhbmQgdGVtcGxhdGUgc2hvdWxkIGJlIHRoZXJlIGJ5IHRoZW5cbiAgICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgICBpZiAod3JhcCh0aGlzKS5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgdGhpcy5fX3JlbmRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkb20taWYgcmVxdWlyZXMgYSA8dGVtcGxhdGU+IGNoaWxkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7Y2hpbGRMaXN0OiB0cnVlfSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19jdG9yID0gdGVtcGxhdGl6ZSh0ZW1wbGF0ZSwgdGhpcywge1xuICAgICAgICAgIC8vIGRvbS1pZiB0ZW1wbGF0aXplciBpbnN0YW5jZXMgcmVxdWlyZSBgbXV0YWJsZTogdHJ1ZWAsIGFzXG4gICAgICAgICAgLy8gYF9fc3luY0hvc3RQcm9wZXJ0aWVzYCByZWxpZXMgb24gdGhhdCBiZWhhdmlvciB0byBzeW5jIG9iamVjdHNcbiAgICAgICAgICBtdXRhYmxlRGF0YTogdHJ1ZSxcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSB0byBmb3J3YXJkXG4gICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvZiBwcm9wZXJ0eVxuICAgICAgICAgICAqIEB0aGlzIHtEb21JZn1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBmb3J3YXJkSG9zdFByb3A6IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fX2luc3RhbmNlKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmlmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2luc3RhbmNlLmZvcndhcmRIb3N0UHJvcChwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbiBpbnN0YW5jZSBidXQgYXJlIHNxdWVsY2hpbmcgaG9zdCBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIC8vIGZvcndhcmRpbmcgZHVlIHRvIGlmIGJlaW5nIGZhbHNlLCBub3RlIHRoZSBpbnZhbGlkYXRlZFxuICAgICAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgc28gYF9fc3luY0hvc3RQcm9wZXJ0aWVzYCBjYW4gc3luYyB0aGVtIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgLy8gdGltZSBgaWZgIGJlY29tZXMgdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgPSB0aGlzLl9faW52YWxpZFByb3BzIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2ludmFsaWRQcm9wc1tyb290KHByb3ApXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9faW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5fX2luc3RhbmNlID0gbmV3IHRoaXMuX19jdG9yKCk7XG4gICAgICAgIHdyYXAocGFyZW50Tm9kZSkuaW5zZXJ0QmVmb3JlKHRoaXMuX19pbnN0YW5jZS5yb290LCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX19zeW5jSG9zdFByb3BlcnRpZXMoKTtcbiAgICAgICAgbGV0IGMkID0gdGhpcy5fX2luc3RhbmNlLmNoaWxkcmVuO1xuICAgICAgICBpZiAoYyQgJiYgYyQubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gRGV0ZWN0IGNhc2Ugd2hlcmUgZG9tLWlmIHdhcyByZS1hdHRhY2hlZCBpbiBuZXcgcG9zaXRpb25cbiAgICAgICAgICBsZXQgbGFzdENoaWxkID0gd3JhcCh0aGlzKS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgaWYgKGxhc3RDaGlsZCAhPT0gYyRbYyQubGVuZ3RoLTFdKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpPTAsIG47IChpPGMkLmxlbmd0aCkgJiYgKG49YyRbaV0pOyBpKyspIHtcbiAgICAgICAgICAgICAgd3JhcChwYXJlbnROb2RlKS5pbnNlcnRCZWZvcmUobiwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgX19zeW5jSG9zdFByb3BlcnRpZXMoKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5fX2ludmFsaWRQcm9wcztcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgIGZvciAobGV0IHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgdGhpcy5fX2luc3RhbmNlLl9zZXRQZW5kaW5nUHJvcGVydHkocHJvcCwgdGhpcy5fX2RhdGFIb3N0W3Byb3BdKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgPSBudWxsO1xuICAgICAgdGhpcy5fX2luc3RhbmNlLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICB9XG4gIH1cblxuICBfX3RlYXJkb3duSW5zdGFuY2UoKSB7XG4gICAgaWYgKHRoaXMuX19pbnN0YW5jZSkge1xuICAgICAgbGV0IGMkID0gdGhpcy5fX2luc3RhbmNlLmNoaWxkcmVuO1xuICAgICAgaWYgKGMkICYmIGMkLmxlbmd0aCkge1xuICAgICAgICAvLyB1c2UgZmlyc3QgY2hpbGQgcGFyZW50LCBmb3IgY2FzZSB3aGVuIGRvbS1pZiBtYXkgaGF2ZSBiZWVuIGRldGFjaGVkXG4gICAgICAgIGxldCBwYXJlbnQgPSB3cmFwKGMkWzBdKS5wYXJlbnROb2RlO1xuICAgICAgICAvLyBJbnN0YW5jZSBjaGlsZHJlbiBtYXkgYmUgZGlzY29ubmVjdGVkIGZyb20gcGFyZW50cyB3aGVuIGRvbS1pZlxuICAgICAgICAvLyBkZXRhY2hlcyBpZiBhIHRyZWUgd2FzIGlubmVySFRNTCdlZFxuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50ID0gd3JhcChwYXJlbnQpO1xuICAgICAgICAgIGZvciAobGV0IGk9MCwgbjsgKGk8YyQubGVuZ3RoKSAmJiAobj1jJFtpXSk7IGkrKykge1xuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fX2luc3RhbmNlID0gbnVsbDtcbiAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyBvciBoaWRlcyB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdG9wIGxldmVsIGNoaWxkIGVsZW1lbnRzLiBGb3JcbiAgICogdGV4dCBub2RlcywgYHRleHRDb250ZW50YCBpcyByZW1vdmVkIHdoaWxlIFwiaGlkZGVuXCIgYW5kIHJlcGxhY2VkIHdoZW5cbiAgICogXCJzaG93bi5cIlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBzdXBwcmVzcyB7dmlzaWJpbGl0eX1cbiAgICovXG4gIF9zaG93SGlkZUNoaWxkcmVuKCkge1xuICAgIGxldCBoaWRkZW4gPSB0aGlzLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXyB8fCAhdGhpcy5pZjtcbiAgICBpZiAodGhpcy5fX2luc3RhbmNlKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2UuX3Nob3dIaWRlQ2hpbGRyZW4oaGlkZGVuKTtcbiAgICB9XG4gIH1cblxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoRG9tSWYuaXMsIERvbUlmKTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gJy4uLy4uL3BvbHltZXItZWxlbWVudC5qcyc7XG5cbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVTcGxpY2VzIH0gZnJvbSAnLi4vdXRpbHMvYXJyYXktc3BsaWNlLmpzJztcbmltcG9ydCB7IEVsZW1lbnRNaXhpbiB9IGZyb20gJy4uL21peGlucy9lbGVtZW50LW1peGluLmpzJztcblxuLyoqXG4gKiBFbGVtZW50IG1peGluIGZvciByZWNvcmRpbmcgZHluYW1pYyBhc3NvY2lhdGlvbnMgYmV0d2VlbiBpdGVtIHBhdGhzIGluIGFcbiAqIG1hc3RlciBgaXRlbXNgIGFycmF5IGFuZCBhIGBzZWxlY3RlZGAgYXJyYXkgc3VjaCB0aGF0IHBhdGggY2hhbmdlcyB0byB0aGVcbiAqIG1hc3RlciBhcnJheSAoYXQgdGhlIGhvc3QpIGVsZW1lbnQgb3IgZWxzZXdoZXJlIHZpYSBkYXRhLWJpbmRpbmcpIGFyZVxuICogY29ycmVjdGx5IHByb3BhZ2F0ZWQgdG8gaXRlbXMgaW4gdGhlIHNlbGVjdGVkIGFycmF5IGFuZCB2aWNlLXZlcnNhLlxuICpcbiAqIFRoZSBgaXRlbXNgIHByb3BlcnR5IGFjY2VwdHMgYW4gYXJyYXkgb2YgdXNlciBkYXRhLCBhbmQgdmlhIHRoZVxuICogYHNlbGVjdChpdGVtKWAgYW5kIGBkZXNlbGVjdChpdGVtKWAgQVBJLCB1cGRhdGVzIHRoZSBgc2VsZWN0ZWRgIHByb3BlcnR5XG4gKiB3aGljaCBtYXkgYmUgYm91bmQgdG8gb3RoZXIgcGFydHMgb2YgdGhlIGFwcGxpY2F0aW9uLCBhbmQgYW55IGNoYW5nZXMgdG9cbiAqIHN1Yi1maWVsZHMgb2YgYHNlbGVjdGVkYCBpdGVtKHMpIHdpbGwgYmUga2VwdCBpbiBzeW5jIHdpdGggaXRlbXMgaW4gdGhlXG4gKiBgaXRlbXNgIGFycmF5LiAgV2hlbiBgbXVsdGlgIGlzIGZhbHNlLCBgc2VsZWN0ZWRgIGlzIGEgcHJvcGVydHlcbiAqIHJlcHJlc2VudGluZyB0aGUgbGFzdCBzZWxlY3RlZCBpdGVtLiAgV2hlbiBgbXVsdGlgIGlzIHRydWUsIGBzZWxlY3RlZGBcbiAqIGlzIGFuIGFycmF5IG9mIG11bHRpcGx5IHNlbGVjdGVkIGl0ZW1zLlxuICpcbiAqIEBwb2x5bWVyXG4gKiBAbWl4aW5GdW5jdGlvblxuICogQGFwcGxpZXNNaXhpbiBFbGVtZW50TWl4aW5cbiAqIEBzdW1tYXJ5IEVsZW1lbnQgbWl4aW4gZm9yIHJlY29yZGluZyBkeW5hbWljIGFzc29jaWF0aW9ucyBiZXR3ZWVuIGl0ZW0gcGF0aHMgaW4gYVxuICogbWFzdGVyIGBpdGVtc2AgYXJyYXkgYW5kIGEgYHNlbGVjdGVkYCBhcnJheVxuICovXG5sZXQgQXJyYXlTZWxlY3Rvck1peGluID0gZGVkdXBpbmdNaXhpbihzdXBlckNsYXNzID0+IHtcblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0VsZW1lbnRNaXhpbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxldCBlbGVtZW50QmFzZSA9IEVsZW1lbnRNaXhpbihzdXBlckNsYXNzKTtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfQXJyYXlTZWxlY3Rvck1peGlufVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBBcnJheVNlbGVjdG9yTWl4aW4gZXh0ZW5kcyBlbGVtZW50QmFzZSB7XG5cbiAgICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICByZXR1cm4ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBjb250YWluaW5nIGl0ZW1zIGZyb20gd2hpY2ggc2VsZWN0aW9uIHdpbGwgYmUgbWFkZS5cbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgdHlwZTogQXJyYXksXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gYHRydWVgLCBtdWx0aXBsZSBpdGVtcyBtYXkgYmUgc2VsZWN0ZWQgYXQgb25jZSAoaW4gdGhpcyBjYXNlLFxuICAgICAgICAgKiBgc2VsZWN0ZWRgIGlzIGFuIGFycmF5IG9mIGN1cnJlbnRseSBzZWxlY3RlZCBpdGVtcykuICBXaGVuIGBmYWxzZWAsXG4gICAgICAgICAqIG9ubHkgb25lIGl0ZW0gbWF5IGJlIHNlbGVjdGVkIGF0IGEgdGltZS5cbiAgICAgICAgICovXG4gICAgICAgIG11bHRpOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gYG11bHRpYCBpcyB0cnVlLCB0aGlzIGlzIGFuIGFycmF5IHRoYXQgY29udGFpbnMgYW55IHNlbGVjdGVkLlxuICAgICAgICAgKiBXaGVuIGBtdWx0aWAgaXMgZmFsc2UsIHRoaXMgaXMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBpdGVtLCBvciBgbnVsbGBcbiAgICAgICAgICogaWYgbm8gaXRlbSBpcyBzZWxlY3RlZC5cbiAgICAgICAgICogQHR5cGUgez9PYmplY3R8P0FycmF5PCFPYmplY3Q+fVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0ZWQ6IHt0eXBlOiBPYmplY3QsIG5vdGlmeTogdHJ1ZX0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gYG11bHRpYCBpcyBmYWxzZSwgdGhpcyBpcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0sIG9yIGBudWxsYFxuICAgICAgICAgKiBpZiBubyBpdGVtIGlzIHNlbGVjdGVkLlxuICAgICAgICAgKiBAdHlwZSB7P09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHNlbGVjdGVkSXRlbToge3R5cGU6IE9iamVjdCwgbm90aWZ5OiB0cnVlfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBgdHJ1ZWAsIGNhbGxpbmcgYHNlbGVjdGAgb24gYW4gaXRlbSB0aGF0IGlzIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgICogd2lsbCBkZXNlbGVjdCB0aGUgaXRlbS5cbiAgICAgICAgICovXG4gICAgICAgIHRvZ2dsZToge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX1cblxuICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVycygpIHtcbiAgICAgIHJldHVybiBbJ19fdXBkYXRlU2VsZWN0aW9uKG11bHRpLCBpdGVtcy4qKSddO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuX19sYXN0SXRlbXMgPSBudWxsO1xuICAgICAgdGhpcy5fX2xhc3RNdWx0aSA9IG51bGw7XG4gICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAgPSBudWxsO1xuICAgIH1cblxuICAgIF9fdXBkYXRlU2VsZWN0aW9uKG11bHRpLCBpdGVtc0luZm8pIHtcbiAgICAgIGxldCBwYXRoID0gaXRlbXNJbmZvLnBhdGg7XG4gICAgICBpZiAocGF0aCA9PSBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpKSB7XG4gICAgICAgIC8vIENhc2UgMSAtIGl0ZW1zIGFycmF5IGNoYW5nZWQsIHNvIGRpZmYgYWdhaW5zdCBwcmV2aW91cyBhcnJheSBhbmRcbiAgICAgICAgLy8gZGVzZWxlY3QgYW55IHJlbW92ZWQgaXRlbXMgYW5kIGFkanVzdCBzZWxlY3RlZCBpbmRpY2VzXG4gICAgICAgIGxldCBuZXdJdGVtcyA9IGl0ZW1zSW5mby5iYXNlIHx8IFtdO1xuICAgICAgICBsZXQgbGFzdEl0ZW1zID0gdGhpcy5fX2xhc3RJdGVtcztcbiAgICAgICAgbGV0IGxhc3RNdWx0aSA9IHRoaXMuX19sYXN0TXVsdGk7XG4gICAgICAgIGlmIChtdWx0aSAhPT0gbGFzdE11bHRpKSB7XG4gICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0SXRlbXMpIHtcbiAgICAgICAgICBsZXQgc3BsaWNlcyA9IGNhbGN1bGF0ZVNwbGljZXMobmV3SXRlbXMsIGxhc3RJdGVtcyk7XG4gICAgICAgICAgdGhpcy5fX2FwcGx5U3BsaWNlcyhzcGxpY2VzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fbGFzdEl0ZW1zID0gbmV3SXRlbXM7XG4gICAgICAgIHRoaXMuX19sYXN0TXVsdGkgPSBtdWx0aTtcbiAgICAgIH0gZWxzZSBpZiAoaXRlbXNJbmZvLnBhdGggPT0gYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnaXRlbXMnLCB0aGlzKX0uc3BsaWNlc2ApIHtcbiAgICAgICAgLy8gQ2FzZSAyIC0gZ290IHNwZWNpZmljIHNwbGljZSBpbmZvcm1hdGlvbiBkZXNjcmliaW5nIHRoZSBhcnJheSBtdXRhdGlvbjpcbiAgICAgICAgLy8gZGVzZWxlY3QgYW55IHJlbW92ZWQgaXRlbXMgYW5kIGFkanVzdCBzZWxlY3RlZCBpbmRpY2VzXG4gICAgICAgIHRoaXMuX19hcHBseVNwbGljZXMoaXRlbXNJbmZvLnZhbHVlLmluZGV4U3BsaWNlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDYXNlIDMgLSBhbiBhcnJheSBlbGVtZW50IHdhcyBjaGFuZ2VkLCBzbyBkZXNlbGVjdCB0aGUgcHJldmlvdXNcbiAgICAgICAgLy8gaXRlbSBmb3IgdGhhdCBpbmRleCBpZiBpdCB3YXMgcHJldmlvdXNseSBzZWxlY3RlZFxuICAgICAgICBsZXQgcGFydCA9IHBhdGguc2xpY2UoYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnaXRlbXMnLCB0aGlzKX0uYC5sZW5ndGgpO1xuICAgICAgICBsZXQgaWR4ID0gcGFyc2VJbnQocGFydCwgMTApO1xuICAgICAgICBpZiAoKHBhcnQuaW5kZXhPZignLicpIDwgMCkgJiYgcGFydCA9PSBpZHgpIHtcbiAgICAgICAgICB0aGlzLl9fZGVzZWxlY3RDaGFuZ2VkSWR4KGlkeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBfX2FwcGx5U3BsaWNlcyhzcGxpY2VzKSB7XG4gICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLl9fc2VsZWN0ZWRNYXA7XG4gICAgICAvLyBBZGp1c3Qgc2VsZWN0ZWQgaW5kaWNlcyBhbmQgbWFyayByZW1vdmFsc1xuICAgICAgZm9yIChsZXQgaT0wOyBpPHNwbGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHMgPSBzcGxpY2VzW2ldO1xuICAgICAgICBzZWxlY3RlZC5mb3JFYWNoKChpZHgsIGl0ZW0pID0+IHtcbiAgICAgICAgICBpZiAoaWR4IDwgcy5pbmRleCkge1xuICAgICAgICAgICAgLy8gbm8gY2hhbmdlXG4gICAgICAgICAgfSBlbHNlIGlmIChpZHggPj0gcy5pbmRleCArIHMucmVtb3ZlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIGFkanVzdCBpbmRleFxuICAgICAgICAgICAgc2VsZWN0ZWQuc2V0KGl0ZW0sIGlkeCArIHMuYWRkZWRDb3VudCAtIHMucmVtb3ZlZC5sZW5ndGgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgaW5kZXhcbiAgICAgICAgICAgIHNlbGVjdGVkLnNldChpdGVtLCAtMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgaj0wOyBqPHMuYWRkZWRDb3VudDsgaisrKSB7XG4gICAgICAgICAgbGV0IGlkeCA9IHMuaW5kZXggKyBqO1xuICAgICAgICAgIGlmIChzZWxlY3RlZC5oYXModGhpcy5pdGVtc1tpZHhdKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWQuc2V0KHRoaXMuaXRlbXNbaWR4XSwgaWR4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFVwZGF0ZSBsaW5rZWQgcGF0aHNcbiAgICAgIHRoaXMuX191cGRhdGVMaW5rcygpO1xuICAgICAgLy8gUmVtb3ZlIHNlbGVjdGVkIGl0ZW1zIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhlIGl0ZW1zIGFycmF5XG4gICAgICBsZXQgc2lkeCA9IDA7XG4gICAgICBzZWxlY3RlZC5mb3JFYWNoKChpZHgsIGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICAgICAgdGhpcy5zcGxpY2UoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnc2VsZWN0ZWQnLCB0aGlzKSwgc2lkeCwgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbGVjdGVkLmRlbGV0ZShpdGVtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaWR4Kys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9fdXBkYXRlTGlua3MoKSB7XG4gICAgICB0aGlzLl9fZGF0YUxpbmtlZFBhdGhzID0ge307XG4gICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICBsZXQgc2lkeCA9IDA7XG4gICAgICAgIHRoaXMuX19zZWxlY3RlZE1hcC5mb3JFYWNoKGlkeCA9PiB7XG4gICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmtQYXRocyhcbiAgICAgICAgICAgICAgICBgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS4ke2lkeH1gLFxuICAgICAgICAgICAgICAgIGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3NlbGVjdGVkJywgdGhpcyl9LiR7c2lkeCsrfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAuZm9yRWFjaChpZHggPT4ge1xuICAgICAgICAgIHRoaXMubGlua1BhdGhzKFxuICAgICAgICAgICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdzZWxlY3RlZCcsIHRoaXMpLFxuICAgICAgICAgICAgICBgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS4ke2lkeH1gKTtcbiAgICAgICAgICB0aGlzLmxpbmtQYXRocyhcbiAgICAgICAgICAgICAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnc2VsZWN0ZWRJdGVtJywgdGhpcyksXG4gICAgICAgICAgICAgIGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2l0ZW1zJywgdGhpcyl9LiR7aWR4fWApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIHNlbGVjdGlvbiBzdGF0ZS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgLy8gVW5iaW5kIHByZXZpb3VzIHNlbGVjdGlvblxuICAgICAgdGhpcy5fX2RhdGFMaW5rZWRQYXRocyA9IHt9O1xuICAgICAgLy8gVGhlIHNlbGVjdGVkIG1hcCBzdG9yZXMgMyBwaWVjZXMgb2YgaW5mb3JtYXRpb246XG4gICAgICAvLyBrZXk6IGl0ZW1zIGFycmF5IG9iamVjdFxuICAgICAgLy8gdmFsdWU6IGl0ZW1zIGFycmF5IGluZGV4XG4gICAgICAvLyBvcmRlcjogc2VsZWN0ZWQgYXJyYXkgaW5kZXhcbiAgICAgIHRoaXMuX19zZWxlY3RlZE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIC8vIEluaXRpYWxpemUgc2VsZWN0aW9uXG4gICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5tdWx0aSA/IFtdIDogbnVsbDtcbiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGl0ZW0gaXMgY3VycmVudGx5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHsqfSBpdGVtIEl0ZW0gZnJvbSBgaXRlbXNgIGFycmF5IHRvIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBpdGVtIGlzIHNlbGVjdGVkXG4gICAgICovXG4gICAgaXNTZWxlY3RlZChpdGVtKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX3NlbGVjdGVkTWFwLmhhcyhpdGVtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGl0ZW0gaXMgY3VycmVudGx5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkeCBJbmRleCBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGl0ZW0gaXMgc2VsZWN0ZWRcbiAgICAgKi9cbiAgICBpc0luZGV4U2VsZWN0ZWQoaWR4KSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1NlbGVjdGVkKHRoaXMuaXRlbXNbaWR4XSk7XG4gICAgfVxuXG4gICAgX19kZXNlbGVjdENoYW5nZWRJZHgoaWR4KSB7XG4gICAgICBsZXQgc2lkeCA9IHRoaXMuX19zZWxlY3RlZEluZGV4Rm9ySXRlbUluZGV4KGlkeCk7XG4gICAgICBpZiAoc2lkeCA+PSAwKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgdGhpcy5fX3NlbGVjdGVkTWFwLmZvckVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICAgIGlmIChzaWR4ID09IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kZXNlbGVjdChpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9fc2VsZWN0ZWRJbmRleEZvckl0ZW1JbmRleChpZHgpIHtcbiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuX19kYXRhTGlua2VkUGF0aHNbYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnaXRlbXMnLCB0aGlzKX0uJHtpZHh9YF07XG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNlbGVjdGVkLnNsaWNlKGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3NlbGVjdGVkJywgdGhpcyl9LmAubGVuZ3RoKSwgMTApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc2VsZWN0cyB0aGUgZ2l2ZW4gaXRlbSBpZiBpdCBpcyBhbHJlYWR5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHsqfSBpdGVtIEl0ZW0gZnJvbSBgaXRlbXNgIGFycmF5IHRvIGRlc2VsZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBkZXNlbGVjdChpdGVtKSB7XG4gICAgICBsZXQgaWR4ID0gdGhpcy5fX3NlbGVjdGVkTWFwLmdldChpdGVtKTtcbiAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAuZGVsZXRlKGl0ZW0pO1xuICAgICAgICBsZXQgc2lkeDtcbiAgICAgICAgaWYgKHRoaXMubXVsdGkpIHtcbiAgICAgICAgICBzaWR4ID0gdGhpcy5fX3NlbGVjdGVkSW5kZXhGb3JJdGVtSW5kZXgoaWR4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fdXBkYXRlTGlua3MoKTtcbiAgICAgICAgaWYgKHRoaXMubXVsdGkpIHtcbiAgICAgICAgICB0aGlzLnNwbGljZShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdzZWxlY3RlZCcsIHRoaXMpLCBzaWR4LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZWxlY3RzIHRoZSBnaXZlbiBpbmRleCBpZiBpdCBpcyBhbHJlYWR5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkeCBJbmRleCBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gZGVzZWxlY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGRlc2VsZWN0SW5kZXgoaWR4KSB7XG4gICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuaXRlbXNbaWR4XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0cyB0aGUgZ2l2ZW4gaXRlbS4gIFdoZW4gYHRvZ2dsZWAgaXMgdHJ1ZSwgdGhpcyB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBkZXNlbGVjdCB0aGUgaXRlbSBpZiBhbHJlYWR5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHsqfSBpdGVtIEl0ZW0gZnJvbSBgaXRlbXNgIGFycmF5IHRvIHNlbGVjdFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgc2VsZWN0KGl0ZW0pIHtcbiAgICAgIHRoaXMuc2VsZWN0SW5kZXgodGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIHRoZSBnaXZlbiBpbmRleC4gIFdoZW4gYHRvZ2dsZWAgaXMgdHJ1ZSwgdGhpcyB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBkZXNlbGVjdCB0aGUgaXRlbSBpZiBhbHJlYWR5IHNlbGVjdGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkeCBJbmRleCBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gc2VsZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBzZWxlY3RJbmRleChpZHgpIHtcbiAgICAgIGxldCBpdGVtID0gdGhpcy5pdGVtc1tpZHhdO1xuICAgICAgaWYgKCF0aGlzLmlzU2VsZWN0ZWQoaXRlbSkpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpKSB7XG4gICAgICAgICAgdGhpcy5fX3NlbGVjdGVkTWFwLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX3NlbGVjdGVkTWFwLnNldChpdGVtLCBpZHgpO1xuICAgICAgICB0aGlzLl9fdXBkYXRlTGlua3MoKTtcbiAgICAgICAgaWYgKHRoaXMubXVsdGkpIHtcbiAgICAgICAgICB0aGlzLnB1c2goSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnc2VsZWN0ZWQnLCB0aGlzKSwgaXRlbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnRvZ2dsZSkge1xuICAgICAgICB0aGlzLmRlc2VsZWN0SW5kZXgoaWR4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBBcnJheVNlbGVjdG9yTWl4aW47XG5cbn0pO1xuXG4vLyBleHBvcnQgbWl4aW5cbmV4cG9ydCB7IEFycmF5U2VsZWN0b3JNaXhpbiB9O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMge1BvbHltZXJFbGVtZW50fVxuICogQGltcGxlbWVudHMge1BvbHltZXJfQXJyYXlTZWxlY3Rvck1peGlufVxuICogQHByaXZhdGVcbiAqL1xubGV0IGJhc2VBcnJheVNlbGVjdG9yID0gQXJyYXlTZWxlY3Rvck1peGluKFBvbHltZXJFbGVtZW50KTtcblxuLyoqXG4gKiBFbGVtZW50IGltcGxlbWVudGluZyB0aGUgYEFycmF5U2VsZWN0b3JgIG1peGluLCB3aGljaCByZWNvcmRzXG4gKiBkeW5hbWljIGFzc29jaWF0aW9ucyBiZXR3ZWVuIGl0ZW0gcGF0aHMgaW4gYSBtYXN0ZXIgYGl0ZW1zYCBhcnJheSBhbmQgYVxuICogYHNlbGVjdGVkYCBhcnJheSBzdWNoIHRoYXQgcGF0aCBjaGFuZ2VzIHRvIHRoZSBtYXN0ZXIgYXJyYXkgKGF0IHRoZSBob3N0KVxuICogZWxlbWVudCBvciBlbHNld2hlcmUgdmlhIGRhdGEtYmluZGluZykgYXJlIGNvcnJlY3RseSBwcm9wYWdhdGVkIHRvIGl0ZW1zXG4gKiBpbiB0aGUgc2VsZWN0ZWQgYXJyYXkgYW5kIHZpY2UtdmVyc2EuXG4gKlxuICogVGhlIGBpdGVtc2AgcHJvcGVydHkgYWNjZXB0cyBhbiBhcnJheSBvZiB1c2VyIGRhdGEsIGFuZCB2aWEgdGhlXG4gKiBgc2VsZWN0KGl0ZW0pYCBhbmQgYGRlc2VsZWN0KGl0ZW0pYCBBUEksIHVwZGF0ZXMgdGhlIGBzZWxlY3RlZGAgcHJvcGVydHlcbiAqIHdoaWNoIG1heSBiZSBib3VuZCB0byBvdGhlciBwYXJ0cyBvZiB0aGUgYXBwbGljYXRpb24sIGFuZCBhbnkgY2hhbmdlcyB0b1xuICogc3ViLWZpZWxkcyBvZiBgc2VsZWN0ZWRgIGl0ZW0ocykgd2lsbCBiZSBrZXB0IGluIHN5bmMgd2l0aCBpdGVtcyBpbiB0aGVcbiAqIGBpdGVtc2AgYXJyYXkuICBXaGVuIGBtdWx0aWAgaXMgZmFsc2UsIGBzZWxlY3RlZGAgaXMgYSBwcm9wZXJ0eVxuICogcmVwcmVzZW50aW5nIHRoZSBsYXN0IHNlbGVjdGVkIGl0ZW0uICBXaGVuIGBtdWx0aWAgaXMgdHJ1ZSwgYHNlbGVjdGVkYFxuICogaXMgYW4gYXJyYXkgb2YgbXVsdGlwbHkgc2VsZWN0ZWQgaXRlbXMuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtQb2x5bWVyRWxlbWVudH0gZnJvbSAnQHBvbHltZXIvcG9seW1lcic7XG4gKiBpbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2FycmF5LXNlbGVjdG9yLmpzJztcbiAqXG4gKiBjbGFzcyBFbXBsb3llZUxpc3QgZXh0ZW5kcyBQb2x5bWVyRWxlbWVudCB7XG4gKiAgIHN0YXRpYyBnZXQgX3RlbXBsYXRlKCkge1xuICogICAgIHJldHVybiBodG1sYFxuICogICAgICAgICA8ZGl2PiBFbXBsb3llZSBsaXN0OiA8L2Rpdj5cbiAqICAgICAgICAgPGRvbS1yZXBlYXQgaWQ9XCJlbXBsb3llZUxpc3RcIiBpdGVtcz1cInt7ZW1wbG95ZWVzfX1cIj5cbiAqICAgICAgICAgICA8dGVtcGxhdGU+XG4gKiAgICAgICAgICAgICA8ZGl2PkZpcnN0IG5hbWU6IDxzcGFuPnt7aXRlbS5maXJzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgICAgICAgICA8ZGl2Pkxhc3QgbmFtZTogPHNwYW4+e3tpdGVtLmxhc3R9fTwvc3Bhbj48L2Rpdj5cbiAqICAgICAgICAgICAgICAgPGJ1dHRvbiBvbi1jbGljaz1cInRvZ2dsZVNlbGVjdGlvblwiPlNlbGVjdDwvYnV0dG9uPlxuICogICAgICAgICAgIDwvdGVtcGxhdGU+XG4gKiAgICAgICAgIDwvZG9tLXJlcGVhdD5cbiAqXG4gKiAgICAgICAgIDxhcnJheS1zZWxlY3RvciBpZD1cInNlbGVjdG9yXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zPVwie3tlbXBsb3llZXN9fVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZD1cInt7c2VsZWN0ZWR9fVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aSB0b2dnbGU+PC9hcnJheS1zZWxlY3Rvcj5cbiAqXG4gKiAgICAgICAgIDxkaXY+IFNlbGVjdGVkIGVtcGxveWVlczogPC9kaXY+XG4gKiAgICAgICAgIDxkb20tcmVwZWF0IGl0ZW1zPVwie3tzZWxlY3RlZH19XCI+XG4gKiAgICAgICAgICAgPHRlbXBsYXRlPlxuICogICAgICAgICAgICAgPGRpdj5GaXJzdCBuYW1lOiA8c3Bhbj57e2l0ZW0uZmlyc3R9fTwvc3Bhbj48L2Rpdj5cbiAqICAgICAgICAgICAgIDxkaXY+TGFzdCBuYW1lOiA8c3Bhbj57e2l0ZW0ubGFzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgICAgIDwvdGVtcGxhdGU+XG4gKiAgICAgICAgIDwvZG9tLXJlcGVhdD5gO1xuICogICB9XG4gKiAgIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAnZW1wbG95ZWUtbGlzdCc7IH1cbiAqICAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICBlbXBsb3llZXM6IHtcbiAqICAgICAgICAgdmFsdWUoKSB7XG4gKiAgICAgICAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgICAgIHtmaXJzdDogJ0JvYicsIGxhc3Q6ICdTbWl0aCd9LFxuICogICAgICAgICAgICAge2ZpcnN0OiAnU2FsbHknLCBsYXN0OiAnSm9obnNvbid9LFxuICogICAgICAgICAgICAgLi4uXG4gKiAgICAgICAgICAgXTtcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH07XG4gKiAgIH1cbiAqICAgdG9nZ2xlU2VsZWN0aW9uKGUpIHtcbiAqICAgICBjb25zdCBpdGVtID0gdGhpcy4kLmVtcGxveWVlTGlzdC5pdGVtRm9yRWxlbWVudChlLnRhcmdldCk7XG4gKiAgICAgdGhpcy4kLnNlbGVjdG9yLnNlbGVjdChpdGVtKTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogQHBvbHltZXJcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAZXh0ZW5kcyB7YmFzZUFycmF5U2VsZWN0b3J9XG4gKiBAYXBwbGllc01peGluIEFycmF5U2VsZWN0b3JNaXhpblxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgdGhhdCBsaW5rcyBwYXRocyBiZXR3ZWVuIGFuIGlucHV0IGBpdGVtc2AgYXJyYXkgYW5kXG4gKiAgIGFuIG91dHB1dCBgc2VsZWN0ZWRgIGl0ZW0gb3IgYXJyYXkgYmFzZWQgb24gY2FsbHMgdG8gaXRzIHNlbGVjdGlvbiBBUEkuXG4gKi9cbmNsYXNzIEFycmF5U2VsZWN0b3IgZXh0ZW5kcyBiYXNlQXJyYXlTZWxlY3RvciB7XG4gIC8vIE5vdCBuZWVkZWQgdG8gZmluZCB0ZW1wbGF0ZTsgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgYW5hbHl6ZXJcbiAgLy8gY2FuIGZpbmQgdGhlIHRhZyBuYW1lIGZyb20gY3VzdG9tRWxlbWVudHMuZGVmaW5lIGNhbGxcbiAgc3RhdGljIGdldCBpcygpIHsgcmV0dXJuICdhcnJheS1zZWxlY3Rvcic7IH1cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHsgcmV0dXJuIG51bGw7IH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShBcnJheVNlbGVjdG9yLmlzLCBBcnJheVNlbGVjdG9yKTtcbmV4cG9ydCB7IEFycmF5U2VsZWN0b3IgfTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBNdXRhYmxlRGF0YSB9IGZyb20gJy4uL21peGlucy9tdXRhYmxlLWRhdGEuanMnO1xuXG5sZXQgbXV0YWJsZVByb3BlcnR5Q2hhbmdlO1xuLyoqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9ICovXG4oKCkgPT4ge1xuICBtdXRhYmxlUHJvcGVydHlDaGFuZ2UgPSBNdXRhYmxlRGF0YS5fbXV0YWJsZVByb3BlcnR5Q2hhbmdlO1xufSkoKTtcblxuLyoqXG4gKiBMZWdhY3kgZWxlbWVudCBiZWhhdmlvciB0byBza2lwIHN0cmljdCBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzLFxuICogKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIikgZm9yIHVzZSBvbiBsZWdhY3kgQVBJIFBvbHltZXIgZWxlbWVudHMuXG4gKlxuICogQnkgZGVmYXVsdCwgYFBvbHltZXIuUHJvcGVydHlFZmZlY3RzYCBwZXJmb3JtcyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgb25cbiAqIG9iamVjdHMsIHdoaWNoIG1lYW5zIHRoYXQgYW55IGRlZXAgbW9kaWZpY2F0aW9ucyB0byBhbiBvYmplY3Qgb3IgYXJyYXkgd2lsbFxuICogbm90IGJlIHByb3BhZ2F0ZWQgdW5sZXNzIFwiaW1tdXRhYmxlXCIgZGF0YSBwYXR0ZXJucyBhcmUgdXNlZCAoaS5lLiBhbGwgb2JqZWN0XG4gKiByZWZlcmVuY2VzIGZyb20gdGhlIHJvb3QgdG8gdGhlIG11dGF0aW9uIHdlcmUgY2hhbmdlZCkuXG4gKlxuICogUG9seW1lciBhbHNvIHByb3ZpZGVzIGEgcHJvcHJpZXRhcnkgZGF0YSBtdXRhdGlvbiBhbmQgcGF0aCBub3RpZmljYXRpb24gQVBJXG4gKiAoZS5nLiBgbm90aWZ5UGF0aGAsIGBzZXRgLCBhbmQgYXJyYXkgbXV0YXRpb24gQVBJJ3MpIHRoYXQgYWxsb3cgZWZmaWNpZW50XG4gKiBtdXRhdGlvbiBhbmQgbm90aWZpY2F0aW9uIG9mIGRlZXAgY2hhbmdlcyBpbiBhbiBvYmplY3QgZ3JhcGggdG8gYWxsIGVsZW1lbnRzXG4gKiBib3VuZCB0byB0aGUgc2FtZSBvYmplY3QgZ3JhcGguXG4gKlxuICogSW4gY2FzZXMgd2hlcmUgbmVpdGhlciBpbW11dGFibGUgcGF0dGVybnMgbm9yIHRoZSBkYXRhIG11dGF0aW9uIEFQSSBjYW4gYmVcbiAqIHVzZWQsIGFwcGx5aW5nIHRoaXMgbWl4aW4gd2lsbCBjYXVzZSBQb2x5bWVyIHRvIHNraXAgZGlydHkgY2hlY2tpbmcgZm9yXG4gKiBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIikuICBUaGlzIGFsbG93cyBhXG4gKiB1c2VyIHRvIG1ha2UgYSBkZWVwIG1vZGlmaWNhdGlvbiB0byBhIGJvdW5kIG9iamVjdCBncmFwaCwgYW5kIHRoZW4gZWl0aGVyXG4gKiBzaW1wbHkgcmUtc2V0IHRoZSBvYmplY3QgKGUuZy4gYHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zYCkgb3IgY2FsbCBgbm90aWZ5UGF0aGBcbiAqIChlLmcuIGB0aGlzLm5vdGlmeVBhdGgoJ2l0ZW1zJylgKSB0byB1cGRhdGUgdGhlIHRyZWUuICBOb3RlIHRoYXQgYWxsXG4gKiBlbGVtZW50cyB0aGF0IHdpc2ggdG8gYmUgdXBkYXRlZCBiYXNlZCBvbiBkZWVwIG11dGF0aW9ucyBtdXN0IGFwcGx5IHRoaXNcbiAqIG1peGluIG9yIG90aGVyd2lzZSBza2lwIHN0cmljdCBkaXJ0eSBjaGVja2luZyBmb3Igb2JqZWN0cy9hcnJheXMuXG4gKiBTcGVjaWZpY2FsbHksIGFueSBlbGVtZW50cyBpbiB0aGUgYmluZGluZyB0cmVlIGJldHdlZW4gdGhlIHNvdXJjZSBvZiBhXG4gKiBtdXRhdGlvbiBhbmQgdGhlIGNvbnN1bXB0aW9uIG9mIGl0IG11c3QgYXBwbHkgdGhpcyBiZWhhdmlvciBvciBlbmFibGUgdGhlXG4gKiBgUG9seW1lci5PcHRpb25hbE11dGFibGVEYXRhQmVoYXZpb3JgLlxuICpcbiAqIEluIG9yZGVyIHRvIG1ha2UgdGhlIGRpcnR5IGNoZWNrIHN0cmF0ZWd5IGNvbmZpZ3VyYWJsZSwgc2VlXG4gKiBgUG9seW1lci5PcHRpb25hbE11dGFibGVEYXRhQmVoYXZpb3JgLlxuICpcbiAqIE5vdGUsIHRoZSBwZXJmb3JtYW5jZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgcHJvcGFnYXRpbmcgbGFyZ2Ugb2JqZWN0IGdyYXBoc1xuICogd2lsbCBiZSB3b3JzZSBhcyBvcHBvc2VkIHRvIHVzaW5nIHN0cmljdCBkaXJ0eSBjaGVja2luZyB3aXRoIGltbXV0YWJsZVxuICogcGF0dGVybnMgb3IgUG9seW1lcidzIHBhdGggbm90aWZpY2F0aW9uIEFQSS5cbiAqXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKiBAc3VtbWFyeSBCZWhhdmlvciB0byBza2lwIHN0cmljdCBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmRcbiAqICAgYXJyYXlzXG4gKi9cbmV4cG9ydCBjb25zdCBNdXRhYmxlRGF0YUJlaGF2aW9yID0ge1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgYFBvbHltZXIuUHJvcGVydHlFZmZlY3RzYCB0byBwcm92aWRlIG9wdGlvbiBmb3Igc2tpcHBpbmdcbiAgICogc3RyaWN0IGVxdWFsaXR5IGNoZWNraW5nIGZvciBPYmplY3RzIGFuZCBBcnJheXMuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHB1bGxzIHRoZSB2YWx1ZSB0byBkaXJ0eSBjaGVjayBhZ2FpbnN0IGZyb20gdGhlIGBfX2RhdGFUZW1wYFxuICAgKiBjYWNoZSAocmF0aGVyIHRoYW4gdGhlIG5vcm1hbCBgX19kYXRhYCBjYWNoZSkgZm9yIE9iamVjdHMuICBTaW5jZSB0aGUgdGVtcFxuICAgKiBjYWNoZSBpcyBjbGVhcmVkIGF0IHRoZSBlbmQgb2YgYSB0dXJuLCB0aGlzIGltcGxlbWVudGF0aW9uIGFsbG93c1xuICAgKiBzaWRlLWVmZmVjdHMgb2YgZGVlcCBvYmplY3QgY2hhbmdlcyB0byBiZSBwcm9jZXNzZWQgYnkgcmUtc2V0dGluZyB0aGVcbiAgICogc2FtZSBvYmplY3QgKHVzaW5nIHRoZSB0ZW1wIGNhY2hlIGFzIGFuIGluLXR1cm4gYmFja3N0b3AgdG8gcHJldmVudFxuICAgKiBjeWNsZXMgZHVlIHRvIDItd2F5IG5vdGlmaWNhdGlvbikuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgTmV3IHByb3BlcnR5IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gb2xkIFByZXZpb3VzIHByb3BlcnR5IHZhbHVlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgY2hhbmdlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfc2hvdWxkUHJvcGVydHlDaGFuZ2UocHJvcGVydHksIHZhbHVlLCBvbGQpIHtcbiAgICByZXR1cm4gbXV0YWJsZVByb3BlcnR5Q2hhbmdlKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgb2xkLCB0cnVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBMZWdhY3kgZWxlbWVudCBiZWhhdmlvciB0byBhZGQgdGhlIG9wdGlvbmFsIGFiaWxpdHkgdG8gc2tpcCBzdHJpY3RcbiAqIGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlXG4gKiBcImRpcnR5XCIpIGJ5IHNldHRpbmcgYSBgbXV0YWJsZS1kYXRhYCBhdHRyaWJ1dGUgb24gYW4gZWxlbWVudCBpbnN0YW5jZS5cbiAqXG4gKiBCeSBkZWZhdWx0LCBgUG9seW1lci5Qcm9wZXJ0eUVmZmVjdHNgIHBlcmZvcm1zIHN0cmljdCBkaXJ0eSBjaGVja2luZyBvblxuICogb2JqZWN0cywgd2hpY2ggbWVhbnMgdGhhdCBhbnkgZGVlcCBtb2RpZmljYXRpb25zIHRvIGFuIG9iamVjdCBvciBhcnJheSB3aWxsXG4gKiBub3QgYmUgcHJvcGFnYXRlZCB1bmxlc3MgXCJpbW11dGFibGVcIiBkYXRhIHBhdHRlcm5zIGFyZSB1c2VkIChpLmUuIGFsbCBvYmplY3RcbiAqIHJlZmVyZW5jZXMgZnJvbSB0aGUgcm9vdCB0byB0aGUgbXV0YXRpb24gd2VyZSBjaGFuZ2VkKS5cbiAqXG4gKiBQb2x5bWVyIGFsc28gcHJvdmlkZXMgYSBwcm9wcmlldGFyeSBkYXRhIG11dGF0aW9uIGFuZCBwYXRoIG5vdGlmaWNhdGlvbiBBUElcbiAqIChlLmcuIGBub3RpZnlQYXRoYCwgYHNldGAsIGFuZCBhcnJheSBtdXRhdGlvbiBBUEkncykgdGhhdCBhbGxvdyBlZmZpY2llbnRcbiAqIG11dGF0aW9uIGFuZCBub3RpZmljYXRpb24gb2YgZGVlcCBjaGFuZ2VzIGluIGFuIG9iamVjdCBncmFwaCB0byBhbGwgZWxlbWVudHNcbiAqIGJvdW5kIHRvIHRoZSBzYW1lIG9iamVjdCBncmFwaC5cbiAqXG4gKiBJbiBjYXNlcyB3aGVyZSBuZWl0aGVyIGltbXV0YWJsZSBwYXR0ZXJucyBub3IgdGhlIGRhdGEgbXV0YXRpb24gQVBJIGNhbiBiZVxuICogdXNlZCwgYXBwbHlpbmcgdGhpcyBtaXhpbiB3aWxsIGFsbG93IFBvbHltZXIgdG8gc2tpcCBkaXJ0eSBjaGVja2luZyBmb3JcbiAqIG9iamVjdHMgYW5kIGFycmF5cyAoYWx3YXlzIGNvbnNpZGVyIHRoZW0gdG8gYmUgXCJkaXJ0eVwiKS4gIFRoaXMgYWxsb3dzIGFcbiAqIHVzZXIgdG8gbWFrZSBhIGRlZXAgbW9kaWZpY2F0aW9uIHRvIGEgYm91bmQgb2JqZWN0IGdyYXBoLCBhbmQgdGhlbiBlaXRoZXJcbiAqIHNpbXBseSByZS1zZXQgdGhlIG9iamVjdCAoZS5nLiBgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXNgKSBvciBjYWxsIGBub3RpZnlQYXRoYFxuICogKGUuZy4gYHRoaXMubm90aWZ5UGF0aCgnaXRlbXMnKWApIHRvIHVwZGF0ZSB0aGUgdHJlZS4gIE5vdGUgdGhhdCBhbGxcbiAqIGVsZW1lbnRzIHRoYXQgd2lzaCB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIGRlZXAgbXV0YXRpb25zIG11c3QgYXBwbHkgdGhpc1xuICogbWl4aW4gb3Igb3RoZXJ3aXNlIHNraXAgc3RyaWN0IGRpcnR5IGNoZWNraW5nIGZvciBvYmplY3RzL2FycmF5cy5cbiAqIFNwZWNpZmljYWxseSwgYW55IGVsZW1lbnRzIGluIHRoZSBiaW5kaW5nIHRyZWUgYmV0d2VlbiB0aGUgc291cmNlIG9mIGFcbiAqIG11dGF0aW9uIGFuZCB0aGUgY29uc3VtcHRpb24gb2YgaXQgbXVzdCBlbmFibGUgdGhpcyBiZWhhdmlvciBvciBhcHBseSB0aGVcbiAqIGBQb2x5bWVyLk9wdGlvbmFsTXV0YWJsZURhdGFCZWhhdmlvcmAuXG4gKlxuICogV2hpbGUgdGhpcyBiZWhhdmlvciBhZGRzIHRoZSBhYmlsaXR5IHRvIGZvcmdvIE9iamVjdC9BcnJheSBkaXJ0eSBjaGVja2luZyxcbiAqIHRoZSBgbXV0YWJsZURhdGFgIGZsYWcgZGVmYXVsdHMgdG8gZmFsc2UgYW5kIG11c3QgYmUgc2V0IG9uIHRoZSBpbnN0YW5jZS5cbiAqXG4gKiBOb3RlLCB0aGUgcGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzIG9mIHByb3BhZ2F0aW5nIGxhcmdlIG9iamVjdCBncmFwaHNcbiAqIHdpbGwgYmUgd29yc2UgYnkgcmVseWluZyBvbiBgbXV0YWJsZURhdGE6IHRydWVgIGFzIG9wcG9zZWQgdG8gdXNpbmdcbiAqIHN0cmljdCBkaXJ0eSBjaGVja2luZyB3aXRoIGltbXV0YWJsZSBwYXR0ZXJucyBvciBQb2x5bWVyJ3MgcGF0aCBub3RpZmljYXRpb25cbiAqIEFQSS5cbiAqXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKiBAc3VtbWFyeSBCZWhhdmlvciB0byBvcHRpb25hbGx5IHNraXAgc3RyaWN0IGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzIGFuZFxuICogICBhcnJheXNcbiAqL1xuZXhwb3J0IGNvbnN0IE9wdGlvbmFsTXV0YWJsZURhdGFCZWhhdmlvciA9IHtcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogSW5zdGFuY2UtbGV2ZWwgZmxhZyBmb3IgY29uZmlndXJpbmcgdGhlIGRpcnR5LWNoZWNraW5nIHN0cmF0ZWd5XG4gICAgICogZm9yIHRoaXMgZWxlbWVudC4gIFdoZW4gdHJ1ZSwgT2JqZWN0cyBhbmQgQXJyYXlzIHdpbGwgc2tpcCBkaXJ0eVxuICAgICAqIGNoZWNraW5nLCBvdGhlcndpc2Ugc3RyaWN0IGVxdWFsaXR5IGNoZWNraW5nIHdpbGwgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBtdXRhYmxlRGF0YTogQm9vbGVhblxuICB9LFxuXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgYFBvbHltZXIuUHJvcGVydHlFZmZlY3RzYCB0byBza2lwIHN0cmljdCBlcXVhbGl0eSBjaGVja2luZ1xuICAgKiBmb3IgT2JqZWN0cyBhbmQgQXJyYXlzLlxuICAgKlxuICAgKiBQdWxscyB0aGUgdmFsdWUgdG8gZGlydHkgY2hlY2sgYWdhaW5zdCBmcm9tIHRoZSBgX19kYXRhVGVtcGAgY2FjaGVcbiAgICogKHJhdGhlciB0aGFuIHRoZSBub3JtYWwgYF9fZGF0YWAgY2FjaGUpIGZvciBPYmplY3RzLiAgU2luY2UgdGhlIHRlbXBcbiAgICogY2FjaGUgaXMgY2xlYXJlZCBhdCB0aGUgZW5kIG9mIGEgdHVybiwgdGhpcyBpbXBsZW1lbnRhdGlvbiBhbGxvd3NcbiAgICogc2lkZS1lZmZlY3RzIG9mIGRlZXAgb2JqZWN0IGNoYW5nZXMgdG8gYmUgcHJvY2Vzc2VkIGJ5IHJlLXNldHRpbmcgdGhlXG4gICAqIHNhbWUgb2JqZWN0ICh1c2luZyB0aGUgdGVtcCBjYWNoZSBhcyBhbiBpbi10dXJuIGJhY2tzdG9wIHRvIHByZXZlbnRcbiAgICogY3ljbGVzIGR1ZSB0byAyLXdheSBub3RpZmljYXRpb24pLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcGFyYW0geyp9IG9sZCBQcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIGNoYW5nZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHByb3BlcnR5LCB2YWx1ZSwgb2xkKSB7XG4gICAgcmV0dXJuIG11dGFibGVQcm9wZXJ0eUNoYW5nZSh0aGlzLCBwcm9wZXJ0eSwgdmFsdWUsIG9sZCwgdGhpcy5tdXRhYmxlRGF0YSk7XG4gIH1cbn07XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG5pbXBvcnQgeyBMZWdhY3lFbGVtZW50TWl4aW4gfSBmcm9tICcuL2xpYi9sZWdhY3kvbGVnYWN5LWVsZW1lbnQtbWl4aW4uanMnO1xuZXhwb3J0IHsgUG9seW1lciB9IGZyb20gICcuL2xpYi9sZWdhY3kvcG9seW1lci1mbi5qcyc7XG4vKiB0ZW1wbGF0ZSBlbGVtZW50cyAqL1xuaW1wb3J0ICcuL2xpYi9sZWdhY3kvdGVtcGxhdGl6ZXItYmVoYXZpb3IuanMnO1xuaW1wb3J0ICcuL2xpYi9lbGVtZW50cy9kb20tYmluZC5qcyc7XG5pbXBvcnQgJy4vbGliL2VsZW1lbnRzL2RvbS1yZXBlYXQuanMnO1xuaW1wb3J0ICcuL2xpYi9lbGVtZW50cy9kb20taWYuanMnO1xuaW1wb3J0ICcuL2xpYi9lbGVtZW50cy9hcnJheS1zZWxlY3Rvci5qcyc7XG4vKiBjdXN0b20tc3R5bGUgKi9cbmltcG9ydCAnLi9saWIvZWxlbWVudHMvY3VzdG9tLXN0eWxlLmpzJztcbi8qIGJjIGJlaGF2aW9ycyAqL1xuaW1wb3J0ICcuL2xpYi9sZWdhY3kvbXV0YWJsZS1kYXRhLWJlaGF2aW9yLmpzJztcbi8qIGltcG9ydCBodG1sLXRhZyB0byBleHBvcnQgaHRtbCAqL1xuZXhwb3J0IHsgaHRtbCB9IGZyb20gJy4vbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcblxuLy8gYmNcbmV4cG9ydCBjb25zdCBCYXNlID0gTGVnYWN5RWxlbWVudE1peGluKEhUTUxFbGVtZW50KS5wcm90b3R5cGU7XG4iLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbmltcG9ydCB7ZG9tfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci5kb20uanMnO1xuaW1wb3J0IHt1c2VTaGFkb3d9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3NldHRpbmdzLmpzJztcblxuLy8gQ29udGFpbnMgYWxsIGNvbm5lY3RlZCByZXNpemFibGVzIHRoYXQgZG8gbm90IGhhdmUgYSBwYXJlbnQuXG52YXIgT1JQSEFOUyA9IG5ldyBTZXQoKTtcblxuLyoqXG4gKiBgSXJvblJlc2l6YWJsZUJlaGF2aW9yYCBpcyBhIGJlaGF2aW9yIHRoYXQgY2FuIGJlIHVzZWQgaW4gUG9seW1lciBlbGVtZW50cyB0b1xuICogY29vcmRpbmF0ZSB0aGUgZmxvdyBvZiByZXNpemUgZXZlbnRzIGJldHdlZW4gXCJyZXNpemVyc1wiIChlbGVtZW50cyB0aGF0XG4gKmNvbnRyb2wgdGhlIHNpemUgb3IgaGlkZGVuIHN0YXRlIG9mIHRoZWlyIGNoaWxkcmVuKSBhbmQgXCJyZXNpemFibGVzXCIgKGVsZW1lbnRzXG4gKnRoYXQgbmVlZCB0byBiZSBub3RpZmllZCB3aGVuIHRoZXkgYXJlIHJlc2l6ZWQgb3IgdW4taGlkZGVuIGJ5IHRoZWlyIHBhcmVudHNcbiAqaW4gb3JkZXIgdG8gdGFrZSBhY3Rpb24gb24gdGhlaXIgbmV3IG1lYXN1cmVtZW50cykuXG4gKlxuICogRWxlbWVudHMgdGhhdCBwZXJmb3JtIG1lYXN1cmVtZW50IHNob3VsZCBhZGQgdGhlIGBJcm9uUmVzaXphYmxlQmVoYXZpb3JgXG4gKmJlaGF2aW9yIHRvIHRoZWlyIGVsZW1lbnQgZGVmaW5pdGlvbiBhbmQgbGlzdGVuIGZvciB0aGUgYGlyb24tcmVzaXplYCBldmVudCBvblxuICp0aGVtc2VsdmVzLiBUaGlzIGV2ZW50IHdpbGwgYmUgZmlyZWQgd2hlbiB0aGV5IGJlY29tZSBzaG93aW5nIGFmdGVyIGhhdmluZ1xuICpiZWVuIGhpZGRlbiwgd2hlbiB0aGV5IGFyZSByZXNpemVkIGV4cGxpY2l0bHkgYnkgYW5vdGhlciByZXNpemFibGUsIG9yIHdoZW5cbiAqdGhlIHdpbmRvdyBoYXMgYmVlbiByZXNpemVkLlxuICpcbiAqIE5vdGUsIHRoZSBgaXJvbi1yZXNpemVgIGV2ZW50IGlzIG5vbi1idWJibGluZy5cbiAqXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKiBAZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiAqKi9cbmV4cG9ydCBjb25zdCBJcm9uUmVzaXphYmxlQmVoYXZpb3IgPSB7XG4gIHByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY2xvc2VzdCBhbmNlc3RvciBlbGVtZW50IHRoYXQgaW1wbGVtZW50cyBgSXJvblJlc2l6YWJsZUJlaGF2aW9yYC5cbiAgICAgKi9cbiAgICBfcGFyZW50UmVzaXphYmxlOiB7XG4gICAgICB0eXBlOiBPYmplY3QsXG4gICAgICBvYnNlcnZlcjogJ19wYXJlbnRSZXNpemFibGVDaGFuZ2VkJyxcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGlzIGVsZW1lbnQgaXMgY3VycmVudGx5IG5vdGlmeWluZyBpdHMgZGVzY2VuZGFudCBlbGVtZW50cyBvZlxuICAgICAqIHJlc2l6ZS5cbiAgICAgKi9cbiAgICBfbm90aWZ5aW5nRGVzY2VuZGFudDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICB9XG4gIH0sXG5cbiAgbGlzdGVuZXJzOiB7XG4gICAgJ2lyb24tcmVxdWVzdC1yZXNpemUtbm90aWZpY2F0aW9ucyc6ICdfb25Jcm9uUmVxdWVzdFJlc2l6ZU5vdGlmaWNhdGlvbnMnXG4gIH0sXG5cbiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7XG4gICAgLy8gV2UgZG9uJ3QgcmVhbGx5IG5lZWQgcHJvcGVydHkgZWZmZWN0cyBvbiB0aGVzZSwgYW5kIGFsc28gd2Ugd2FudCB0aGVtXG4gICAgLy8gdG8gYmUgY3JlYXRlZCBiZWZvcmUgdGhlIGBfcGFyZW50UmVzaXphYmxlYCBvYnNlcnZlciBmaXJlczpcbiAgICB0aGlzLl9pbnRlcmVzdGVkUmVzaXphYmxlcyA9IFtdO1xuICAgIHRoaXMuX2JvdW5kTm90aWZ5UmVzaXplID0gdGhpcy5ub3RpZnlSZXNpemUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9ib3VuZE9uRGVzY2VuZGFudElyb25SZXNpemUgPSB0aGlzLl9vbkRlc2NlbmRhbnRJcm9uUmVzaXplLmJpbmQodGhpcyk7XG4gIH0sXG5cbiAgYXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3JlcXVlc3RSZXNpemVOb3RpZmljYXRpb25zKCk7XG4gIH0sXG5cbiAgZGV0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9wYXJlbnRSZXNpemFibGUpIHtcbiAgICAgIHRoaXMuX3BhcmVudFJlc2l6YWJsZS5zdG9wUmVzaXplTm90aWZpY2F0aW9uc0Zvcih0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgT1JQSEFOUy5kZWxldGUodGhpcyk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fYm91bmROb3RpZnlSZXNpemUpO1xuICAgIH1cblxuICAgIHRoaXMuX3BhcmVudFJlc2l6YWJsZSA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbiBiZSBjYWxsZWQgdG8gbWFudWFsbHkgbm90aWZ5IGEgcmVzaXphYmxlIGFuZCBpdHMgZGVzY2VuZGFudFxuICAgKiByZXNpemFibGVzIG9mIGEgcmVzaXplIGNoYW5nZS5cbiAgICovXG4gIG5vdGlmeVJlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9pbnRlcmVzdGVkUmVzaXphYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc2l6YWJsZSkge1xuICAgICAgaWYgKHRoaXMucmVzaXplclNob3VsZE5vdGlmeShyZXNpemFibGUpKSB7XG4gICAgICAgIHRoaXMuX25vdGlmeURlc2NlbmRhbnQocmVzaXphYmxlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIHRoaXMuX2ZpcmVSZXNpemUoKTtcbiAgfSxcblxuICAvKipcbiAgICogVXNlZCB0byBhc3NpZ24gdGhlIGNsb3Nlc3QgcmVzaXphYmxlIGFuY2VzdG9yIHRvIHRoaXMgcmVzaXphYmxlXG4gICAqIGlmIHRoZSBhbmNlc3RvciBkZXRlY3RzIGEgcmVxdWVzdCBmb3Igbm90aWZpY2F0aW9ucy5cbiAgICovXG4gIGFzc2lnblBhcmVudFJlc2l6YWJsZTogZnVuY3Rpb24ocGFyZW50UmVzaXphYmxlKSB7XG4gICAgaWYgKHRoaXMuX3BhcmVudFJlc2l6YWJsZSkge1xuICAgICAgdGhpcy5fcGFyZW50UmVzaXphYmxlLnN0b3BSZXNpemVOb3RpZmljYXRpb25zRm9yKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMuX3BhcmVudFJlc2l6YWJsZSA9IHBhcmVudFJlc2l6YWJsZTtcblxuICAgIGlmIChwYXJlbnRSZXNpemFibGUgJiZcbiAgICAgICAgcGFyZW50UmVzaXphYmxlLl9pbnRlcmVzdGVkUmVzaXphYmxlcy5pbmRleE9mKHRoaXMpID09PSAtMSkge1xuICAgICAgcGFyZW50UmVzaXphYmxlLl9pbnRlcmVzdGVkUmVzaXphYmxlcy5wdXNoKHRoaXMpO1xuICAgICAgcGFyZW50UmVzaXphYmxlLl9zdWJzY3JpYmVJcm9uUmVzaXplKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXNlZCB0byByZW1vdmUgYSByZXNpemFibGUgZGVzY2VuZGFudCBmcm9tIHRoZSBsaXN0IG9mIGRlc2NlbmRhbnRzXG4gICAqIHRoYXQgc2hvdWxkIGJlIG5vdGlmaWVkIG9mIGEgcmVzaXplIGNoYW5nZS5cbiAgICovXG4gIHN0b3BSZXNpemVOb3RpZmljYXRpb25zRm9yOiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLl9pbnRlcmVzdGVkUmVzaXphYmxlcy5pbmRleE9mKHRhcmdldCk7XG5cbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5faW50ZXJlc3RlZFJlc2l6YWJsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlSXJvblJlc2l6ZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRoaXMgZWxlbWVudCB0byBsaXN0ZW4gdG8gaXJvbi1yZXNpemUgZXZlbnRzIG9uIHRoZSBnaXZlbiB0YXJnZXQuXG4gICAqXG4gICAqIFByZWZlcnJlZCBvdmVyIHRhcmdldC5saXN0ZW4gYmVjYXVzZSB0aGUgcHJvcGVydHkgcmVuYW1lciBkb2VzIG5vdFxuICAgKiB1bmRlcnN0YW5kIHRvIHJlbmFtZSB3aGVuIHRoZSB0YXJnZXQgaXMgbm90IHNwZWNpZmljYWxseSBcInRoaXNcIlxuICAgKlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gdGFyZ2V0IEVsZW1lbnQgdG8gbGlzdGVuIHRvIGZvciBpcm9uLXJlc2l6ZSBldmVudHMuXG4gICAqL1xuICBfc3Vic2NyaWJlSXJvblJlc2l6ZTogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2lyb24tcmVzaXplJywgdGhpcy5fYm91bmRPbkRlc2NlbmRhbnRJcm9uUmVzaXplKTtcbiAgfSxcblxuICAvKipcbiAgICogVW5zdWJzY3JpYmUgdGhpcyBlbGVtZW50IGZyb20gbGlzdGVuaW5nIHRvIHRvIGlyb24tcmVzaXplIGV2ZW50cyBvbiB0aGVcbiAgICogZ2l2ZW4gdGFyZ2V0LlxuICAgKlxuICAgKiBQcmVmZXJyZWQgb3ZlciB0YXJnZXQudW5saXN0ZW4gYmVjYXVzZSB0aGUgcHJvcGVydHkgcmVuYW1lciBkb2VzIG5vdFxuICAgKiB1bmRlcnN0YW5kIHRvIHJlbmFtZSB3aGVuIHRoZSB0YXJnZXQgaXMgbm90IHNwZWNpZmljYWxseSBcInRoaXNcIlxuICAgKlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gdGFyZ2V0IEVsZW1lbnQgdG8gbGlzdGVuIHRvIGZvciBpcm9uLXJlc2l6ZSBldmVudHMuXG4gICAqL1xuICBfdW5zdWJzY3JpYmVJcm9uUmVzaXplOiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2lyb24tcmVzaXplJywgdGhpcy5fYm91bmRPbkRlc2NlbmRhbnRJcm9uUmVzaXplKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gdG8gZmlsdGVyIG5lc3RlZCBlbGVtZW50cyB0aGF0IHNob3VsZCBvclxuICAgKiBzaG91bGQgbm90IGJlIG5vdGlmaWVkIGJ5IHRoZSBjdXJyZW50IGVsZW1lbnQuIFJldHVybiB0cnVlIGlmIGFuIGVsZW1lbnRcbiAgICogc2hvdWxkIGJlIG5vdGlmaWVkLCBvciBmYWxzZSBpZiBpdCBzaG91bGQgbm90IGJlIG5vdGlmaWVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IEEgY2FuZGlkYXRlIGRlc2NlbmRhbnQgZWxlbWVudCB0aGF0XG4gICAqIGltcGxlbWVudHMgYElyb25SZXNpemFibGVCZWhhdmlvcmAuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGBlbGVtZW50YCBzaG91bGQgYmUgbm90aWZpZWQgb2YgcmVzaXplLlxuICAgKi9cbiAgcmVzaXplclNob3VsZE5vdGlmeTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIF9vbkRlc2NlbmRhbnRJcm9uUmVzaXplOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLl9ub3RpZnlpbmdEZXNjZW5kYW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBubyBuZWVkIHRvIHVzZSB0aGlzIGR1cmluZyBzaGFkb3cgZG9tIGJlY2F1c2Ugb2YgZXZlbnQgcmV0YXJnZXRpbmdcbiAgICBpZiAoIXVzZVNoYWRvdykge1xuICAgICAgdGhpcy5fZmlyZVJlc2l6ZSgpO1xuICAgIH1cbiAgfSxcblxuICBfZmlyZVJlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5maXJlKCdpcm9uLXJlc2l6ZScsIG51bGwsIHtub2RlOiB0aGlzLCBidWJibGVzOiBmYWxzZX0pO1xuICB9LFxuXG4gIF9vbklyb25SZXF1ZXN0UmVzaXplTm90aWZpY2F0aW9uczogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gLyoqIEB0eXBlIHshRXZlbnRUYXJnZXR9ICovIChkb20oZXZlbnQpLnJvb3RUYXJnZXQpO1xuICAgIGlmICh0YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXNzaWduUGFyZW50UmVzaXphYmxlKHRoaXMpO1xuICAgIHRoaXMuX25vdGlmeURlc2NlbmRhbnQodGFyZ2V0KTtcblxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9LFxuXG4gIF9wYXJlbnRSZXNpemFibGVDaGFuZ2VkOiBmdW5jdGlvbihwYXJlbnRSZXNpemFibGUpIHtcbiAgICBpZiAocGFyZW50UmVzaXphYmxlKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fYm91bmROb3RpZnlSZXNpemUpO1xuICAgIH1cbiAgfSxcblxuICBfbm90aWZ5RGVzY2VuZGFudDogZnVuY3Rpb24oZGVzY2VuZGFudCkge1xuICAgIC8vIE5PVEUoY2RhdGEpOiBJbiBJRTEwLCBhdHRhY2hlZCBpcyBmaXJlZCBvbiBjaGlsZHJlbiBmaXJzdCwgc28gaXQnc1xuICAgIC8vIGltcG9ydGFudCBub3QgdG8gbm90aWZ5IHRoZW0gaWYgdGhlIHBhcmVudCBpcyBub3QgYXR0YWNoZWQgeWV0IChvclxuICAgIC8vIGVsc2UgdGhleSB3aWxsIGdldCByZWR1bmRhbnRseSBub3RpZmllZCB3aGVuIHRoZSBwYXJlbnQgYXR0YWNoZXMpLlxuICAgIGlmICghdGhpcy5pc0F0dGFjaGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbm90aWZ5aW5nRGVzY2VuZGFudCA9IHRydWU7XG4gICAgZGVzY2VuZGFudC5ub3RpZnlSZXNpemUoKTtcbiAgICB0aGlzLl9ub3RpZnlpbmdEZXNjZW5kYW50ID0gZmFsc2U7XG4gIH0sXG5cbiAgX3JlcXVlc3RSZXNpemVOb3RpZmljYXRpb25zOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuaXNBdHRhY2hlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgIHZhciBfcmVxdWVzdFJlc2l6ZU5vdGlmaWNhdGlvbnMgPVxuICAgICAgICAgIHRoaXMuX3JlcXVlc3RSZXNpemVOb3RpZmljYXRpb25zLmJpbmQodGhpcyk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICdyZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gcmVhZHlzdGF0ZWNoYW5nZWQoKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgcmVhZHlzdGF0ZWNoYW5nZWQpO1xuICAgICAgICAgICAgX3JlcXVlc3RSZXNpemVOb3RpZmljYXRpb25zKCk7XG4gICAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpbmRQYXJlbnQoKTtcblxuICAgICAgaWYgKCF0aGlzLl9wYXJlbnRSZXNpemFibGUpIHtcbiAgICAgICAgLy8gSWYgdGhpcyByZXNpemFibGUgaXMgYW4gb3JwaGFuLCB0ZWxsIG90aGVyIG9ycGhhbnMgdG8gdHJ5IHRvIGZpbmRcbiAgICAgICAgLy8gdGhlaXIgcGFyZW50IGFnYWluLCBpbiBjYXNlIGl0J3MgdGhpcyByZXNpemFibGUuXG4gICAgICAgIE9SUEhBTlMuZm9yRWFjaChmdW5jdGlvbihvcnBoYW4pIHtcbiAgICAgICAgICBpZiAob3JwaGFuICE9PSB0aGlzKSB7XG4gICAgICAgICAgICBvcnBoYW4uX2ZpbmRQYXJlbnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9ib3VuZE5vdGlmeVJlc2l6ZSk7XG4gICAgICAgIHRoaXMubm90aWZ5UmVzaXplKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGlzIHJlc2l6YWJsZSBoYXMgYSBwYXJlbnQsIHRlbGwgb3RoZXIgY2hpbGQgcmVzaXphYmxlcyBvZlxuICAgICAgICAvLyB0aGF0IHBhcmVudCB0byB0cnkgZmluZGluZyB0aGVpciBwYXJlbnQgYWdhaW4sIGluIGNhc2UgaXQncyB0aGlzXG4gICAgICAgIC8vIHJlc2l6YWJsZS5cbiAgICAgICAgdGhpcy5fcGFyZW50UmVzaXphYmxlLl9pbnRlcmVzdGVkUmVzaXphYmxlc1xuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24ocmVzaXphYmxlKSB7XG4gICAgICAgICAgICAgIGlmIChyZXNpemFibGUgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXNpemFibGUuX2ZpbmRQYXJlbnQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIF9maW5kUGFyZW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmFzc2lnblBhcmVudFJlc2l6YWJsZShudWxsKTtcbiAgICB0aGlzLmZpcmUoXG4gICAgICAgICdpcm9uLXJlcXVlc3QtcmVzaXplLW5vdGlmaWNhdGlvbnMnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7bm9kZTogdGhpcywgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZX0pO1xuXG4gICAgaWYgKCF0aGlzLl9wYXJlbnRSZXNpemFibGUpIHtcbiAgICAgIE9SUEhBTlMuYWRkKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBPUlBIQU5TLmRlbGV0ZSh0aGlzKTtcbiAgICB9XG4gIH1cbn07XG4iLCIvKipcbiAqIEBwb2x5bWVyTWl4aW5cbiAqL1xuZXhwb3J0IGNvbnN0IFRoZW1lUHJvcGVydHlNaXhpbiA9IHN1cGVyQ2xhc3MgPT4gY2xhc3MgVmFhZGluVGhlbWVQcm9wZXJ0eU1peGluIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBIZWxwZXIgcHJvcGVydHkgd2l0aCB0aGVtZSBhdHRyaWJ1dGUgdmFsdWUgZmFjaWxpdGF0aW5nIHByb3BhZ2F0aW9uXG4gICAgICAgKiBpbiBzaGFkb3cgRE9NLlxuICAgICAgICpcbiAgICAgICAqIEVuYWJsZXMgdGhlIGNvbXBvbmVudCBpbXBsZW1lbnRhdGlvbiB0byBwcm9wYWdhdGUgdGhlIGB0aGVtZWBcbiAgICAgICAqIGF0dHJpYnV0ZSB2YWx1ZSB0byB0aGUgc3ViY29tcG9uZW50cyBpbiBTaGFkb3cgRE9NIGJ5IGJpbmRpbmdcbiAgICAgICAqIHRoZSBzdWJjb21wb25lbnTigJlzIFwidGhlbWVcIiBhdHRyaWJ1dGUgdG8gdGhlIGB0aGVtZWAgcHJvcGVydHkgb2ZcbiAgICAgICAqIHRoZSBob3N0LlxuICAgICAgICpcbiAgICAgICAqICoqTk9URToqKiBFeHRlbmRpbmcgdGhlIG1peGluIG9ubHkgcHJvdmlkZXMgdGhlIHByb3BlcnR5IGZvciBiaW5kaW5nLFxuICAgICAgICogYW5kIGRvZXMgbm90IG1ha2UgdGhlIHByb3BhZ2F0aW9uIGFsb25lLlxuICAgICAgICpcbiAgICAgICAqIFNlZSBbVGhlbWUgQXR0cmlidXRlIGFuZCBTdWJjb21wb25lbnRzXShodHRwczovL2dpdGh1Yi5jb20vdmFhZGluL3ZhYWRpbi10aGVtYWJsZS1taXhpbi93aWtpLzUuLVRoZW1lLUF0dHJpYnV0ZS1hbmQtU3ViY29tcG9uZW50cykuXG4gICAgICAgKiBwYWdlIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAqL1xuICAgICAgdGhlbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZWFkT25seTogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKiogQHByb3RlY3RlZCAqL1xuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG5cbiAgICBpZiAobmFtZSA9PT0gJ3RoZW1lJykge1xuICAgICAgdGhpcy5fc2V0VGhlbWUobmV3VmFsdWUpO1xuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCB7IERvbU1vZHVsZSB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2RvbS1tb2R1bGUuanMnO1xuaW1wb3J0IHsgVGhlbWVQcm9wZXJ0eU1peGluIH0gZnJvbSAnLi92YWFkaW4tdGhlbWUtcHJvcGVydHktbWl4aW4uanMnO1xuXG4vKipcbiAqIEBwb2x5bWVyTWl4aW5cbiAqIEBtaXhlcyBWYWFkaW4uVGhlbWVQcm9wZXJ0eU1peGluXG4gKi9cbmV4cG9ydCBjb25zdCBUaGVtYWJsZU1peGluID0gc3VwZXJDbGFzcyA9PiBjbGFzcyBWYWFkaW5UaGVtYWJsZU1peGluIGV4dGVuZHMgVGhlbWVQcm9wZXJ0eU1peGluKHN1cGVyQ2xhc3MpIHtcblxuICAvKiogQHByb3RlY3RlZCAqL1xuICBzdGF0aWMgZmluYWxpemUoKSB7XG4gICAgc3VwZXIuZmluYWxpemUoKTtcblxuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5wcm90b3R5cGUuX3RlbXBsYXRlO1xuXG4gICAgY29uc3QgaGFzT3duVGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlICYmIHRoaXMudGVtcGxhdGUucGFyZW50RWxlbWVudCAmJiB0aGlzLnRlbXBsYXRlLnBhcmVudEVsZW1lbnQuaWQgPT09IHRoaXMuaXM7XG4gICAgY29uc3QgaW5oZXJpdGVkVGVtcGxhdGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcy5wcm90b3R5cGUpLl90ZW1wbGF0ZTtcbiAgICBpZiAoaW5oZXJpdGVkVGVtcGxhdGUgJiYgIWhhc093blRlbXBsYXRlKSB7XG4gICAgICAvLyBUaGUgZWxlbWVudCBkb2Vzbid0IGRlZmluZSBpdHMgb3duIHRlbXBsYXRlIC0+IGluY2x1ZGUgdGhlIHRoZW1lIG1vZHVsZXMgZnJvbSB0aGUgaW5oZXJpdGVkIHRlbXBsYXRlXG4gICAgICBBcnJheS5mcm9tKGluaGVyaXRlZFRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGVbaW5jbHVkZV0nKSkuZm9yRWFjaChzID0+IHtcbiAgICAgICAgdGhpcy5faW5jbHVkZVN0eWxlKHMuZ2V0QXR0cmlidXRlKCdpbmNsdWRlJyksIHRlbXBsYXRlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2luY2x1ZGVNYXRjaGluZ1RoZW1lcyh0ZW1wbGF0ZSk7XG4gIH1cblxuICAvKiogQHByb3RlY3RlZCAqL1xuICBzdGF0aWMgX2luY2x1ZGVNYXRjaGluZ1RoZW1lcyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IGRvbU1vZHVsZSA9IERvbU1vZHVsZTtcbiAgICBjb25zdCBtb2R1bGVzID0gZG9tTW9kdWxlLnByb3RvdHlwZS5tb2R1bGVzO1xuXG4gICAgbGV0IGhhc1RoZW1lcyA9IGZhbHNlO1xuICAgIGNvbnN0IGRlZmF1bHRNb2R1bGVOYW1lID0gdGhpcy5pcyArICctZGVmYXVsdC10aGVtZSc7XG5cbiAgICBPYmplY3Qua2V5cyhtb2R1bGVzKVxuICAgICAgLnNvcnQoKG1vZHVsZU5hbWVBLCBtb2R1bGVOYW1lQikgPT4ge1xuICAgICAgICBjb25zdCB2YWFkaW5BID0gbW9kdWxlTmFtZUEuaW5kZXhPZigndmFhZGluLScpID09PSAwO1xuICAgICAgICBjb25zdCB2YWFkaW5CID0gbW9kdWxlTmFtZUIuaW5kZXhPZigndmFhZGluLScpID09PSAwO1xuXG4gICAgICAgIGNvbnN0IHZhYWRpblRoZW1lUHJlZml4ZXMgPSBbJ2x1bW8tJywgJ21hdGVyaWFsLSddO1xuICAgICAgICBjb25zdCB2YWFkaW5UaGVtZUEgPSB2YWFkaW5UaGVtZVByZWZpeGVzLmZpbHRlcihwcmVmaXggPT4gbW9kdWxlTmFtZUEuaW5kZXhPZihwcmVmaXgpID09PSAwKS5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCB2YWFkaW5UaGVtZUIgPSB2YWFkaW5UaGVtZVByZWZpeGVzLmZpbHRlcihwcmVmaXggPT4gbW9kdWxlTmFtZUIuaW5kZXhPZihwcmVmaXgpID09PSAwKS5sZW5ndGggPiAwO1xuXG4gICAgICAgIGlmICh2YWFkaW5BICE9PSB2YWFkaW5CKSB7XG4gICAgICAgICAgLy8gSW5jbHVkZSB2YWFkaW4gY29yZSBzdHlsZXMgZmlyc3RcbiAgICAgICAgICByZXR1cm4gdmFhZGluQSA/IC0xIDogMTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWFkaW5UaGVtZUEgIT09IHZhYWRpblRoZW1lQikge1xuICAgICAgICAgIC8vIEluY2x1ZGUgdmFhZGluIHRoZW1lIHN0eWxlcyBhZnRlciB0aGF0XG4gICAgICAgICAgcmV0dXJuIHZhYWRpblRoZW1lQSA/IC0xIDogMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBMYXN0bHkgaW5jbHVkZSBjdXN0b20gc3R5bGVzIHNvIHRoZXkgb3ZlcnJpZGUgYWxsIHZhYWRpbiBzdHlsZXNcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5mb3JFYWNoKG1vZHVsZU5hbWUgPT4ge1xuICAgICAgICBpZiAobW9kdWxlTmFtZSAhPT0gZGVmYXVsdE1vZHVsZU5hbWUpIHtcbiAgICAgICAgICBjb25zdCB0aGVtZUZvciA9IG1vZHVsZXNbbW9kdWxlTmFtZV0uZ2V0QXR0cmlidXRlKCd0aGVtZS1mb3InKTtcbiAgICAgICAgICBpZiAodGhlbWVGb3IpIHtcbiAgICAgICAgICAgIHRoZW1lRm9yLnNwbGl0KCcgJykuZm9yRWFjaCh0aGVtZUZvclRva2VuID0+IHtcbiAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJ14nICsgdGhlbWVGb3JUb2tlbi5zcGxpdCgnKicpLmpvaW4oJy4qJykgKyAnJCcpLnRlc3QodGhpcy5pcykpIHtcbiAgICAgICAgICAgICAgICBoYXNUaGVtZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2luY2x1ZGVTdHlsZShtb2R1bGVOYW1lLCB0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBpZiAoIWhhc1RoZW1lcyAmJiBtb2R1bGVzW2RlZmF1bHRNb2R1bGVOYW1lXSkge1xuICAgICAgLy8gTm8gdGhlbWUgbW9kdWxlcyBmb3VuZCwgaW5jbHVkZSB0aGUgZGVmYXVsdCBtb2R1bGUgaWYgaXQgZXhpc3RzXG4gICAgICB0aGlzLl9pbmNsdWRlU3R5bGUoZGVmYXVsdE1vZHVsZU5hbWUsIHRlbXBsYXRlKTtcbiAgICB9XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhdGljIF9pbmNsdWRlU3R5bGUobW9kdWxlTmFtZSwgdGVtcGxhdGUpIHtcbiAgICBpZiAodGVtcGxhdGUgJiYgIXRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3Rvcihgc3R5bGVbaW5jbHVkZT1cIiR7bW9kdWxlTmFtZX1cIl1gKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLnNldEF0dHJpYnV0ZSgnaW5jbHVkZScsIG1vZHVsZU5hbWUpO1xuICAgICAgdGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxufTtcbiIsImNvbnN0IERFVl9NT0RFX0NPREVfUkVHRVhQID1cbiAgL1xcL1xcKlxcKlxccyt2YWFkaW4tZGV2LW1vZGU6c3RhcnQoW1xcc1xcU10qKXZhYWRpbi1kZXYtbW9kZTplbmRcXHMrXFwqXFwqXFwvL2k7XG5cbmNvbnN0IEZsb3dDbGllbnRzID0gd2luZG93LlZhYWRpbiAmJiB3aW5kb3cuVmFhZGluLkZsb3cgJiYgd2luZG93LlZhYWRpbi5GbG93LmNsaWVudHM7XG5cbmZ1bmN0aW9uIGlzTWluaWZpZWQoKSB7XG4gIGZ1bmN0aW9uIHRlc3QoKSB7XG4gICAgLyoqIHZhYWRpbi1kZXYtbW9kZTpzdGFydFxuICAgIHJldHVybiBmYWxzZTtcbiAgICB2YWFkaW4tZGV2LW1vZGU6ZW5kICoqL1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiB1bmNvbW1lbnRBbmRSdW4odGVzdCk7XG59XG5cbmZ1bmN0aW9uIGlzRGV2ZWxvcG1lbnRNb2RlKCkge1xuICB0cnkge1xuICAgIGlmIChpc0ZvcmNlZERldmVsb3BtZW50TW9kZSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzTG9jYWxob3N0KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoRmxvd0NsaWVudHMpIHtcbiAgICAgIHJldHVybiAhaXNGbG93UHJvZHVjdGlvbk1vZGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gIWlzTWluaWZpZWQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFNvbWUgZXJyb3IgaW4gdGhpcyBjb2RlLCBhc3N1bWUgcHJvZHVjdGlvbiBzbyBubyBmdXJ0aGVyIGFjdGlvbnMgd2lsbCBiZSB0YWtlblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0ZvcmNlZERldmVsb3BtZW50TW9kZSgpIHtcbiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidmFhZGluLmRldmVsb3BtZW50bW9kZS5mb3JjZVwiKTtcbn1cblxuZnVuY3Rpb24gaXNMb2NhbGhvc3QoKSB7XG4gIHJldHVybiAoW1wibG9jYWxob3N0XCIsXCIxMjcuMC4wLjFcIl0uaW5kZXhPZih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpID49IDApO1xufVxuXG5mdW5jdGlvbiBpc0Zsb3dQcm9kdWN0aW9uTW9kZSgpIHtcbiAgaWYgKEZsb3dDbGllbnRzKSB7XG4gICAgY29uc3QgcHJvZHVjdGlvbk1vZGVBcHBzID0gT2JqZWN0LmtleXMoRmxvd0NsaWVudHMpXG4gICAgICAubWFwKGtleSA9PiBGbG93Q2xpZW50c1trZXldKVxuICAgICAgLmZpbHRlcihjbGllbnQgPT4gY2xpZW50LnByb2R1Y3Rpb25Nb2RlKTtcbiAgICBpZiAocHJvZHVjdGlvbk1vZGVBcHBzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHVuY29tbWVudEFuZFJ1bihjYWxsYmFjaywgYXJncykge1xuICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgbWF0Y2ggPSBERVZfTU9ERV9DT0RFX1JFR0VYUC5leGVjKGNhbGxiYWNrLnRvU3RyaW5nKCkpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB0cnkge1xuICAgICAgLy8gcmVxdWlyZXMgQ1NQOiBzY3JpcHQtc3JjICd1bnNhZmUtZXZhbCdcbiAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKG1hdGNoWzFdKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBlYXQgdGhlIGV4Y2VwdGlvblxuICAgICAgY29uc29sZS5sb2coJ3ZhYWRpbi1kZXZlbG9wbWVudC1tb2RlLWRldGVjdG9yOiB1bmNvbW1lbnRBbmRSdW4oKSBmYWlsZWQnLCBlKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjYWxsYmFjayhhcmdzKTtcbn1cblxuLy8gQSBndWFyZCBhZ2FpbnN0IHBvbHltZXItbW9kdWxpemVyIHJlbW92aW5nIHRoZSB3aW5kb3cuVmFhZGluXG4vLyBpbml0aWFsaXphdGlvbiBhYm92ZS5cbndpbmRvd1snVmFhZGluJ10gPSB3aW5kb3dbJ1ZhYWRpbiddIHx8IHt9O1xuXG4vKipcbiAqIEluc3BlY3RzIHRoZSBzb3VyY2UgY29kZSBvZiB0aGUgZ2l2ZW4gYGNhbGxiYWNrYCBmdW5jdGlvbiBmb3JcbiAqIHNwZWNpYWxseS1tYXJrZWQgX2NvbW1lbnRlZF8gY29kZS4gSWYgc3VjaCBjb21tZW50ZWQgY29kZSBpcyBmb3VuZCBpbiB0aGVcbiAqIGNhbGxiYWNrIHNvdXJjZSwgdW5jb21tZW50cyBhbmQgcnVucyB0aGF0IGNvZGUgaW5zdGVhZCBvZiB0aGUgY2FsbGJhY2tcbiAqIGl0c2VsZi4gT3RoZXJ3aXNlIHJ1bnMgdGhlIGNhbGxiYWNrIGFzIGlzLlxuICpcbiAqIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgYXJlIHBhc3NlZCBpbnRvIHRoZSBjYWxsYmFjayAvIHVuY29tbWVudGVkIGNvZGUsXG4gKiB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIFNlZSB0aGUgYGlzTWluaWZpZWQoKWAgZnVuY3Rpb24gc291cmNlIGNvZGUgaW4gdGhpcyBmaWxlIGZvciBhbiBleGFtcGxlLlxuICpcbiAqL1xuZXhwb3J0IGNvbnN0IHJ1bklmRGV2ZWxvcG1lbnRNb2RlID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFyZ3MpIHtcbiAgaWYgKHdpbmRvdy5WYWFkaW4uZGV2ZWxvcG1lbnRNb2RlKSB7XG4gICAgcmV0dXJuIHVuY29tbWVudEFuZFJ1bihjYWxsYmFjaywgYXJncyk7XG4gIH1cbn07XG5cbmlmICh3aW5kb3cuVmFhZGluLmRldmVsb3BtZW50TW9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gIHdpbmRvdy5WYWFkaW4uZGV2ZWxvcG1lbnRNb2RlID0gaXNEZXZlbG9wbWVudE1vZGUoKTtcbn1cbiIsIi8qIFRoaXMgZmlsZSBpcyBhdXRvZ2VuZXJhdGVkIGZyb20gc3JjL3ZhYWRpbi11c2FnZS1zdGF0aXN0aWNzLnRwbC5odG1sICovXG4vKlxuXG5UaGlzIHNjcmlwdCBnYXRoZXJzIHVzYWdlIHN0YXRpc3RpY3MgZnJvbSB0aGUgYXBwbGljYXRpb24gcnVubmluZyBpbiBkZXZlbG9wbWVudCBtb2RlLlxuXG5TdGF0aXN0aWNzIGdhdGhlcmluZyBpcyBhdXRvbWF0aWNhbGx5IGRpc2FibGVkIGFuZCBleGNsdWRlZCBmcm9tIHByb2R1Y3Rpb24gYnVpbGRzLlxuXG5Gb3IgZGV0YWlscyBhbmQgdG8gb3B0LW91dCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92YWFkaW4vdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MuXG5cbiovXG4vKlxuICBGSVhNRShwb2x5bWVyLW1vZHVsaXplcik6IHRoZSBhYm92ZSBjb21tZW50cyB3ZXJlIGV4dHJhY3RlZFxuICBmcm9tIEhUTUwgYW5kIG1heSBiZSBvdXQgb2YgcGxhY2UgaGVyZS4gUmV2aWV3IHRoZW0gYW5kXG4gIHRoZW4gZGVsZXRlIHRoaXMgY29tbWVudCFcbiovXG5pbXBvcnQgeyBydW5JZkRldmVsb3BtZW50TW9kZSB9IGZyb20gJ0B2YWFkaW4vdmFhZGluLWRldmVsb3BtZW50LW1vZGUtZGV0ZWN0b3IvdmFhZGluLWRldmVsb3BtZW50LW1vZGUtZGV0ZWN0b3IuanMnO1xuXG5mdW5jdGlvbiBtYXliZUdhdGhlckFuZFNlbmRTdGF0cygpIHtcbiAgLyoqIHZhYWRpbi1kZXYtbW9kZTpzdGFydFxuICAoZnVuY3Rpb24gKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxudmFyIGdldFBvbHltZXJWZXJzaW9uID0gZnVuY3Rpb24gZ2V0UG9seW1lclZlcnNpb24oKSB7XG4gIHJldHVybiB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci52ZXJzaW9uO1xufTtcblxudmFyIFN0YXRpc3RpY3NHYXRoZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RhdGlzdGljc0dhdGhlcmVyKGxvZ2dlcikge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXRpc3RpY3NHYXRoZXJlcik7XG5cbiAgICB0aGlzLm5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoU3RhdGlzdGljc0dhdGhlcmVyLCBbe1xuICAgIGtleTogJ2ZyYW1ld29ya1ZlcnNpb25EZXRlY3RvcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmcmFtZXdvcmtWZXJzaW9uRGV0ZWN0b3JzKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ0Zsb3cnOiBmdW5jdGlvbiBGbG93KCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuVmFhZGluICYmIHdpbmRvdy5WYWFkaW4uRmxvdyAmJiB3aW5kb3cuVmFhZGluLkZsb3cuY2xpZW50cykge1xuICAgICAgICAgICAgdmFyIGZsb3dWZXJzaW9ucyA9IE9iamVjdC5rZXlzKHdpbmRvdy5WYWFkaW4uRmxvdy5jbGllbnRzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlZhYWRpbi5GbG93LmNsaWVudHNba2V5XTtcbiAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoY2xpZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiBjbGllbnQuZ2V0VmVyc2lvbkluZm87XG4gICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGNsaWVudCkge1xuICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmdldFZlcnNpb25JbmZvKCkuZmxvdztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGZsb3dWZXJzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmbG93VmVyc2lvbnNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnVmFhZGluIEZyYW1ld29yayc6IGZ1bmN0aW9uIFZhYWRpbkZyYW1ld29yaygpIHtcbiAgICAgICAgICBpZiAod2luZG93LnZhYWRpbiAmJiB3aW5kb3cudmFhZGluLmNsaWVudHMpIHtcbiAgICAgICAgICAgIHZhciBmcmFtZXdvcmtWZXJzaW9ucyA9IE9iamVjdC52YWx1ZXMod2luZG93LnZhYWRpbi5jbGllbnRzKS5maWx0ZXIoZnVuY3Rpb24gKGNsaWVudCkge1xuICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmdldFZlcnNpb25JbmZvO1xuICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5nZXRWZXJzaW9uSW5mbygpLnZhYWRpblZlcnNpb247XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChmcmFtZXdvcmtWZXJzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmcmFtZXdvcmtWZXJzaW9uc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdBbmd1bGFySnMnOiBmdW5jdGlvbiBBbmd1bGFySnMoKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5hbmd1bGFyICYmIHdpbmRvdy5hbmd1bGFyLnZlcnNpb24gJiYgd2luZG93LmFuZ3VsYXIudmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5hbmd1bGFyLnZlcnNpb24uZnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdBbmd1bGFyJzogZnVuY3Rpb24gQW5ndWxhcigpIHtcbiAgICAgICAgICBpZiAod2luZG93Lm5nKSB7XG4gICAgICAgICAgICB2YXIgdGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmctdmVyc2lvbl1cIik7XG4gICAgICAgICAgICBpZiAodGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YWdzWzBdLmdldEF0dHJpYnV0ZShcIm5nLXZlcnNpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJVbmtub3duXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnQmFja2JvbmUuanMnOiBmdW5jdGlvbiBCYWNrYm9uZUpzKCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuQmFja2JvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuQmFja2JvbmUuVkVSU0lPTjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdSZWFjdCc6IGZ1bmN0aW9uIFJlYWN0KCkge1xuICAgICAgICAgIHZhciByZWFjdFNlbGVjdG9yID0gJ1tkYXRhLXJlYWN0cm9vdF0sIFtkYXRhLXJlYWN0aWRdJztcbiAgICAgICAgICBpZiAoISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJlYWN0U2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAvLyBSZWFjdCBkb2VzIG5vdCBwdWJsaXNoIHRoZSB2ZXJzaW9uIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIHJldHVybiBcInVua25vd25cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdFbWJlcic6IGZ1bmN0aW9uIEVtYmVyKCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuRW0gJiYgd2luZG93LkVtLlZFUlNJT04pIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuRW0uVkVSU0lPTjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5FbWJlciAmJiB3aW5kb3cuRW1iZXIuVkVSU0lPTikge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5FbWJlci5WRVJTSU9OO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2pRdWVyeSc6IGZ1bmN0aW9uIChfalF1ZXJ5KSB7XG4gICAgICAgICAgZnVuY3Rpb24galF1ZXJ5KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9qUXVlcnkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBqUXVlcnkudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2pRdWVyeS50b1N0cmluZygpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4galF1ZXJ5O1xuICAgICAgICB9KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJyAmJiBqUXVlcnkucHJvdG90eXBlLmpxdWVyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LnByb3RvdHlwZS5qcXVlcnk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgJ1BvbHltZXInOiBmdW5jdGlvbiBQb2x5bWVyKCkge1xuICAgICAgICAgIHZhciB2ZXJzaW9uID0gZ2V0UG9seW1lclZlcnNpb24oKTtcbiAgICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnTGl0RWxlbWVudCc6IGZ1bmN0aW9uIExpdEVsZW1lbnQoKSB7XG4gICAgICAgICAgdmFyIHZlcnNpb24gPSB3aW5kb3cubGl0RWxlbWVudFZlcnNpb25zICYmIHdpbmRvdy5saXRFbGVtZW50VmVyc2lvbnNbMF07XG4gICAgICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ0xpdEh0bWwnOiBmdW5jdGlvbiBMaXRIdG1sKCkge1xuICAgICAgICAgIHZhciB2ZXJzaW9uID0gd2luZG93LmxpdEh0bWxWZXJzaW9ucyAmJiB3aW5kb3cubGl0SHRtbFZlcnNpb25zWzBdO1xuICAgICAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdWdWUuanMnOiBmdW5jdGlvbiBWdWVKcygpIHtcbiAgICAgICAgICBpZiAod2luZG93LlZ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5WdWUudmVyc2lvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VXNlZFZhYWRpbkVsZW1lbnRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlZFZhYWRpbkVsZW1lbnRzKGVsZW1lbnRzKSB7XG4gICAgICB2YXIgdmVyc2lvbiA9IGdldFBvbHltZXJWZXJzaW9uKCk7XG4gICAgICB2YXIgZWxlbWVudENsYXNzZXMgPSB2b2lkIDA7XG4gICAgICAvLyBOT1RFOiBJbiBjYXNlIHlvdSBlZGl0IHRoZSBjb2RlIGhlcmUsIFlPVSBNVVNUIFVQREFURSBhbnkgc3RhdGlzdGljcyByZXBvcnRpbmcgY29kZSBpbiBGbG93LlxuICAgICAgLy8gQ2hlY2sgYWxsIGxvY2F0aW9ucyBjYWxsaW5nIHRoZSBtZXRob2QgZ2V0RW50cmllcygpIGluXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmFhZGluL2Zsb3cvYmxvYi9tYXN0ZXIvZmxvdy1zZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vdmFhZGluL2Zsb3cvaW50ZXJuYWwvVXNhZ2VTdGF0aXN0aWNzLmphdmEjTDEwNlxuICAgICAgLy8gQ3VycmVudGx5IGl0IGlzIG9ubHkgdXNlZCBieSBCb290c3RyYXBIYW5kbGVyLlxuICAgICAgaWYgKHZlcnNpb24gJiYgdmVyc2lvbi5pbmRleE9mKCcyJykgPT09IDApIHtcbiAgICAgICAgLy8gUG9seW1lciAyOiBjb21wb25lbnRzIGNsYXNzZXMgYXJlIHN0b3JlZCBpbiB3aW5kb3cuVmFhZGluXG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gT2JqZWN0LmtleXMod2luZG93LlZhYWRpbikubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5WYWFkaW5bY107XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJldHVybiBjLmlzO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFBvbHltZXIgMzogY29tcG9uZW50cyBjbGFzc2VzIGFyZSBzdG9yZWQgaW4gd2luZG93LlZhYWRpbi5yZWdpc3RyYXRpb25zXG4gICAgICAgIGVsZW1lbnRDbGFzc2VzID0gd2luZG93LlZhYWRpbi5yZWdpc3RyYXRpb25zIHx8IFtdO1xuICAgICAgfVxuICAgICAgZWxlbWVudENsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoa2xhc3MpIHtcbiAgICAgICAgdmFyIHZlcnNpb24gPSBrbGFzcy52ZXJzaW9uID8ga2xhc3MudmVyc2lvbiA6IFwiMC4wLjBcIjtcbiAgICAgICAgZWxlbWVudHNba2xhc3MuaXNdID0geyB2ZXJzaW9uOiB2ZXJzaW9uIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZXRVc2VkVmFhZGluVGhlbWVzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlZFZhYWRpblRoZW1lcyh0aGVtZXMpIHtcbiAgICAgIFsnTHVtbycsICdNYXRlcmlhbCddLmZvckVhY2goZnVuY3Rpb24gKHRoZW1lTmFtZSkge1xuICAgICAgICB2YXIgdGhlbWU7XG4gICAgICAgIHZhciB2ZXJzaW9uID0gZ2V0UG9seW1lclZlcnNpb24oKTtcbiAgICAgICAgaWYgKHZlcnNpb24gJiYgdmVyc2lvbi5pbmRleE9mKCcyJykgPT09IDApIHtcbiAgICAgICAgICAvLyBQb2x5bWVyIDI6IHRoZW1lcyBhcmUgc3RvcmVkIGluIHdpbmRvdy5WYWFkaW5cbiAgICAgICAgICB0aGVtZSA9IHdpbmRvdy5WYWFkaW5bdGhlbWVOYW1lXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBQb2x5bWVyIDM6IHRoZW1lcyBhcmUgc3RvcmVkIGluIGN1c3RvbSBlbGVtZW50IHJlZ2lzdHJ5XG4gICAgICAgICAgdGhlbWUgPSBjdXN0b21FbGVtZW50cy5nZXQoJ3ZhYWRpbi0nICsgdGhlbWVOYW1lLnRvTG93ZXJDYXNlKCkgKyAnLXN0eWxlcycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGVtZSAmJiB0aGVtZS52ZXJzaW9uKSB7XG4gICAgICAgICAgdGhlbWVzW3RoZW1lTmFtZV0gPSB7IHZlcnNpb246IHRoZW1lLnZlcnNpb24gfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0RnJhbWV3b3JrcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZyYW1ld29ya3MoZnJhbWV3b3Jrcykge1xuICAgICAgdmFyIGRldGVjdG9ycyA9IHRoaXMuZnJhbWV3b3JrVmVyc2lvbkRldGVjdG9ycygpO1xuICAgICAgT2JqZWN0LmtleXMoZGV0ZWN0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChmcmFtZXdvcmspIHtcbiAgICAgICAgdmFyIGRldGVjdG9yID0gZGV0ZWN0b3JzW2ZyYW1ld29ya107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHZlcnNpb24gPSBkZXRlY3RvcigpO1xuICAgICAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICBmcmFtZXdvcmtzW2ZyYW1ld29ya10gPSB7IHZlcnNpb246IHZlcnNpb24gfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnYXRoZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnYXRoZXIoc3RvcmFnZSkge1xuICAgICAgdmFyIHN0b3JlZFN0YXRzID0gc3RvcmFnZS5yZWFkKCk7XG4gICAgICB2YXIgZ2F0aGVyZWRTdGF0cyA9IHt9O1xuICAgICAgdmFyIHR5cGVzID0gW1wiZWxlbWVudHNcIiwgXCJmcmFtZXdvcmtzXCIsIFwidGhlbWVzXCJdO1xuXG4gICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIGdhdGhlcmVkU3RhdHNbdHlwZV0gPSB7fTtcbiAgICAgICAgaWYgKCFzdG9yZWRTdGF0c1t0eXBlXSkge1xuICAgICAgICAgIHN0b3JlZFN0YXRzW3R5cGVdID0ge307XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB2YXIgcHJldmlvdXNTdGF0cyA9IEpTT04uc3RyaW5naWZ5KHN0b3JlZFN0YXRzKTtcblxuICAgICAgdGhpcy5nZXRVc2VkVmFhZGluRWxlbWVudHMoZ2F0aGVyZWRTdGF0cy5lbGVtZW50cyk7XG4gICAgICB0aGlzLmdldEZyYW1ld29ya3MoZ2F0aGVyZWRTdGF0cy5mcmFtZXdvcmtzKTtcbiAgICAgIHRoaXMuZ2V0VXNlZFZhYWRpblRoZW1lcyhnYXRoZXJlZFN0YXRzLnRoZW1lcyk7XG5cbiAgICAgIHZhciBub3cgPSB0aGlzLm5vdztcbiAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhnYXRoZXJlZFN0YXRzW3R5cGVdKTtcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoIXN0b3JlZFN0YXRzW3R5cGVdW2tleV0gfHwgX3R5cGVvZihzdG9yZWRTdGF0c1t0eXBlXVtrZXldKSAhPSBfdHlwZW9mKHt9KSkge1xuICAgICAgICAgICAgc3RvcmVkU3RhdHNbdHlwZV1ba2V5XSA9IHsgZmlyc3RVc2VkOiBub3cgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRGlzY2FyZHMgYW55IHByZXZpb3VzbHkgbG9nZ2VkIHZlcnNpb24gbnVtYmVyXG4gICAgICAgICAgc3RvcmVkU3RhdHNbdHlwZV1ba2V5XS52ZXJzaW9uID0gZ2F0aGVyZWRTdGF0c1t0eXBlXVtrZXldLnZlcnNpb247XG4gICAgICAgICAgc3RvcmVkU3RhdHNbdHlwZV1ba2V5XS5sYXN0VXNlZCA9IG5vdztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIG5ld1N0YXRzID0gSlNPTi5zdHJpbmdpZnkoc3RvcmVkU3RhdHMpO1xuICAgICAgc3RvcmFnZS53cml0ZShuZXdTdGF0cyk7XG4gICAgICBpZiAobmV3U3RhdHMgIT0gcHJldmlvdXNTdGF0cyAmJiBPYmplY3Qua2V5cyhzdG9yZWRTdGF0cykubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIk5ldyBzdGF0czogXCIgKyBuZXdTdGF0cyk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTdGF0aXN0aWNzR2F0aGVyZXI7XG59KCk7XG5cbnZhciBTdGF0aXN0aWNzU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RhdGlzdGljc1N0b3JhZ2Uoa2V5KSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhdGlzdGljc1N0b3JhZ2UpO1xuXG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTdGF0aXN0aWNzU3RvcmFnZSwgW3tcbiAgICBrZXk6ICdyZWFkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZCgpIHtcbiAgICAgIHZhciBsb2NhbFN0b3JhZ2VTdGF0c1N0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVN0YXRzU3RyaW5nID8gbG9jYWxTdG9yYWdlU3RhdHNTdHJpbmcgOiAne30nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3dyaXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gd3JpdGUoZGF0YSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksIGRhdGEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmtleSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNFbXB0eScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHkoKSB7XG4gICAgICB2YXIgc3RvcmVkU3RhdHMgPSB0aGlzLnJlYWQoKTtcbiAgICAgIHZhciBlbXB0eSA9IHRydWU7XG4gICAgICBPYmplY3Qua2V5cyhzdG9yZWRTdGF0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhzdG9yZWRTdGF0c1trZXldKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBlbXB0eTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFN0YXRpc3RpY3NTdG9yYWdlO1xufSgpO1xuXG52YXIgU3RhdGlzdGljc1NlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RhdGlzdGljc1NlbmRlcih1cmwsIGxvZ2dlcikge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXRpc3RpY3NTZW5kZXIpO1xuXG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTdGF0aXN0aWNzU2VuZGVyLCBbe1xuICAgIGtleTogJ3NlbmQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKGRhdGEsIGVycm9ySGFuZGxlcikge1xuICAgICAgdmFyIGxvZ2dlciA9IHRoaXMubG9nZ2VyO1xuXG4gICAgICBpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiT2ZmbGluZSwgY2FuJ3Qgc2VuZFwiKTtcbiAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIlNlbmRpbmcgZGF0YSB0byBcIiArIHRoaXMudXJsKTtcblxuICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICByZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBTdGF0cyBzZW50LCBub3RoaW5nIG1vcmUgdG8gZG9cbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiUmVzcG9uc2U6IFwiICsgcmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICB9KTtcbiAgICAgIHJlcS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJTZW5kIGZhaWxlZFwiKTtcbiAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICB9KTtcbiAgICAgIHJlcS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJTZW5kIGFib3J0ZWRcIik7XG4gICAgICAgIGVycm9ySGFuZGxlcigpO1xuICAgICAgfSk7XG4gICAgICByZXEub3BlbihcIlBPU1RcIiwgdGhpcy51cmwpO1xuICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgcmVxLnNlbmQoZGF0YSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTdGF0aXN0aWNzU2VuZGVyO1xufSgpO1xuXG52YXIgU3RhdGlzdGljc0xvZ2dlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RhdGlzdGljc0xvZ2dlcihpZCkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXRpc3RpY3NMb2dnZXIpO1xuXG4gICAgdGhpcy5pZCA9IGlkO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoU3RhdGlzdGljc0xvZ2dlciwgW3tcbiAgICBrZXk6ICdfaXNEZWJ1ZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0RlYnVnKCkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidmFhZGluLlwiICsgdGhpcy5pZCArIFwiLmRlYnVnXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2RlYnVnJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVidWcobXNnKSB7XG4gICAgICBpZiAodGhpcy5faXNEZWJ1ZygpKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyh0aGlzLmlkICsgXCI6IFwiICsgbXNnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFN0YXRpc3RpY3NMb2dnZXI7XG59KCk7XG5cbnZhciBVc2FnZVN0YXRpc3RpY3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFVzYWdlU3RhdGlzdGljcygpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBVc2FnZVN0YXRpc3RpY3MpO1xuXG4gICAgdGhpcy5ub3cgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMudGltZU5vdyA9IHRoaXMubm93LmdldFRpbWUoKTtcbiAgICB0aGlzLmdhdGhlckRlbGF5ID0gMTA7IC8vIERlbGF5IGJldHdlZW4gbG9hZGluZyB0aGlzIGZpbGUgYW5kIGdhdGhlcmluZyBzdGF0c1xuICAgIHRoaXMuaW5pdGlhbERlbGF5ID0gMjQgKiA2MCAqIDYwO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBuZXcgU3RhdGlzdGljc0xvZ2dlcihcInN0YXRpc3RpY3NcIik7XG4gICAgdGhpcy5zdG9yYWdlID0gbmV3IFN0YXRpc3RpY3NTdG9yYWdlKFwidmFhZGluLnN0YXRpc3RpY3MuYmFza2V0XCIpO1xuICAgIHRoaXMuZ2F0aGVyZXIgPSBuZXcgU3RhdGlzdGljc0dhdGhlcmVyKHRoaXMubG9nZ2VyKTtcbiAgICB0aGlzLnNlbmRlciA9IG5ldyBTdGF0aXN0aWNzU2VuZGVyKFwiaHR0cHM6Ly90b29scy52YWFkaW4uY29tL3VzYWdlLXN0YXRzL3N1Ym1pdFwiLCB0aGlzLmxvZ2dlcik7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhVc2FnZVN0YXRpc3RpY3MsIFt7XG4gICAga2V5OiAnbWF5YmVHYXRoZXJBbmRTZW5kJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWF5YmVHYXRoZXJBbmRTZW5kKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFVzYWdlU3RhdGlzdGljcy5vcHRPdXRLZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2F0aGVyZXIuZ2F0aGVyKHRoaXMuc3RvcmFnZSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMubWF5YmVTZW5kKCk7XG4gICAgICB9LCB0aGlzLmdhdGhlckRlbGF5ICogMTAwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbG90dGVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvdHRlcnkoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjdXJyZW50TW9udGgnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjdXJyZW50TW9udGgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub3cuZ2V0WWVhcigpICogMTIgKyB0aGlzLm5vdy5nZXRNb250aCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ21heWJlU2VuZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1heWJlU2VuZCgpIHtcbiAgICAgIHZhciBmaXJzdFVzZSA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShVc2FnZVN0YXRpc3RpY3MuZmlyc3RVc2VLZXkpKTtcbiAgICAgIHZhciBtb250aFByb2Nlc3NlZCA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShVc2FnZVN0YXRpc3RpY3MubW9udGhQcm9jZXNzZWRLZXkpKTtcblxuICAgICAgaWYgKCFmaXJzdFVzZSkge1xuICAgICAgICAvLyBVc2UgYSBncmFjZSBwZXJpb2QgdG8gYXZvaWQgaW50ZXJmZXJpbmcgd2l0aCB0ZXN0cywgaW5jb2duaXRvIG1vZGUgZXRjXG4gICAgICAgIGZpcnN0VXNlID0gdGhpcy50aW1lTm93O1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShVc2FnZVN0YXRpc3RpY3MuZmlyc3RVc2VLZXksIGZpcnN0VXNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudGltZU5vdyA8IGZpcnN0VXNlICsgdGhpcy5pbml0aWFsRGVsYXkgKiAxMDAwKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiTm8gc3RhdGlzdGljcyB3aWxsIGJlIHNlbnQgdW50aWwgdGhlIGluaXRpYWwgZGVsYXkgb2YgXCIgKyB0aGlzLmluaXRpYWxEZWxheSArIFwicyBoYXMgcGFzc2VkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50TW9udGgoKSA8PSBtb250aFByb2Nlc3NlZCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlRoaXMgbW9udGggaGFzIGFscmVhZHkgYmVlbiBwcm9jZXNzZWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFVzYWdlU3RhdGlzdGljcy5tb250aFByb2Nlc3NlZEtleSwgdGhpcy5jdXJyZW50TW9udGgoKSk7XG4gICAgICAvLyBVc2UgcmFuZG9tIHNhbXBsaW5nXG4gICAgICBpZiAodGhpcy5sb3R0ZXJ5KCkpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJDb25ncmF0dWxhdGlvbnMsIHdlIGhhdmUgYSB3aW5uZXIhXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTb3JyeSwgbm8gc3RhdHMgZnJvbSB5b3UgdGhpcyB0aW1lXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VuZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlbmQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBkYXRhXG4gICAgICB0aGlzLmdhdGhlcmVyLmdhdGhlcih0aGlzLnN0b3JhZ2UpO1xuXG4gICAgICAvLyBSZWFkLCBzZW5kIGFuZCBjbGVhbiB1cFxuICAgICAgdmFyIGRhdGEgPSB0aGlzLnN0b3JhZ2UucmVhZCgpO1xuICAgICAgZGF0YVtcImZpcnN0VXNlXCJdID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFVzYWdlU3RhdGlzdGljcy5maXJzdFVzZUtleSkpO1xuICAgICAgZGF0YVtcInVzYWdlU3RhdGlzdGljc1ZlcnNpb25cIl0gPSBVc2FnZVN0YXRpc3RpY3MudmVyc2lvbjtcbiAgICAgIHZhciBpbmZvID0gJ1RoaXMgcmVxdWVzdCBjb250YWlucyB1c2FnZSBzdGF0aXN0aWNzIGdhdGhlcmVkIGZyb20gdGhlIGFwcGxpY2F0aW9uIHJ1bm5pbmcgaW4gZGV2ZWxvcG1lbnQgbW9kZS4gXFxuXFxuU3RhdGlzdGljcyBnYXRoZXJpbmcgaXMgYXV0b21hdGljYWxseSBkaXNhYmxlZCBhbmQgZXhjbHVkZWQgZnJvbSBwcm9kdWN0aW9uIGJ1aWxkcy5cXG5cXG5Gb3IgZGV0YWlscyBhbmQgdG8gb3B0LW91dCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92YWFkaW4vdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MuXFxuXFxuXFxuXFxuJztcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMuc2VuZGVyLnNlbmQoaW5mbyArIEpTT04uc3RyaW5naWZ5KGRhdGEpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFJldmVydCB0aGUgJ21vbnRoIHByb2Nlc3NlZCcgZmxhZ1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShVc2FnZVN0YXRpc3RpY3MubW9udGhQcm9jZXNzZWRLZXksIHNlbGYuY3VycmVudE1vbnRoKCkgLSAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiAndmVyc2lvbicsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkMSgpIHtcbiAgICAgIHJldHVybiAnMi4xLjAnO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2ZpcnN0VXNlS2V5JyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQxKCkge1xuICAgICAgcmV0dXJuICd2YWFkaW4uc3RhdGlzdGljcy5maXJzdHVzZSc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbW9udGhQcm9jZXNzZWRLZXknLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JDEoKSB7XG4gICAgICByZXR1cm4gJ3ZhYWRpbi5zdGF0aXN0aWNzLm1vbnRoUHJvY2Vzc2VkJztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvcHRPdXRLZXknLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JDEoKSB7XG4gICAgICByZXR1cm4gJ3ZhYWRpbi5zdGF0aXN0aWNzLm9wdG91dCc7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBVc2FnZVN0YXRpc3RpY3M7XG59KCk7XG5cbnRyeSB7XG4gIHdpbmRvdy5WYWFkaW4gPSB3aW5kb3cuVmFhZGluIHx8IHt9O1xuICB3aW5kb3cuVmFhZGluLnVzYWdlU3RhdHNDaGVja2VyID0gd2luZG93LlZhYWRpbi51c2FnZVN0YXRzQ2hlY2tlciB8fCBuZXcgVXNhZ2VTdGF0aXN0aWNzKCk7XG4gIHdpbmRvdy5WYWFkaW4udXNhZ2VTdGF0c0NoZWNrZXIubWF5YmVHYXRoZXJBbmRTZW5kKCk7XG59IGNhdGNoIChlKSB7XG4gIC8vIEludGVudGlvbmFsbHkgaWdub3JlZCBhcyB0aGlzIGlzIG5vdCBhIHByb2JsZW0gaW4gdGhlIGFwcCBiZWluZyBkZXZlbG9wZWRcbn1cblxufSgpKTtcblxuICB2YWFkaW4tZGV2LW1vZGU6ZW5kICoqL1xufVxuXG5leHBvcnQgY29uc3QgdXNhZ2VTdGF0aXN0aWNzID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0eXBlb2YgcnVuSWZEZXZlbG9wbWVudE1vZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gcnVuSWZEZXZlbG9wbWVudE1vZGUobWF5YmVHYXRoZXJBbmRTZW5kU3RhdHMpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgaWRsZVBlcmlvZCB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2FzeW5jLmpzJztcbmltcG9ydCB7IERlYm91bmNlciB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2RlYm91bmNlLmpzJztcbmltcG9ydCB7IGVucXVldWVEZWJvdW5jZXIgfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9mbHVzaC5qcyc7XG5cbmltcG9ydCB7IHVzYWdlU3RhdGlzdGljcyB9IGZyb20gJ0B2YWFkaW4vdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MvdmFhZGluLXVzYWdlLXN0YXRpc3RpY3MuanMnO1xuaWYgKCF3aW5kb3cuVmFhZGluKSB7XG4gIHdpbmRvd1snVmFhZGluJ10gPSB7fTtcbn1cblxuLyoqXG4gKiBBcnJheSBvZiBWYWFkaW4gY3VzdG9tIGVsZW1lbnQgY2xhc3NlcyB0aGF0IGhhdmUgYmVlbiBmaW5hbGl6ZWQuXG4gKi9cbndpbmRvd1snVmFhZGluJ10ucmVnaXN0cmF0aW9ucyA9IHdpbmRvdy5WYWFkaW4ucmVnaXN0cmF0aW9ucyB8fCBbXTtcblxuLy8gVXNlIHRoZSBoYWNrIHRvIHByZXZlbnQgcG9seW1lci1tb2R1bGl6ZXIgZnJvbSBjb252ZXJ0aW5nIHRvIGV4cG9ydHNcbndpbmRvd1snVmFhZGluJ10uZGV2ZWxvcG1lbnRNb2RlQ2FsbGJhY2sgPSB3aW5kb3cuVmFhZGluLmRldmVsb3BtZW50TW9kZUNhbGxiYWNrIHx8IHt9O1xud2luZG93WydWYWFkaW4nXS5kZXZlbG9wbWVudE1vZGVDYWxsYmFja1sndmFhZGluLXVzYWdlLXN0YXRpc3RpY3MnXSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodXNhZ2VTdGF0aXN0aWNzKSB7XG4gICAgdXNhZ2VTdGF0aXN0aWNzKCk7XG4gIH1cbn07XG5cbmxldCBzdGF0c0pvYjtcblxuY29uc3QgcmVnaXN0ZXJlZCA9IG5ldyBTZXQoKTtcblxuLyoqXG4gKiBAcG9seW1lck1peGluXG4gKi9cbmV4cG9ydCBjb25zdCBFbGVtZW50TWl4aW4gPSBzdXBlckNsYXNzID0+IGNsYXNzIFZhYWRpbkVsZW1lbnRNaXhpbiBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuICAvKiogQHByb3RlY3RlZCAqL1xuICBzdGF0aWMgZmluYWxpemUoKSB7XG4gICAgc3VwZXIuZmluYWxpemUoKTtcblxuICAgIGNvbnN0IHtpc30gPSB0aGlzO1xuXG4gICAgLy8gUmVnaXN0ZXJzIGEgY2xhc3MgcHJvdG90eXBlIGZvciB0ZWxlbWV0cnkgcHVycG9zZXMuXG4gICAgaWYgKGlzICYmICFyZWdpc3RlcmVkLmhhcyhpcykpIHtcbiAgICAgIHdpbmRvdy5WYWFkaW4ucmVnaXN0cmF0aW9ucy5wdXNoKHRoaXMpO1xuICAgICAgcmVnaXN0ZXJlZC5hZGQoaXMpO1xuXG4gICAgICBpZiAod2luZG93LlZhYWRpbi5kZXZlbG9wbWVudE1vZGVDYWxsYmFjaykge1xuICAgICAgICBzdGF0c0pvYiA9IERlYm91bmNlci5kZWJvdW5jZShzdGF0c0pvYixcbiAgICAgICAgICBpZGxlUGVyaW9kLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cuVmFhZGluLmRldmVsb3BtZW50TW9kZUNhbGxiYWNrWyd2YWFkaW4tdXNhZ2Utc3RhdGlzdGljcyddKCk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBlbnF1ZXVlRGVib3VuY2VyKHN0YXRzSm9iKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAoZG9jdW1lbnQuZG9jdHlwZSA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnVmFhZGluIGNvbXBvbmVudHMgcmVxdWlyZSB0aGUgXCJzdGFuZGFyZHMgbW9kZVwiIGRlY2xhcmF0aW9uLiBQbGVhc2UgYWRkIDwhRE9DVFlQRSBodG1sPiB0byB0aGUgSFRNTCBkb2N1bWVudC4nXG4gICAgICApO1xuICAgIH1cbiAgfVxufTtcbiIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNiBWYWFkaW4gTHRkLlxuVGhpcyBwcm9ncmFtIGlzIGF2YWlsYWJsZSB1bmRlciBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCwgYXZhaWxhYmxlIGF0IGh0dHBzOi8vdmFhZGluLmNvbS9saWNlbnNlL1xuKi9cbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWVsZW1lbnQuanMnO1xuXG5pbXBvcnQgeyBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMgfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvZ2VzdHVyZS1ldmVudC1saXN0ZW5lcnMuanMnO1xuaW1wb3J0IHsgRmxhdHRlbmVkTm9kZXNPYnNlcnZlciB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2ZsYXR0ZW5lZC1ub2Rlcy1vYnNlcnZlci5qcyc7XG5pbXBvcnQgeyBJcm9uUmVzaXphYmxlQmVoYXZpb3IgfSBmcm9tICdAcG9seW1lci9pcm9uLXJlc2l6YWJsZS1iZWhhdmlvci9pcm9uLXJlc2l6YWJsZS1iZWhhdmlvci5qcyc7XG5pbXBvcnQgeyBUaGVtYWJsZU1peGluIH0gZnJvbSAnQHZhYWRpbi92YWFkaW4tdGhlbWFibGUtbWl4aW4vdmFhZGluLXRoZW1hYmxlLW1peGluLmpzJztcbmltcG9ydCB7IEVsZW1lbnRNaXhpbiB9IGZyb20gJ0B2YWFkaW4vdmFhZGluLWVsZW1lbnQtbWl4aW4vdmFhZGluLWVsZW1lbnQtbWl4aW4uanMnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcbmltcG9ydCB7IG1peGluQmVoYXZpb3JzIH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L2NsYXNzLmpzJztcbi8qKlxuICogYDx2YWFkaW4tc3BsaXQtbGF5b3V0PmAgaXMgYSBXZWIgQ29tcG9uZW50IGltcGxlbWVudGluZyBhIHNwbGl0IGxheW91dCBmb3IgdHdvXG4gKiBjb250ZW50IGVsZW1lbnRzIHdpdGggYSBkcmFnZ2FibGUgc3BsaXR0ZXIgYmV0d2VlbiB0aGVtLlxuICpcbiAqIGBgYGh0bWxcbiAqIDx2YWFkaW4tc3BsaXQtbGF5b3V0PlxuICogICA8ZGl2PkZpcnN0IGNvbnRlbnQgZWxlbWVudDwvZGl2PlxuICogICA8ZGl2PlNlY29uZCBjb250ZW50IGVsZW1lbnQ8L2Rpdj5cbiAqIDwvdmFhZGluLXNwbGl0LWxheW91dD5cbiAqIGBgYFxuICpcbiAqICMjIyBIb3Jpem9udGFsIGFuZCBWZXJ0aWNhbCBMYXlvdXRzXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIHNwbGl0J3Mgb3JpZW50YXRpb24gaXMgaG9yaXpvbnRhbCwgbWVhbmluZyB0aGF0IHRoZSBjb250ZW50IGVsZW1lbnRzIGFyZVxuICogcG9zaXRpb25lZCBzaWRlIGJ5IHNpZGUgaW4gYSBmbGV4IGNvbnRhaW5lciB3aXRoIGEgaG9yaXpvbnRhbCBsYXlvdXQuXG4gKlxuICogWW91IGNhbiBjaGFuZ2UgdGhlIHNwbGl0IG1vZGUgdG8gdmVydGljYWwgYnkgc2V0dGluZyB0aGUgYG9yaWVudGF0aW9uYCBhdHRyaWJ1dGUgdG8gYFwidmVydGljYWxcImA6XG4gKlxuICogYGBgaHRtbFxuICogPHZhYWRpbi1zcGxpdC1sYXlvdXQgb3JpZW50YXRpb249XCJ2ZXJ0aWNhbFwiPlxuICogICA8ZGl2PkNvbnRlbnQgb24gdGhlIHRvcDwvZGl2PlxuICogICA8ZGl2PkNvbnRlbnQgb24gdGhlIGJvdHRvbTwvZGl2PlxuICogPC92YWFkaW4tc3BsaXQtbGF5b3V0PlxuICogYGBgXG4gKlxuICogIyMjIExheW91dHMgQ29tYmluYXRpb25cbiAqXG4gKiBGb3IgdGhlIGxheW91dCBjb250ZW50cywgd2UgdXN1YWxseSB1c2UgYDxkaXY+YCBlbGVtZW50cyBpbiB0aGUgZXhhbXBsZXMsXG4gKiBhbHRob3VnaCB5b3UgY2FuIHVzZSBhbnkgb3RoZXIgZWxlbWVudHMgYXMgd2VsbC5cbiAqXG4gKiBGb3IgaW5zdGFuY2UsIGluIG9yZGVyIHRvIGhhdmUgYSBuZXN0ZWQgdmVydGljYWwgc3BsaXQgbGF5b3V0IGluc2lkZSBhXG4gKiBob3Jpem9udGFsIG9uZSwgeW91IGNhbiBpbmNsdWRlIGA8dmFhZGluLXNwbGl0LWxheW91dD5gIGFzIGEgY29udGVudCBlbGVtZW50XG4gKiBpbnNpZGUgYW5vdGhlciBzcGxpdCBsYXlvdXQ6XG4gKlxuICogYGBgaHRtbFxuICogPHZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiAgIDxkaXY+Rmlyc3QgY29udGVudCBlbGVtZW50PC9kaXY+XG4gKiAgIDx2YWFkaW4tc3BsaXQtbGF5b3V0IG9yaWVudGF0aW9uPVwidmVydGljYWxcIj5cbiAqICAgICA8ZGl2PlNlY29uZCBjb250ZW50IGVsZW1lbnQ8L2Rpdj5cbiAqICAgICA8ZGl2PlRoaXJkIGNvbnRlbnQgZWxlbWVudDwvZGl2PlxuICogICA8L3ZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiA8L3ZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGFsc28gdHJpZ2dlciB0aGUgdmVydGljYWwgbW9kZSBpbiBKYXZhU2NyaXB0IGJ5IHNldHRpbmcgdGhlIHByb3BlcnR5OlxuICogYHNwbGl0TGF5b3V0Lm9yaWVudGF0aW9uID0gXCJ2ZXJ0aWNhbFwiO2AuXG4gKlxuICogIyMjIFNwbGl0IExheW91dCBFbGVtZW50IEhlaWdodFxuICpcbiAqIGA8dmFhZGluLXNwbGl0LWxheW91dD5gIGVsZW1lbnQgaXRzZWxmIGlzIGEgZmxleCBjb250YWluZXIuIEl0IGRvZXMgbm90IGluaGVyaXRcbiAqIHRoZSBwYXJlbnQgaGVpZ2h0IGJ5IGRlZmF1bHQsIGJ1dCByYXRoZXIgc2V0cyBpdHMgaGVpZ2h0IGRlcGVuZGluZyBvbiB0aGVcbiAqIGNvbnRlbnQuXG4gKlxuICogWW91IGNhbiB1c2UgQ1NTIHRvIHNldCB0aGUgZml4ZWQgaGVpZ2h0IGZvciB0aGUgc3BsaXQgbGF5b3V0LCBhcyB1c3VhbCB3aXRoIGFueVxuICogYmxvY2sgZWxlbWVudDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8dmFhZGluLXNwbGl0LWxheW91dCBzdHlsZT1cImhlaWdodDogMjAwcHg7XCI+XG4gKiAgIDxkaXY+Rmlyc3QgY29udGVudCBlbGVtZW50PC9kaXY+XG4gKiAgIDxkaXY+U2Vjb25kIGNvbnRlbnQgZWxlbWVudDwvZGl2PlxuICogPC92YWFkaW4tc3BsaXQtbGF5b3V0PlxuICogYGBgXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gZGVmaW5lIHBlcmNlbnRhZ2UgaGVpZ2h0IGFzIHdlbGwuIE5vdGUgdGhhdCB5b3UgaGF2ZSB0byBzZXRcbiAqIHRoZSBwYXJlbnQgaGVpZ2h0IGluIG9yZGVyIHRvIG1ha2UgcGVyY2VudGFnZXMgd29yayBjb3JyZWN0bHkuIEluIHRoZSBmb2xsb3dpbmdcbiAqIGV4YW1wbGUsIHRoZSBgPGJvZHk+YCBpcyByZXNpemVkIHRvIGZpbGwgdGhlIGVudGlyZSB2aWV3cG9ydCwgYW5kIHRoZVxuICogYDx2YWFkaW4tc3BsaXQtbGF5b3V0PmAgZWxlbWVudCBpcyBzZXQgdG8gdGFrZSAxMDAlIGhlaWdodCBvZiB0aGUgYDxib2R5PmA6XG4gKlxuICogYGBgaHRtbFxuICogPGJvZHkgc3R5bGU9XCJoZWlnaHQ6IDEwMHZoOyBtYXJnaW46IDA7XCI+XG4gKiAgIDx2YWFkaW4tc3BsaXQtbGF5b3V0IHN0eWxlPVwiaGVpZ2h0OiAxMDAlO1wiPlxuICogICAgIDxkaXY+Rmlyc3Q8L2Rpdj5cbiAqICAgICA8ZGl2PlNlY29uZDwvZGl2PlxuICogICA8L3ZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiA8L2JvZHk+XG4gKiBgYGBcbiAqXG4gKiBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHVzZSBhIGZsZXhib3ggbGF5b3V0IHRvIG1ha2UgYDx2YWFkaW4tc3BsaXQtbGF5b3V0PmBcbiAqIGZpbGwgdXAgdGhlIHBhcmVudDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8Ym9keSBzdHlsZT1cImhlaWdodDogMTAwdmg7IG1hcmdpbjogMDsgZGlzcGxheTogZmxleDtcIj5cbiAqICAgPHZhYWRpbi1zcGxpdC1sYXlvdXQgc3R5bGU9XCJmbGV4OiAxO1wiPlxuICogICAgIDxkaXY+Rmlyc3Q8L2Rpdj5cbiAqICAgICA8ZGl2PlNlY29uZDwvZGl2PlxuICogICA8L3ZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiA8L2JvZHk+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW5pdGlhbCBTcGxpdHRlciBQb3NpdGlvblxuICpcbiAqIFRoZSBpbml0aWFsIHNwbGl0dGVyIHBvc2l0aW9uIGlzIGRldGVybWluZWQgZnJvbSB0aGUgc2l6ZXMgb2YgdGhlIGNvbnRlbnQgZWxlbWVudHNcbiAqIGluc2lkZSB0aGUgc3BsaXQgbGF5b3V0LiBUaGVyZWZvcmUsIGNoYW5naW5nIGB3aWR0aGAgb24gdGhlIGNvbnRlbnQgZWxlbWVudHNcbiAqIGFmZmVjdHMgdGhlIGluaXRpYWwgc3BsaXR0ZXIgcG9zaXRpb24gZm9yIHRoZSBob3Jpem9udGFsIGxheW91dHMsIHdoaWxlIGBoZWlnaHRgXG4gKiBhZmZlY3RzIHRoZSB2ZXJ0aWNhbCBvbmVzLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIHRoZSB0b3RhbCBzaXplIG9mIHRoZSBjb250ZW50IGVsZW1lbnRzIGRvZXMgbm90IGZpdCB0aGUgbGF5b3V0LFxuICogdGhlIGNvbnRlbnQgZWxlbWVudHMgYXJlIHNjYWxlZCBwcm9wb3J0aW9uYWxseS5cbiAqXG4gKiBXaGVuIHNldHRpbmcgaW5pdGlhbCBzaXplcyB3aXRoIHJlbGF0aXZlIHVuaXRzLCBzdWNoIGFzIHBlcmNlbnRhZ2VzLCBpdCBpc1xuICogcmVjb21tZW5kZWQgdG8gYXNzaWduIHRoZSBzaXplIGZvciBib3RoIGNvbnRlbnQgZWxlbWVudHM6XG4gKlxuICogYGBgaHRtbFxuICogPHZhYWRpbi1zcGxpdC1sYXlvdXQ+XG4gKiAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogNzUlO1wiPlRocmVlIGZvdXJ0aHM8L2Rpdj5cbiAqICAgPGRpdiBzdHlsZT1cIndpZHRoOiAyNSU7XCI+T25lIGZvdXJ0aDwvZGl2PlxuICogPC92YWFkaW4tc3BsaXQtbGF5b3V0PlxuICogYGBgXG4gKlxuICogIyMjIFNpemUgTGltaXRzXG4gKlxuICogVGhlIGBtaW4td2lkdGhgL2BtaW4taGVpZ2h0YCwgYW5kIGBtYXgtd2lkdGhgL2BtYXgtaGVpZ2h0YCBDU1Mgc2l6ZSB2YWx1ZXNcbiAqIGZvciB0aGUgY29udGVudCBlbGVtZW50cyBhcmUgcmVzcGVjdGVkIGFuZCB1c2VkIHRvIGxpbWl0IHRoZSBzcGxpdHRlciBwb3NpdGlvblxuICogd2hlbiBpdCBpcyBkcmFnZ2VkLlxuICpcbiAqIEl0IGlzIHByZWZlcnJlZCB0byBzZXQgdGhlIGxpbWl0cyBvbmx5IGZvciBhIHNpbmdsZSBjb250ZW50IGVsZW1lbnQsIGluIG9yZGVyXG4gKiB0byBhdm9pZCBzaXplIGNvbmZsaWN0czpcbiAqXG4gKiBgYGBodG1sXG4gKiA8dmFhZGluLXNwbGl0LWxheW91dD5cbiAqICAgPGRpdiBzdHlsZT1cIm1pbi13aWR0aDogNTBweDsgbWF4LXdpZHRoOiAxNTBweDtcIj5GaXJzdDwvZGl2PlxuICogICA8ZGl2PlNlY29uZDwvZGl2PlxuICogPC92YWFkaW4tc3BsaXQtbGF5b3V0PlxuICogYGBgXG4gKlxuICogIyMjIFJlc2l6ZSBOb3RpZmljYXRpb25cbiAqXG4gKiBUaGlzIGVsZW1lbnQgaW1wbGVtZW50cyBgSXJvblJlc2l6YWJsZUJlaGF2aW9yYCB0byBub3RpZnkgdGhlIG5lc3RlZCByZXNpemFibGVzXG4gKiB3aGVuIHRoZSBzcGxpdHRlciBpcyBkcmFnZ2VkLiBJbiBvcmRlciB0byBkZWZpbmUgYSByZXNpemFibGUgYW5kIHJlY2VpdmUgdGhhdFxuICogbm90aWZpY2F0aW9uIGluIGEgbmVzdGVkIGVsZW1lbnQsIGluY2x1ZGUgYElyb25SZXNpemFibGVCZWhhdmlvcmAgYW5kIGxpc3RlblxuICogZm9yIHRoZSBgaXJvbi1yZXNpemVgIGV2ZW50LlxuICpcbiAqICMjIyBTdHlsaW5nXG4gKlxuICogVGhlIGZvbGxvd2luZyBzaGFkb3cgRE9NIHBhcnRzIGFyZSBhdmFpbGFibGUgZm9yIHN0eWxpbmc6XG4gKlxuICogUGFydCBuYW1lIHwgRGVzY3JpcHRpb24gfCBUaGVtZSBmb3IgRWxlbWVudFxuICogLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS1cbiAqIGBzcGxpdHRlcmAgfCBTcGxpdCBlbGVtZW50IHwgdmFhZGluLXNwbGl0LWxheW91dFxuICogYGhhbmRsZWAgfCBUaGUgaGFuZGxlIG9mIHRoZSBzcGxpdHRlciB8IHZhYWRpbi1zcGxpdC1sYXlvdXRcbiAqXG4gKiBTZWUgW1RoZW1hYmxlTWl4aW4g4oCTIGhvdyB0byBhcHBseSBzdHlsZXMgZm9yIHNoYWRvdyBwYXJ0c10oaHR0cHM6Ly9naXRodWIuY29tL3ZhYWRpbi92YWFkaW4tdGhlbWFibGUtbWl4aW4vd2lraSlcbiAqXG4gKiBAbWVtYmVyb2YgVmFhZGluXG4gKiBAbWl4ZXMgVmFhZGluLlRoZW1hYmxlTWl4aW5cbiAqIEBtaXhlcyBQb2x5bWVyLkdlc3R1cmVFdmVudExpc3RlbmVyc1xuICogQGRlbW8gZGVtby9pbmRleC5odG1sXG4gKi9cbmNsYXNzIFNwbGl0TGF5b3V0RWxlbWVudCBleHRlbmRzXG4gIEVsZW1lbnRNaXhpbihcbiAgICBUaGVtYWJsZU1peGluKFxuICAgICAgR2VzdHVyZUV2ZW50TGlzdGVuZXJzKFxuICAgICAgICBtaXhpbkJlaGF2aW9ycyhbSXJvblJlc2l6YWJsZUJlaGF2aW9yXSwgUG9seW1lckVsZW1lbnQpKSkpIHtcbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICA8c3R5bGU+XG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbaGlkZGVuXSkge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtvcmllbnRhdGlvbj1cInZlcnRpY2FsXCJdKSB7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIDpob3N0IDo6c2xvdHRlZCgqKSB7XG4gICAgICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuICAgICAgfVxuXG4gICAgICBbcGFydD1cInNwbGl0dGVyXCJdIHtcbiAgICAgICAgZmxleDogbm9uZTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgICAgbWluLXdpZHRoOiA4cHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDhweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoOm5vdChbb3JpZW50YXRpb249XCJ2ZXJ0aWNhbFwiXSkpID4gW3BhcnQ9XCJzcGxpdHRlclwiXSB7XG4gICAgICAgIGN1cnNvcjogZXctcmVzaXplO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbb3JpZW50YXRpb249XCJ2ZXJ0aWNhbFwiXSkgPiBbcGFydD1cInNwbGl0dGVyXCJdIHtcbiAgICAgICAgY3Vyc29yOiBucy1yZXNpemU7XG4gICAgICB9XG5cbiAgICAgIFtwYXJ0PVwiaGFuZGxlXCJdIHtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG4gICAgPHNsb3QgaWQ9XCJwcmltYXJ5XCIgbmFtZT1cInByaW1hcnlcIj48L3Nsb3Q+XG4gICAgPGRpdiBwYXJ0PVwic3BsaXR0ZXJcIiBpZD1cInNwbGl0dGVyXCIgb24tdHJhY2s9XCJfb25IYW5kbGVUcmFja1wiIG9uLWRvd249XCJfc2V0UG9pbnRlckV2ZW50c05vbmVcIiBvbi11cD1cIl9yZXN0b3JlUG9pbnRlckV2ZW50c1wiPlxuICAgICAgPGRpdiBwYXJ0PVwiaGFuZGxlXCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPHNsb3QgaWQ9XCJzZWNvbmRhcnlcIiBuYW1lPVwic2Vjb25kYXJ5XCI+PC9zbG90PlxuXG4gICAgPGRpdiBoaWRkZW49XCJcIj5cbiAgICAgIDwhLS0gV29ya2Fyb3VuZCB0byBmaXggYSBTaGFkeSBzdHlsZSBzY29waW5nIGlzc3VlIGNhdXNlZCBieSBkeW5hbWljIHNsb3QgbmFtaW5nIG9mIHRoZSBjaGlsZCBlbGVtZW50cyAocHJpbWFyeS9zZWNvbmRhcnkpIC0tPlxuICAgICAgPHNsb3Q+PC9zbG90PlxuICAgIDwvZGl2PlxuYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaXMoKSB7XG4gICAgcmV0dXJuICd2YWFkaW4tc3BsaXQtbGF5b3V0JztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdmVyc2lvbigpIHtcbiAgICByZXR1cm4gJzQuMS4xJztcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgc3BsaXQgbGF5b3V0J3Mgb3JpZW50YXRpb24uIFBvc3NpYmxlIHZhbHVlcyBhcmU6IGBob3Jpem9udGFsfHZlcnRpY2FsYC5cbiAgICAgICAqL1xuICAgICAgb3JpZW50YXRpb246IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAnaG9yaXpvbnRhbCdcbiAgICAgIH0sXG5cbiAgICAgIF9wcmV2aW91c1ByaW1hcnlQb2ludGVyRXZlbnRzOiBTdHJpbmcsXG4gICAgICBfcHJldmlvdXNTZWNvbmRhcnlQb2ludGVyRXZlbnRzOiBTdHJpbmdcbiAgICB9O1xuICB9XG5cbiAgcmVhZHkoKSB7XG4gICAgc3VwZXIucmVhZHkoKTtcbiAgICBuZXcgRmxhdHRlbmVkTm9kZXNPYnNlcnZlcih0aGlzLCB0aGlzLl9wcm9jZXNzQ2hpbGRyZW4pO1xuICB9XG5cbiAgX3Byb2Nlc3NDaGlsZHJlbigpIHtcbiAgICB0aGlzLmdldEVmZmVjdGl2ZUNoaWxkcmVuKCkuZm9yRWFjaCgoY2hpbGQsIGkpID0+IHtcbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3ByaW1hcnlDaGlsZCA9IGNoaWxkO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ3Nsb3QnLCAncHJpbWFyeScpO1xuICAgICAgfSBlbHNlIGlmIChpID09IDEpIHtcbiAgICAgICAgdGhpcy5fc2Vjb25kYXJ5Q2hpbGQgPSBjaGlsZDtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdzbG90JywgJ3NlY29uZGFyeScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfc2V0RmxleEJhc2lzKGVsZW1lbnQsIGZsZXhCYXNpcywgY29udGFpbmVyU2l6ZSkge1xuICAgIGZsZXhCYXNpcyA9IE1hdGgubWF4KDAsIE1hdGgubWluKGZsZXhCYXNpcywgY29udGFpbmVyU2l6ZSkpO1xuICAgIGlmIChmbGV4QmFzaXMgPT09IDApIHtcbiAgICAgIC8vIFB1cmUgemVybyBkb2VzIG5vdCBwbGF5IHdlbGwgaW4gU2FmYXJpXG4gICAgICBmbGV4QmFzaXMgPSAwLjAwMDAwMTtcbiAgICB9XG4gICAgZWxlbWVudC5zdHlsZS5mbGV4ID0gJzEgMSAnICsgZmxleEJhc2lzICsgJ3B4JztcbiAgfVxuXG4gIF9zZXRQb2ludGVyRXZlbnRzTm9uZShldmVudCkge1xuICAgIGlmICghdGhpcy5fcHJpbWFyeUNoaWxkIHx8ICF0aGlzLl9zZWNvbmRhcnlDaGlsZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9wcmV2aW91c1ByaW1hcnlQb2ludGVyRXZlbnRzID0gdGhpcy5fcHJpbWFyeUNoaWxkLnN0eWxlLnBvaW50ZXJFdmVudHM7XG4gICAgdGhpcy5fcHJldmlvdXNTZWNvbmRhcnlQb2ludGVyRXZlbnRzID0gdGhpcy5fc2Vjb25kYXJ5Q2hpbGQuc3R5bGUucG9pbnRlckV2ZW50cztcbiAgICB0aGlzLl9wcmltYXJ5Q2hpbGQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICB0aGlzLl9zZWNvbmRhcnlDaGlsZC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIF9yZXN0b3JlUG9pbnRlckV2ZW50cygpIHtcbiAgICBpZiAoIXRoaXMuX3ByaW1hcnlDaGlsZCB8fCAhdGhpcy5fc2Vjb25kYXJ5Q2hpbGQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcHJpbWFyeUNoaWxkLnN0eWxlLnBvaW50ZXJFdmVudHMgPSB0aGlzLl9wcmV2aW91c1ByaW1hcnlQb2ludGVyRXZlbnRzO1xuICAgIHRoaXMuX3NlY29uZGFyeUNoaWxkLnN0eWxlLnBvaW50ZXJFdmVudHMgPSB0aGlzLl9wcmV2aW91c1NlY29uZGFyeVBvaW50ZXJFdmVudHM7XG4gIH1cblxuICBfb25IYW5kbGVUcmFjayhldmVudCkge1xuICAgIGlmICghdGhpcy5fcHJpbWFyeUNoaWxkIHx8ICF0aGlzLl9zZWNvbmRhcnlDaGlsZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzaXplID0gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICBpZiAoZXZlbnQuZGV0YWlsLnN0YXRlID09PSAnc3RhcnQnKSB7XG4gICAgICB0aGlzLl9zdGFydFNpemUgPSB7XG4gICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtzaXplXSAtIHRoaXMuJC5zcGxpdHRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtzaXplXSxcbiAgICAgICAgcHJpbWFyeTogdGhpcy5fcHJpbWFyeUNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3NpemVdLFxuICAgICAgICBzZWNvbmRhcnk6IHRoaXMuX3NlY29uZGFyeUNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3NpemVdXG4gICAgICB9O1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRpc3RhbmNlID0gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IGV2ZW50LmRldGFpbC5keSA6IGV2ZW50LmRldGFpbC5keDtcbiAgICB0aGlzLl9zZXRGbGV4QmFzaXModGhpcy5fcHJpbWFyeUNoaWxkLCB0aGlzLl9zdGFydFNpemUucHJpbWFyeSArIGRpc3RhbmNlLCB0aGlzLl9zdGFydFNpemUuY29udGFpbmVyKTtcbiAgICB0aGlzLl9zZXRGbGV4QmFzaXModGhpcy5fc2Vjb25kYXJ5Q2hpbGQsIHRoaXMuX3N0YXJ0U2l6ZS5zZWNvbmRhcnkgLSBkaXN0YW5jZSwgdGhpcy5fc3RhcnRTaXplLmNvbnRhaW5lcik7XG5cbiAgICB0aGlzLm5vdGlmeVJlc2l6ZSgpO1xuXG4gICAgaWYgKGV2ZW50LmRldGFpbC5zdGF0ZSA9PT0gJ2VuZCcpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NwbGl0dGVyLWRyYWdlbmQnKSk7XG5cbiAgICAgIGRlbGV0ZSB0aGlzLl9zdGFydFNpemU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHNwbGl0dGVyIGlzIGRyYWdnZWQuIE5vbi1idWJibGluZy4gRmlyZWQgZm9yIHRoZSBzcGxpdHRlclxuICAgKiBlbGVtZW50IGFuZCBhbnkgbmVzdGVkIGVsZW1lbnRzIHdpdGggYElyb25SZXNpemFibGVCZWhhdmlvcmAuXG4gICAqXG4gICAqIEBldmVudCBpcm9uLXJlc2l6ZVxuICAgKi9cblxuICAvKipcbiAgICogRmlyZWQgYWZ0ZXIgZHJhZ2dpbmcgdGhlIHNwbGl0dGVyIGhhdmUgZW5kZWQuXG4gICAqXG4gICAqIEBldmVudCBzcGxpdHRlci1kcmFnZW5kXG4gICAqL1xufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoU3BsaXRMYXlvdXRFbGVtZW50LmlzLCBTcGxpdExheW91dEVsZW1lbnQpO1xuXG5leHBvcnQgeyBTcGxpdExheW91dEVsZW1lbnQgfTtcbiIsImltcG9ydCAnLi9zdHlsZXMuY3NzJztcclxuaW1wb3J0ICcuL3ZpZXdzL21haW4tdmlldy50cydcclxuaW1wb3J0ICdAdmFhZGluL3ZhYWRpbi1zcGxpdC1sYXlvdXQvdmFhZGluLXNwbGl0LWxheW91dC5qcyc7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIHJlZ2lzdGVyU1coKTtcclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWdpc3RlclNXKCkge1xyXG4gICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHsgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy4vc3cuanMnKTsgXHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkLiBTb3JyeSBhYm91dCB0aGF0LicsIGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgU2VydmljZVdvcmtlci4nKTtcclxuICAgIH1cclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ==